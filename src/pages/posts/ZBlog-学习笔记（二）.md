---
stackbit_url_path: >-
  posts/ZBlog-学习笔记（二）
title: 'ZBlog 学习笔记（二）'
date: '2010-02-09 13:49:32'
excerpt: >-
  
comments_count: 0
positive_reactions_count: 0
tags: 
  - 
canonical_url: >-
template: post
---
<div style="text-indent: 2em"><p>以下是我在ZBlogger社区的提问以及回复。其中有我写的关于如何让系统在发布的文章中保留自己手写的代码的一个菜鸟解决方案。</p><p>&nbsp;</p><p></p><table id="pid240610" cellspacing="0" summary="pid240610" cellpadding="0">    <tbody>        <tr>            <td class="postauthor">            <div class="postinfo">涂鸦&nbsp;</div>            <div id="userinfo240610_a">            <div class="avatar"><a target="_blank" href="space.php?uid=65724"><img alt="" src="https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_352.png"></a></div>            <p><em>新手上路</em></p>            </div>            <p>&nbsp;</p>            <dt>金钱</dt><dd>108 ZB&nbsp;            <p>&nbsp;</p>            </dd></td>            <td class="postcontent">            <div class="postinfo">            <div class="posterinfo">            <div class="authorinfo">&nbsp;</div>            </div>            </div>            <div class="defaultpost">            <div id="ad_thread2_0">&nbsp;</div>            <div id="ad_thread3_0">&nbsp;</div>            <div id="ad_thread4_0">&nbsp;</div>            <div class="postmessage firstpost">            <div id="threadtitle">            <h1>请问如何才能保持我发布的文章的源代码？</h1>            </div>            <div class="t_msgfontfix">            <table cellspacing="0" cellpadding="0">                <tbody>                    <tr>                        <td id="postmessage_240610" class="t_msgfont">我有个特殊的需求。我需要发布的文章保留我自己手写的代码，而不要自动添加其他的代码，请问该怎么设置ZBlog或者该修改ZBlog中哪些程序文件？<br>                        我发现我发布的文章在数据库中是我手写的源代码，可是读出来的HTML页面中，却给我的换行处都加上&lt;br /&gt;等这样的HTML标签，我不想让它们出现，请问该怎么做呢？<br>                        <br>                        注：我也不想在自己的代码中加入[code]这样的额外标签。<br>                        <br>                        谢谢！<br>                        &nbsp;</td>                    </tr>                </tbody>            </table>            <div id="relatedtags">            <div class="taglinks">            <div>&nbsp;</div>            </div>            </div>            </div>            </div>            </div>            </td>        </tr>        <tr>            <td class="postauthor">&nbsp;</td>            <td class="postcontent">            <div class="postactions">            <div class="postact s_clear">            <p>&nbsp;</p>            </div>            </div>            </td>        </tr>        <tr class="threadad">            <td class="postauthor">&nbsp;</td>            <td class="adcontent">            <div id="ad_interthread">&nbsp;</div>            </td>        </tr>    </tbody></table><p></p><div id="post_240621"><table style="width: 981px; height: 356px" id="pid240621" cellspacing="0" summary="pid240621" cellpadding="0">    <tbody>        <tr>            <td class="postauthor">            <div class="postinfo"><a style="margin-left: 20px; font-weight: 800" target="_blank" href="space.php?uid=15869">haphic</a></div>            <div id="userinfo240621_a">            <div class="avatar"><a target="_blank" href="space.php?uid=15869"><img alt="" src="https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_353.png"></a></div>            <p><em><font color="#a52a2a">开发组</font></em></p>            </div>            <p>&nbsp;</p>            <dl class="profile s_clear"><dt>金钱</dt><dd>13742 ZB&nbsp;</dd></dl>            <p>&nbsp;</p>            </td>            <td class="postcontent">            <div class="postinfo"><strong><a id="postnum240621" title="复制本帖链接" onclick="setcopy('http://bbs.rainbowsoft.org/viewthread.php?tid=45539&amp;page=1#pid240621', '帖子地址已经复制到剪贴板')" href="javascript:;"><em>2</em><sup><font size="2">#</font></sup></a></strong>            <div class="posterinfo">            <div class="pagecontrol">&nbsp;</div>            <div class="authorinfo">&nbsp;<em id="authorposton240621">发表于 <span title="2010-2-9 12:29">9&nbsp;小时前</span></em> | <a rel="nofollow" href="viewthread.php?tid=45539&amp;page=1&amp;authorid=15869">只看该作者</a></div>            </div>            </div>            <div class="defaultpost">            <div id="ad_thread2_1">&nbsp;</div>            <div id="ad_thread3_1">&nbsp;</div>            <div id="ad_thread4_1">&nbsp;</div>            <div class="postmessage ">            <div class="t_msgfontfix">            <table cellspacing="0" cellpadding="0">                <tbody>                    <tr>                        <td id="postmessage_240621" class="t_msgfont">没有你想象的功能.</td>                    </tr>                </tbody>            </table>            </div>            <div id="post_rate_div_240621">&nbsp;</div>            </div>            </div>            <div style="maxheightie: 120px" class="signatures">&nbsp;</div>            <div id="ad_thread1_1">&nbsp;</div>            </td>        </tr>        <tr>            <td class="postauthor">&nbsp;</td>            <td class="postcontent">            <div class="postactions">            <div class="postact s_clear">            <p>&nbsp;</p>            </div>            </div>            </td>        </tr>        <tr class="threadad">            <td class="postauthor">&nbsp;</td>            <td class="adcontent">&nbsp;</td>        </tr>    </tbody></table></div><div id="post_240631"><table style="width: 979px; height: 322px" id="pid240631" cellspacing="0" summary="pid240631" cellpadding="0">    <tbody>        <tr>            <td class="postauthor">            <div class="postinfo"><a style="margin-left: 20px; font-weight: 800" target="_blank" href="space.php?uid=64651">254288</a></div>            <div id="userinfo240631_a">            <div class="avatar"><a target="_blank" href="space.php?uid=64651"><img alt="" src="https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_354.png"></a></div>            <p><em>注册会员</em></p>            </div>            <p>&nbsp;</p>            <dt>金钱</dt><dd>506 ZB&nbsp;            <p>&nbsp;</p>            </dd></td>            <td class="postcontent">            <div class="postinfo"><strong><a id="postnum240631" title="复制本帖链接" onclick="setcopy('http://bbs.rainbowsoft.org/viewthread.php?tid=45539&amp;page=1#pid240631', '帖子地址已经复制到剪贴板')" href="javascript:;"><em>3</em><sup><font size="2">#</font></sup></a></strong>            <div class="posterinfo">            <div class="pagecontrol">&nbsp;</div>            <div class="authorinfo">&nbsp;<em id="authorposton240631">发表于 <span title="2010-2-9 13:15">8&nbsp;小时前</span></em> | <a rel="nofollow" href="viewthread.php?tid=45539&amp;page=1&amp;authorid=64651">只看该作者</a></div>            </div>            </div>            <div class="defaultpost">            <div id="ad_thread2_2">&nbsp;</div>            <div id="ad_thread3_2">&nbsp;</div>            <div id="ad_thread4_2">&nbsp;</div>            <div class="postmessage ">            <div class="t_msgfontfix">            <table cellspacing="0" cellpadding="0">                <tbody>                    <tr>                        <td id="postmessage_240631" class="t_msgfont">haphic，哈哈哈哈，妙语连珠</td>                    </tr>                </tbody>            </table>            </div>            <div id="post_rate_div_240631">&nbsp;</div>            </div>            </div>            <div id="ad_thread1_2">&nbsp;</div>            </td>        </tr>        <tr>            <td class="postauthor">&nbsp;</td>            <td class="postcontent">            <div class="postactions">            <div class="postact s_clear">            <p>&nbsp;</p>            </div>            </div>            </td>        </tr>        <tr class="threadad">            <td class="postauthor">&nbsp;</td>            <td class="adcontent">&nbsp;</td>        </tr>    </tbody></table></div><div id="post_240659"><table id="pid240659" cellspacing="0" summary="pid240659" cellpadding="0">    <tbody>        <tr>            <td class="postauthor">            <div class="postinfo">涂鸦&nbsp;</div>            <a name="lastpost"></a>            <div id="userinfo240659_a">            <div class="avatar"><a target="_blank" href="space.php?uid=65724"><img alt="" src="https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_355.png"></a></div>            <p><em>新手上路</em></p>            </div>            <p>&nbsp;</p>            <dl class="profile s_clear"><dt>金钱</dt><dd>108 ZB&nbsp;</dd></dl></td>            <td class="postcontent">            <div class="postinfo"><strong><a id="postnum240659" title="复制本帖链接" onclick="setcopy('http://bbs.rainbowsoft.org/viewthread.php?tid=45539&amp;page=1#pid240659', '帖子地址已经复制到剪贴板')" href="javascript:;"><em>4</em><sup><font size="2">#</font></sup></a></strong>            <div class="posterinfo">            <div class="pagecontrol">&nbsp;</div>            <div class="authorinfo">&nbsp;<em id="authorposton240659">发表于 <span title="2010-2-9 15:38">6&nbsp;小时前</span></em> | <a rel="nofollow" href="viewthread.php?tid=45539&amp;page=1&amp;authorid=65724">只看该作者</a></div>            </div>            </div>            <div class="defaultpost">            <div id="ad_thread2_3">&nbsp;</div>            <div id="ad_thread3_3">&nbsp;</div>            <div id="ad_thread4_3">&nbsp;</div>            <div class="postmessage ">            <div class="t_msgfontfix">            <table cellspacing="0" cellpadding="0">                <tbody>                    <tr>                        <td id="postmessage_240659" class="t_msgfont"><i class="pstatus">本帖最后由 jie.tian 于 2010-2-9 15:48 编辑 </i><br>                        <br>                        <strong><a target="_blank" href="http://bbs.rainbowsoft.org/redirect.php?goto=findpost&amp;pid=240621&amp;ptid=45539">2#</a> <i>haphic</i> </strong><br>                        噢，你的回答的确浇我了一头冷水。这不是我“想像”的功能，而是我的确有这个需求，我使用的 dp.SyntaxHighlighter 语法高亮器，将它融入ZBlog后，对代码的换行就必须保持原样，而不能将换行符替换成&lt;br /&gt;标签，否则显示出来的代码会没有换行而很难看。<br>                        <br>                        你的答案不得不让我去看ZBlog程序代码（这让我头疼），我很菜，找不到好的解决方案，只好修改了部分ZBlog源码（有点破坏了ZBlog的原样，不好意思），来实现了上述需求。<br>                        <br>                        修改记录：<br>                        将 /FUNCTION/c_system_lib.asp 下的 TArticle 类的属性过程 Get HtmlContent 中的                        <div class="blockcode">                        <div id="code0">                        <ol>                            <li>HtmlContent=TransferHTML(UBBCode(Content,"[face][link][email][autolink][font][code][image][typeset][media][flash][key]"),"[html-japan][vbCrlf][upload]")</li>                        </ol>                        </div>                        <em onclick="copycode($('code0'));">复制代码</em></div>                        替换成了                        <div class="blockcode">                        <div id="code1">                        <ol>                            <li>HtmlContent=TransferHTML(UBBCode(Content,"[face][link][email][autolink][font][code][image][typeset][media][flash][key]"),"[html-japan][upload]")</li>                        </ol>                        </div>                        <em onclick="copycode($('code1'));">复制代码</em></div>                        即去掉了 [vbCrlf] 这个参数，这样就不会将文章内容的换行符替换成 &lt;br /&gt; 标签了。<br>                        <br>                        最后，感谢你，haphic，一直很喜欢你做的插件。看到你第一个回复我，我很惊喜（尽管之后又有点小失望）。</td>                    </tr>                </tbody>            </table>            </div>            </div>            </div>            </td>        </tr>    </tbody></table></div></div>