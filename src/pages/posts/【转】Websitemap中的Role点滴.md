---
stackbit_url_path: >-
  posts/【转】Websitemap中的Role点滴
title: '【转】Web.sitemap中的Role点滴'
date: '2010-07-05 08:25:17'
excerpt: >-
  
comments_count: 0
positive_reactions_count: 0
tags: 
  - 
canonical_url: https://be-net.azurewebsites.net/post/2010/07/05/【转】Websitemap中的Role点滴
template: post
---

        <p>原文地址：<a href="http://www.cnblogs.com/twilight/articles/1279832.html">http://www.cnblogs.com/twilight/articles/1279832.html</a></p>
<hr>
<p><span class="Apple-style-span" style="font-family: Tahoma, Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 13px; ">Asp.net 2.0的Sitemap和Role机制,为我们提供了一种简洁的办法处理权限与菜单显示的问题.例如,我们可以在Web.sitemap中,通过下面的配置进行菜单显示的控制:<br>
</span></p><p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">""&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">First Level Menu</span>"<span style="color: blue; ">&nbsp;</span><span style="color: red; ">description</span><span style="color: blue; ">=</span>""&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleA</span>"<span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">~/A/AAA.aspx</span>"&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">Menu Item For Role A</span>"&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleA</span>"<span style="color: blue; ">&gt;&lt;/</span><span style="color: maroon; ">siteMapNode</span><span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">~/B/BBB.aspx</span>"&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">Menu Item For Role A</span>"&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleA</span>"<span style="color: blue; ">&gt;&lt;/</span><span style="color: maroon; ">siteMapNode</span><span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">~/B/CCC.aspx</span>"&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">Menu Item For Role A</span>"&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleA</span>"<span style="color: blue; ">&gt;&lt;/</span><span style="color: maroon; ">siteMapNode</span><span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
&nbsp; 在这个简单的例子里,只有登陆用户属于RoleA,才能看到"First Leve Menu"及其子菜单.很容易理解.不过,有时候需求会稍微复杂一点,比如,只有属于RoleA的用户有权限看到第一个子菜单;只有属于RoleB的用户有权限看到第二个子菜单;只有属于RoleC的用户有权限看到第三个子菜单.这个时候,我们可能会很自然的想到使用如下的配置进行控制:<br>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">""&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">First Level Menu</span>"<span style="color: blue; ">&nbsp;</span><span style="color: red; ">description</span><span style="color: blue; ">=</span>""&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleA,RoleB,RoleC</span>"<span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">~/A/AAA.aspx</span>"&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">Menu Item For Role A</span>"&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleA</span>"<span style="color: blue; ">&gt;&lt;/</span><span style="color: maroon; ">siteMapNode</span><span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">~/B/BBB.aspx</span>"&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">Menu Item For Role B</span>"&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleB</span>"<span style="color: blue; ">&gt;&lt;/</span><span style="color: maroon; ">siteMapNode</span><span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">url</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">~/B/CCC.aspx</span>"&nbsp;<span style="color: red; ">title</span><span style="color: blue; ">=</span>"<span style="color: blue; ">Menu Item For Role C</span>"&nbsp;<span style="color: red; ">roles</span><span style="color: blue; ">=</span>"<span style="color: blue; ">RoleC</span>"<span style="color: blue; ">&gt;&lt;/</span><span style="color: maroon; ">siteMapNode</span><span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">siteMapNode</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span><br>
&nbsp; 应该是符合要求的,不是吗?不过,当你以属于RoleA的用户登陆后,你会发现,你同样可以看到"Menu Item For Role B"和"Menu Item For Role C".相当令人疑惑.博客堂的一位同学也对这个问题<a href="http://blog.joycode.com/moslem/archive/2006/09/19/83842.aspx" target="_blank" style="color: rgb(86, 102, 45); text-decoration: none; ">不解</a>了一下.Web.sitemap和Membership内部机制没深入研究过,这里只记录下解决方案.其实也十分简单,我们只需要在相应的目录下增加一个web.config,在其中增加location配置节,配合着authorization配置节,来解决这个问题,以上面这个需求为例子,我们只需要在目录A下增加一个web.config,具体内容如下:</p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">configuration</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">system.web</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">authorization</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">allow</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">roles</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">RoleA</span>"<span style="color: blue; ">/&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">deny</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">users</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">*</span>"<span style="color: blue; ">/&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">authorization</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">system.web</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">configuration</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span><br>
&nbsp; 在目录B下增加一个web.config,具体内容如下:</p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">configuration</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">location</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">path</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">BBB.aspx</span>"<span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">system.web</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">authorization</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">allow</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">roles</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">RoleB</span>"<span style="color: blue; ">/&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">deny</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">users</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">*</span>"<span style="color: blue; ">/&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">authorization</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">system.web</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">location</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">location</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">path</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">CCC.aspx</span>"<span style="color: blue; ">&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">system.web</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">authorization</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">allow</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">roles</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">RoleC</span>"<span style="color: blue; ">/&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">deny</span>&nbsp;<span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: red; background-position: initial initial; background-repeat: initial initial; ">users</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">=</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; background-position: initial initial; background-repeat: initial initial; ">"<span style="color: blue; ">*</span>"<span style="color: blue; ">/&gt;</span></span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">authorization</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">system.web</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p align="left" style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">location</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span></p>
<p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; font-size: 13px; text-indent: 0px; "><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: maroon; background-position: initial initial; background-repeat: initial initial; ">configuration</span><span style="font-size: 9pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: silver; color: blue; background-position: initial initial; background-repeat: initial initial; ">&gt;</span><br>
&nbsp; 好了,分别用属于RoleA,RoleB,RoleC的用户登陆,将只看到相应的菜单.</p>
<p></p>
      