{"componentChunkName":"component---src-templates-post-js","path":"/posts/sgyok5/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/sgyok5","relativePath":"posts/sgyok5","frontmatter":{"title":"Free Arch: 使用 OAM 摆脱厂商锁定","stackbit_url_path":"posts/sgyok5","date":"2022-10-06T08:05:21","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p><a name=MBhP6></a></p>\n<h1>前言</h1>\n<p>如今是一个云计算与数字化如火如荼的时代，云计算与数字化相得益彰，几乎所有企业都要数字化，都要上云。然而，上云容易下云难、换云也难，企业都害怕在上云的同时，被云厂商给锁定。</p>\n<p>所谓厂商锁定，就是明知道有更适合自己的其他云产品，企业并不能自由使用，因为云迁移成本太高，以至于继续使用已经使用的云，哪怕不划算。其实，何止企业，个人也面临同样的问题。Free Arch 一直为个人开发者服务，提供免费架构、自由架构的具体实例，很早以前就提出了狡兔三窟的多云策略。个人也要使用多云策略，以免被厂商绑定，既不自由，也不免费（一旦习惯的云开始收费，只能被割韭菜）。</p>\n<p><a name=ctpmZ></a></p>\n<h1>Serverless 的多云策略</h1>\n<p>Free 不仅有自由和免费的意思，还有随意的意思。这也是 Free Arch 系列文章比较随意的原因，Free Arch 面向具体的实际问题而随意架构，虽然不系统，不全面，但是每一次都有一个可以运行的案例，非常具体和实在。在进入今天的正题前，先总结（列举）一下以前的 Serverless 系列文章：\n<a name=UvFvj></a></p>\n<h2>薅 AWS Lambda 羊毛</h2>\n<p><a href=\"https://zhuanlan.zhihu.com/p/412196725\">一顿操作猛如虎，部署一个万能 BFF</a>\n<a name=idG6Z></a></p>\n<h2>薅 Azure 羊毛</h2>\n<p><a href=\"https://zhuanlan.zhihu.com/p/482103322\">身份验证哪家强？IdentityServer 初体验</a>\n<a name=ZpUjJ></a></p>\n<h2>薅 Heroku 羊毛</h2>\n<p><a href=\"https://zhuanlan.zhihu.com/p/554534245\">FreeArch: 一键拥有你自己的身份认证平台 Keycloak，完全免费</a>\n<a name=CHnF8></a></p>\n<h2>薅 Vercel 羊毛</h2>\n<p><a href=\"https://zhuanlan.zhihu.com/p/542130945\">Free Arch：将 Koa 服务部署到 Vercel</a></p>\n<p><a name=sEm1g></a></p>\n<h1>今天的正题：在多个 Kubernetes 集群间自由免费地切换</h1>\n<p>今天再聊一下个人开发者如何通过使用 OAM（开放应用模型），实现将应用自由免费地在各个 Kubernetes 集群之间迁移。这个例子的源代码是： <a href=\"https://github.com/Jeff-Tian/uni-orders\">https://github.com/Jeff-Tian/uni-orders</a>，它是一个使用 NestJs 开发的一个微服务，其  Swagger API 见： <a href=\"https://uni-orders-cctsq03nniljeo1bj0ng.apps.playground.napptive.dev/api/static/index.html\">https://uni-orders-cctsq03nniljeo1bj0ng.apps.playground.napptive.dev/api/static/index.html</a>。</p>\n<p>它已经完成了容器化，并随时可以部署在一个 Kubernetest 集群中。要部署，只需要执行 kubectl apply -k k8s即可，使用了 Kustomization，其定义在 <a href=\"https://github.com/Jeff-Tian/uni-orders/blob/main/k8s/kustomization.yaml\">https://github.com/Jeff-Tian/uni-orders/blob/main/k8s/kustomization.yaml</a>。</p>\n<p><a name=IiOSh></a></p>\n<h2>Okteto</h2>\n<p>Okteto 提供免费的 Kubernetes 集群供个人开发者使用，当然在 24 小时闲置后会被休眠，但你只需要每 24 小时部署一下就能激活。\n<a name=yk1sL></a></p>\n<h3>ingress</h3>\n<p>使用 Okteto，可以定义 deployment 和 service，但是 ingress 不能免费地自定义，而只能使用 Okteto 提供的自动 ingress。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/313028eb4b9f96491f7e3eb835375357/ca3c3/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACAElEQVR42o2TTW/UMBCG8/M4lApUhMQF8W8qgZD4KFSIA3+CGxLHih7LAdilFW33K5ukifNhx46dfZCd7qpVW6kjvbI1nnkz78wk4orVjcR0Hdr2FGVFkqakWUa8TEjSjLwQqLalkSrAxzdShrtUiqppiPY/f+Hdh4/s7X/izfs9dl++Yvf1W379GaO1CUlVVSNVS9tqjDEDwSWpJ/T3VmuquiF69vwF2ztPefj4ScDWox0ebG1z8OOQPEuZzWMKUaGURukuoF2fZsDGbyzR+YXm39mEsixZrVYb+c71KKUohAhy/It/9jF9fwsu/dF5Ksnz4konfVaPcy7IrGo5yNWDVF+R6Sz6DkRVoxifnPJ7dEw8j+mAFsLpiRbJkrPFggtRI8oa5fvok80dhONYcRYLloWiPJ8hjn6Sj47Ri3moN+8U8yxBa8d9LEqKJki2ths81sDsFHd0iPv+FXnwjWkek4oCpTXGGjprQ49Dg1ara4j8MPy++XW47CA+1PrBSImYnBDnCaKuqZVEaoU2Bmvd7YRFIZhOZ2EIa+udw1mLsY62d2Rljqj0DXlXt2IjWYiSyWR6nbDvgyRfiS+5aATTLKWS5kZFNyrMsgtG4780TbP56prQmI7OdsRFQl6W1Kq7x1DSjCRJQ0/WEgZCN/xibRsGMlsWNLKlCyvT3Yn/c3DfVWizT7sAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/313028eb4b9f96491f7e3eb835375357/fcda8/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png\"\n        srcset=\"/static/313028eb4b9f96491f7e3eb835375357/12f09/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png 148w,\n/static/313028eb4b9f96491f7e3eb835375357/e4a3f/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png 295w,\n/static/313028eb4b9f96491f7e3eb835375357/fcda8/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png 590w,\n/static/313028eb4b9f96491f7e3eb835375357/efc66/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png 885w,\n/static/313028eb4b9f96491f7e3eb835375357/c83ae/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png 1180w,\n/static/313028eb4b9f96491f7e3eb835375357/ca3c3/1665037381101-55fa00b2-1648-4b97-92d5-17b0494718ab.png 1850w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>这样虽然让 ingress 自动化了，但是却只能使用 Okteto 的免费域名，形如 uni-orders-jeff-tian.cloud.okteto.net 。\n<a name=kbDl9></a></p>\n<h3>secrets</h3>\n<p>对于一些保密信息，可以通过 secrets 提供，这通常是一个 yaml 文件，然后通过 kubectl apply -f secrets.yaml即可。要将这些 secrets 以环境变量形式灌入应用运行时，需要在 deployment.yaml 中进行如下格式的 env 定义：</p>\n<p>yaml\n...\nspec:\ncontainers:\n- image: jefftian/uni-orders:latest\nimagePullPolicy: Always\nname: uni-orders\nenv:\n- name: GET_HOSTS_FROM\nvalue: dns\n- name: pgHost\nvalueFrom:\nsecretKeyRef:\nkey: pgHost\nname: uni-orders-secrets\n- name: pgPort\nvalueFrom:\nsecretKeyRef:\nkey: pgPort\nname: uni-orders-secrets\n- name: pgUsername\nvalueFrom:\nsecretKeyRef:\nkey: pgUsername\nname: uni-orders-secrets\n- name: pgPassword\nvalueFrom:\nsecretKeyRef:\nkey: pgPassword\nname: uni-orders-secrets\n- name: POSTGRES_URL\nvalueFrom:\nsecretKeyRef:\nkey: POSTGRES_URL\nname: uni-orders-secrets\n- name: pgDatabase\nvalueFrom:\nsecretKeyRef:\nkey: pgDatabase\nname: uni-orders-secrets</p>\n<p><a name=L3nmG></a></p>\n<h2>Napptive</h2>\n<p>虽然 Okteto 对开发者非常友好，但仍然需要有备胎，并且从第一天开始就要考虑好备胎，以保持随时切换的自由。Okteto 的备胎，就是 Napptive，它提供的服务和 Okteto 类似，所以你要每 24 小时就更新一下应用，以保持激活状态。</p>\n<p>Napptive 还允许你绑定自定义域名，这一点比 Okteto 更友好。</p>\n<p>Napptive 不只提供一个裸的 Kubernetes 服务，还在上面包了一层，以 OAM 的形式对开发者提供服务，对于应用，需要使用 OAM 的形式定义一个 yaml。\n<a name=YlMjD></a></p>\n<h3>ingress</h3>\n<p>要使用 Napptive 的 ingress，需要在应用的 yaml 文件中以 napptive-ingress�的 traits结点进行定义：\nyaml\n...\ntraits:</p>\n<ul>\n<li>type: napptive-ingress\nproperties:\nname: uni-orders\nport: 3000\npath: /</li>\n</ul>\n<p><a name=ytHZ7></a></p>\n<h3>secrets</h3>\n<p>secrets 仍然可以通过 yaml 文件的形式，使用 kubectl apply -f secrets.yaml的形式部署进入 Napptive 的 Kubernetes 集群中：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f929fe6f58321202d322aa9500496306/1f854/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.891891891891895%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7UlEQVR42l2Qy27TYBBGvads6CVpRJrGbuK0iS/x39TYqWMT23Wchl6gF7WsyIIFEhJL1jwFDwFFsRPaRiqvdlBTiQWLo/Ppm9EsRvo9n5PnU25ubvjxc0o+vWeS52RZzmw2WzjLcyZZvth7zLPJLyZZRj6dLnx7d8t89sD8/gHJ2xxjmBp+4GHoFvWGhtpQkWUZRVFoNFTq9dqCRScrKLL8by7LCrX6FmarS9P2kb607gh23+J1fYb2Jzw7ZN9zEZaF7/schEcIw8HzAuIkIopDojgiXvgpR2GffhrjxCHS9dqE/W5AFMUEXoLjdLHabVpC4Dg9zoYf2SirtGyH0Et43Tug7/9PTBwk9Fwf6Xw54+rdCR/eX3F+POIoHTBMh/QHCVqzg9sesqO8QqkIqtuPtqiVLdRN8UTFYrsq0KoddqsW0ulSzvjyguuTYy5Gh5w9HhyNiNLB4g3fvn5nbfUFa3KRpXGHl4ZCYWWZYnGVUqnIamGFurpFra6wvl5ASp8/YOgailylUi5T2digUCrRNE2stsAWIXuWh9sJ2Gs77OgGwhLotsDsCHRNxzRNDMOk2WwiRc/+oBs6VVlG03RUVaVWq2HoOkLsYnVs+kFE4PdxnX3ajsPR4JDe50uS8TlvBkMGaUqSJLiuy1/nLCVXrn8bhAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f929fe6f58321202d322aa9500496306/fcda8/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png\"\n        srcset=\"/static/f929fe6f58321202d322aa9500496306/12f09/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png 148w,\n/static/f929fe6f58321202d322aa9500496306/e4a3f/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png 295w,\n/static/f929fe6f58321202d322aa9500496306/fcda8/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png 590w,\n/static/f929fe6f58321202d322aa9500496306/efc66/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png 885w,\n/static/f929fe6f58321202d322aa9500496306/c83ae/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png 1180w,\n/static/f929fe6f58321202d322aa9500496306/1f854/1665038507916-86998d36-8a81-4937-a795-e1753ae30687.png 3032w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>但是要将定义好的 secrets 灌入应用运行时，方式和在普通的 Kubernetest 集群中的操作不一样，不通过 deployment.yaml 文件，而是和 ingress 类似，使用 service-binding的 traits结点进入声明：\nyaml\n...</p>\n<p>spec:\ncomponents:\n- name: uni-orders\ntype: webservice\ntraits:\n...\n- type: service-binding\nproperties:\nenvMappings:\npgHost:\nsecret: uni-orders-secrets\nkey: pgHost\npgPort:\nsecret: uni-orders-secrets\nkey: pgPort\npgUsername:\nsecret: uni-orders-secrets\nkey: pgUsername\npgPassword:\nsecret: uni-orders-secrets\nkey: pgPassword\nPOSTGRES_URL:\nsecret: uni-orders-secrets\nkey: POSTGRES_URL\npgDatabase:\nsecret: uni-orders-secrets\nkey: pgDatabase</p>\n<p><a name=IOXhI></a></p>\n<h1>自动化</h1>\n<p>以上以 Okteto 和 Napptive 为例，免费地验证了在多个 Kubernetes 集群间自由切换应用的可行性，后面就要将这一切自动化了。因为代码托管在 GitHub 上，自然地使用了 GitHub Actions 来将 CICD 的步骤自动化，一次代码提交，自动运行测试、构建，打包容器镜像，然后将打包好的应用同时部署在两个云上。</p>\n<p><a name=NFaeU></a></p>\n<h3>secrets CD 流水线</h3>\n<p>但是，应用的保密信息，应该首先完成自动化的 CICD。目前，建议将 secrets 单独放在一个私有仓库中，毕竟 GitHub 的私有仓库也是对个人永久免费的。<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50bad0165e753c8d0ee17817d1243002/807a0/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.1081081081081%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAADBUlEQVR42m2T608cVRjG5z9RE6VaaWgLNEJjSPRDP/hHmlrchUIxtfGDwQs20QKNlO0u4CXUXRb2Mjv3neuZmfMz5+zFte0kz7zvucxznvO+zxjMPI7r4XoewzAiTDLCOCaKE6I4ZhiGhFFEMAyJkwQJGq8/xuajJ1Q2HlLd3KK6uc39BxUefF3ly+oO99errFc22N55TGVjS+9Re7998h1bj3ZYr2yy8XBbx6/Wq/o74/N7X7D22T3mby5z+85dbi2vcO3jBeY+usHc9QU+vLHI8uoai598ysLSKjeXVllaWdO4decuC4srvPP+dd6bm+fdD+Yxjo5fsndQ56f9Ok8P6+z+VueHZw1+3D9h76DBwfMjXtQa1Bqn1OojHNdP9PhYjRtno7XGKS8bZxhZXmIFGXZYMPAzen6uceWkmL4gSoWupygkqShQ+1WuYl5CkuU6TtaNNM1xPV83QjVFFV/Bsm08PyDwfLrtS2zboTew6Q9sLMfT0fECOj1TR9Ny6fYHGOd2i1dXLTpXXVoXbS7al/zTbOnYbF3QbDaxLFsfZjsuUr7Z29kZY5iEWK6D7wfEY4soKGtMxiLPKaWkKMvXmCTlzJzKjTjO6JsWlu0i8oJM5GS6VoWuSSkhiWNMc6BVTrwaRjFxLrU6z/MJguFIYZqm/ztF/nfc9HpRGGKrmnr+iCwM8YchVlQokbiup8ui9hv9wKJnmXrSd13otpFhMENckKSZJojTjLwopzcQQpCkAqE7X5JkAsMc2nTNHgPbIep1oPU38o8a8qyG9B3NaQ9jzv46x3J9YmWjOCVSv2aS6TibG3JcWFV0KTJov0KevkCeHMHhHvL5U9LOJaJAK0lFTprlmniKJJvmxlstoK588jsc/oLc/5li9zGOZ+EPh7p+qvNKSFGoa4/IozGpVqihXSBHzZgQW33KX3eR33/DldmiY/bp901NOrGJstQbhEzIZnI57rx65+d/4lhdnCDQfs2EGCss365wSjg2K2PFjIljCamQpFlBIoopwSwmc/8C8svbp+3S3IoAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/50bad0165e753c8d0ee17817d1243002/fcda8/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png\"\n        srcset=\"/static/50bad0165e753c8d0ee17817d1243002/12f09/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png 148w,\n/static/50bad0165e753c8d0ee17817d1243002/e4a3f/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png 295w,\n/static/50bad0165e753c8d0ee17817d1243002/fcda8/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png 590w,\n/static/50bad0165e753c8d0ee17817d1243002/efc66/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png 885w,\n/static/50bad0165e753c8d0ee17817d1243002/c83ae/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png 1180w,\n/static/50bad0165e753c8d0ee17817d1243002/807a0/1665041506607-c4da14e7-5439-4874-a58c-e8e3f2cb6ca9.png 1652w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>最终实现的效果如上图所示，一次代码提交会同时触发向两朵云部署 secrets，其 workflow 定义如下：\nyaml\nname: secrets CICD</p>\n<p>on:\npush:\nbranches: [ main ]\npull_request:\nbranches: [ main ]</p>\n<p>jobs:\ndeploy-napptive:\nruns-on: ubuntu-latest\nenv:\nPLAYGROUND_PAT: ${{ secrets.PLAYGROUND_PAT }}\nsteps:\n- uses: actions/checkout@v2\n- run: echo Downloading NAPPTIVE Playground CLI\n- run: curl -O <a href=\"https://storage.googleapis.com/artifacts.playground.napptive.dev/installer.sh\">https://storage.googleapis.com/artifacts.playground.napptive.dev/installer.sh</a> &#x26;&#x26; bash installer.sh</p>\n<pre><code>  - run: echo Downloading Kubectl\n  - run: curl -LO https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\n  - run: chmod +x kubectl\n  - run: echo Login into NAPPTIVE Playground\n  - run: playground login --pat\n  - run: playground get-kubeconfig\n  - run: ls ~/.napptive/default/napptive-kubeconfig\n  - name: update\n    run: |\n      export PATH=$PATH:$(pwd)\n      kubectl --kubeconfig ~/.napptive/default/napptive-kubeconfig apply -f secrets.yml\n</code></pre>\n<p>deploy-okteto:\nruns-on: ubuntu-latest\nsteps:\n- uses: actions/checkout@v3\n- run: curl -LO <a href=\"https://storage.googleapis.com/kubernetes-release/release/$(curl\">https://storage.googleapis.com/kubernetes-release/release/$(curl</a> -s <a href=\"https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\">https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl</a>\n- run: chmod +x ./kubectl\n- run: sudo mv ./kubectl /usr/local/bin/kubectl\n- run: mkdir ${HOME}/.kube\n- run: npm i -g k8ss\n- run: echo -e machine github.comn  login ${{secrets.GH_TOKEN}} > ~/.netrc\n- run: git clone <a href=\"https://github.com/Jeff-Tian/k8s-config.git\">https://github.com/Jeff-Tian/k8s-config.git</a> ${HOME}/k8s-config\n- run: k8ss switch --cluster=okteto --namespace=jeff-tian\n- run: kubectl apply -f secrets.yml</p>\n<p>对于 Napptive 的流水线，需要一个 PLAYGROUND_PAT 环境变量，对于 okteto 流水线，需要 okteto 的 kubeconfig 文件。<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38b302b1ce0bbe5f5d83ed1e20db70d4/69d6b/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC6UlEQVR42oWS3Y8TVRjG505vIGE3QJe2287HmZkzn53OdKbb1i4slgQSgaAJJKAhZmPEBFfwY13alS0kXOCFxgsTP2L84/RCb4wu23bXi5/2LEYxfpzkl+c975m8mec5R+Pp2p1M+en779j98Qd+nh0wnUyYzmY82dtT7E0mHPx6oOrZ/j6T6VT15jqdzvhl94mqtdH2mA8+3GZzuMPdu5s8fnuDR6Md3huOGW0/4N7oAVvDHaU740fcG43ZGo0ZffRQ9beGh7XqD8do0k84eqxMEOW4UcHxJZPk2CL1hRLPL1TU2dG5LlQ48pf639Bquk3NCnDzF4ibHfy4jek0uOT7rLgBdS/DsALqVoguQnTrv9GEHVC1IspRwbKIcfwWhptiyoyLjqQnI5ZEgiFi6qLxv2hpq4vppqwNLtPIz6C7GZbMMWSLusy54nqsypiy10bIFqaXY8ocy8sRfvuQoI3lF5iyhWbZPobTpN0/T1KsEWWr6E6K7jSpOylVO+UV2+a041NyMgw7UQ6WrZiTVZeTVcmJisOpenA48EjVoGZGyCgnTrsqQy8qkGGONycqEGHBzUByIQgxG11MEdHuDVi/dYf1N+/w1sYmF69cp6KHaMcNl5oRIrxUDdNFxLLxxyVEGCKiLiLKVswNYXDedljQA/KVNa69+gZXr69z4+YtBhdepmpEaJr2nLIwzy9M+4TpqrJuB23qdhN9blNFkFJ2WrxmCy65Hif0iMUlweIpm4WSoLTsqVy1xx9/QpKfxg0KgqSDF68QNXs4QY4lU4TMnmqKJTNqssXrtsm5vEuze468c5aiNyDO+uoHtOlsn/7Zl5TFNO/TSLs4fortNZFBhutnOF4TN8jUXgYtKlbI/fsP+eLLb/j0s8/56utvuf3O+5SqEu32xrv4jS7Cz3HCAjdsq1uvWfGfiMYze/Xm7AT9bxhuhhZEGRU9oNUZkORnyDov4ic9ldn8cc8/+mdSle0z+vvA3wDxp/Li2G3alAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/38b302b1ce0bbe5f5d83ed1e20db70d4/fcda8/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png\"\n        srcset=\"/static/38b302b1ce0bbe5f5d83ed1e20db70d4/12f09/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png 148w,\n/static/38b302b1ce0bbe5f5d83ed1e20db70d4/e4a3f/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png 295w,\n/static/38b302b1ce0bbe5f5d83ed1e20db70d4/fcda8/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png 590w,\n/static/38b302b1ce0bbe5f5d83ed1e20db70d4/efc66/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png 885w,\n/static/38b302b1ce0bbe5f5d83ed1e20db70d4/c83ae/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png 1180w,\n/static/38b302b1ce0bbe5f5d83ed1e20db70d4/69d6b/1665041748577-6dc9eb55-b2f3-44eb-8378-d0c8357321f0.png 1912w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>PLAYGROUND_PAT 可以按照其官网文档获取，然后在 GitHub Actions 中存储其值即可。它的值其实是一个 jwt，并且永不过期，所以一定要安全保存：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/89670d5deda3fe4c5c62bdfe3dccf121/922e6/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDElEQVR42p2R3U4TURSF5ykEvPEBTHwMY/9uTAh4YYyJj0ki0kIZuNELImjCj1UbbEtpmTlz/vb+zMxQKFwZd7Kyd/Y6Z2Wtc5L5TcZkMmZuDLO8IMtynA+YwlaIUbDOVXNhb7tzWOfJTVH1WGTkxmC9J2k0G2y+/cC7N+95vb7O5sYGrWaLZrNZod1u0ynR6VRze2ku+VazSafxkkbjFa1WiyRJEp6uPGft2QtWVp+wsrZaLv8fB4eHpP1d9ns77H7cZm/7E+n2Dmm3x0GvRtrrsb/XJ01T+v0+W1tb7HS7dHtdeiWfpndIWNRQYCQw8fB9CucFXHgYOPilMOWfKokS8UXAnCvmpzD/ark+8VwdFlwfGbJBwPxQ7FCIMRJCQI1DxnPi1Q2i9X6ByqEExZ4rxZmSHQfyI8/swJJ/9rhvSjhTwlBRIIZAlmX44Ck3IvIAtaBX7AkUR0r+xTJPLfNPluwkcnUaGR0L80Epp5WLwli8CwQbUdFKWLVGJRiCcDkSxiNleBkZ/gmMR8LpLPDbBSZemXkF1SoiHsJUyE498Rpipmi8fcPKoSoOpQxhVLCqWBQrWpJ3D663gtEoYQxuAHEKYmuuTJAsDlJh6bv0vtVx7gXF1YL+Sri5KDCjgpgvRV7kX1x6jIpYOBRBA3VUI8RciC4SzVLku4sLt49qmZMo9x/Bww8pHf4FDdCM+xXZfK4AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/89670d5deda3fe4c5c62bdfe3dccf121/fcda8/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png\"\n        srcset=\"/static/89670d5deda3fe4c5c62bdfe3dccf121/12f09/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png 148w,\n/static/89670d5deda3fe4c5c62bdfe3dccf121/e4a3f/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png 295w,\n/static/89670d5deda3fe4c5c62bdfe3dccf121/fcda8/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png 590w,\n/static/89670d5deda3fe4c5c62bdfe3dccf121/efc66/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png 885w,\n/static/89670d5deda3fe4c5c62bdfe3dccf121/c83ae/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png 1180w,\n/static/89670d5deda3fe4c5c62bdfe3dccf121/922e6/1665041841441-aa709a3e-5b24-433c-b07a-b0a9599c7750.png 2140w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>对于 okteto 的配置文件，我用了另一个私有仓库 k8s-config 来保存，并且使用自己开发的 k8ss 工具进行管理。这样很方便，但是需要一个额外的 GH_TOKEN 来进行访问（因为 k8s-config 也是私有仓库）。所以最后的 GitHub Action 需要两个 secrets：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABgUlEQVR42lWSzbKbMAyF8/5P1mVXXdxNO9O5mQAG/CNjZJt8HTshaTxzOCAdH9lCl2Vd+b5euY6G0cxMZmacDMM4Yq3Fh4B1Duc91jp8EFZrcc4hq2FZLRKl570PXABCEMZpJufMubYt9XgTdYTQTVqsbRYRvCS2vXAcB/U4OnfDJogxdqP7/d45yMYwzSzWo+V4orLn+no/42nPJM1978PQtYpvw4bjWbFddxhGpmlinCaMMdxutwcPA2aeqbVpH/su7bGulskYaq0fpqoZiRHrA6sLjGbhOpiO1QnWBYIIu2ov/mHYTvlwawk+Vj0gZoh6R/ajc/vW+p/oeYhXD1vjZUvoM6nOEZOyJSXnQikN9Y1ayeUTL0OzrEzDQAmO+vsLfv7Af/3ie1mwznfxnkuHNtbSi7dijUU20rafV4bZCW64Uf/+Qc1E2TbaALnkEY2vP3+yqvYxSmknSCS0SZBIy17eAumBE7UW9qKkvHM8+3Mil9Lb0FhzJqtSc+mG/wDzWAmcsgl5EgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/d437c7702fe46a43bb48bf2cd93e95c4/fcda8/1665041955763-5ac3ada1-1f03-4e23-b12e-2e173b7aded7.png\"\n        srcset=\"/static/d437c7702fe46a43bb48bf2cd93e95c4/12f09/1665041955763-5ac3ada1-1f03-4e23-b12e-2e173b7aded7.png 148w,\n/static/d437c7702fe46a43bb48bf2cd93e95c4/e4a3f/1665041955763-5ac3ada1-1f03-4e23-b12e-2e173b7aded7.png 295w,\n/static/d437c7702fe46a43bb48bf2cd93e95c4/fcda8/1665041955763-5ac3ada1-1f03-4e23-b12e-2e173b7aded7.png 590w,\n/static/d437c7702fe46a43bb48bf2cd93e95c4/efc66/1665041955763-5ac3ada1-1f03-4e23-b12e-2e173b7aded7.png 885w,\n/static/d437c7702fe46a43bb48bf2cd93e95c4/c83ae/1665041955763-5ac3ada1-1f03-4e23-b12e-2e173b7aded7.png 1180w,\n/static/d437c7702fe46a43bb48bf2cd93e95c4/12c06/1665041955763-5ac3ada1-1f03-4e23-b12e-2e173b7aded7.png 2418w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=TnZuH></a></p>\n<h3>构建应用本身的 CICD 流水线</h3>\n<p>应用本身的 CICD 流水线，对于 CI 部分也没什么特别。关键在于 CD 部分，如同 secrets 的 CD 一样，需要同时更新两朵云。具体的流水线定义见文件： <a href=\"https://github.com/Jeff-Tian/uni-orders/blob/main/.github/workflows/node.js.yml\">https://github.com/Jeff-Tian/uni-orders/blob/main/.github/workflows/node.js.yml</a> 。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACC0lEQVR42lVSiW6lMAzk/z9yte07gJCQi9wJU9nQqrVkOZhkPPZ4CjEjHB7LuuL5+MRbbHivAvOyYFkFHs8XxCYRQsCuDazz0MZCm+tMud04BKOgd4VJu4CnjJj3hP8iYdERISbk2pDLX4+5XDEVpFyRSkXKBTFXHN7DWIfJpQJpDmzaQ9oIqR1XtO7Ari2UcTB0Np7jpjSsj1Da8r1tN7A+IBBoKpjSa4YSAqsQeL9nzPOC13vG4+ODfRUbA1ObrXXU1tD74Nh6R7u/z/PEGCem4DyWReAIESFlxJQ5UispZeRcUGvlh2T0kJxsjHH7id4756fEc6no48S4q1xxQOsdat+htWaGLg+UUiGVYkApFbw/GKyUwrlpcwr+8LjsJAo/1UlF4/wlQK48JxKCRbkFoTwRukSsmFYnIXeF0cc3JBsxfi8b1m1HSBUhXWry+QaPdSDWjqM0/k8+bVZyC0QbteDMCWgVozUcOSPkjFIbSusXS2KXCsoRED/+IT0/0ZY3Ss5ccDp2BSUltLXoUgBKAPuGkSJ27yG1Rm0DhZiEBB8y7+k6P/F6PKA2AfTGM2TAxQrM6wJj7J+WaZTGOx6HtY7nRSoSMLFerYQxjteHrNZ2AbbeeC1IhO+1IFhSmx5a5xBjvEYCcPvXPC+/RGmXWASIX/Z7x/oYfCFlutxuQcqPx1uY3zkS5QvWiu9F2WrtXwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/662d7e83e239a99bcb8afae5309fe4ff/fcda8/1665043378700-639eb109-fbd2-466b-a386-cd7ce7ac5d43.png\"\n        srcset=\"/static/662d7e83e239a99bcb8afae5309fe4ff/12f09/1665043378700-639eb109-fbd2-466b-a386-cd7ce7ac5d43.png 148w,\n/static/662d7e83e239a99bcb8afae5309fe4ff/e4a3f/1665043378700-639eb109-fbd2-466b-a386-cd7ce7ac5d43.png 295w,\n/static/662d7e83e239a99bcb8afae5309fe4ff/fcda8/1665043378700-639eb109-fbd2-466b-a386-cd7ce7ac5d43.png 590w,\n/static/662d7e83e239a99bcb8afae5309fe4ff/efc66/1665043378700-639eb109-fbd2-466b-a386-cd7ce7ac5d43.png 885w,\n/static/662d7e83e239a99bcb8afae5309fe4ff/c83ae/1665043378700-639eb109-fbd2-466b-a386-cd7ce7ac5d43.png 1180w,\n/static/662d7e83e239a99bcb8afae5309fe4ff/47f6c/1665043378700-639eb109-fbd2-466b-a386-cd7ce7ac5d43.png 2206w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />对于 playground apps create方式，只能在第一次使用（应用部署上 napptive 之前）。一旦部署好，再次 create会报应用已存在的错误。所以对于应用的更新，不能再次使用 create命令。希望以后 napptive cli 再提供一个 apps update命令吧。由于 napptive 底层仍然是 Kubernetes，所以在  apps update之前，可以使用 kubectl patch deploy的形式去更新镜像的版本号。</p>\n<p>建议先执行 kubectl get deploy uni-orders -o yaml的方式查看一下当前的 deploy 文件，然后找到需要 patch 的内容。比如对如下的 deploy<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6d171ee9f94ae9e60b34f18178c51f1f/a6d66/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.75675675675677%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC0klEQVR42oXTXW/bNhiGYf2HJXYci6QkivqiJMtWZFuRk6xNHKQnG4quKdDVSYasWdv/f34XVrysWTDs4MLzkhBeEiTlfL7/zObjhq9/feXLwxce/nzg/o977m7u2Px+8+TTxw3v3133rn/7wPX7D/38zadbbjd3O7c4I6kZ25Zx3iHShqGK+MkN2XMN+2Ir2qVhIGMGKn7KvbEmTi2pzdEmIsksTpgW2HZNZCv8MH5OR0+CMO79OPcPg6dNn46UgjCriKqWsGiIqyVR2RDaGaZsekEyoZoVVHWBOx4jhUAIF9Hnc44ULjotiKYtZrIkKWtMkiB93a/qBZpAB/i+x3bx543cFxylPHReE9enOyeYckFYzDHVMaGtsdUEk2YIpVGBQfnhf3J8kxAtrkhP3j6aXxBOOvzimKDsen7R7erV/3I8L8BUHcnykvT4Dcm0xTMZyli8F7J/efmNsz0jXcxJ2yuS9op0/powm+KZHN/YnjQ5wuR9/l1vKZO/bOgHIX6UE88v+mY6m+JHFqUTDo3lMLREJiUxKaHJSE1KaVJyk+L/sFu143hKoYTbvyeTz9BJQZhNUCbmVAx4K/e4lAN+FgNqcUAuRhyJA2oxQrljDl2XsTtG7Die56M8D6VUf9umWqLCBBEYMiUpPcGhVAylx0iq3sF2LBRSKkrlUisXLSWuVDjbPyKwDamtmU3mLNo1s8U5q7phfdyx7lacL1pezVvKvKa0s15ha9pswjStiLIandV4af14y9rXZMrjrEj59uYV5/M5dVFxUjd00xmnVUlbWFaTgmVuabKUblvHhlD5uCpA7TiHcoQrR2h3QGU179YdR4sGr5igq+0RTAnjgCrXFFnAgRhy4A7ZHw9R7gDf3Wc4HjJyHzmLaMUyPmEdtZybMy6rX7iKVvyadL3r4oyLYMFKHHEqG85Uw5lseB0uuYxaTuKOxnTMzTFHfst3rC7h5p0bhCMAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/6d171ee9f94ae9e60b34f18178c51f1f/fcda8/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png\"\n        srcset=\"/static/6d171ee9f94ae9e60b34f18178c51f1f/12f09/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png 148w,\n/static/6d171ee9f94ae9e60b34f18178c51f1f/e4a3f/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png 295w,\n/static/6d171ee9f94ae9e60b34f18178c51f1f/fcda8/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png 590w,\n/static/6d171ee9f94ae9e60b34f18178c51f1f/efc66/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png 885w,\n/static/6d171ee9f94ae9e60b34f18178c51f1f/c83ae/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png 1180w,\n/static/6d171ee9f94ae9e60b34f18178c51f1f/a6d66/1665043279670-2b660a0c-f1b9-4495-acc3-0be53e77bad1.png 2070w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>对应的 patch 命令是这样的：\nshell\nkubectl --kubeconfig ~/.napptive/default/napptive-kubeconfig patch deploy uni-orders --patch {spec:{template:{spec:{containers:[{image:jefftian/uni-orders,name:uni-orders}]}}}} --type=merge</p>\n<p><a name=nYqcP></a></p>\n<h1>总结</h1>\n<p>通过 Serverless 框架，可以自由地在各大云厂商提供的 lambda, function, 函数计算间切换。而使用 OAM，则可以自由地在各 Kubernetes 集群间切换。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}