{"componentChunkName":"component---src-templates-post-js","path":"/posts/gx48bf/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/gx48bf","relativePath":"posts/gx48bf","frontmatter":{"title":"åç«¯å·¥ç¨‹åœ£æ®¿å½¢è±¡çš„å´©å¡Œä»¥åŠé‡å»º","stackbit_url_path":"posts/gx48bf","date":"2021-05-31T12:39:17","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œä¼¼ä¹ä¸€ç›´æœ‰ç‚¹æŠ¬ä¸èµ·å¤´ã€‚æ€»æ˜¯åœ¨åœˆå­é‡Œè¢«é„™è§†ï¼Œä»€ä¹ˆï¼šå‰ç«¯ä¹Ÿæ˜¯ç¨‹åºå‘˜ï¼Ÿä»€ä¹ˆï¼šJavaScript å·¥ç¨‹å¤ªä¹±ç­‰ç­‰ç­‰ç­‰ã€‚æˆ‘ä¸€ç›´å¯¹åç«¯å·¥ç¨‹å¿ƒå­˜æ•¬ç•ï¼Œæ€»ä¹‹åç«¯åœ¨æˆ‘çœ¼ä¸­ä¸€ç›´æ˜¯é«˜å¤§ä¸Šçš„å½¢è±¡ï¼Œä½†æ˜¯æœ€è¿‘æˆ‘è¿‘è·ç¦»æ·±å…¥æ¥è§¦äº†æŸå…¬å¸çš„åç«¯ Java å·¥ç¨‹ï¼Œä¸‰è§‚å½»åº•è¢«æ¯äº†ï¼šä¸€ç›´é„™è§†æˆ‘ä»¬å‰ç«¯çš„åç«¯å·¥ç¨‹å¸ˆä»¬ï¼Œæ­å‡ºæ¥çš„åç«¯å·¥ç¨‹å°±è¿™ï¼Ÿå¿ƒä¸­ä¸€ä¸‡åŒ¹é©¬å¥”è…¾è€Œè¿‡ã€‚åœ¨æˆ‘åŸæ¥çš„è§‚å¿µé‡Œï¼Œ<strong>åç«¯å·¥ç¨‹ä¸€ç›´å°±åƒæ˜¯åœ£æ®¿èˆ¬çš„å­˜åœ¨ï¼Œå¦‚ä»ŠçœŸæ­£ä¸€çœ‹ï¼Œå´å¦‚åŒåºŸå¢Ÿã€‚</strong></p>\n<p>è‡ªå·±ä¸€ç›´æƒ³å¾€å…¨æ ˆæ–¹å‘å‘å±•ï¼Œäºæ˜¯å†³å®šåœ¨åºŸå¢Ÿä¸­é‡å»ºï¼Œè™½ç„¶ä¸èƒ½ç«‹å³è¾¾åˆ°åœ£æ®¿çš„çº§åˆ«ï¼Œä½†æ˜¯åŠ›æ±‚è¾¾åˆ°å¸¸è§çš„å‰ç«¯å·¥ç¨‹æ°´å‡†ã€‚</p>\n<p><a name=dSVNE></a></p>\n<h2>ç¼˜èµ·</h2>\n<p>åç«¯æ¥å£ä¸€ç›´è°ƒä¸é€šï¼Œåç«¯åŒå­¦æ€»æ˜¯è¯´ä»–é‚£é‡Œæ˜¯å¥½çš„ã€‚æˆ‘è¯´å¼€å‘ç¯å¢ƒè°ƒä¸é€šï¼Œä»–å‘æ¥ä¸€å † SQL ç»™æˆ‘ï¼šä½ å¾—åœ¨æœ¬åœ°ç¯å¢ƒå»ºæ•°æ®å‘€ã€‚ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œæˆ‘å¹²è„†åœ¨æœ¬åœ°å…‹éš†äº†åç«¯å·¥ç¨‹ï¼Œå¼€å§‹è¿‘è·ç¦»æ¥è§¦ã€‚ä¸€çœ‹ï¼Œä¸‰è§‚å°½æ¯ï¼š</p>\n<p><a name=otbN7></a></p>\n<h2>é¡¹ç›®ä¸èƒ½åœ¨æœ¬åœ°ä¸€é”®å¯åŠ¨</h2>\n<p>æˆ‘æ¥è§¦è¿‡çš„æ‰€æœ‰å‰ç«¯é¡¹ç›®ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª READMEï¼Œå†™æ¸…æ¥šå¦‚ä½•æœ¬åœ°è¿è¡Œï¼Œå°½ç®¡éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œå°½ç®¡å¾ˆç®€å•ï¼Œä½†éƒ½ä¼šæ³¨æ˜ã€‚ä¸€èˆ¬éƒ½ä¼šæ”¯æŒ yarn dev æˆ–è€… yarn start ç­‰ç­‰ä¸€é”®è¿è¡Œå‘½ä»¤ã€‚ä½†æ˜¯æˆ‘æ‰“å¼€çš„ java å·¥ç¨‹ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚å½“ç„¶ï¼Œèƒ½çœ‹å‡ºæ˜¯åŸºäº SpringBoot çš„ä¸€ä¸ª maven å·¥ç¨‹ï¼Œäºæ˜¯ Googl äº†ä¸€ä¸‹ maven å·¥ç¨‹çš„å¯åŠ¨æ–¹å¼ï¼Œè¯•äº†ä¸€ä¸‹ mvn bootRun æœç„¶æ˜¯å„ç§æŠ¥é”™ã€‚</p>\n<p><a name=OYMB4></a></p>\n<h3>é‡å»ºæ–¹æ¡ˆ</h3>\n<p>äºæ˜¯æˆ‘é€šè¿‡å„ç§é”™è¯¯æç¤ºï¼Œäº†è§£åˆ°äº†é¡¹ç›®çš„ä¾èµ–ï¼šmysqlã€redis ç­‰ç­‰ï¼Œå°±è¡¥å……äº†ä¸€ä¸ª docker-compose.yaml æ–‡ä»¶ï¼Œåœ¨æ‰§è¡Œ mvn bootRun ä¹‹å‰ï¼Œdocker-compose up -d ä¸€ä¸‹ï¼Œå¯åŠ¨ç›¸å…³çš„ä¾èµ–é¡¹ã€‚å½“ç„¶æ²¡æœ‰é‚£ä¹ˆé¡ºåˆ©ï¼Œä»ç„¶æœ‰å¾ˆå¤šé”™è¯¯ï¼Œè¯¦ç»†çš„å°±ä¸è¯´äº†ï¼Œå¿ƒé‡Œçªç«ã€‚æœ€åçš„è§£å†³åŠæ³•ï¼š</p>\n<ul>\n<li><strong>å†™ä¸€ä¸ªåˆå§‹æ•°æ®åº“çš„è„šæœ¬ï¼Œå¹¶é…ç½®åœ¨ <strong><strong>docker-compose.yaml</strong></strong> æ–‡ä»¶ä¸­ï¼Œä½¿å¾—åœ¨ <strong><strong>docker-compose up -d</strong></strong> æ—¶è‡ªåŠ¨åˆ›å»ºå¥½éœ€è¦çš„æ•°æ®åº“<br />init.sql</strong></li>\n</ul>\n<p>sql\nCREATE DATABASE IF NOT EXISTS dbname;\nUSE dbname;</p>\n<p><strong>docker-compose.yaml</strong>\nyaml\nversion: 3.3\nservices:\nadminer:\nimage: adminer:4.8.0\nrestart: always\nports:\n- 7777:8080\ndb:\nimage: mysql:5.7\nrestart: always\nenvironment:\nMYSQL_DATABASE: dbname\nMYSQL_USER: root\nMYSQL_ROOT_PASSWORD: password\nports:\n- 3306:3306\ncommand: --init-file /data/application/init.sql\nexpose:\n- 3306\nvolumes:\n- my-db:/var/lib/mysql\n- ./init.sql:/data/application/init.sql\nredis:\nimage: redis\ncommand: redis-server --requirepass 123456\nrestart: always\nports:\n- 6379:6379</p>\n<h1>Names our volume</h1>\n<p>volumes:\nmy-db:</p>\n<ul>\n<li><strong>æ–°å»ºä¸€ä¸ª local profile æ–‡ä»¶ï¼Œå¹¶é…ç½®å¥½ç›¸å…³çš„æœ¬åœ°ç¯å¢ƒå˜é‡</strong>\n<ul>\n<li>å¯¹äºæœ¬åœ°æ•°æ®åº“è¿æ¥é…ç½®ï¼Œæ–°å»ºsrc/main/resources/db/datasource-local.ymlæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</li>\n</ul>\n</li>\n</ul>\n<p>yaml\nspring:\ndatasource:\ndriver-class-name: com.mysql.cj.jdbc.Driver\nhikari:\nmax-lifetime: 1800000\nmaximum-pool-size: 10\ntype: com.zaxxer.hikari.HikariDataSource\nurl: jdbc:mysql://localhost:3306/dbname?useUnicode=true&#x26;rewriteBatchedStatements=true&#x26;autoReconnect=true&#x26;failOverReadOnly=false&#x26;characterEncoding=UTF-8&#x26;useSSL=false&#x26;allowPublicKeyRetrieval=true&#x26;serverTimezone=Asia/Shanghai\nusername: root\npassword: password</p>\n<ul>\n<li>å¯¹äºæœ¬åœ° Redis é…ç½®ï¼Œæ–°å»º src/main/resources/redis/redis-local.yml æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</li>\n</ul>\n<p>yaml\nspring:\nredis:\nhost: localhost\nlettuce:\npool:\nmax-active: 100\nmax-idle: 100\nmax-wait: 6000\nmin-idle: 50\nlock:\nhost: localhost\npassword: 123456\nport: 6379\npassword: 123456\nport: 6379\ntimeout: 5000</p>\n<ul>\n<li>åœ¨ pom.xml é‡Œæ–°å¢ä¸€ä¸ª local profileï¼š</li>\n</ul>\n<p>xml\n...\n<profiles>\n<profile>\n<id>local</id>\n<properties>\n&#x3C;package.environment>local&#x3C;/package.environment>\n</properties>\n<activation>\n<activeByDefault>true</activeByDefault>\n</activation>\n</profile>\n...\n</profiles>\n...</p>\n<ul>\n<li>å¢åŠ  application-local.properties æ–‡ä»¶ï¼š</li>\n</ul>\n<p>xml\nenv=local\nserver.port=8080\nserver.http2.enabled=true</p>\n<ul>\n<li><strong>æ–°å»ºä¸€ä¸ª start.sh æ–‡ä»¶ï¼Œæ— éå°±æ˜¯å¯åŠ¨ç›¸å…³ä¾èµ–ï¼Œå†åˆ©ç”¨ <strong><strong>mvn bootRun</strong></strong> å¯åŠ¨é¡¹ç›®ã€‚æ€»ä¹‹å°è£…æˆä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œæ–¹ä¾¿åç»­æœ¬åœ°ä¸€é”®å¯åŠ¨é¡¹ç›®ã€‚</strong></li>\n</ul>\n<p>shell\nmvn clean install\ndocker-compose up -d\nmvn bootRun</p>\n<p><a name=iLAx9></a></p>\n<h2>å®Œå…¨æ²¡æœ‰ä»»ä½•æµ‹è¯•ä»£ç </h2>\n<p>è¿™çœŸæ˜¯æ—¥äº†ç‹—äº†ã€‚</p>\n<p>æˆ‘æ‰€è§è¿‡çš„å‰ç«¯å·¥ç¨‹ï¼Œæµ‹è¯•å æ¯”å¹¶ä¸å¤šï¼Œç”±äºå‰ç«¯ UI æµ‹è¯•ä»£ä»·æ¯”è¾ƒå¤§ï¼Œå˜åŒ–å¤šï¼Œæ‰€ä»¥å¾ˆå°‘ä¼šå»å†™è¯¦ç»†çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä½†æ˜¯ä¼šåšå¥½ file watchï¼Œä¸€æ—¦ä»£ç å˜åŒ–ï¼Œç•Œé¢ä¹Ÿéšä¹‹æ›´æ–°ï¼Œæ‰€ä»¥ä¹Ÿè¿˜å¥½ã€‚ä½†æ˜¯å¯¹äºå…¬å…±é€»è¾‘ï¼Œæˆ–è€…é‡è¦çš„ç»„ä»¶ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸ªå®ç°æ–‡ä»¶å¯¹åº”ç€ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶ç”¨æ¥å¹²ä»€ä¹ˆï¼Œåªè¦çœ‹ä¸‹å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶å°±ä¸€ç›®äº†ç„¶ï¼š<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c8fe6c9ce47ed10c12b6b1f791b55c26/ef916/1622355446000-5eae8033-c041-4f6e-88f4-2f5af0b512ea.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.75675675675676%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB50lEQVR42n2PTWvUUBSGs1FbULBTQRC0k5uPmcnMNB+T3OQmmdxk2tppF6JL6VQRLG5caIvFnbjzXz+SMBVb2i4e7jlw34f3GAOxg2vuMLRMwonHPJM0RU5dKMYDB9d8xUD0af/dTx/H3MHo6VN61Yqt+Yrni4+8XJ7RP/7C8O1XXux/Ymt+wrY+Zbta3Uqv44Se/sAz9Q5j4+gHm8sLHh2e8/TNTx4fX9J//4vg8x+c1W82D7/z8OBbx4P1+z8byws2l+dsHF3yZHGGIbyQFnMU4PoxxV7MVBZI/bpDNUuivEHqA7L6kKTaJy73kNUBs3KBNW7zAWIcYQ6mGI5l0WILwXg0JJUuwe6UQmWoNKXIFcksIpOyQ8YxqUyIo6jDte0u79oWlhAYtuPiOC6W7eJ5I7QeEoYhum4oK43WNUoVKJVTlhXzuaYs54xGHv2+oM3/c1g2hrNebMtmtBvh+SFRGCGlJM0UUqbMZjFpmhEnspt9P+Aq12Vt53bhYBowDhPyTJEXBXXdoLK8kxZFSaZycpUTx0kXvpLdIbQY+jMmkSRXiqIVNovu1LZde2Y7C1MghHWt2d0NJz6eH5HEcdcqy1TXZjKZEgThtVOvJPcI1w3jjKauqeuaqtKEQYi5btVys9VN4V9y9li+yB6J+AAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c8fe6c9ce47ed10c12b6b1f791b55c26/fcda8/1622355446000-5eae8033-c041-4f6e-88f4-2f5af0b512ea.png\"\n        srcset=\"/static/c8fe6c9ce47ed10c12b6b1f791b55c26/12f09/1622355446000-5eae8033-c041-4f6e-88f4-2f5af0b512ea.png 148w,\n/static/c8fe6c9ce47ed10c12b6b1f791b55c26/e4a3f/1622355446000-5eae8033-c041-4f6e-88f4-2f5af0b512ea.png 295w,\n/static/c8fe6c9ce47ed10c12b6b1f791b55c26/fcda8/1622355446000-5eae8033-c041-4f6e-88f4-2f5af0b512ea.png 590w,\n/static/c8fe6c9ce47ed10c12b6b1f791b55c26/ef916/1622355446000-5eae8033-c041-4f6e-88f4-2f5af0b512ea.png 815w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />ä½†æ˜¯æˆ‘æ‰“å¼€çš„ java å·¥ç¨‹ï¼Œçœ‹ä¼¼å¾ˆä¸“ä¸šï¼Œåˆ†å±‚åˆ†å¾—å¾ˆç»†ï¼Œéµç…§äº†ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹çš„å±‚æ¬¡ç»“æ„ï¼š<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ff7d9bec0abe5706d1a07548b95ae95a/ea9a1/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.51351351351352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjklEQVR42o2Uu67CQAxE+f9fQhRQQpMiRSoEoiCKiBTerxCjY2lWJpeIu5LZXbBnxx6bkZnZ4/Gw0+lkh8PB9/v9blqv18uu16v7XC4Xt67r3LTiecRHWZaWZZnN53Mbj8e2Wq2SowBvt5uDPZ9Pf5Bz27Zu8sVGEX1oAQYQIDDljukclwPyCgGYXsVgh8GIwPP57Gd2xcEeH86JYZ+lUsUAUl3FRjXWY19TJqiua09LaZKSBDsej/5dBOkDppRZRVHYdDq15XKZWJCOlAVY33EeZNiXPd6lJqaUVYI+4FdReFnCqH7cYx+ykz5x+u1DlCGGOMGEM7tYqht+ioIg2+32Ix1AYEmQGOK33+8TyKAoeZ7bZDKx9XqdHNS4AlQfamr6gP8SRY5xBAVO3aT4H1HUc1EUAOJdUyLB1EaarJ+zLAW1ANAdwMjwI2V+RJDdbuf/PLQFgRRfzc2OYMqkaZo0QXokAVZV5VOyWCxsNpvZZrNxJwJVN9gRrDKoJ7lHYQZTVrPH/ovzHf8bI+AbURmBnvuuvaoAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ff7d9bec0abe5706d1a07548b95ae95a/fcda8/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png\"\n        srcset=\"/static/ff7d9bec0abe5706d1a07548b95ae95a/12f09/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png 148w,\n/static/ff7d9bec0abe5706d1a07548b95ae95a/e4a3f/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png 295w,\n/static/ff7d9bec0abe5706d1a07548b95ae95a/fcda8/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png 590w,\n/static/ff7d9bec0abe5706d1a07548b95ae95a/efc66/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png 885w,\n/static/ff7d9bec0abe5706d1a07548b95ae95a/c83ae/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png 1180w,\n/static/ff7d9bec0abe5706d1a07548b95ae95a/ea9a1/1622355968608-bb1ef753-8d79-4305-9dcc-07b4c5bc40fe.png 2970w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/503859655e88494ab4493463e8e68748/54bf4/1622356121139-ad443f97-c81b-475d-9194-cd727b61ae89.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcUlEQVR42l2T627USBCF/VRA5mJ7fG/f292+zARIZgJiFzIEsloSIcRPXgIQiYTEY36oO5kI8eOo6lSVj8vyKSf2UqKkJEoFcZY/4MBFWZPmJasoIbuPiSjIioogTsnL2nKTm3nH8xJWQWIHwySzjTBJLTe5ETb1g5AfxrZ2EDQ1IxREd7NONaypjrcIkVM1klp2tJ2irBs6rdHDiFSahesxW7jMXY/50uVovrT8aHEXZ0vXRufRbIErWpJKExUdYS6JS8UqrQlFSyBam88D8YBZkOElJX5S2Z4bFywjgxzH9TyiQqO2F6TyhOQeYfMct9jwJOl5HCmexL3NZ+kdz/szivEMoXfE3ZZYnhDUT3FWgU92/Bl1+Yvp6idyf0v39ob+4jtq/w19ccP4/pbNf7dMl7c05ze05z8s5P4Hav8def6N9s1X6tdfcaRShOUz2t0n9MUX5PP/6Z69ZzjZM+0umV5c028/MOyu6HdXtj+cfURvr1GnV4j+Nfm4p1i/o5je4Tw+mjOfzxBVSfV0SybSe2RkubCxaWv6QdMpSd8rpmlAqRaRZ3i+i+u5eCvfwjG/3FhCNAp5+opaaqQa0MNEq3qaTiP1iB7XqGFN14/004ZWDfihsZqwljEWMnCMn1ZhbAXb7T8UVUNe1RR1c5831k6NVNZS1lptR9lIpOotX/oBfhDhBRFOUbdWMKsl9fZfexlZUdqHm07RdtpuO66P6ac1qh8Y1hu75TCtGaaNPQQjFsTJ3Sf7YUQhNePpS7tVWbcWYZw+vPlPmGsxzxy42XDhrWx0ZkuPuevbIXNiZtDkZtDUD/0/YWqzv2oH/AYyrfBKgev2kwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/503859655e88494ab4493463e8e68748/fcda8/1622356121139-ad443f97-c81b-475d-9194-cd727b61ae89.png\"\n        srcset=\"/static/503859655e88494ab4493463e8e68748/12f09/1622356121139-ad443f97-c81b-475d-9194-cd727b61ae89.png 148w,\n/static/503859655e88494ab4493463e8e68748/e4a3f/1622356121139-ad443f97-c81b-475d-9194-cd727b61ae89.png 295w,\n/static/503859655e88494ab4493463e8e68748/fcda8/1622356121139-ad443f97-c81b-475d-9194-cd727b61ae89.png 590w,\n/static/503859655e88494ab4493463e8e68748/efc66/1622356121139-ad443f97-c81b-475d-9194-cd727b61ae89.png 885w,\n/static/503859655e88494ab4493463e8e68748/54bf4/1622356121139-ad443f97-c81b-475d-9194-cd727b61ae89.png 1007w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />ä½†æ˜¯ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ä¸­å¼•å…¥è¿™ä¸ªåˆ†å±‚æ¶æ„æ˜¯ä¸ºäº†æ–¹ä¾¿è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¹¶ä¸”è®©ç¨‹åºæœ¬èº«æ›´åŠ ç®€å•æ˜äº†ã€‚æ˜¾ç„¶è¿™ä¸ªé¡¹ç›®å·¥ç¨‹ï¼Œåªæ˜¯ç”Ÿç¡¬ç…§æ¬äº†åˆ†å±‚ç»“æ„ï¼Œå¹¶æ²¡æœ‰å®ç°ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ä¸­å¼•å…¥è¿™ä¸ªç»“æ„çš„ç›®çš„ã€‚</p>\n<p><a name=UZ9Xa></a></p>\n<h3>éƒ¨åˆ†é‡å»ºæ–¹æ¡ˆ</h3>\n<p>å¯¹äºæ–°åŠ çš„ä»£ç ï¼Œå¿…é¡»æ·»åŠ æµ‹è¯•ã€‚è¿™å¯¹æˆ‘æ¥è¯´å¾ˆè‰°éš¾ï¼Œä¸å¤ªä¼šç”¨ java å†™æµ‹è¯•ï¼Œä½†æœ€ç»ˆæŠŠæµ‹è¯•åŠ å…¥äº†ï¼Œæ¯æ¬¡æŠŠæ”¹åŠ¨æ¨åˆ°è¿œç¨‹ä»“åº“å‰ï¼Œä¼šè‡ªåŠ¨è¿è¡Œé¡¹ç›®ä¸­çš„æµ‹è¯•ã€‚å¯¹äºè¿™ä¸ªæˆ‘è¿˜æ²¡æœ‰å½¢æˆä¸€ä¸ªé€šç”¨çš„æ–¹æ¡ˆï¼Œåªèƒ½è®°å½•ä¸€äº›é›¶ç¢çš„æ–°å¾—ã€‚</p>\n<p><strong>@MockBean å¯ä»¥è§£å†³æµ‹è¯•å®ä¾‹çš„æ›¿æ¢</strong><br />å¯¹äºä¸€äº›ä¾èµ–ï¼Œåœ¨è¿è¡Œæµ‹è¯•æ—¶éœ€è¦æ§åˆ¶ä½ï¼Œè¿™æ—¶å€™å¯ä»¥é‡‡ç”¨ @MockBean å°†å®é™…ä¾èµ–æ›¿æ¢æˆä¸€ä¸ªå‡çš„å¯¹è±¡å®ä¾‹ã€‚å‰ææ˜¯å®ç°ä»£ç åšåˆ°äº†ä¾èµ–ä¸€ä¸ªæŠ½è±¡ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å®ä¾‹ã€‚</p>\n<p><strong>å¯¹äºæ²¡æœ‰ä¾èµ–æ¥å£ï¼Œè€Œæ˜¯ä¾èµ–ç‰¹å®šå®ä¾‹å®ç°çš„ä»£ç ï¼Œå¯ä»¥å¢åŠ ä¸€äº› setter ä»¥æ–¹ä¾¿æµ‹è¯•</strong><br />æ¯”å¦‚è¿™æ ·çš„ä»£ç ï¼š<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 508px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f38cf62fafee53a6eafa82af79ae6624/2fd48/1622356992948-d3be2176-5030-4b95-814b-b4fd63f709fc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42o2S626cMBBGeZcqXbANvmCbW4AFus1226QXqWre/0VOBSRtUmmj/jgeeWx/ns/jxFtN0AKrc8rSY6ylLAPOObI0JcuyDSEEUso/8RpJHw2nKGiCY5w/0t0O9MNCP4z4EIhVTawarDEIkb0ptgl2wTB7QfSOflxo2p6m6+nHiW44spzOzMsdbdsiRYZ4Pnyl0qSPjjlk1N4xHBfarqe7HRnGma4fmD/ccVxODMcJazTZs9A1QWMsSkmUysnz4mlh36yk2vLPvDx47S2T7rZnmmbG40wVa5RSFNqg8l1gb0r63w1Kam8YvKT3kjlIxiawTBPDcbW8NiayurCuxFq3sV4qXlkXWxRSkOSFJpeCYCRBS5xKCcUB50pi1RKrjjJUVE23U7cURY4QL+xv1T5VWGhLrgSVVZSFIsYGX/qN0mmsEaQ3N2SH968Q6QGZHraotup24aRYLQjBD33DY0j51Tc8zjOP08TPoeVLzHmoAw9N4D6WG9/biq/rvPI81J5LkXLO3m0/IDG2pOsrvtWGuyLjbBWXUHIuLWfvOBnN5ypwiZ5L2Lmv499c9JyN4lMh0NqQrIM2BcZorJBYKbEiwwqx4aTEZBlmy+3x3/m6J1+/lcr5DT93eoIIoAGRAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f38cf62fafee53a6eafa82af79ae6624/2fd48/1622356992948-d3be2176-5030-4b95-814b-b4fd63f709fc.png\"\n        srcset=\"/static/f38cf62fafee53a6eafa82af79ae6624/12f09/1622356992948-d3be2176-5030-4b95-814b-b4fd63f709fc.png 148w,\n/static/f38cf62fafee53a6eafa82af79ae6624/e4a3f/1622356992948-d3be2176-5030-4b95-814b-b4fd63f709fc.png 295w,\n/static/f38cf62fafee53a6eafa82af79ae6624/2fd48/1622356992948-d3be2176-5030-4b95-814b-b4fd63f709fc.png 508w\"\n        sizes=\"(max-width: 508px) 100vw, 508px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />æ˜¾ç„¶å®ƒå¯¹ HttpClient çš„ä¾èµ–æ²¡æœ‰ä½¿ç”¨ä¾èµ–æ³¨å…¥ã€‚åº”è¯¥æœ‰åŠæ³•æ”¹é€ ä¸€ä¸‹ï¼Œä½†æˆ‘è¿˜ä¸ä¼šï¼Œäºæ˜¯ç»™è¿™ä¸ªç±»å¢åŠ äº†ä¸€ä¸ª setter æ–¹æ³•ï¼š\njava\npublic void setHttpClient(HttpClient client) {\nthis.httpClient = client;\n}</p>\n<p>ç„¶ååœ¨æµ‹è¯•ä»£ç ä¸­ï¼Œé€šè¿‡ @BeforeEach å¯¹å…¶å†…éƒ¨ httpClient è¿›è¡Œæ›¿æ¢ï¼š\njava\n@BeforeEach\nvoid initialize() {\nmpService.setHttpClient(new MockHttpClient());\n}</p>\n<p>å½“ç„¶ï¼Œè¿˜å¯ä»¥åœ¨æµ‹è¯•ä¸­ä¸æ›´æ”¹ HttpClientï¼Œè€Œæ˜¯æ›´æ”¹å¯¹åº”çš„ HttpClient è¦è°ƒç”¨çš„è¿œç¨‹ç«¯ç‚¹ï¼Œä½¿ç”¨ MockServer çš„æ–¹å¼ï¼Œé˜²æ­¢åœ¨æµ‹è¯•ä¸­è°ƒç”¨çœŸæ­£çš„è¿œç¨‹ç«¯ç‚¹ã€‚\njava\n@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.None)\npublic class XXXTest {\npublic static MockWebServer mockBackEnd;</p>\n<pre><code>@BeforeAll\nstatic void setUp() throws IOException {\n    mockBackEnd = new MockWebServer();\n    mockBackEnd.start();\n}\n\n@AfterAll\nstatic void tearDown() throws IOException {\n    mockBackEnd.shutdown();\n}\n\n@BeforeEach\nvoid initialize() {\n    String baseUrl = String.format(http://localhost:%s,\n            mockBackEnd.getPort());\n\n    mpService.setQrCodeCreateUrl(baseUrl + /test);\n}\n\n@Autowired\nprivate MpService mpService;\n\n@Test\nvoid XXXTest() {\n    MockResponse mockResponse = new MockResponse();\n    mockResponse.setBody({ticket:gQH47joAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL2taZ2Z3TVRtNzJXV1Brb3ZhYmJJAAIEZ23sUwMEmmn +\n            3sUw==,expire_seconds:60,url:http://weixin.qq.com/q/kZgfwMTm72WWPkovabbI});\n    mockResponse.addHeader(Content-Type, application/json);\n\n    mockBackEnd.enqueue(mockResponse);\n    ...\n    assertThat(...);\n}\n</code></pre>\n<p><strong>æ€»ä¹‹ï¼Œä¸è¦è®©æµ‹è¯•äº§ç”ŸçœŸæ­£çš„è¿œç¨‹è°ƒç”¨ï¼Œè¦ä¹ˆ mock è‡ªå·±ä½¿ç”¨çš„ HttpClientï¼Œå¯¹ sendRequest æ–¹æ³•è¿›è¡Œæ‰“æ¡©ï¼›è¦ä¹ˆ mock è¿™ä¸ªè¿œç¨‹ serverï¼Œå›ºå®šè¿”å›æœŸå¾…çš„ Responseã€‚</strong></p>\n<p><a name=GXnRN></a></p>\n<h2>è®¾è®¡ç‘•ç–µ</h2>\n<p>åç«¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¥æœŸå­—æ®µç±»å‹ï¼Œå…¨éƒ¨è®¾ç½®æˆä¸ºäº† Long å‹ï¼Œå­˜å‚¨ä¸€ä¸ªæ—¶é—´çš„ç§’æ•°ã€‚è¿™ä¸ªè®©æˆ‘éå¸¸ä¸è§£ï¼Œé—®ä¸‹æ¥çš„åŸå› æ˜¯æ—¶é—´çš„æ—¶åŒºä¼šå¸¦æ¥é—®é¢˜â€¦â€¦</p>\n<p>æˆ‘æƒ³ä¸å‡ºæ—¥æœŸæ—¶é—´æ ¼å¼ä¼šå¸¦æ¥ä»€ä¹ˆæ—¶åŒºé—®é¢˜ï¼Œå°±ç®—æœ‰ï¼Œé‡‡ç”¨ UTC æ—¶é—´ä¼šæ€æ ·å‘¢ï¼Ÿæ€»ä¹‹ç›®å‰çš„è®¾è®¡ï¼Œå¯¼è‡´ç¼–ç ä¸ä¾¿ï¼Œæ•°æ®åº“æŸ¥è¯¢ä¸ä¾¿ï¼Œä»¥åŠé€ æµ‹è¯•æ•°æ®æ—¶éå¸¸ä¸æ–¹ä¾¿ï¼ˆæ¯”å¦‚ Adminer ç•Œé¢ä¸ä¼šå¼¹å‡ºæ—¥æœŸæ—¶é—´é€‰æ‹©æ¡†ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°å­—è¾“å…¥æ¡†â€¦â€¦ï¼‰ã€‚</p>\n<p>æ›´åŠ è®½åˆºçš„æ˜¯ï¼Œè¿™ä¸ªè®¾è®¡å·ç§°èƒ½é¿å…æ—¶åŒºé—®é¢˜ï¼Œç»“æœååå¸¦æ¥äº†ä¸åº”è¯¥æœ‰çš„æ—¶åŒºé—®é¢˜ï¼šæ¯”å¦‚ï¼Œæˆ‘åœ¨è°ƒç”¨åç«¯æ¥å£åˆ›å»ºæŸäº›èµ„æºæ—¶ï¼Œç”±äºä¸šåŠ¡é€»è¾‘é™åˆ¶å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´å¿…é¡»åœ¨åŒä¸€å¤©ï¼Œæˆ‘çš„å‰ç«¯æ˜æ˜ä¼ äº†åŒä¸€å¤©çš„æ—¶é—´ç»™åˆ°åç«¯ï¼Œä½†åç«¯å°±æ˜¯ä¸€ç›´æŠ¥å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ä¸åœ¨åŒä¸€å¤©çš„é”™è¯¯ï¼<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 546px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/73e9848945ee01a75a7c33829fac7da7/76aed/1622357986780-0d090bf0-c2fd-4589-b79a-bc9309e88163.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.8108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACkklEQVR42pVUa0sbQRTNHyz0W/+GaNS6SfaRidnNY/OQ1mATaK2KBaVf/CSYKGKhxZaCHyq0SUSw1GCqSU123VdOuWM2JjUKPXC4s3dmztx7dnYD6swUYlMTYJMTyCsiCvNRFBQRqXQa6VQKaYpDTPVzuq4PxsMMyIxBikYhKlGwuIq4lsBLJvPFDzGZTCIej987hAvGGANjUTDGoCgymKJg8RFB2qRpGiRJGoiNCGYyGfikNii5yKRHK/QFhqM/DohiBIIwh5AgIJFIIKPrKMRkpPvi40gH6//M+6IB8i8iy4jIChQWA4vHsSCFoWoab22YqqrySP6RRX6eCvFFA6mwgGToOXQxhFcpDcWkincLWRRLJZSKRZRKJRSLxQHpeWlpCdlslo+JhULhruUX6RT0+Rjer68BtoWe0YVjmrAsG5ZlcdqOA9t1Ydu3OYqO4+Dm5gae56HRaPAD6O0HIpKMyeA0Xi8vg+DhPtxOB9b5OXqOg3Fot9vI5XK3grIsYXZ2Bm99Qc9Dz2evB8910T46wu/tbRiNBs/5pLWEq6uruwpjLIqQMIe11RU8BPPkBNefv8BptUbyJEpotVp3gnT/6O1tbGzcbjZNdLtdGIYBg6JpoNNu48/FBTrX13yevHNdd7ygLMsIBoN402/57OwMp6enqNfrqNZqqFZrqNVP8L1aw7fjYz7XbDa5sI8RQUkSMT0dxHJf8H8wtkLyMBwSsNr3kFrxPJcb7noe7B9TOP/wFPXdZzC+PoH9a53fBM91+FrC5eXlqId08zc3N8eX0VyBWU+iU8sBPzWg++neEvJ8cG3orxEOh5HP51GpVLCzszPC8u5H7O4fYm//EOW9Q5QrB/25Mo+0Z2tra/At/wWNiiuinfzLgwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/73e9848945ee01a75a7c33829fac7da7/76aed/1622357986780-0d090bf0-c2fd-4589-b79a-bc9309e88163.png\"\n        srcset=\"/static/73e9848945ee01a75a7c33829fac7da7/12f09/1622357986780-0d090bf0-c2fd-4589-b79a-bc9309e88163.png 148w,\n/static/73e9848945ee01a75a7c33829fac7da7/e4a3f/1622357986780-0d090bf0-c2fd-4589-b79a-bc9309e88163.png 295w,\n/static/73e9848945ee01a75a7c33829fac7da7/76aed/1622357986780-0d090bf0-c2fd-4589-b79a-bc9309e88163.png 546w\"\n        sizes=\"(max-width: 546px) 100vw, 546px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />æœ€åæŸ¥çœ‹åç«¯ä»£ç ï¼Œæ˜¯è¿™æ ·å†™çš„ï¼š\njava\nLocalDate eventStartDate = eventStartTime == null ? null : Instant.ofEpochSecond(eventStartTime).atZone(ZoneId.systemDefault()).toLocalDate();\nLocalDate eventEndDate = eventEndTime == null ? null : Instant.ofEpochSecond(eventEndTime).atZone(ZoneId.systemDefault()).toLocalDate();</p>\n<p>æ˜¾ç„¶å½“å‰çš„ BUG è¯æ˜äº†ç³»ç»Ÿçš„é»˜è®¤æ—¶åŒºå’Œç”¨æˆ·çœŸæ­£ä½¿ç”¨çš„æ—¶åŒºå¹¶ä¸ç›¸åŒã€‚ä¸ºä»€ä¹ˆæˆ‘å€¾å‘äºç›´æ¥é‡‡ç”¨æ—¥æœŸæ—¶é—´ç±»å‹ï¼Œæ˜¯å› ä¸ºæ—¥æœŸæ—¶é—´ç±»å‹åœ¨åºåˆ—åŒ–æ—¶å¯ä»¥å¸¦ä¸Šæ—¶åŒºä¿¡æ¯ï¼Œæ¯”å¦‚ 2021-05-31 00:00:00+8 ä»£è¡¨äº†åœ¨ä¸œå…«åŒºä¸‹ 5 æœˆ 31 æ—¥çš„æœ€å¼€å§‹æ—¶åˆ»ï¼Œä½†æ˜¯å®ƒåœ¨ UTC æ—¶é—´ä¸‹ï¼Œå°±æ˜¯ 5 æœˆ 30 æ—¥ã€‚</p>\n<p><a name=V2J7h></a></p>\n<h3>æš‚æ—¶çš„è§£å†³æ–¹æ¡ˆ</h3>\n<p>ç”±äºç›´æ¥å°†æ•´ä¸ªç³»ç»Ÿçš„æ—¶é—´è®¾è®¡ä»é•¿æ•´å‹æ”¹æˆæ—¥æœŸæ—¶é—´å‹ï¼Œå·¥ä½œé‡è¾ƒå¤§ï¼Œæˆ‘åªèƒ½å…ˆä¿®å¤äº†è¿™ä¸ªé—®é¢˜ã€‚ä¿®å¤å¯ä»¥é€šè¿‡æŠŠæœåŠ¡å™¨çš„æ—¶åŒºè®¾ç½®æ”¹æˆå’Œç”¨æˆ·çš„æ—¶åŒºï¼ˆä¸œå…«åŒºï¼‰ç›¸åŒï¼Œä½†æ˜¯ç”±äºæœåŠ¡å™¨çš„é…ç½®å¹¶æ²¡æœ‰ä»£ç è¯ï¼Œæˆ‘æ²¡æœ‰é‡‡ç”¨ä¿®æ”¹æœåŠ¡å™¨è®¾ç½®ã€‚ç†æƒ³æƒ…å†µæ˜¯ä¸€åˆ‡åŸºç¡€è®¾æ–½ä¹Ÿä»£ç åŒ–ï¼Œå°†ä¸€åˆ‡ç³»ç»ŸçŸ¥è¯†é‡‡ç”¨æ–‡æœ¬è®°å½•å¹¶ç”± git è·Ÿè¸ªã€‚</p>\n<p>ç”±äºç°åœ¨å¢åŠ æ—¶åŒºä¿¡æ¯è®©å‰ç«¯ä¼ é€’ä¸å¤ªåˆé€‚ï¼ˆè€Œä¸”åæœŸå¦‚æœæ”¹æˆæ—¥æœŸæ—¶é—´æ ¼å¼ï¼Œå¹¶ä¸éœ€è¦å‰ç«¯å•ç‹¬ä¼ é€’æ—¶åŒºä¿¡æ¯ï¼‰ï¼Œä»¥åŠè€ƒè™‘åˆ°äº§å“åªé¢å‘ä¸­å›½ç”¨æˆ·ï¼Œå› æ­¤æš‚æ—¶åœ¨ä»£ç ä¸­å°†æ—¶åŒºä»é»˜è®¤æ”¹æˆäº†ä¸œå…«åŒº, ä¸è¿‡ï¼Œä»»ä½•ä»£ç çš„æ”¹åŠ¨ï¼Œéƒ½æ·»åŠ äº†æµ‹è¯•ä»£ç ï¼Œä»¥ä¿è¯é‡æ„çš„å®‰å…¨ã€‚\ndiff</p>\n<ul>\n<li>\n<pre><code>       LocalDate eventStartDate = eventStartTime == null ? null : Instant.ofEpochSecond(eventStartTime).atZone(ZoneId.systemDefault()).toLocalDate();\n</code></pre>\n</li>\n<li>\n<pre><code>       LocalDate eventEndDate = eventEndTime == null ? null : Instant.ofEpochSecond(eventEndTime).atZone(ZoneId.systemDefault()).toLocalDate();\n</code></pre>\n</li>\n</ul>\n<ul>\n<li>\n<pre><code>       LocalDate eventStartDate = eventStartTime == null ? null : Instant.ofEpochSecond(eventStartTime).atZone(ZoneId.of(Asia/Shanghai)).toLocalDate();\n</code></pre>\n</li>\n<li>\n<pre><code>       LocalDate eventEndDate = eventEndTime == null ? null : Instant.ofEpochSecond(eventEndTime).atZone(ZoneId.of(Asia/Shanghai)).toLocalDate();\n  \t\t\t\tif (eventEndDate != null &#x26;&#x26; eventStartDate != null &#x26;&#x26; !eventStartDate.equals(eventEndDate)) {\n          return åœºæ¬¡å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´éœ€è¦åœ¨åŒä¸€å¤©ï¼;\n      }\n</code></pre>\n</li>\n</ul>\n<p>java\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;</p>\n<p>import java.time.ZoneId;\nimport java.util.TimeZone;</p>\n<p>import static org.assertj.core.api.Assertions.assertThat;\nimport static org.junit.jupiter.api.Assertions.*;</p>\n<p>class CampaignEventValidationUseCaseImplTest {\nprivate CampaignEventValidationUseCaseImpl sut;</p>\n<pre><code>@BeforeEach\nvoid setUp() {\n    sut = new CampaignEventValidationUseCaseImpl();\n}\n\n/**\n * BUGï¼šå¼€å§‹æ—¶é—´é€‰æ‹© 2021-05-20 00:05ï¼Œç»“æŸæ—¶é—´é€‰æ‹© 2021-05-20 23:55ï¼Œæ ¡éªŒæŠ¥é”™è¯´ï¼šåœºæ¬¡å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´éœ€è¦åœ¨åŒä¸€å¤©\n */\n@Test\nvoid validateåœºæ¬¡å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´éœ€è¦åœ¨åŒä¸€å¤©() {\n    TimeZone.setDefault(TimeZone.getTimeZone(Europe/Kiev)); // æ¨¡æ‹ŸæœåŠ¡å™¨æ—¶åŒºæ²¡æœ‰è®¾ç½®åœ¨ä¸œå…«åŒº\n    \n    sut = new CampaignEventValidationUseCaseImpl();\n\n    EventTime4Check event = new EventTime4Check();\n    event.setEventEndTime(1621526100L);\n    event.setEventStartTime(1621440300L);\n\n    CampaignDto campaignDto = new CampaignDto();\n    campaignDto.setCampaignId(12345);\n    campaignDto.setStartTime(1621483200L);\n    campaignDto.setEndTime(1622188000L);\n\n    assertNotNull(sut);\n\n    assertThat(sut.validate(event, campaignDto)).isNotEqualTo(åœºæ¬¡å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´éœ€è¦åœ¨åŒä¸€å¤©ï¼);\n}\n</code></pre>\n<p>}</p>\n<p><a name=kEl0O></a></p>\n<h2></h2>\n<p><a name=Ieq6s></a></p>\n<h2>é•¿ç¯‡æ²¡æœ‰æµ‹è¯•åˆæ»¡æ˜¯ BUG çš„å‡½æ•°</h2>\n<p>è¿™ä¸ªå·¥ç¨‹é‡Œå……æ–¥ç€é•¿ç¯‡å‡½æ•°ï¼ŒçŠ¶æ€å˜é‡ç‰¹åˆ«å¤šï¼Œè€Œä¸”å¾€å¾€åœ¨å‡½æ•°å¼€å¤´å°±å®šä¹‰ä¸€å †ã€‚å¦‚å‰æ‰€è¿°ï¼Œæœ‰æ²¡æœ‰æµ‹è¯•ï¼Œè€Œä¸”å®é™…è”è°ƒä¸‹æ¥åˆæœ‰ BUGã€‚</p>\n<p><a name=uHKmB></a></p>\n<h3>éƒ¨åˆ†é‡å»ºæ–¹æ¡ˆ</h3>\n<p><a name=XimNW></a></p>\n<h4>å†…è”åªè¢«ç”¨åˆ°ä¸€æ¬¡çš„å˜é‡ï¼Œå¯¹äºè¢«å¼•ç”¨å¤šæ¬¡çš„å˜é‡ï¼Œå°†å…¶å®šä¹‰æŒªåˆ°ç¬¬ä¸€æ¬¡å¼•ç”¨ä¹‹å‰ï¼›</h4>\n<p><a name=Rdb5U></a></p>\n<h4>å¯¹äºå·²çŸ¥æœ‰ BUG çš„åˆ†æ”¯ï¼Œä½¿ç”¨æå‰é€€å‡ºï¼Œå¹¶åœ¨å•ç‹¬çš„å°å‡½æ•°ä¸­è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å¹¶ä¿®å¤ï¼š</h4>\n<p>java\n@Override\npublic Boolean queryCampaignHasReservableEvent(String campaignId, CampaignType campaignType) throws Exception {\n// æ–°å¢ä»£ç \nif (campaignType == CampaignType.CAMPAIGN) {\n// è”è°ƒå‘ç°è¿™ä¸ªåˆ†æ”¯æœ‰ BUGï¼Œæå‰è¿”å›æ–°çš„å‡½æ•°ï¼Œå¹¶å¯¹å…¶è¿›è¡Œå……åˆ†çš„è‡ªåŠ¨åŒ–æµ‹è¯•\nreturn queryCampaignHasReservableEventForCampaign(campaignId);\n}</p>\n<pre><code>    // åŸæœ‰ä»£ç \n    EventQueryCondition queryCondition = new EventQueryCondition();\n    queryCondition.setCampaignId(campaignId);\n    // æ­¤å¤„çœç•¥åŸæœ‰çš„å‡ åè¡Œæ¼æ´ä»£ç \n    ...\n    PageInfo&#x3C;EventDto> pageInfo = getOnlyEvents(queryCondition);\n    return pageInfo.getTotal() != 0;\n}\n</code></pre>\n<p><a name=hnyrc></a></p>\n<h2>å…¶ä»–é‡å¤ä»£ç ç­‰ç­‰é—®é¢˜</h2>\n<p>é¡¹ç›®ä¸­å±…ç„¶æœ‰å¾ˆå¤šæ•´æ®µæ•´æ®µçš„ä»£ç é‡å¤ï¼Œä»¥åŠæ ¼å¼ä¸è§„æ•´çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜éƒ½å¯ä»¥è¢«è‡ªåŠ¨æ‰«æå‡ºæ¥ï¼Œäºæ˜¯æ­å»ºä¸€ä¸ª SonarQubeï¼Œä»¥æ–¹ä¾¿å¿«é€Ÿå®šä½è¿™äº›é—®é¢˜ï¼ˆæ‰«æç»“æœä¸å ªå…¥ç›®ğŸ™ˆï¼Œè¿™è¿˜åªæ˜¯æ–°å»ºæ²¡å¤šä¹…çš„é¡¹ç›®å•Šâ€¦â€¦ï¼‰ï¼š<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd3a3ba2453792de2d4d1786ab30926c/3f8cf/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.48648648648648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACU0lEQVR42o1T7YoUMRCc5zzwv6KvIL6CiCiK4uuI/hAU3cNbT1y9W293ZyafnXSSmZL07hy753oYKDokk5qu6u7m18Ulfi+X6LoO2hhorbFer6GUQggRzhOsJxARQggHoF30ntApA20dmo8PH+H93ft4e3IH707u4MO9BzifzfDj50LIl1draOthnYNWSs6OwRoDYwya+es3+Pb8Bc6fPsP88RN8f/kK/WqNTdchxoBppZQQY/wnQiCQd2giexiy8OOIBGCoqPtcUHIWsnEccduq95E8Mmk0qe+gVyvxjJwDeY+UMiIzmFk+/h+kyGDn0NRHaueNtVbMzzkjRBYpBw9rNruMboJDQKweVoJN20plq6nOOeRSpMIT+bTqA9X3kv2+DZwSgvNgVSWnJCQimUjMr+CUJU4ZYByRcxGylBjDMFzfbc8jAns03nsh2kf9o48ZqWY3EQIInGEcgTnvxG/ll1zgg4MOPRqz6599JI7IzPAxScXrqjZM+yE7UGTphLrKMGzPhwFNLcRNpNr9SmHda3gKIn2KQh42aHsFZb2osM7DEx0S1sym2LbtVjoziIJgGrXtnhFDROKAFKdRJFT7DjKcSGuRiDw4EoaSwFwfeFirJRqj5G6xUjhdrBB27VUV/CW5kuY8gOwSpE4RzRzRnCGYM5D+CtJncP0pStzgcqMxXyxlEMTLUo4TplRgzQX6zSf07ZdrmH4G289gus+IdLU/e7cT1r7KJUkrVAQmUPQCH7Yxlyw8+1N+tMqVsBZjGMajGIdxa0lkyWhCJase/gFfMx8g0W5mAQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/bd3a3ba2453792de2d4d1786ab30926c/fcda8/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png\"\n        srcset=\"/static/bd3a3ba2453792de2d4d1786ab30926c/12f09/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png 148w,\n/static/bd3a3ba2453792de2d4d1786ab30926c/e4a3f/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png 295w,\n/static/bd3a3ba2453792de2d4d1786ab30926c/fcda8/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png 590w,\n/static/bd3a3ba2453792de2d4d1786ab30926c/efc66/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png 885w,\n/static/bd3a3ba2453792de2d4d1786ab30926c/c83ae/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png 1180w,\n/static/bd3a3ba2453792de2d4d1786ab30926c/3f8cf/1622464119723-b9350125-e10e-4be6-b175-4033e9f59c1f.png 1293w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/332833cb7540a0cc26d88385789fb4a3/5b481/1622464170293-832de223-f13d-451a-84d1-b621b8d737e3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.37837837837837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUUlEQVR42n2UC2+iQBSF/f8/ZpNNNtlHtl1RC1oftfIWUIqI2OqCgsr7bGYGa9emneTjHu7cOfeGhGmEYQhCURQoihyoKlRVReNlvdWg+9eczzWYUYnrVVZAfEiw38fI8hKHU4Yg2CGKDlf2bxsBDSLS0w5RsECRvqBIXl5jdlwjPfrIk2dkpzXSg0/faU1NXscqfQaKIxplCSSxiyQUke6Vd2Qf5Ah5pKCImA42InbRhk2YJ+u6WEMWMYh+JdKQRxrKmO0ddxqiQEO4VbFaq5DnCnhFhLfdsAmzo4ciVlDEOpK9htNOQxFfICZxqMFfq5BmCh4MGYOpDF5ldDUZgiLC/1tPuA1WmC0kqLaCsSlT5LkM21Wg2QoeTRlDaiBBUCV0NQk9TcK9LlP6ugxBnVwMLW+JjixCIN3OHVUGX8eeJr8aEHo6y53zZMLV2XC+WkJQRdrp/hPOBte8M7R9D7wy+fTQx0g0kvP/GZLv0p8qDF256E8YTBUMDRUjU0V/KmMdbJmhuXTRnIzQkR7RlsZokyiO0arhPtDNyQN+DAb41r3Hlw4Py1sxQ/dli+HUwtiy8Th7wshg+sGco69bGBosEkZUm1T3NAsdUcedbICb6FhuAjSq8yVQ5uRBL4I8OZ7/aKDMLvtlQWWRpUBVXvSbRSfULR03d7dodlv4I7TQFEjkwHVrzXM0f8Nz+H1HaOFXh6P8bHP43ubw9fYGluMww00QwnRcWI4LZ+XDsB36bns+jKcF5q4He+nBfHLgeD7mC1K7oLUkN1u4tCbcR/gHrLCR0SLWdc4AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/332833cb7540a0cc26d88385789fb4a3/fcda8/1622464170293-832de223-f13d-451a-84d1-b621b8d737e3.png\"\n        srcset=\"/static/332833cb7540a0cc26d88385789fb4a3/12f09/1622464170293-832de223-f13d-451a-84d1-b621b8d737e3.png 148w,\n/static/332833cb7540a0cc26d88385789fb4a3/e4a3f/1622464170293-832de223-f13d-451a-84d1-b621b8d737e3.png 295w,\n/static/332833cb7540a0cc26d88385789fb4a3/fcda8/1622464170293-832de223-f13d-451a-84d1-b621b8d737e3.png 590w,\n/static/332833cb7540a0cc26d88385789fb4a3/5b481/1622464170293-832de223-f13d-451a-84d1-b621b8d737e3.png 846w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>å¯ä»¥çœ‹å‡ºï¼Œé‡å»ºå¾ˆè‰°éš¾ï¼Œä¹Ÿæ˜¯ä¸ªé•¿æœŸå·¥ç¨‹ï¼Œä»Šå¤©å°±è®°å½•åˆ°è¿™é‡Œã€‚</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"å…³äº","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"å½å½æ­ªæ­ª","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"çŸ¥ä¹","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"ç´«ç«¹å½æ­ª","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}