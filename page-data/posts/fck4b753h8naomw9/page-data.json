{"componentChunkName":"component---src-templates-post-js","path":"/posts/fck4b753h8naomw9/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/fck4b753h8naomw9","relativePath":"posts/fck4b753h8naomw9","frontmatter":{"title":"å¯¹æ¥ OIDC æœåŠ¡çš„ä¸€èˆ¬æ€§æ­¥éª¤","stackbit_url_path":"posts/fck4b753h8naomw9","date":"2023-12-02T13:38:45","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>å‰é¢çš„åšæ–‡ä¸­åå¤æåŠä¸€äº›å¯¹æ¥ OIDC æœåŠ¡çš„èº«ä»½è®¤è¯å¹³å°çš„å…·ä½“æ¡ˆä¾‹ï¼Œå®ƒä»¬åœ¨å·¥ä½œä¸­å¯èƒ½ä¼šéå¸¸é¢‘ç¹åœ°ä½¿ç”¨åˆ°ï¼Œå› ä¸ºèº«ä»½è®¤è¯æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„åŠŸèƒ½ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨éƒ½éœ€è¦ã€‚ä»Šå¤©åœ¨è¿™é‡Œæ¥åšä¸ªå›é¡¾æ€»ç»“ï¼Œå¯¹å®ƒä»¬çš„ä¸€èˆ¬æ­¥éª¤è¿›è¡Œä¸€ä¸ªç»Ÿä¸€æ¢³ç†ã€‚\n<a name=wlbPp></a></p>\n<h1>ï¼ˆ1ï¼‰åœ¨èº«ä»½è®¤è¯å¹³å°æ³¨å†Œåº”ç”¨</h1>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨èº«ä»½è®¤è¯å¹³å°æ³¨å†Œåº”ç”¨ï¼Œè¿™æ˜¯æ¥å…¥èº«ä»½è®¤è¯çš„ç¬¬ä¸€æ­¥ã€‚åœ¨æ³¨å†Œåº”ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æä¾›åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚åº”ç”¨åç§°ã€åº”ç”¨å›¾æ ‡ã€åº”ç”¨æè¿°ç­‰ã€‚ä½†æ˜¯ï¼Œæœ€é‡è¦çš„æ˜¯æˆ‘ä»¬éœ€è¦æä¾›åº”ç”¨çš„å›è°ƒåœ°å€ï¼Œè¿™æ˜¯èº«ä»½è®¤è¯å¹³å°ç”¨æ¥å°†ç”¨æˆ·é‡å®šå‘å›åº”ç”¨çš„åœ°å€ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»™åº”ç”¨èµ·ä¸ªåå­—ï¼Œè¿™ä¸ªåå­—åœ¨èº«ä»½è®¤è¯å¹³å°ä¸­è¢«ç§°ä¸ºå®¢æˆ·ç«¯ IDã€‚<br /> <br />è¡¨ï¼šæ³¨å†Œåº”ç”¨æ—¶éœ€è¦æä¾›çš„ä¿¡æ¯</p>\n<table>\n<thead>\n<tr>\n<th><strong>ä¿¡æ¯</strong></th>\n<th><strong>è¯´æ˜</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ãŠ” åº”ç”¨åç§°</td>\n<td>åº”ç”¨çš„åç§°ï¼Œç”¨æ¥æ ‡è¯†ä¸€ä¸ªå®¢æˆ·ç«¯</td>\n</tr>\n<tr>\n<td>ğŸ”™ é‡å®šå‘åœ°å€</td>\n<td>æ‚¨çš„åº”ç”¨ç«¯ç‚¹å°†åœ¨ç”¨æˆ·è¢«æˆæƒåä»èº«ä»½è®¤è¯å¹³å°æ¥æ”¶ä¸€äº›å®‰å…¨ä¿¡æ¯ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p><a name=Y2lOJ></a></p>\n<h1>ï¼ˆ2ï¼‰åœ¨åº”ç”¨ä¸­é…ç½®èº«ä»½è®¤è¯å¹³å°çš„ä¿¡æ¯</h1>\n<p>ä¸€èˆ¬çš„ OIDC å®¢æˆ·ç«¯éƒ½ä¼šé»˜è®¤ä» OIDC æœåŠ¡å™¨çš„ /.well-known/openid-configuration ç«¯ç‚¹è·å– OIDC æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ï¼Œè¿™ä¸ªç«¯ç‚¹æ˜¯ OIDC åè®®è§„å®šçš„ï¼Œæ‰€æœ‰çš„ OIDC æœåŠ¡å™¨éƒ½å¿…é¡»å®ç°ã€‚åœ¨è¿™ä¸ªç«¯ç‚¹ä¸­ï¼ŒOIDC æœåŠ¡å™¨ä¼šè¿”å›ä¸€äº›é‡è¦çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ OIDC æœåŠ¡å™¨çš„åœ°å€ã€æ”¯æŒçš„ OIDC åè®®ç‰ˆæœ¬ã€æ”¯æŒçš„ OIDC æˆæƒç±»å‹ã€æ”¯æŒçš„ OIDC Response Typeã€æ”¯æŒçš„ OIDC Scopeã€æ”¯æŒçš„ OIDC ç­¾åç®—æ³•ã€æ”¯æŒçš„ OIDC JWK ç­¾åå¯†é’¥ç­‰ç­‰ã€‚OIDC å®¢æˆ·ç«¯ä¼šæ ¹æ®è¿™äº›ä¿¡æ¯æ¥é…ç½®è‡ªå·±çš„ OIDC å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿ä¸ OIDC æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚<br />å¦‚æœæ‚¨çš„ OIDC å®¢æˆ·ç«¯ä¸æ”¯æŒä» /.well-known/openid-configuration ç«¯ç‚¹è·å– OIDC æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥æ‰‹åŠ¨é…ç½® OIDC å®¢æˆ·ç«¯ï¼Œå°† OIDC æœåŠ¡å™¨çš„åœ°å€ã€æ”¯æŒçš„ OIDC åè®®ç‰ˆæœ¬ã€æ”¯æŒçš„ OIDC æˆæƒç±»å‹ã€æ”¯æŒçš„ OIDC Response Typeã€æ”¯æŒçš„ OIDC Scopeã€æ”¯æŒçš„ OIDC ç­¾åç®—æ³•ã€æ”¯æŒçš„ OIDC JWK ç­¾åå¯†é’¥ç­‰ä¿¡æ¯å¡«å†™åˆ° OIDC å®¢æˆ·ç«¯ä¸­ã€‚\n<a name=qUm4h></a></p>\n<h1>ï¼ˆ3ï¼‰æ„é€  OIDC æˆæƒè¯·æ±‚</h1>\n<p>åœ¨ OIDC åè®®ä¸­ï¼ŒOIDC æˆæƒè¯·æ±‚æ˜¯ OIDC å®¢æˆ·ç«¯å‘ OIDC æœåŠ¡å™¨å‘èµ·çš„ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œç”¨äºè¯·æ±‚ OIDC æœåŠ¡å™¨å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯å’Œæˆæƒã€‚OIDC æˆæƒè¯·æ±‚ä¸­åŒ…å«äº† OIDC å®¢æˆ·ç«¯çš„èº«ä»½ä¿¡æ¯ï¼Œä»¥åŠ OIDC å®¢æˆ·ç«¯è¯·æ±‚çš„ OIDC æˆæƒç±»å‹ã€OIDC Response Typeã€OIDC Scopeã€OIDC éšæœºæ•°ã€OIDC é‡å®šå‘åœ°å€ç­‰ä¿¡æ¯ã€‚<br />è¿™ä¸ªè¯·æ±‚åœ°å€å¯ä»¥ä» OIDC æœåŠ¡å™¨çš„ /.well-known/openid-configuration ç«¯ç‚¹ä¸­è·å–ï¼Œä¸€èˆ¬æ˜¯ <a href=\"https://oidc-server.com/connect/authorize\">https://oidc-server.com/connect/authorize</a> ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVR42l2PUU/CMBSF9/9/j4ovGhNAREUCS2Rj7QqkgwGzXcvae9vNzUCiRk++nJyX7+EE7hwvSsV3+S7fCymV1qXWpVKl0idj0DlAd2n8R1BVFaITUpe6KrWx1gF452pEj+iNBQtoLFTG1nXT/U2gtXbeAzpXe2gMNNb4k/EnWxtooGnbtus+L7Tfzs8IKmOwOMTjYbYIeTJaR/2MPG7o3Ybcb1dDmYUimws+E3wus7DgU5mFdk9bh7/ycjRYjAbL8Zi/v+bpE6cPLL4l0RWLeizupdFNGl1vaV/yEA+rVhw7786yUgoAloTECYmThKRsJ+n6Y8qKCT08x/lgLWaseKPHF1ZMNmKu4Pjz+QtxvEympqunaQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/e35304b2800f7d97012064d7ca5233b5/fcda8/1701523551136-035dfe0b-f385-46f5-88e7-9c430da175ec.png\"\n        srcset=\"/static/e35304b2800f7d97012064d7ca5233b5/12f09/1701523551136-035dfe0b-f385-46f5-88e7-9c430da175ec.png 148w,\n/static/e35304b2800f7d97012064d7ca5233b5/e4a3f/1701523551136-035dfe0b-f385-46f5-88e7-9c430da175ec.png 295w,\n/static/e35304b2800f7d97012064d7ca5233b5/fcda8/1701523551136-035dfe0b-f385-46f5-88e7-9c430da175ec.png 590w,\n/static/e35304b2800f7d97012064d7ca5233b5/efc66/1701523551136-035dfe0b-f385-46f5-88e7-9c430da175ec.png 885w,\n/static/e35304b2800f7d97012064d7ca5233b5/c83ae/1701523551136-035dfe0b-f385-46f5-88e7-9c430da175ec.png 1180w,\n/static/e35304b2800f7d97012064d7ca5233b5/769f8/1701523551136-035dfe0b-f385-46f5-88e7-9c430da175ec.png 1924w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />ä¸€ä¸ªæˆæƒè¯·æ±‚çš„ URL ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<p><a href=\"https://oidc-server.com/connect/authorize\">https://oidc-server.com/connect/authorize</a>?\nclient_id=client_id&#x26;\nresponse_type=code&#x26;\nscope=openid%20profile&#x26;\nredirect_uri=https%3A%2F%2Fclient.com%2Fcallback&#x26;\nstate=state&#x26;</p>\n<p>è¿™æ—¶æµè§ˆå™¨å°±ä¼šè¢«é‡å®šå‘è‡³èº«ä»½è®¤è¯å¹³å°çš„åŸŸï¼Œè€Œèº«ä»½è®¤è¯å¹³å°æœ€ç»ˆä¼šå±•ç¤ºä¸€ä¸ªç™»å½•é¡µé¢ï¼Œè®©ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼ˆæˆ–è€…å…¶ä»–å‡­æ®ï¼‰è¿›è¡Œç™»å½•ã€‚ç™»å½•æˆåŠŸåï¼Œèº«ä»½è®¤è¯å¹³å°ä¼šå°†ç”¨æˆ·é‡å®šå‘å›åº”ç”¨çš„å›è°ƒåœ°å€ï¼Œå¹¶åœ¨ URL ä¸­å¸¦ä¸Šæˆæƒç å’ŒçŠ¶æ€ç ï¼Œå¦‚ï¼š</p>\n<p><a href=\"https://client.com/callback\">https://client.com/callback</a>?\ncode=code&#x26;\nstate=state</p>\n<p><a name=xQvac></a></p>\n<h1>ï¼ˆ4ï¼‰æ„é€  OIDC Token è¯·æ±‚</h1>\n<p>åœ¨ä¸Šé¢çš„ä¸€æ­¥ä¸­ï¼Œä½ çš„åº”ç”¨å·²ç»æ¥æ”¶åˆ°äº†æ¥è‡ª OIDC æœåŠ¡å™¨çš„æˆæƒç ï¼Œæ¥ä¸‹æ¥ä½ çš„åº”ç”¨éœ€è¦ä½¿ç”¨è¿™ä¸ªæˆæƒç æ¥å‘ OIDC æœåŠ¡å™¨è¯·æ±‚ OIDC Tokenã€‚OIDC Token è¯·æ±‚æ˜¯ OIDC å®¢æˆ·ç«¯å‘ OIDC æœåŠ¡å™¨å‘èµ·çš„ç¬¬äºŒä¸ªè¯·æ±‚ï¼Œç”¨äºè¯·æ±‚ OIDC æœåŠ¡å™¨é¢å‘ OIDC Tokenã€‚OIDC Token è¯·æ±‚ä¸­åŒ…å«äº† OIDC å®¢æˆ·ç«¯çš„èº«ä»½ä¿¡æ¯ï¼Œä»¥åŠ OIDC å®¢æˆ·ç«¯è¯·æ±‚çš„ OIDC Token ç±»å‹ã€OIDC æˆæƒç ã€OIDC é‡å®šå‘åœ°å€ç­‰ä¿¡æ¯ã€‚<br />è¿™ä¸ªè¯·æ±‚åœ°å€å¯ä»¥ä» OIDC æœåŠ¡å™¨çš„ /.well-known/openid-configuration ç«¯ç‚¹ä¸­è·å–ï¼Œä¸€èˆ¬æ˜¯ <a href=\"https://oidc-server.com/connect/token\">https://oidc-server.com/connect/token</a> ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.486486486486484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVR42l2Oa2+CMBiF+f8/aM5MN+Mubk6RZC6A2lIKggJyKbT0gnVRl2zx5Mk5X94neQ2lVEPZPs3ifZJmh5KQqq7PTc5dU8qFuNJyfoPBuShKkuVlllekZpTxlkshFOeStqKhjLK2oYw0VEh5+o2+jsE5747HC0p1UnT8jOKyE7KT+t+tPt3GUEoFyPMBPBS+F33gyELxFESveDeL0q+C4JIEReWXBBckSCqQEa9oQqHYRa5KbM3syavz/hYsTW85jsEErwfB5hG6PbTqI/ceuX3o9rbuMC1B3oRcNlofL3LLAvt7bZnO/HO1MBNsB/gFeU8eHK7WdwA8+GgM4RDCAfJGUW5TUWit/94Ow63jugBC23HCMIpLB2Umyhab3cSNn/3MQukcJlOYzpztCCVz1Ymr/APlR4Id5E8s+AAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/4f71c9a06bf11294e020f1b251af97f0/fcda8/1701523688675-c60afd10-b8bf-4a92-badf-96f9ebc2844c.png\"\n        srcset=\"/static/4f71c9a06bf11294e020f1b251af97f0/12f09/1701523688675-c60afd10-b8bf-4a92-badf-96f9ebc2844c.png 148w,\n/static/4f71c9a06bf11294e020f1b251af97f0/e4a3f/1701523688675-c60afd10-b8bf-4a92-badf-96f9ebc2844c.png 295w,\n/static/4f71c9a06bf11294e020f1b251af97f0/fcda8/1701523688675-c60afd10-b8bf-4a92-badf-96f9ebc2844c.png 590w,\n/static/4f71c9a06bf11294e020f1b251af97f0/efc66/1701523688675-c60afd10-b8bf-4a92-badf-96f9ebc2844c.png 885w,\n/static/4f71c9a06bf11294e020f1b251af97f0/c83ae/1701523688675-c60afd10-b8bf-4a92-badf-96f9ebc2844c.png 1180w,\n/static/4f71c9a06bf11294e020f1b251af97f0/565cc/1701523688675-c60afd10-b8bf-4a92-badf-96f9ebc2844c.png 1806w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />ä¸€ä¸ª OIDC Token è¯·æ±‚çš„ URL ç¤ºä¾‹å¦‚ä¸‹ï¼š\nlatex\n<a href=\"https://oidc-server.com/connect/token\">https://oidc-server.com/connect/token</a>?\nclient_id=client_id&#x26;\nclient_secret=client_secret&#x26;\ngrant_type=authorization_code&#x26;\ncode=code&#x26;\nredirect_uri=https%3A%2F%2Fclient.com%2Fcallback</p>\n<p>è¿™ä¸ªè¯·æ±‚å¯ä»¥ä½¿ç”¨ HTTP GET æˆ–è€… HTTP POST æ–¹æ³•å‘é€ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ HTTP POST æ–¹æ³•å‘é€è¿™ä¸ªè¯·æ±‚ï¼Œå› ä¸ºè¿™ä¸ªè¯·æ±‚ä¸­åŒ…å«äº†å®¢æˆ·ç«¯çš„æœºå¯†ä¿¡æ¯ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œå¦‚æœä½¿ç”¨ HTTP GET æ–¹æ³•å‘é€è¿™ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆè¿™äº›æœºå¯†ä¿¡æ¯ä¼šæš´éœ²åœ¨ URL ä¸­ï¼Œè¿™æ˜¯éå¸¸å±é™©çš„ã€‚</p>\n<p>ä»¥ä¸Šè¯·æ±‚å¾—åˆ°çš„æˆåŠŸå“åº”å¾€å¾€æ˜¯ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„æ ¼å¼ï¼š</p>\n<p>json\n{\nid_token: eyJhbGciOi...,\naccess_token: eyJhbGciOi...,\nexpires_in: 1800,\ntoken_type: Bearer,\nrefresh_token: D8C63836215563320F809E29EB57D1B23DD3792722C6DFE07B99199E154B4412-1,\nscope: openid email profile offline_access\n}</p>\n<p><a name=AX6SB></a></p>\n<h1>ï¼ˆ5ï¼‰ä½¿ç”¨ OIDC Token è¯·æ±‚ OIDC ç”¨æˆ·ä¿¡æ¯</h1>\n<p>åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ°ä» OIDC æœåŠ¡å™¨è·å–åˆ°äº† OIDC Tokenï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™ä¸ª OIDC Token æ¥è¯·æ±‚ OIDC ç”¨æˆ·ä¿¡æ¯ã€‚OIDC ç”¨æˆ·ä¿¡æ¯è¯·æ±‚æ˜¯ OIDC å®¢æˆ·ç«¯å‘ OIDC æœåŠ¡å™¨å‘èµ·çš„ç¬¬ä¸‰ä¸ªè¯·æ±‚ï¼Œç”¨äºè¯·æ±‚ OIDC æœåŠ¡å™¨è¿”å› OIDC ç”¨æˆ·ä¿¡æ¯ã€‚OIDC ç”¨æˆ·ä¿¡æ¯è¯·æ±‚ä¸­åŒ…å«äº† OIDC å®¢æˆ·ç«¯çš„èº«ä»½ä¿¡æ¯ï¼Œä»¥åŠ OIDC å®¢æˆ·ç«¯è¯·æ±‚çš„ OIDC Tokenã€OIDC ç”¨æˆ·ä¿¡æ¯ç­‰ä¿¡æ¯ã€‚</p>\n<p>è¿™ä¸ªè¯·æ±‚åœ°å€å¯ä»¥ä» OIDC æœåŠ¡å™¨çš„ /.well-known/openid-configuration ç«¯ç‚¹ä¸­è·å–ï¼Œä¸€èˆ¬æ˜¯ <a href=\"https://oidc-server.com/connect/userinfo\">https://oidc-server.com/connect/userinfo</a> ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.189189189189186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABeElEQVR42k2O2W7aQBhG/f4P1Co0jUKRQiDEuKGF8TpeMF7GMxjq2X87DTdRjs7Nd3GkzzHWDgM/nqq8LItjWTdtRxnpaEu6jrKWdNd/Axfy04GLTx2lNaF93dKyIqy/DJwLKYVUXEghJReCC6mUFlIJoYy10xccrTUAWABrR2un27ITwAQwAkxaW6WNtaC0UcoAjO9fcLTSfd8zxqTuGc8usuyuMbncPA9HofppGmE042jGycJoADSANlbaUTsAEMTxn/0BH7Gfb/d4k3UobJeoXoTtc9K5mLop9ZLuFVM3Y28p9TL21l4xV2fHnNlp5yWbFXpaFN7vJtw2ybLByzJ6LIKfefCjjB5P8bwIH4rwgaRrXgW2ziYx3G6b/tzsd+l2k3kb7K7LnUfwugjvc3+W+zOMvqXo+ymeZ/5d5t/l/qwI7lnyYobzLbYARVn+PSAUhnuEoiRlvIrIKmNe2D4fqjmqFyn1IrIKmqeYvKDqF+5cZcVH/B97OrYxxFf6AQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/68eebe95dea64a4004e648a3ecc56be3/fcda8/1701523800514-6ef5adf7-2e6c-4c27-832a-21b70e41234c.png\"\n        srcset=\"/static/68eebe95dea64a4004e648a3ecc56be3/12f09/1701523800514-6ef5adf7-2e6c-4c27-832a-21b70e41234c.png 148w,\n/static/68eebe95dea64a4004e648a3ecc56be3/e4a3f/1701523800514-6ef5adf7-2e6c-4c27-832a-21b70e41234c.png 295w,\n/static/68eebe95dea64a4004e648a3ecc56be3/fcda8/1701523800514-6ef5adf7-2e6c-4c27-832a-21b70e41234c.png 590w,\n/static/68eebe95dea64a4004e648a3ecc56be3/efc66/1701523800514-6ef5adf7-2e6c-4c27-832a-21b70e41234c.png 885w,\n/static/68eebe95dea64a4004e648a3ecc56be3/c83ae/1701523800514-6ef5adf7-2e6c-4c27-832a-21b70e41234c.png 1180w,\n/static/68eebe95dea64a4004e648a3ecc56be3/56caf/1701523800514-6ef5adf7-2e6c-4c27-832a-21b70e41234c.png 1712w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />![OIDC ç”¨æˆ·ä¿¡æ¯è¯·æ±‚](../resources/oidc-userinfo.png#id=z4Stj&#x26;originalType=binaryâˆ¶=1&#x26;rotation=0&#x26;showTitle=true&#x26;status=done&#x26;style=none&#x26;title=OIDC%20%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E8%AF%B7%E6%B1%82 OIDC ç”¨æˆ·ä¿¡æ¯è¯·æ±‚)</p>\n<p>ä¸€ä¸ª OIDC ç”¨æˆ·ä¿¡æ¯è¯·æ±‚çš„ URL ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<p>latex\n<a href=\"https://oidc-server.com/connect/userinfo\">https://oidc-server.com/connect/userinfo</a>?\naccess_token=access_token</p>\n<p>è¿™ä¸ªè¯·æ±‚å¯ä»¥ä½¿ç”¨ HTTP GET æˆ–è€… HTTP POST æ–¹æ³•å‘é€ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ HTTP GET æ–¹æ³•å‘é€è¿™ä¸ªè¯·æ±‚ï¼Œå› ä¸ºè¿™ä¸ªè¯·æ±‚ä¸­ä¸åŒ…å«ä»»ä½•æœºå¯†ä¿¡æ¯ã€‚</p>\n<p>ä»¥ä¸Šè¯·æ±‚å¾—åˆ°çš„æˆåŠŸå“åº”å¾€å¾€æ˜¯ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„æ ¼å¼ï¼š</p>\n<p>json\n{\nsub: d9df1959-7a18-4753-8642-c0ec0d20ae67,\nemail: <a href=\"mailto:jeff.tian@outlook.com\">jeff.tian@outlook.com</a>,\npreferred_username: jeff-tian,\nname: jeff,\nemail_verified: true\n}</p>\n<p><a name=tPLo1></a></p>\n<h1>ï¼ˆ6ï¼‰è°ƒç”¨é€€å‡ºç«¯ç‚¹</h1>\n<p>å½“æ‚¨æƒ³è¦ç™»å‡ºç”¨æˆ·æ—¶ï¼Œæ‚¨éœ€è¦å°†ç”¨æˆ·é‡å®šå‘åˆ°èº«ä»½è®¤è¯å¹³å°çš„ç»“æŸä¼šè¯ç«¯ç‚¹ï¼ŒåŒæ—¶å¸¦æœ‰ä»ä»¤ç‰Œç«¯ç‚¹è·å–çš„id_tokenä»¥åŠåº”ç”¨ç¨‹åºçš„URLã€‚ä¾‹å¦‚ï¼š</p>\n<p>latex\n<a href=\"https://oidc-server.com/connect/endsession?id_token_hint=$%7Bid_token%7D&#x26;post_logout_redirect_uri=$%7BencodeURIComponent(%E5%BA%94%E7%94%A8%E5%9C%B0%E5%9D%80)%7D\">https://oidc-server.com/connect/endsession?id_token_hint=${id_token}&#x26;post_logout_redirect_uri=${encodeURIComponent(åº”ç”¨åœ°å€)}</a></p>\n<p>å…·ä½“çš„é€€å‡ºç™»å½•ç«¯ç‚¹åœ°å€å¯ä»¥ä» OIDC æœåŠ¡å™¨çš„ /.well-known/openid-configuration ç«¯ç‚¹ä¸­è·å–ï¼Œä¸€èˆ¬æ˜¯ <a href=\"https://oidc-server.com/connect/endsession\">https://oidc-server.com/connect/endsession</a> ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR42l2LiU7CQBRF+/9/YzQxSFASgwoUxIhU2k6nKy3d2+nMdJa2SiDEeHPuy8tNjsI550KUVeUdQscLgjBKsizN8yS93LKqMKVXGkKuKE3TUNomWXFM8/CYljVCmGDSUsowoaghqMGY0AaTGuGW8eFPFIQQY6w7pz9VSHn+uq6Tl7Xv+17Kvu+H/zLnPIrCIi8qfMiQlSEY5lpU7OPKLHEgJBWSckHOUFYz3hBWctmeZCEEsIAFbS9wDfcTeNsg14xoBtMViBdWvICJaicrEM/d7CModn6+LXDIRavUCPGqgJv1Xl3s5m/u1/YA1cB5cawpNMeGfmeZDzaYQHMMzJFvP+fhlhfHoa4HKZWyRjxL3PclWC/tjarPXyNNi+yZb0498xHu78H3rW8+ucbE1keO/mBoN64xaSPrV/4BxROBy8KRi5wAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8f03568f553e9e5f64c448a180a0351b/fcda8/1701523929010-9a2242af-e935-46a6-aac0-a54f9d79266f.png\"\n        srcset=\"/static/8f03568f553e9e5f64c448a180a0351b/12f09/1701523929010-9a2242af-e935-46a6-aac0-a54f9d79266f.png 148w,\n/static/8f03568f553e9e5f64c448a180a0351b/e4a3f/1701523929010-9a2242af-e935-46a6-aac0-a54f9d79266f.png 295w,\n/static/8f03568f553e9e5f64c448a180a0351b/fcda8/1701523929010-9a2242af-e935-46a6-aac0-a54f9d79266f.png 590w,\n/static/8f03568f553e9e5f64c448a180a0351b/efc66/1701523929010-9a2242af-e935-46a6-aac0-a54f9d79266f.png 885w,\n/static/8f03568f553e9e5f64c448a180a0351b/c83ae/1701523929010-9a2242af-e935-46a6-aac0-a54f9d79266f.png 1180w,\n/static/8f03568f553e9e5f64c448a180a0351b/2ed34/1701523929010-9a2242af-e935-46a6-aac0-a54f9d79266f.png 1776w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />![OIDC é€€å‡ºç«¯ç‚¹](../resources/oidc-logout.png#id=TNBcw&#x26;originalType=binaryâˆ¶=1&#x26;rotation=0&#x26;showTitle=true&#x26;status=done&#x26;style=none&#x26;title=OIDC%20%E9%80%80%E5%87%BA%E7%AB%AF%E7%82%B9 OIDC é€€å‡ºç«¯ç‚¹)</p>\n<p>ä¸€ä¸ªå…¸å‹çš„é€€å‡ºæ—¶åºå›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><a name=56ffb8bf></a></p>\n<h1>ç›¸å…³æ•…éšœæ’é™¤æŒ‡å¼•</h1>\n<p>è¿™é‡Œåˆ—å‡ºä¸€äº›å¸¸å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠè§£å†³æ–¹æ¡ˆï¼š</p>\n<p><a name=84cb7b6b></a></p>\n<h2>ä¸ºä»€ä¹ˆæ— æ³•ä»ç”¨æˆ·ä¿¡æ¯æ¥å£é‡Œè·å–åˆ° Email</h2>\n<p>æ£€æŸ¥åœ¨æ„é€ æˆæƒè¯·æ±‚çš„ç¯èŠ‚ï¼Œä¼ é€’ç»™æˆæƒç«¯ç‚¹çš„èŒƒå›´ï¼ˆscopeï¼‰ã€‚å¦‚æœæ²¡æœ‰è¯·æ±‚ç”µå­é‚®ä»¶ï¼ˆemailï¼‰ï¼Œé‚£ä¹ˆå®ƒå°±ä¸ä¼šè¿”å›ã€‚å…¸å‹çš„èŒƒå›´æ˜¯ openid profile emailã€‚</p>\n<p><a name=3b2b42f1></a></p>\n<h2>ä¸ºä»€ä¹ˆæ— æ³•é€€å‡º</h2>\n<p>æ£€æŸ¥æ‚¨çš„åº”ç”¨ç¨‹åºæ˜¯å¦æ­£ç¡®é…ç½®ï¼Œç‰¹åˆ«æ˜¯å…³äºç»“æŸä¼šè¯ç«¯ç‚¹çš„éƒ¨åˆ†ã€‚å¦åˆ™ï¼Œå¾ˆå¯èƒ½åªæ˜¯å‡åœ°é‡å®šå‘åˆ°äº†ä¸€ä¸ªé€€å‡ºç™»å½•çš„é¡µé¢è€Œå·²ï¼Œä¸€æ—¦ç‚¹å‡»é‡æ–°ç™»å½•ï¼Œéƒ½ä¸éœ€è¦è¾“å…¥ç”¨æˆ·å‡­æ®ï¼Œå°±ç›´æ¥è¿›å…¥äº†ç™»å½•æ€ã€‚</p>\n<p><a name=eug4o></a></p>\n<h1>æ€»ç»“</h1>\n<p>æœ¬æ–‡æ€»ç»“äº†æ¥å…¥ OIDC æœåŠ¡çš„ä¸€èˆ¬æ­¥éª¤ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åœ¨èº«ä»½è®¤è¯å¹³å°æ³¨å†Œåº”ç”¨ï¼šæä¾›åº”ç”¨åŸºæœ¬ä¿¡æ¯å’Œå›è°ƒåœ°å€ã€‚</li>\n<li>åœ¨åº”ç”¨ä¸­é…ç½®èº«ä»½è®¤è¯å¹³å°ä¿¡æ¯ï¼šé»˜è®¤ä» OIDC æœåŠ¡å™¨çš„ /.well-known/openid-configuration è·å–é…ç½®ä¿¡æ¯ï¼Œæˆ–æ‰‹åŠ¨é…ç½® OIDC å®¢æˆ·ç«¯ã€‚</li>\n<li>æ„é€  OIDC æˆæƒè¯·æ±‚ï¼šåŒ…æ‹¬å®¢æˆ·ç«¯èº«ä»½ä¿¡æ¯ã€æˆæƒç±»å‹ã€å“åº”ç±»å‹ç­‰ï¼Œé‡å®šå‘è‡³èº«ä»½è®¤è¯å¹³å°è¿›è¡Œç”¨æˆ·ç™»å½•éªŒè¯ã€‚</li>\n<li>æ„é€  OIDC Token è¯·æ±‚ï¼šä½¿ç”¨æˆæƒç å‘ OIDC æœåŠ¡å™¨è¯·æ±‚ OIDC Tokenï¼ŒåŒ…æ‹¬èº«ä»½ä¿¡æ¯ã€æˆæƒç ç­‰ã€‚</li>\n<li>ä½¿ç”¨ OIDC Token è¯·æ±‚ OIDC ç”¨æˆ·ä¿¡æ¯ï¼šä½¿ç”¨ OIDC Token å‘ OIDC æœåŠ¡å™¨è¯·æ±‚ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·IDã€é‚®ç®±ã€ç”¨æˆ·åç­‰ã€‚</li>\n<li>è°ƒç”¨é€€å‡ºç«¯ç‚¹ï¼šå½“éœ€è¦é€€å‡ºç”¨æˆ·æ—¶ï¼Œé‡å®šå‘è‡³ OIDC æœåŠ¡å™¨çš„ç»“æŸä¼šè¯ç«¯ç‚¹ï¼Œå¹¶ä¼ é€’ id_token å’Œåº”ç”¨å›è°ƒåœ°å€ã€‚</li>\n</ol>\n<p>æ–‡ç« è¿˜æä¾›äº†ä¸€äº›å¸¸è§æ•…éšœæ’é™¤æŒ‡å¼•ï¼Œä¾‹å¦‚æ— æ³•è·å–é‚®ç®±ä¿¡æ¯æˆ–é€€å‡ºç™»å½•é—®é¢˜ã€‚</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"å…³äº","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"å½å½æ­ªæ­ª","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"çŸ¥ä¹","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"ç´«ç«¹å½æ­ª","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}