{"componentChunkName":"component---src-templates-post-js","path":"/posts/fiisg1molfi17zrc/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/fiisg1molfi17zrc","relativePath":"posts/fiisg1molfi17zrc","frontmatter":{"title":"四个测试用例解决实际问题","stackbit_url_path":"posts/fiisg1molfi17zrc","date":"2024-03-10T06:29:29","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>我突然意识到，自己的程序员生涯早就已经超过十年了，但却从来没有使用程序来为自己解决过问题。难道写程序只能用于打工吗？最近终于尝试通过写代码为自己解决一些实际问题，虽然只是一个非常非常小的开始，但效果令我极度满意。\n<a name=wrh3I></a></p>\n<h1>问题</h1>\n<p>我有一本书籍的 markdown 源码，我现在需要将这本书中所有的代码导出成文件，并且按照章节命名。\n<a name=oZ797></a></p>\n<h1>尝试不写代码</h1>\n<p>我当然不只一次听过，拿着锤子，就会觉得所有的问题都是钉子等等这种嘲笑程序员总是喜欢通过写代码的方式来解决问题的现象。所以针对以上问题，我首先尝试的是，能不能不写代码完成以上任务。我想了很久，没有头绪，于是就去问了人工智能 GPT-4。<br />感觉人工智能就是一个超级厉害的程序员，我问了它这个问题，它还是建议我写一个脚本，并给出了一段 python 脚本。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUklEQVR42nWS204TURSG+yLGcOGtibyNF0BEUDwEMcan8ECUQ4waonihJD6B9IBpKi3idGgp085M2zl0Du1Mh9JCnUOnv9m70rQiK/mz/jV7ry9r7UwkDPsgIRot3F1NYO51HPMrCcyvxHFvfQeP3ydxf30Hs69iWFjbwcLa4Iz4pxspfE2KmHq+jXRegts9RaT3F5gumrix+AXXH37G5KMt6ieXtqi/ducTrtz6gKuzHzExt0n9xO1NWjNiA1WzjeP2GYIgQOR8QkFv4cGb71RL75JUTzZSWHybxPxqAtMvo5hejmJmOYqpF9uYWY7h5rNvMJwzjEak3x8ASfb9AEHQg+cHcF0Pv10PnufDD3pwPY9+I57cIWeu5yPs90GGIv1EQ2AYhsjnDlEq8VS5gxyOChwYhgHPi8hmWTBMFof5Q7AsS+90OqdD0DknMlr83NtHNBpHKvUDuVweLHuAdDqD/f1fyGT2aCYgnhcgywqOW20MWi8BclwRsXgcu7tplEqDJkVRIQgilaLUoKo1qEoNum6i2XQw+mTjK/dCaJpOmyoVCYXCEcrlCjTNgG07VK1WG42GjXrdonW3614G7NPRNd1CVTKg6w40rUmzYR6j3jiBWW9Rb9ZPaE180+mMwS6sLEk6mCyHfJ4HV6yCF1RUqgbKFQ2y0oBas6GoFs2yYsGyToZAEr4XjP82pumgWJJR4mUIggpRrA1BRDWtOZSi2rDs9hjwwsqybIArSpDkOqqSCU13xiCj0H+B/11ZFBVkWQ6Vqj6calQDmH0pkEz4Bwb6pBK5KHpKAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/a45ade15d75771eb5dbba5fcb50e37f0/fcda8/1710052132190-bf1bd83f-99b1-4b6a-946f-12f81bc93228.png\"\n        srcset=\"/static/a45ade15d75771eb5dbba5fcb50e37f0/12f09/1710052132190-bf1bd83f-99b1-4b6a-946f-12f81bc93228.png 148w,\n/static/a45ade15d75771eb5dbba5fcb50e37f0/e4a3f/1710052132190-bf1bd83f-99b1-4b6a-946f-12f81bc93228.png 295w,\n/static/a45ade15d75771eb5dbba5fcb50e37f0/fcda8/1710052132190-bf1bd83f-99b1-4b6a-946f-12f81bc93228.png 590w,\n/static/a45ade15d75771eb5dbba5fcb50e37f0/efc66/1710052132190-bf1bd83f-99b1-4b6a-946f-12f81bc93228.png 885w,\n/static/a45ade15d75771eb5dbba5fcb50e37f0/c83ae/1710052132190-bf1bd83f-99b1-4b6a-946f-12f81bc93228.png 1180w,\n/static/a45ade15d75771eb5dbba5fcb50e37f0/40e0a/1710052132190-bf1bd83f-99b1-4b6a-946f-12f81bc93228.png 2261w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=nzAnn></a></p>\n<h1>选择编程语言</h1>\n<p>人工智能建议我用 python，我没有采纳。因为我对它不熟悉，并且工作中也用不到。我希望自己能够在解决这个问题时，还能够对我工作有所帮助。我最近工作中使用的 C#，也不熟悉，正好可以在业余时间解决自己的问题时，学习学习 C#，所以准备采用 C# 来完成这个任务。<br />其实我纠结了很久，才放弃了 nodejs。nodejs 我比较熟悉，但是这本书的内容非常多，A4 纸打印出来有 600多页，我的直觉是采用 nodejs，会花比较长的时间才能出结果，不够酷。当然，最重要的还是想学习一下 C#，后来的结果也是，快到让一个有经验的 nodejs 程序员非常不适应。\n<a name=gURGp></a></p>\n<h1>第一个测试用例</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7ce02a1c982cda94878639b8a7cb3310/76a18/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB10lEQVR42n1S7Y6jMBDrq+xuM5OvmYRQaEuvW6j24/2fyKekFO3dSffDMiDieMbeDcOIEAOG84BlnvF+vSLGCOccLDN8yBAdkeWAko7I0iPFDkwMyxZEBDL0YCLsSinwzkNUcJ4mTNMEVYW1FsQEkYysA2Is8Doi6QlZJ2Q9Q2JqIsaYDbtSenjvoUVxm2+43++YlwWSEoxlcExgr2CfIHJFlF/w8YIgEwwxXt7e8LrfN7xUwa4r8CHgeDnh4+MDt3nGNAy4OIvChJ4MrqnH6DwyvaLjtxV7FEsolhsOzBjJYBdCgHMWqhnnyzty6aBMWGiPk2McyeASFJMXnGLAUT2O4nFKofFRHE7icY0BMxN2ddycE3IpuFwX3JcF4ziiU4UjgmdC0Q7ReVhj2jdHT/4TtoZS0zwcBtyWBZ+fn/j++mqj564DWQZZCxczbEggEZgUQRpAWUApPt5TRBRpQe5EtYVSR69cUS9h5oaaokoHZ11LsVWksdmqstWmhtL3/Sb2k6uo8w/hIF3rI8vDVQWv7DS23j7r0wSfIj/RBJ1rP0od+elwPbjx0/VPwf86tBaSDgixOlz3V91J2NwGlXZuLXb5R3BDCG1k03bFoLpTu+Lv59Xhb8k6a3rOiPQKAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/7ce02a1c982cda94878639b8a7cb3310/fcda8/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png\"\n        srcset=\"/static/7ce02a1c982cda94878639b8a7cb3310/12f09/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png 148w,\n/static/7ce02a1c982cda94878639b8a7cb3310/e4a3f/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png 295w,\n/static/7ce02a1c982cda94878639b8a7cb3310/fcda8/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png 590w,\n/static/7ce02a1c982cda94878639b8a7cb3310/efc66/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png 885w,\n/static/7ce02a1c982cda94878639b8a7cb3310/c83ae/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png 1180w,\n/static/7ce02a1c982cda94878639b8a7cb3310/76a18/1710049602917-053a3716-7577-45cd-a994-38478892c04c.png 1691w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />我先写了一个非常简单的测试用例，写好了自己期待的工作方式。对于一个简单的 markdown 文件，一共有两个代码段，分别出现在第一章和第二章的内容里。它能够提取出这两个代码段，并且能够为这两个代码段起出相应的文件名。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8262c8248bd31ff3444984dac6554163/4cd27/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABO0lEQVR42m2SWZKDMAxEfRaQ991sSSr3v1ZPySFAkfl4JVvIrQUJrQ1sLDChQdkCZTyUlFBKQUoJqc7zsixwzoGIuu+IuSCMsbCxwsYIqQhEY//wffCFRd7vdxcdx/9jGGGMgfcRIRfElBBjhPf+yHitpLWGWkq/c2ec5I7QWiOkhFQrgvc7DpzoLhhixLZteD5feDweqLV+irggjLVIuSLXhpQTYnBIwcE7d85mb7m1Cc/XC9M8Y54almVCbQ2lnghtLbTPUL6ApAQphVFKDETdHpDEuq5orfYkRBLDMPR5XukzdNYihADvQ7fW2p+h8z3ljHXdsG5br4xbZN8VwY+N0z/DPQSPFSKUUnaxCdM0d0qtKOVE8F5xVZkzpNTPjNtneK2QfRyT9m3guE/7t7/8H1+Ru713ct/DP1obKKA5lMh5AAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8262c8248bd31ff3444984dac6554163/fcda8/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png\"\n        srcset=\"/static/8262c8248bd31ff3444984dac6554163/12f09/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png 148w,\n/static/8262c8248bd31ff3444984dac6554163/e4a3f/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png 295w,\n/static/8262c8248bd31ff3444984dac6554163/fcda8/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png 590w,\n/static/8262c8248bd31ff3444984dac6554163/efc66/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png 885w,\n/static/8262c8248bd31ff3444984dac6554163/c83ae/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png 1180w,\n/static/8262c8248bd31ff3444984dac6554163/4cd27/1710049864343-ddb3304d-0fec-4b1e-8ec7-72d2ec7270e8.png 2039w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />测试代码是这样的：\ncsharp\n[Fact]\npublic void Should_DistillCodeBlocks_SimpleCase()\n{\n// arrange\nvar testDirectory = AppDomain.CurrentDomain.BaseDirectory;\nvar fixturesDirectory = Path.Combine(testDirectory ?? throw new InvalidOperationException(), .., .., ..,\nfixtures);\nconst string inputFileName = simple.md;\nvar fullInputFilePath = Path.Combine(fixturesDirectory, inputFileName);\nvar input = File.ReadAllText(fullInputFilePath);</p>\n<pre><code>    // act\n    var distiller = new CodeBlockDistiller();\n    var actual = distiller.Distill(input, 1);\n\n    // assert\n    actual.Count.Should().Be(2);\n\n    actual[0].Language.Should().Be(csharp);\n    actual[0].Code.Should().Be(Console.WriteLine(Hello, World!);n);\n    actual[0].GetFileName().Should().Be(第1章_第1段.cs);\n\n    actual[1].Language.Should().Be();\n    actual[1].Code.Should().Be(Hellon);\n    actual[1].GetFileName().Should().Be(第2章_第1段.txt);\n}\n</code></pre>\n<p><a name=DG9xC></a></p>\n<h1>代码段的设计</h1>\n<p>首先，我为它设计了几个字段，分别是章、节、节内序号，以及程序代码的语言和代码内容本身。然后，又添加了几个方法，最终如下：\ncsharp\nnamespace MarkdownBook;</p>\n<p>public class CodeBlock\n{\npublic int Chapter { get; set; }\npublic int Section { get; set; }\npublic int Index { get; set; }\npublic string? Language { get; init; }\npublic string? Code { get; set; }</p>\n<pre><code>public string GetFileName()\n{\n    if (Section == 0)\n    {\n        return $第{Chapter}章_第{Index}段.{CodeFilenameExtensionHelper.GetExtensionByLanguage(Language)};\n    }\n\n    return $第{Chapter}章_第{Section}节_第{Index}段.{CodeFilenameExtensionHelper.GetExtensionByLanguage(Language)};\n}\n\nprivate string? GetFileContent()\n{\n    return Code;\n}\n\npublic void Save(string path)\n{\n    File.WriteAllText(Path.Combine(path, GetFileName()), GetFileContent());\n}\n</code></pre>\n<p>}</p>\n<p><a name=LjuDn></a></p>\n<h1>扫描文件的实现：按行处理</h1>\n<p>自己在很多年前写过一些语法解析器，都是逐字符读取的。又为 markdown 解析器程序写过一些插件，是基于 markdown 语法树的。这次的代码提取，应该采用什么方式呢？这个我没有动脑筋去仔细思考，直接看了人工智能给出的 python 脚本，发现它是按行处理的。我直接抄了一下，后来发现这个方法的效果非常好，并且有一点理解了为什么 git 也是对文本文件按行处理，真的非常适合。<br />当然，通过第一个测试后，又接着写了第二、第三个测试用例，并且完善了扫描文件的代码，最终是这样的：\ncsharp\nusing System.Text.RegularExpressions;</p>\n<p>namespace MarkdownBook;</p>\n<p>public class CodeBlockDistiller\n{\nprivate readonly Regex _chapterPattern = new Regex(@^s*###s+(.<em>), RegexOptions.Multiline);\nprivate readonly Regex _sectionPattern = new Regex(@^s</em>####s+(.*), RegexOptions.Multiline);</p>\n<pre><code>public List&#x3C;CodeBlock> Distill(string input, int offset = 0)\n{\n    var codeBlocks = new List&#x3C;CodeBlock>();\n    var lines = input.Split(n);\n    CodeBlock currentBlock = null;\n\n    var codeBlockStarts = false;\n\n    var chapter = 0;\n    var section = 0;\n    var index = 0;\n\n    foreach (var line in lines)\n    {\n        if (_chapterPattern.Match(line).Success)\n        {\n            chapter++;\n            section = 0;\n            index = 0;\n        }\n\n        if (_sectionPattern.Match(line).Success)\n        {\n            section++;\n            index = 0;\n        }\n\n        if (line.Trim().StartsWith())\n        {\n            if (codeBlockStarts == false)\n            {\n                codeBlockStarts = true;\n                currentBlock = new CodeBlock\n                {\n                    Language = line.Trim()[3..].Trim().Split( ).First().Split({).First()\n                };\n\n                index++;\n\n                currentBlock.Chapter = chapter;\n                currentBlock.Section = section;\n                currentBlock.Index = index;\n            }\n            else\n            {\n                codeBlockStarts = false;\n                codeBlocks.Add(currentBlock);\n                currentBlock = new CodeBlock();\n            }\n        }\n        else if (codeBlockStarts)\n        {\n            currentBlock!.Code += line + n;\n        }\n    }\n\n    return codeBlocks;\n}\n</code></pre>\n<p>}</p>\n<p><a name=lHk18></a></p>\n<h1>文件后缀名的映射</h1>\n<p>写了一个简单的程序语言和代码后缀名的映射器，代码如下：\ncsharp\nnamespace MarkdownBook;</p>\n<p>public class CodeFilenameExtensionHelper\n{\npublic static string GetExtensionByLanguage(string? language)\n{\nreturn language switch\n{\ncsharp => cs,\njavascript => js,\njs => js,\ntypescript => ts,\nplaintext => txt,\nshell => sh,\npowershell => ps1,\nxml => xml,\njson => json,\nyaml => yaml,\nhtml => html,\ncss => css,\nsql => sql,\ndockerfile => dockerfile,\n=> txt,\nmermaid => mermaid,\nplantuml => plantuml,\njava => java,\ntxt => txt,\nbash => bash,\ntsx => tsx,\njsx => jsx,\nvue => vue,\nproperties => properties,\nyml => yml,\ndiff => diff,\nruby => rb,\ngroovy => groovy,\ncmd => cmd,\n_ => throw new ArgumentOutOfRangeException(nameof(language), language, null)\n};\n}\n}</p>\n<p><a name=ppjdK></a></p>\n<h1>问题的完美解决</h1>\n<p>最终，将超级大文件（书本 markdown 源码）放在测试文件夹，然后写了一个测试用例，对它进行读取，扫描，并且验证生成的代码文件数符合预期：\ncsharp</p>\n<pre><code>[Fact]\npublic void Should_SaveFiles_ForLongContent()\n{\n    // arrange\n    var testDirectory = AppDomain.CurrentDomain.BaseDirectory;\n    var fixturesDirectory = Path.Combine(testDirectory ?? throw new InvalidOperationException(), .., .., ..,\n        fixtures);\n    const string inputFileName = long.md;\n    var fullInputFilePath = Path.Combine(fixturesDirectory, inputFileName);\n    var input = File.ReadAllText(fullInputFilePath);\n\n    var distiller = new CodeBlockDistiller();\n    var actual = distiller.Distill(input, 0);\n\n    var outputDirectory = Path.Combine(fixturesDirectory, output);\n    Directory.CreateDirectory(outputDirectory);\n    var existingFiles = Directory.GetFiles(outputDirectory);\n    foreach (var existingFile in existingFiles)\n    {\n        File.Delete(existingFile);\n    }\n\n    // act\n    foreach (var codeBlock in actual)\n    {\n        codeBlock.Save(outputDirectory);\n    }\n\n    // assert\n    var files = Directory.GetFiles(outputDirectory);\n    files.Length.Should().Be(245);\n}\n</code></pre>\n<p>}</p>\n<p>运行了这个测试，仅 162 毫秒就运行完了，实在香：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/926f63d6115515938e1ecf1227b91577/e3403/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBklEQVR42nWRa08TQRSG94MKIi1bAhIiURJN9r6zs7P3ttCifigmSkA0GiltgRL+/w94zEyrEC8fnpw5c2bec94ZK4gCiqamOTxCZiWe57AjP7BVjmln52zkX2jni2jrXJ7RTk7/i+X7PmVVk2UZruviug6b6jPt7h0rxYSVcrqgmrBaTHicXv7mifobS0pJf/CWo3fvKYqCwPfYEJ9o1dfsDq7YrMd0igs69S3rzQy7vsRuprTrGWvZmDV1YeIzvc7GWIlMjVBZlqRpiu952OIjrfqWF4M5u0dztnpTtrtX2L0pm9WYTj1ho57RKies51rswghqjOWFVRfP8/A9l1Z8wtPqjq3eNZ3uHLt3Q7s3x+7PTb5eXbOST1lrblgtZjwyTzAxWGEQEoYLgiAgCkNeqhF7zXfe9M553ZzhHPzAObxkv/+NV72v7Ndn7FXn7GSnbKcnPFf3WHmemw/RdtNU0TQNTV0jE4FMYqQIkSJCxCFR6JOI2OS6FoeBcRT4LoG3wIr0pVzxUDhREpEIUqUIwohYxKaZrkmZIqMI3w+Mo8A4u8cK45AwjukfHDAcDs2EqsqIRITjOOZdhRBLMYmSkioRJEliECJBJPdYURSZg4PhkOPjD4xGI0O33yXLMzO1FnxIvBRJ/oEV+L75EJ0opQx6rfd0Mx3jOF5Os5xMxz+a/OIneTxeNvclMWQAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/926f63d6115515938e1ecf1227b91577/fcda8/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png\"\n        srcset=\"/static/926f63d6115515938e1ecf1227b91577/12f09/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png 148w,\n/static/926f63d6115515938e1ecf1227b91577/e4a3f/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png 295w,\n/static/926f63d6115515938e1ecf1227b91577/fcda8/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png 590w,\n/static/926f63d6115515938e1ecf1227b91577/efc66/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png 885w,\n/static/926f63d6115515938e1ecf1227b91577/c83ae/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png 1180w,\n/static/926f63d6115515938e1ecf1227b91577/e3403/1710051832219-2cf9954c-ee75-4c69-ac0e-2cbc4366a65e.png 2435w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />然后到 output 目录下，人肉抽查了生成的文件，有点不敢相信结果竟然如此完美。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8715f148f97806fd457063ff604fc541/fe6cb/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.51351351351351%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVR42m2TW6/bIBCE/f//XKW+5CFqzrGxDea2gO92kql200St1EgTwJeP2WFdUV6QxxWBRtR9hDKEug9odETdBXy3DkoTGk1QJqN3Ezo3QQ0FN+XlnrYFnSG0fUBVyoh52TAvK+ZlwbqumOcZ0zTJ/Dh2HOcp43kceD6fAFiQ+WsNPJ5PHMeJ6qtu5GUiQowRRAkpJRBFEI8+IGiDlDNKKVBKoW27z3qcJozjKHM2Us3rjm1d4b0XaIhRwCEGmYcQBZpyQipFQO9nt2374/4QnefJwA3HvguEnSV2xmBxSMg5I5eC4B2isaAQoFQr15d1kerYGbtclgXVOM7Y910gLhB+flnESCB2YS2SMaC+Q1A1qKkxUYTzQUDs8K3H4yFZVtO4iF2KAT5m/KgZHFHELSFFVkTkjHOWg+OS2eE7OxYzBFjmBffzhHVWSo4xfMpn1xJDSgIwWsMYA2strtcrnHMiXocQXhkylemJkuzEu5eS0bct2qaBG6yUx274Ra21QH7dbvD+tTnDWNxmAuQMzTDAOyenGCmJuIUGa9F3nbhTTYNhGMTl5XJB0yiE4GUDPhgpmf+Y3KgW1gzw8ZUhj4ESrPPo2w6DMRi0Ebe8CffjG8S5crkf4L5tUp5k1PfQbYdOKQy6h+46OGuRS4bptVTDBlj/+1UP7p91kwxKLv8cAuu9fn1F9GmPvz+9t+73O34D7+Pfe1wDAZAAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8715f148f97806fd457063ff604fc541/fcda8/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png\"\n        srcset=\"/static/8715f148f97806fd457063ff604fc541/12f09/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png 148w,\n/static/8715f148f97806fd457063ff604fc541/e4a3f/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png 295w,\n/static/8715f148f97806fd457063ff604fc541/fcda8/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png 590w,\n/static/8715f148f97806fd457063ff604fc541/efc66/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png 885w,\n/static/8715f148f97806fd457063ff604fc541/c83ae/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png 1180w,\n/static/8715f148f97806fd457063ff604fc541/fe6cb/1710052074216-53ab89a9-3ef9-4136-8352-9cbb1598f04b.png 2879w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}