{"componentChunkName":"component---src-templates-post-js","path":"/posts/ptb4t7/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/ptb4t7","relativePath":"posts/ptb4t7","frontmatter":{"title":"Free Arch: 给个人订单系统增加一张支付实体表","stackbit_url_path":"posts/ptb4t7","date":"2022-09-30T11:29:58","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>昨天在 <a href=\"https://zhuanlan.zhihu.com/p/569483206\">https://zhuanlan.zhihu.com/p/569483206</a> 里，写了一下通过企业微信的对外收款完成个人收款自动化的方案，本来是想将该方案完全实现后再来写一篇带示例的文章展示一下的。但是，由于时间有限，要等示例完全做好估计要到明年了……</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c0181ad51f57aa2aa9aae3efcad24ca/b490f/1664535542684-87c2c809-1950-4eac-94b8-e9755fa763a1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7klEQVR42m2SO28TQRSF9x/T8CMQDS0gKjoQEg0iElVSpQK58RocJ3bs2Pu21/ue54dm7E0ixJHuajUz99wz50zQNA3L5ZIsy7DW/rfcmbIsEVJS6Y5C1gxGYoxBCIHWGgelFEEvBF3XMQzCH7A8QRvja7/fs9vt6PueVB6571IaPXgi1zsSuv0gKjLW6we2u4gsL1jcrZj9mRNOQ6I4wRjL4XDwShxSUbLqEkrVYo31hK6cOodgHe2YTkOm4YzZ7zm38zmL+ZzZak2U5hilfINT73CQDZk40urBr0kpfY37wUMSk6Y5ddNQdz1teaC/vqT/dU2dZ7i5SbHnbrGgaWpyVRHWa69SWs0wDH6g89qRBkV9pCwrjnWNkAqhT0arm5Du22fU5XdkvKV3njqfVE8lGu+hscaTOJ/HAIN+GB6n5Hnu0y72e4q2Q2iNvZnC149w8QXub59CM/ZR1VieMElSJpMJ0zBks9mw3W5J05Q4ihj6/pQ2mp9vXxC/fgnvXiGuLpDgRTyHJ3SRu7j7c/O/sBZMVzP59IE4jkiufrB6/4Y4LyjyjLvlhs1ywlAtT6G46zqyMfrRC3eFtm29T/Z8TyMVlVDUTrVS/v0534fuiBLVidAtjmWemeve3/M1Y87/RmP102DOrrqvS/kv5T5LzWBzUmsAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/9c0181ad51f57aa2aa9aae3efcad24ca/fcda8/1664535542684-87c2c809-1950-4eac-94b8-e9755fa763a1.png\"\n        srcset=\"/static/9c0181ad51f57aa2aa9aae3efcad24ca/12f09/1664535542684-87c2c809-1950-4eac-94b8-e9755fa763a1.png 148w,\n/static/9c0181ad51f57aa2aa9aae3efcad24ca/e4a3f/1664535542684-87c2c809-1950-4eac-94b8-e9755fa763a1.png 295w,\n/static/9c0181ad51f57aa2aa9aae3efcad24ca/fcda8/1664535542684-87c2c809-1950-4eac-94b8-e9755fa763a1.png 590w,\n/static/9c0181ad51f57aa2aa9aae3efcad24ca/efc66/1664535542684-87c2c809-1950-4eac-94b8-e9755fa763a1.png 885w,\n/static/9c0181ad51f57aa2aa9aae3efcad24ca/b490f/1664535542684-87c2c809-1950-4eac-94b8-e9755fa763a1.png 1142w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>于是，我干脆零星地把每一个进展记录下来，算是一个开发日志吧。</p>\n<p>今天做的不多，仅仅是增加了一个文件，提交记录见：<a href=\"https://github.com/Jeff-Tian/uni-orders/commit/ff38bb4e7f85c43330125b478b4dab4d2f1af1fb\">https://github.com/Jeff-Tian/uni-orders/commit/ff38bb4e7f85c43330125b478b4dab4d2f1af1fb</a></p>\n<p><a name=RBi7f></a></p>\n<h1>复活老项目</h1>\n<p>uni-orders 是一个陈年老项目，部署在 Okteto 上： <a href=\"https://uni-orders-jeff-tian.cloud.okteto.net/api/static/index.html\">https://uni-orders-jeff-tian.cloud.okteto.net/api/static/index.html</a>。这个项目提供了 API，可以创建订单。目前也只有一个数据表，即 orders。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVR42n3Q3UtTcRzH8f0vXigbxJYU0cWIwJvugnZm4HQ6Z1sbhkTQP5IXGg4nGqHhw3GyQd4WROCKJT7SdBrTPbhzdo475+zMd2zHVoR68eLz+f4uvvD72sLhKKHnowSDEUaeRRgOhohGXxAKRQiOhOn3B/ENDLcM+QMM+IfpGwi05v4/2XzrD9DnG8TWME0kRSNXUClWDSpqHUW/QNYaSLUGBcVSVBqUVZOS2uxWllSz3Zspndex1Q2DiqKTykispGXEtMzqN4lURmYlLbX60obEp12JfFnhuKTwq6SQO5U4Ksit3nRcVChXNWyGoVM918if1ZBqtFU1kC81Z0UHzfyrVre0ZxNUzbS+fFKsMBV/R2x2jtjcXDvfzswwOR23Mh5nfDLG+MTUld5MxNjaO7AWnpYqTM8usLiaQkytIyY/IibXWVhZY34pwfzypcVrLCV4/0Fk9+eRdUNZ1cmfaXz9vk16c5/MVpbMdpYfu4f/yV1pcy9HZueQk5KMTdc1asYFOwcnCB4B90M39x7cx3WnG6fTicvpbOVNXC4XDocDMZH8Z2E2T5/Px6MeN49vd9Jzq5O79i667V047PbrOSwdHR0si2vYDF3nXG+wf1Rk7OUrAoEhngpeBI8XQejFcxNvL088Av7BIKNjr/n8ZYPfNaFTWE0YadcAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/992ea50a320b12dcada4df620d3e414b/fcda8/1664535813660-63c6d304-859b-4143-9122-042279d8fed5.png\"\n        srcset=\"/static/992ea50a320b12dcada4df620d3e414b/12f09/1664535813660-63c6d304-859b-4143-9122-042279d8fed5.png 148w,\n/static/992ea50a320b12dcada4df620d3e414b/e4a3f/1664535813660-63c6d304-859b-4143-9122-042279d8fed5.png 295w,\n/static/992ea50a320b12dcada4df620d3e414b/fcda8/1664535813660-63c6d304-859b-4143-9122-042279d8fed5.png 590w,\n/static/992ea50a320b12dcada4df620d3e414b/efc66/1664535813660-63c6d304-859b-4143-9122-042279d8fed5.png 885w,\n/static/992ea50a320b12dcada4df620d3e414b/c83ae/1664535813660-63c6d304-859b-4143-9122-042279d8fed5.png 1180w,\n/static/992ea50a320b12dcada4df620d3e414b/12e1b/1664535813660-63c6d304-859b-4143-9122-042279d8fed5.png 1607w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>以上是一个查询单号为 10 的订单详情的请求响应。\n<a name=k6dRU></a></p>\n<h1>支付情况查询</h1>\n<p>现在，可以给它增加一个能力了，即在查询订单详情时，如果 paid_at 为空，那么按照昨天的设计，就去<strong>支付服务</strong>里查询一下从该订单生成的时间到10分钟后这个区间的支付列表，用金额做为关联，看是否已经支付了，并将结果更新回 order 表。\n<a name=ncVs8></a></p>\n<h2>已支付</h2>\n<p>设置 paid_at 的时间，并设置订单状态为“已支付”。同时，在新的支付信息表里，记录支付详情。同时更新订单的<strong>支付查询标记</strong>字段，表示已经查询结束，不需要再次查询。\n<a name=oRGOS></a></p>\n<h2>超时未支付</h2>\n<p>设置订单状态为“超时未支付”，同时更新订单的<strong>支付查询标记</strong>字段，表示已经查询结束，不需要再次查询。\n<a name=BqVC8></a></p>\n<h2>未支付未超时</h2>\n<p>设置订单状态为“等待支付”状态，同时不需要更新“支付查询标记”字段，表示后续查询订单状态时，仍然需要从“支付服务”处查询支付状态。</p>\n<p><a name=utt3z></a></p>\n<h1>支付信息表</h1>\n<p>以上支付情况查询，对于已支付的，需要将支付详情写入新表，这就是本次改动新增的文件所做的。对订单表新增字段的需求，下次再做了。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a22a6461ca463d91e56a4ccf0591f54a/2f183/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVR42o3S20sUcRTA8flLrIeQWpfUmVnXS4ndpXooTR80NU131llFggRBUawssdxcvCRCvgZBTxI+RNmDPWdFhbH1UG5qu67uZWZnx9xv7GgKRtnDh3N+B36Hw/n9hLa2a1xv76BRaaG+QaGp0Y3iakZVPbjdKh61BUVRcblbUZRmmtVWrrpUmpQWGl3NW9Fj3a+90oSQSqUwzJ98DeoshE2WoxsEVnQCoRhrCYgYENJS/IjDWiJl1Vb1FKu7ow6RxAZCMplEN5LMzseYmosy/TbK9LsYLz5qPH0TsUzNRZj5EGE5HGdxJc5SWCMQjFrS+dJWPRRJIJhmEj2RZDkUYzVqEImbrMVNK1q0HTF9R1TbtH22akmE9fV1ojGdsYeT3PT2c2Ogn56+Pnpub+rq7qVzD109N2jv6OTZzGy6oUlMSzA2McmA18fQyAMGfSPcHx7jrtfHzdsD3Lrzb3399+ju7eP5y1cI66ZJXDf4EljB/y3IQjDGUli3LIZ1vq9o/yUQ0gj+3qGW3uGawZ2BQerq67lcU0dVVQ3V1bVWvpeaunrKKyp59PgJgmm9smk1bFLcnCgpobDQQV6xjKNIwm7PwnboEDbb39ntdvZlZOAdGkYwDMOacGk1gcutcqmsjNKys+SfO05+6THkogJkWUZyOCyyvIvDgdPpxGazMTw6jgCwwebnVD2tlFVWUHnyKNft+3EfPsDF3CycYi7FYjZHxBxEUfyDwyGTmZnJ6PgEgt/vZ/7TZ16/91NTe4W8ggIuOCUacg5SLto5JWaTJ0kUSiIFkogkydvSk6cbFhYd4fSZ8/hGxvkFsXGc9+w1M2YAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/a22a6461ca463d91e56a4ccf0591f54a/fcda8/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png\"\n        srcset=\"/static/a22a6461ca463d91e56a4ccf0591f54a/12f09/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png 148w,\n/static/a22a6461ca463d91e56a4ccf0591f54a/e4a3f/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png 295w,\n/static/a22a6461ca463d91e56a4ccf0591f54a/fcda8/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png 590w,\n/static/a22a6461ca463d91e56a4ccf0591f54a/efc66/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png 885w,\n/static/a22a6461ca463d91e56a4ccf0591f54a/c83ae/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png 1180w,\n/static/a22a6461ca463d91e56a4ccf0591f54a/2f183/1664536415869-92ea86b3-f2ed-422a-9c51-f65eddeba3f7.png 1589w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>以上截图是支付详情，根据其数据结构（企业微信返回的），设计了 payment 表，但是对于 commodity_list、refund_list、payer_info 暂时跳过，因为不太清楚具体结构，而且看上去基本都是空。</p>\n<p>所以，最后的表结构如下：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 468px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1fbb16a7496b7594c982a7967cce2628/90372/1664536822856-aa2b0c5f-9993-4f8f-9a47-94c0a2a26a2b.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADDklEQVR42m2VWU8iQRSF+fXzMInJ/IhJ5s3EJSrgvoAKsjQgCoJCszVIs6tPnsl3me6MsUluqqqr6tQ5594qYp43VLvtqtPpyHU71nY7XbVaLWsHnqfBgBjI8zwL+q673rPe56rX62k2mys2m800Ho9FO5lOtFws5dRK2vjzS/lqQZVSWff396rX66pWq3p4eNDj46Pm87mm02kYYPCLTSYT+b6/XjCbarVcKVfN68fvn8pUsnqqPeno6EhnZ2e6vLy0Np/Pa7FYGBBEiNfXV31+fipGp9vthvT7/b5JghFj5kejkQUsGA+HQ9vDWgK5tMaQRU3PtZORBNDh4aGurq60vb2ti4sLY79cLsN2tVrp4+PD+oHkkOHY99Xot1UqlUI5tOl02iQyxnTa5+dnVSoVZbNZ3d7eWuIC6V8An3otFR1He3t7Ojk5MSAAg365XNbNzY0cxwl9jMfj9h225CEE9P8Bkrnj42Mlk0ljQbBxf3/fMgtL5mB3cHBglgQJiZR8d3enZCJpwMiDHZswG7YE3nJIrVYzD2EW4eHYANnMyXiZyWRMGmMyTWI4hEOxhX6j0QjLJpJhsVg0UBgCCJPz83PLeiqVMtmFQsGYkhAOCy5EJCCmw2RnZ0fX19cG1m637Rvewpg+jAEDdHNz02qQTH8DzGSz5hvAzWbT/GITfRiSDJLCN9hSg5RNwPIbYC6fC8uE8sAn+kjm6gHKOJFI2DzJAjRC8jopqXTapLAZaQFLDkE+rABiDrYAv729hY/E18Lut0wqXsHk9PTUgMn4y8uLJYg5JJI8+sxvbW3Z+m8MmwPX5Ozu7lpCuNOAwgomBCxJAA8H7JHMVeSRiPSw6KzLhtKAGYzZABtYIZ3bgm9kFRBaJH+5eoGH5Uo5LI+gwGGCZ4CTYdi9v78bCP79H2R7fZcnvj1fFHMinrDN+IY3gBHMcQCWUPhB8WMLzLEJ6fYeDkcj1dtNe+ZZRLnQRzpSc7mctYAE/nLtWEeQca5kCAh9rz8wysHfAa8zLcE35nilg2xGzQf/KX8BPR0elw7NcyUAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/1fbb16a7496b7594c982a7967cce2628/90372/1664536822856-aa2b0c5f-9993-4f8f-9a47-94c0a2a26a2b.png\"\n        srcset=\"/static/1fbb16a7496b7594c982a7967cce2628/12f09/1664536822856-aa2b0c5f-9993-4f8f-9a47-94c0a2a26a2b.png 148w,\n/static/1fbb16a7496b7594c982a7967cce2628/e4a3f/1664536822856-aa2b0c5f-9993-4f8f-9a47-94c0a2a26a2b.png 295w,\n/static/1fbb16a7496b7594c982a7967cce2628/90372/1664536822856-aa2b0c5f-9993-4f8f-9a47-94c0a2a26a2b.png 468w\"\n        sizes=\"(max-width: 468px) 100vw, 468px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=r4EZU></a></p>\n<h1>快速从项目代码中生成模型图</h1>\n<p>在 <a href=\"https://zhuanlan.zhihu.com/p/389745846\">https://zhuanlan.zhihu.com/p/389745846</a> 这篇文章里，介绍了我参与开发的一个工具，tplant，可以直接从代码生成模型图。以上的表结构图就是用它生成的。具体使用方案在那篇文章里有文字详述，以及 GIF 动图指引。</p>\n<p>这里贴一下在 uni-orders 项目中的使用记录截图：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/45b80d5ad03b5c70d438679b73bb9d88/669cd/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABfklEQVR42oWRS0/jQBCEZ/yKPe+xx3HimBAgjxVacebG//9VHxpnxXJZ9lCqVnerW1UlhqdnxvOZ2C+c0sR+mtmNI7+7kltbMpUCIQRJCnp5r3/E+4cn+gOD37MfEsEHUkqMRrP0gXdbc9UNo3cYrWm7jqqu6boOYwzOOTabDTrP2hZhdYVTFq00m7ZFKXUfZnZ+rU9W8dJV+KqgLQsqKSmKgrIsV0gpV849EWPCescwDATviTESQqCpa6q8nJeEXOVUQjAUgs1P0p0zOGOw1mCcQ2m9fvuvV/+CPuyIxxMhHDiEhDNulamVwlu7PmiNWS3IHtVNs86/rMm+fT9oLxfc7RXnnrjGiW2MPBwX0jSzXU70/cAS3FcoUXXYrsVai7N25RzQX8mXC+H2ivfPXPsdYwwcHx+w6cC0f+RX9HwkyzlYds7wNngmq1HGrIcyctKZ67pGqHlGL0e03jFrT4qBed5TlCXbpuClEvSlpJECW0pidU/5u8ycsvzT+wQH18rP8/OrdAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/45b80d5ad03b5c70d438679b73bb9d88/fcda8/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png\"\n        srcset=\"/static/45b80d5ad03b5c70d438679b73bb9d88/12f09/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png 148w,\n/static/45b80d5ad03b5c70d438679b73bb9d88/e4a3f/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png 295w,\n/static/45b80d5ad03b5c70d438679b73bb9d88/fcda8/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png 590w,\n/static/45b80d5ad03b5c70d438679b73bb9d88/efc66/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png 885w,\n/static/45b80d5ad03b5c70d438679b73bb9d88/c83ae/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png 1180w,\n/static/45b80d5ad03b5c70d438679b73bb9d88/669cd/1664537036806-8f6de421-17d5-42fa-bacb-53ae4844ac5b.png 3024w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>本来，是期待用 *.ts 生成所有模型的，但结果只有 order 的模型。原因可能是今天只新增了一个文件，它们两者间没有关系，导致生成的图里不包含 payment。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFUlEQVR42o2O226CUBBF+f9v6XOTvtVKYyPaKl4oFW2rUPGABQ+XEIWzGqA1vbx0JyuTmUzWjJZlGXme4/s+m/WG0WzMfDzCnYx5mzwQ39+ROI9IsUPaM+TrCvm8RDo28slCviyR7hoZRcgkQYvjmKIo2McRRr/P0DTZXl8hLy+I+zrqEEF5gs0KpkNYzGAyAGsEiyn4bjsrcupopmkShiF+IOh2u9zqOsPBADcI8cI9JW1UsEOJLeo9aOvxiKrnNVWFUqpBs227+VCEAbquYxgGc8tCHg4kUlKeTq2Qv6kFKPWj12pZVVX4YkfnpkOv18NxHIQQRFFEWZbn5d/wyXex9mVPsxTP8xpqWU2aps2x8zf/yAet48aDcTkXXgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/50faf1e12eaaa89a3c84f92e44ae873b/fcda8/1664537245208-312a74bc-dbb5-4dab-841f-f5e45e192a5f.png\"\n        srcset=\"/static/50faf1e12eaaa89a3c84f92e44ae873b/12f09/1664537245208-312a74bc-dbb5-4dab-841f-f5e45e192a5f.png 148w,\n/static/50faf1e12eaaa89a3c84f92e44ae873b/e4a3f/1664537245208-312a74bc-dbb5-4dab-841f-f5e45e192a5f.png 295w,\n/static/50faf1e12eaaa89a3c84f92e44ae873b/fcda8/1664537245208-312a74bc-dbb5-4dab-841f-f5e45e192a5f.png 590w,\n/static/50faf1e12eaaa89a3c84f92e44ae873b/efc66/1664537245208-312a74bc-dbb5-4dab-841f-f5e45e192a5f.png 885w,\n/static/50faf1e12eaaa89a3c84f92e44ae873b/c83ae/1664537245208-312a74bc-dbb5-4dab-841f-f5e45e192a5f.png 1180w,\n/static/50faf1e12eaaa89a3c84f92e44ae873b/093ec/1664537245208-312a74bc-dbb5-4dab-841f-f5e45e192a5f.png 1930w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=pSwLN></a></p>\n<h1>待做事项</h1>\n<ol>\n<li>tplant 还可以再改进一下，即使模型间没有关系，也可以铺在最终的模型图里嘛；</li>\n<li>项目中的 order 和 payment 要建立联系；</li>\n<li>项目中的 order 有字段名写错了，要改正。</li>\n</ol>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}