{"componentChunkName":"component---src-templates-post-js","path":"/posts/mbh5uc","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/mbh5uc","relativePath":"posts/mbh5uc","frontmatter":{"title":"扫码登录的典型流程图","stackbit_url_path":"posts/mbh5uc","date":"2022-08-22T11:01:47","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>关于扫码登录，之前写过几篇文章以及发过相关的视频。</p>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/349504145\">https://zhuanlan.zhihu.com/p/349504145</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/393360806?\">https://zhuanlan.zhihu.com/p/393360806</a></li>\n<li><a href=\"https://www.zhihu.com/zvideo/1518236539352440833\">https://www.zhihu.com/zvideo/1518236539352440833</a></li>\n</ul>\n<p>今天再以知乎的扫码登录为例，画一个完整的流程图，供参考。\n<a name=dMayC></a></p>\n<h1>整体流程</h1>\n<p>以下是一个正常扫码并登录的时序图。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/__puml/2036140ea250783571160832274ab338.svg#lake_card_v2=eyJ0eXBlIjoicHVtbCIsImNvZGUiOiJAc3RhcnR1bWxcblxuYXV0b251bWJlclxuXG5hY3RvciBcIueUqOaIt1wiIGFzIFVzZXJcbnBhcnRpY2lwYW50IFwi5rWP6KeI5ZmoXCIgYXMgQnJvd3NlclxucGFydGljaXBhbnQgXCLmiYvmnLrnq69cIiBhcyBNb2JpbGVcbnBhcnRpY2lwYW50IFwi5pyN5Yqh56uvXCIgYXMgU2VydmVyICNvcmFuZ2VcblxuYWN0aXZhdGUgVXNlclxuXG5Vc2VyIC0-IEJyb3dzZXI6IOi-k-WFpSBVUkxcbmFjdGl2YXRlIEJyb3dzZXJcblxuQnJvd3NlciAtPiBTZXJ2ZXI6IOivt-axgiBjc3JmIHRva2VuXG5hY3RpdmF0ZSBTZXJ2ZXJcblxuU2VydmVyIC0-IEJyb3dzZXI6IOi_lOWbniBjc3JmIHRva2VuXG5kZWFjdGl2YXRlIFNlcnZlclxuXG5cbkJyb3dzZXIgLT4gU2VydmVyOiDluKbkuIogY3NyZiB0b2tlbiDor7fmsYLnlJ_miJDkuoznu7TnoIFcblxuYWN0aXZhdGUgU2VydmVyXG5cbkJyb3dzZXIgLT4gU2VydmVyOiDlvIDlp4vova7or6Lkuoznu7TnoIHnmoTnirbmgIFcblxuU2VydmVyIC0-IFNlcnZlcjog55Sf5oiQ5LqM57u056CBXG5ub3RlIHJpZ2h0IG9mIFNlcnZlcjog5bm26K6w5b2V6K-l5LqM57u056CB55qE54q25oCB5piv562J5b6F5omr5o-PXG5cblNlcnZlciAtPiBCcm93c2VyOiDov5Tlm57lvoXmiavmj49cblxuU2VydmVyIC0-IEJyb3dzZXI6IOi_lOWbnuS6jOe7tOeggVxuZGVhY3RpdmF0ZSBTZXJ2ZXJcblxuQnJvd3NlciAtLT4gVXNlclxuXG5Vc2VyIC0-IE1vYmlsZTog6L-b5YWlIEFQUO-8jOeCueWHu-aJq-eggVxuYWN0aXZhdGUgTW9iaWxlXG5Nb2JpbGUgLT4gU2VydmVyOiDpgJrnn6Xlt7Lmiavmj49cbmFjdGl2YXRlIFNlcnZlclxuU2VydmVyIC0-IFNlcnZlcjog5pu05paw5LqM57u056CB54q25oCB5Li65bey5omr5o-PXG5kZWFjdGl2YXRlIFNlcnZlclxuTW9iaWxlIC0-IE1vYmlsZTog5bGV56S656Gu6K6k55m75b2V6aG16Z2iXG5Nb2JpbGUgLS0-IFVzZXJcbmRlYWN0aXZhdGUgTW9iaWxlXG5cbkJyb3dzZXIgLT4gU2VydmVyOiDova7or6Lkuoznu7TnoIHnirbmgIFcbmFjdGl2YXRlIFNlcnZlclxuU2VydmVyIC0-IEJyb3dzZXI6IOi_lOWbnuW3suaJq-aPj--8jOetieW-heehruiupFxuQnJvd3NlciAtPiBCcm93c2VyOiDmm7TmlrAgVUnvvIzmmL7npLrlt7Lmiavmj49cbkJyb3dzZXIgLS0-IFVzZXJcbmRlYWN0aXZhdGUgU2VydmVyXG5cblVzZXIgLT4gTW9iaWxlOiDngrnlh7vnoa7orqTnmbvlvZVcbmFjdGl2YXRlIE1vYmlsZVxuYWN0aXZhdGUgU2VydmVyXG5Nb2JpbGUgLT4gU2VydmVyOiDpgJrnn6Xkuoznu7TnoIHnmoTnirbmgIHkuLrlt7Lnoa7orqRcblNlcnZlciAtPiBNb2JpbGU6IOmAmuefpeeUqOaIt-W3sueZu-W9lVxuZGVhY3RpdmF0ZSBNb2JpbGVcblNlcnZlciAtPiBTZXJ2ZXI6IOabtOaWsOS6jOe7tOeggeeahOeKtuaAgeS4uuW3suehruiupFxuZGVhY3RpdmF0ZSBTZXJ2ZXJcblxuQnJvd3NlciAtPiBTZXJ2ZXIgOiDova7or6Lkuoznu7TnoIHnirbmgIFcbmFjdGl2YXRlIFNlcnZlclxuU2VydmVyIC0-IEJyb3dzZXI6IOi_lOWbnuW3suehruiupO-8jOW5tuW4puS4iueUqOaIt-eZu-W9lSBjb29raWVcbkJyb3dzZXIgLT4gQnJvd3Nlcjog5pu05pawIGNvb2tpZVxuQnJvd3NlciAtPiBTZXJ2ZXI6IOS9v-eUqCBjb29raWUg6K-35rGC55So5oi35L-h5oGvXG5TZXJ2ZXIgLT4gQnJvd3Nlcjog6L-U5Zue55So5oi35L-h5oGvXG5Ccm93c2VyIC0-IEJyb3dzZXI6IOWtmOWCqOeUqOaIt-S_oeaBr-WIsCBsb2NhbCBzdG9yYWdlXG5Ccm93c2VyIC0tPiBVc2VyOiDlsZXnpLrnlKjmiLfnmbvlvZXmgIHpobXpnaJcblxuQGVuZHVtbCIsInVybCI6Imh0dHBzOi8vY2RuLm5sYXJrLmNvbS95dXF1ZS9fX3B1bWwvMjAzNjE0MGVhMjUwNzgzNTcxMTYwODMyMjc0YWIzMzguc3ZnIiwiaWQiOiJrU2plZSIsIm1hcmdpbiI6eyJ0b3AiOnRydWUsImJvdHRvbSI6dHJ1ZX0sImNhcmQiOiJkaWFncmFtIn0=\" alt=\"\">\n如果在展示二维码后不扫描，或者扫描后用户不确认登录，等待一段时间后（比如一分钟），浏览器轮询二维码状态时，服务器端都返回超时即可。</p>\n<p><a name=qSNfe></a></p>\n<h1>超时情况</h1>\n<p>以下是用户扫码后不点击确认的超时流程图，对于不扫描的超时流程图，会更简单一点，略过不画。\n<img src=\"https://cdn.nlark.com/yuque/__puml/95c5347f8bef4f9f9de647fb1cf98ee9.svg#lake_card_v2=eyJ0eXBlIjoicHVtbCIsImNvZGUiOiJAc3RhcnR1bWxcblxuYXV0b251bWJlclxuXG5hY3RvciBcIueUqOaIt1wiIGFzIFVzZXJcbnBhcnRpY2lwYW50IFwi5rWP6KeI5ZmoXCIgYXMgQnJvd3NlclxucGFydGljaXBhbnQgXCLmiYvmnLrnq69cIiBhcyBNb2JpbGVcbnBhcnRpY2lwYW50IFwi5pyN5Yqh56uvXCIgYXMgU2VydmVyICNvcmFuZ2VcblxuYWN0aXZhdGUgVXNlclxuXG5Vc2VyIC0-IEJyb3dzZXI6IOi-k-WFpSBVUkxcbmFjdGl2YXRlIEJyb3dzZXJcblxuQnJvd3NlciAtPiBTZXJ2ZXI6IOivt-axgiBjc3JmIHRva2VuXG5hY3RpdmF0ZSBTZXJ2ZXJcblxuU2VydmVyIC0-IEJyb3dzZXI6IOi_lOWbniBjc3JmIHRva2VuXG5kZWFjdGl2YXRlIFNlcnZlclxuXG5cbkJyb3dzZXIgLT4gU2VydmVyOiDluKbkuIogY3NyZiB0b2tlbiDor7fmsYLnlJ_miJDkuoznu7TnoIFcblxuYWN0aXZhdGUgU2VydmVyXG5cbkJyb3dzZXIgLT4gU2VydmVyOiDlvIDlp4vova7or6Lkuoznu7TnoIHnmoTnirbmgIFcblxuU2VydmVyIC0-IFNlcnZlcjog55Sf5oiQ5LqM57u056CBXG5ub3RlIHJpZ2h0IG9mIFNlcnZlcjog5bm26K6w5b2V6K-l5LqM57u056CB55qE54q25oCB5piv562J5b6F5omr5o-PXG5cblNlcnZlciAtPiBCcm93c2VyOiDov5Tlm57lvoXmiavmj49cblxuU2VydmVyIC0-IEJyb3dzZXI6IOi_lOWbnuS6jOe7tOeggVxuZGVhY3RpdmF0ZSBTZXJ2ZXJcblxuQnJvd3NlciAtLT4gVXNlclxuXG5Vc2VyIC0-IE1vYmlsZTog6L-b5YWlIEFQUO-8jOeCueWHu-aJq-eggVxuYWN0aXZhdGUgTW9iaWxlXG5Nb2JpbGUgLT4gU2VydmVyOiDpgJrnn6Xlt7Lmiavmj49cbmFjdGl2YXRlIFNlcnZlclxuU2VydmVyIC0-IFNlcnZlcjog5pu05paw5LqM57u056CB54q25oCB5Li65bey5omr5o-PXG5kZWFjdGl2YXRlIFNlcnZlclxuTW9iaWxlIC0-IE1vYmlsZTog5bGV56S656Gu6K6k55m75b2V6aG16Z2iXG5Nb2JpbGUgLS0-IFVzZXJcbmRlYWN0aXZhdGUgTW9iaWxlXG5cbkJyb3dzZXIgLT4gU2VydmVyOiDova7or6Lkuoznu7TnoIHnirbmgIFcbmFjdGl2YXRlIFNlcnZlclxuU2VydmVyIC0-IEJyb3dzZXI6IOi_lOWbnuW3suaJq-aPj--8jOetieW-heehruiupFxuQnJvd3NlciAtPiBCcm93c2VyOiDmm7TmlrAgVUnvvIzmmL7npLrlt7Lmiavmj49cbkJyb3dzZXIgLS0-IFVzZXJcbmRlYWN0aXZhdGUgU2VydmVyXG5cbmRlYWN0aXZhdGUgVXNlclxuXG5Ccm93c2VyIC0-IFNlcnZlcjog6L2u6K-i5LqM57u056CB54q25oCBXG5hY3RpdmF0ZSBTZXJ2ZXJcblNlcnZlciAtPiBCcm93c2VyOiDov5Tlm57lt7Lmiavmj4_vvIzlvoXnoa7orqRcbmRlYWN0aXZhdGUgU2VydmVyXG5kZWFjdGl2YXRlIEJyb3dzZXJcbi4uLlxuXG5TZXJ2ZXIgLT4gU2VydmVyOiDotoXml7bvvIzmm7TmlrDkuoznu7TnoIHnirbmgIHkuLrotoXml7ZcblxuQnJvd3NlciAtPiBTZXJ2ZXI6IOi9ruivouS6jOe7tOeggeeKtuaAgVxuYWN0aXZhdGUgQnJvd3NlclxuYWN0aXZhdGUgU2VydmVyXG5TZXJ2ZXIgLT4gQnJvd3Nlcjog6L-U5Zue5bey6LaF5pe2XG5Ccm93c2VyIC0-IEJyb3dzZXI6IOi_m-WFpeWIt-aWsOS6jOe7tOeggea1geeoi1xuQGVuZHVtbCIsInVybCI6Imh0dHBzOi8vY2RuLm5sYXJrLmNvbS95dXF1ZS9fX3B1bWwvOTVjNTM0N2Y4YmVmNGY5ZjlkZTY0N2ZiMWNmOThlZTkuc3ZnIiwiaWQiOiJPeFdadiIsIm1hcmdpbiI6eyJ0b3AiOnRydWUsImJvdHRvbSI6dHJ1ZX0sImNhcmQiOiJkaWFncmFtIn0=\" alt=\"\">\n<a name=qD5hb></a></p>\n<h1>服务器端的二维码状态流转图</h1>\n<p>二维码的生命周期图：\n<img src=\"https://cdn.nlark.com/yuque/__puml/be2c97f7567871e17182bb9aeb860054.svg#lake_card_v2=eyJ0eXBlIjoicHVtbCIsImNvZGUiOiJAc3RhcnR1bWxcblxuWypdIC0tPiDlt7LnlJ_miJBcbuW3sueUn-aIkCAtLT4g5bey6LaF5pe2IDog6LaF5pe25pyq5omr56CBXG7lt7LnlJ_miJAgOiDnrYnlvoXnlKjmiLfmiavnoIFcblxu5bey55Sf5oiQIC0-IOW3suaJq-eggSA6IOeUqOaIt-aJq-eggVxu5bey5omr56CBIDog562J5b6F55So5oi354K55Ye756Gu6K6kXG5cbuW3suaJq-eggSAtPiDlt7Lnoa7orqQ6IOeUqOaIt-eCueWHu-ehruiupFxu5bey56Gu6K6kIDog5Yib5bu6IHNlc3Npb27vvIzov5vlhaXnmbvlvZXmgIFcblxu5bey5omr56CBIC0tPiDlt7LotoXml7Y6IOi2heaXtuacquehruiupFxuXG7lt7Lnoa7orqQgLT4gWypdIDog5pyN5Yqh5Zmo56uv5Y-v5Lul5Yig6Zmk5LqM57u056CB54q25oCB5a2Y5YKo5LqGXG7lt7LotoXml7YgLT4gWypdIDog5pyN5Yqh5Zmo56uv5Y-v5Lul5Yig6Zmk5LqM57u056CB54q25oCB5a2Y5YKo5LqGXG5cbkBlbmR1bWwiLCJ1cmwiOiJodHRwczovL2Nkbi5ubGFyay5jb20veXVxdWUvX19wdW1sL2JlMmM5N2Y3NTY3ODcxZTE3MTgyYmI5YWViODYwMDU0LnN2ZyIsImlkIjoiZExBUzkiLCJtYXJnaW4iOnsidG9wIjp0cnVlLCJib3R0b20iOnRydWV9LCJjYXJkIjoiZGlhZ3JhbSJ9\" alt=\"\"></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[]}