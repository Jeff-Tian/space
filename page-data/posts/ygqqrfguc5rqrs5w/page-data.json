{"componentChunkName":"component---src-templates-post-js","path":"/posts/ygqqrfguc5rqrs5w/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/ygqqrfguc5rqrs5w","relativePath":"posts/ygqqrfguc5rqrs5w","frontmatter":{"title":"一波三折：在 IdentityServer  中添加 GitHub 登录","stackbit_url_path":"posts/ygqqrfguc5rqrs5w","date":"2023-01-15T07:59:33","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<blockquote>\n<p>我踩过的坑都记录下来，希望你们不用再踩。</p>\n</blockquote>\n<p>在《<a href=\"https://zhuanlan.zhihu.com/p/494778362\">在 Keycloak 里集成 GitHub 登录 - Jeff Tian的文章 - 知乎 </a> 》里分享过在 Keycloak 里集成 GitHub 登录的详细步骤，可以说是一帆风顺，且基本上做一些配置就行了，不需要写一行代码。所以我以前说过， Keycloak 是一个低代码甚至无代码的身份认证平台。</p>\n<p>以前还说过，可以将 IdentityServer 认为是一个无头的 Keycloak。IdentityServer 可以高度定制，但却没有一个免费权威现成的管理界面（有专业的 AdminUI，但是需要付费购买），所以需要自己开发界面。如果在 IdentityServer 中集成 GitHub 登录，会是怎样的体验呢？</p>\n<p>我的预期是应该和在 Keycloak 中集成一样吧。但是万万没想到，这个过程一波三折。不仅要写代码，还找不到现成的，经过各种试错，好在终于成功了！</p>\n<p><a name=AaXST></a></p>\n<h1>线上体验：</h1>\n<p><a name=YMHaI></a></p>\n<h2>Okteto</h2>\n<p>地址是： <a href=\"https://id6-jeff-tian.cloud.okteto.net/diagnostics\">https://id6-jeff-tian.cloud.okteto.net/diagnostics</a>，选择 GitHub 登录后的效果如下：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.94594594594594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+ElEQVR42qWRaU9TQRSG+09dQhP1gygiIKj/A2VrESgWox80fvGLG10AQ4yhpSrQjaT0du7Wu/Re5j7mjlDSRE2Kk7w5886ZeWbOmUQ6nWU9+4r0yhpPF9MspJ4xt5hmdm5RzVcyWVbXN1jLvmD1+QZzS8ukljMqzs4v8WQ+NaDESHKMu+MzTM48ZmL6QmMT09x/8Ih7kzOMTz3kzviUUvLGKNdGr5O8dZsrIze5mhxUgiGHRRMX8dd8IooiNalUvrOZy5PLFygUt8gXisp/zuUolyvs7OzyZjvDhy/v/nlhH2hZFvVGg1q9TqvVot3WaJ20aJ90VO5r+z3VTgWjY9Pr+QRB8Ef1gd1ul+LWtnphDA7CHoEX4vpdSt1PaF6T0Jd4novjOErxmVjnPlYfGNNd1yX2pzIECf6pw37wka4UysfrUkoiKX/HSKr98syHYXgBdByXo6MqmtDQ2xYto0lee0lTq2J0LIQhELqO1ukghEA3DBU1TUPXdQzDUNA+0PN8SuUytvBoiAM2xQbCamMbDqZlqnLiXlq2jWlamJaFaZoYhql8nBsE+h6N2jHHzk++ybdIAi4zLkq2XQ4aP9jtvSaMAohAnvVoGPWBrutxWD3s3xQ3PIZeGuj7PtVaHdu2z4DR/5XseR57eyVK5X31/efQYV/4C7NzCRIAgyxhAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/2de4cbeed55e35fb974aad648353aa23/fcda8/1673767455231-1f2a2b69-91db-47e2-be3d-9f62f5cb1e09.png\"\n        srcset=\"/static/2de4cbeed55e35fb974aad648353aa23/12f09/1673767455231-1f2a2b69-91db-47e2-be3d-9f62f5cb1e09.png 148w,\n/static/2de4cbeed55e35fb974aad648353aa23/e4a3f/1673767455231-1f2a2b69-91db-47e2-be3d-9f62f5cb1e09.png 295w,\n/static/2de4cbeed55e35fb974aad648353aa23/fcda8/1673767455231-1f2a2b69-91db-47e2-be3d-9f62f5cb1e09.png 590w,\n/static/2de4cbeed55e35fb974aad648353aa23/efc66/1673767455231-1f2a2b69-91db-47e2-be3d-9f62f5cb1e09.png 885w,\n/static/2de4cbeed55e35fb974aad648353aa23/c83ae/1673767455231-1f2a2b69-91db-47e2-be3d-9f62f5cb1e09.png 1180w,\n/static/2de4cbeed55e35fb974aad648353aa23/ee787/1673767455231-1f2a2b69-91db-47e2-be3d-9f62f5cb1e09.png 2022w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=Wdhvu></a></p>\n<h2>Azure</h2>\n<p>地址是： <a href=\"https://id6.azurewebsites.net/Account/Login?ReturnUrl=%2Fdiagnostics\">https://id6.azurewebsites.net/Account/Login?ReturnUrl=%2Fdiagnostics</a>，选择 GitHub 登录的体验如下：<br /><img src=\"https://cdn.nlark.com/yuque/0/2023/gif/221736/1673768173185-b6d326d2-52af-4676-90e3-4d6875c8cdea.gif#averageHue=%23f9faf8&#x26;clientId=u0f4a92da-150a-4&#x26;from=ui&#x26;id=ue3dce87f&#x26;originHeight=375&#x26;originWidth=600&#x26;originalType=binary%E2%88%B6=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=609563&#x26;status=done&#x26;style=none&#x26;taskId=u0cb64648-0309-4f13-b5a6-f043ea5a336&#x26;title=\" alt=\"ezgif-4-1b94e7e87e.gif\">\n<a name=bARfe></a></p>\n<h2>本地：</h2>\n<p>这需要你从 GitHub 上下载代码： <a href=\"https://github.com/Jeff-Tian/IdentityServer\">https://github.com/Jeff-Tian/IdentityServer</a>，并在本地运行，默认本地运行的地址是 <a href=\"https://localhost:5001\">https://localhost:5001</a> 。详细步骤可以参考项目的 ReadMe.md。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABwUlEQVR42qWS60/aUBiH+c8XswuZMUOEyh0lc5/dV7NkS3Zjm1vmCOiCggpZ2kKstEjPKb08SwvpQI3R7Jc8OT3n5Dx9zyWhKFtUt1+RK1bYLFYolLdQCmWKlRqV2g7l7ZeUqjWqtR3SSp6MUiKtFFhbz9xK4lkyTWojR2azgJIvkQ3JFUlnZ2MbSp71bI5URuFFKsej1RVWnj/lSXKNx8nVGyRYiOu6eJ4XEcb3/cVpTF/HZshdSYSLQsHh0W/qX75y8KvBp8919r//4P2HjzSbLRoHLfb2d9n79hr7ShIExD++TiIIZ4GLC4N2+5hOt8t4fIUQNlI4ONKlO/mJandwpY8Q4k5ioWVZkazT6WJaJq7jYUubtl1nIHp4MkBIgZTyVkKZbdv/hGFVljUGAvwpTKYmrck7DKlGfekIHMe5xjT+Do8udMVC0zQ5651zORxzoh5SH+7S008ZagaqpqKqKqqmoQ8GaLqOpunzVkPX9UgeXcrilk87PTTnhCPvLT7u/N4C7pulCieW4HjQoOm8mTkC8IPZNu7LUoWGccn5n7O4qCDw523wIJbOUFX1+DE/VHRDOBqNokfd7/f5n/wFjDTBwcf03lEAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/bdc8b5f6d25bcc8a4233ad7675401730/fcda8/1673767311873-d9aa54a6-8b24-4560-b0e1-d24d00b9d879.png\"\n        srcset=\"/static/bdc8b5f6d25bcc8a4233ad7675401730/12f09/1673767311873-d9aa54a6-8b24-4560-b0e1-d24d00b9d879.png 148w,\n/static/bdc8b5f6d25bcc8a4233ad7675401730/e4a3f/1673767311873-d9aa54a6-8b24-4560-b0e1-d24d00b9d879.png 295w,\n/static/bdc8b5f6d25bcc8a4233ad7675401730/fcda8/1673767311873-d9aa54a6-8b24-4560-b0e1-d24d00b9d879.png 590w,\n/static/bdc8b5f6d25bcc8a4233ad7675401730/efc66/1673767311873-d9aa54a6-8b24-4560-b0e1-d24d00b9d879.png 885w,\n/static/bdc8b5f6d25bcc8a4233ad7675401730/c83ae/1673767311873-d9aa54a6-8b24-4560-b0e1-d24d00b9d879.png 1180w,\n/static/bdc8b5f6d25bcc8a4233ad7675401730/b5c21/1673767311873-d9aa54a6-8b24-4560-b0e1-d24d00b9d879.png 2154w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><a name=gYKg1></a></p>\n<h1>太长不看版</h1>\n<p>正如前面说的，其实代码很简单，全部提交见： <a href=\"https://github.com/Jeff-Tian/IdentityServer/commit/7962453675c967e6a22a5545dc7c53d39c055120\">https://github.com/Jeff-Tian/IdentityServer/commit/7962453675c967e6a22a5545dc7c53d39c055120</a>。</p>\n<p>核心代码是：\ncsharp\nauth.AddOAuth(github, GitHub, options =>\n{\noptions.SignInScheme = IdentityServerConstants.ExternalCookieAuthenticationScheme;\noptions.ClientId = builder.Configuration[IdpGitHubClientId];\noptions.ClientSecret = builder.Configuration[IdpGitHubClientSecret];\noptions.CallbackPath = /signin-github;\noptions.AuthorizationEndpoint = <a href=\"https://github.com/login/oauth/authorize\">https://github.com/login/oauth/authorize</a>;\noptions.TokenEndpoint = <a href=\"https://github.com/login/oauth/access_token\">https://github.com/login/oauth/access_token</a>;\noptions.UserInformationEndpoint = <a href=\"https://api.github.com/user\">https://api.github.com/user</a>;\noptions.Scope.Add(user:email);\noptions.ClaimActions.MapJsonKey(ClaimTypes.NameIdentifier, id);\noptions.ClaimActions.MapJsonKey(sub, id);\noptions.ClaimActions.MapJsonKey(ClaimTypes.Name, name);\noptions.ClaimActions.MapJsonKey(urn:github:login, login);\noptions.ClaimActions.MapJsonKey(urn:github:url, html_url);\noptions.ClaimActions.MapJsonKey(urn:github:avatar, avatar_url);\noptions.Events = new OAuthEvents\n{\nOnCreatingTicket = async context =>\n{\nvar request = new HttpRequestMessage(HttpMethod.Get, context.Options.UserInformationEndpoint);\nrequest.Headers.Authorization = new AuthenticationHeaderValue(Bearer, context.AccessToken);\nrequest.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(application/json));</p>\n<pre><code>        var response = await context.Backchannel.SendAsync(request, HttpCompletionOption.ResponseHeadersRead, context.HttpContext.RequestAborted);\n        response.EnsureSuccessStatusCode();\n\n        var user = JsonDocument.Parse(await response.Content.ReadAsStringAsync());\n\n        context.RunClaimActions(user.RootElement);\n    }\n}\n</code></pre>\n<p>}</p>\n<p><a name=AN3hu></a></p>\n<h1>准备工作</h1>\n<p>和在 Keycloak 中集成 GitHub 登录一样，需要先去 GitHub 注册你的应用：<a href=\"https://github.com/settings/applications/new\">https://github.com/settings/applications/new</a> 。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAACxUlEQVR42qWV2W7UMBSG58lQEWtXdapSiQsejxfgHeAOuICLInWfJukk4zixs3jNj3wmsyqDEBzpH+/fHPscO6OL9x9wcHKGN0dj7L06xLMXB1Q/Pj3H0ek5jsfvSCdnF3h7PMbey308f7WPvQ0d4PXhGPuHJxgppaG1hqhasLIBlwp5ISGEQNM2NBaklEKYq/RKod8YszE+Qm/eGtRVha7z1GaMgZcCXdfBe48hC/3Wuo2+UVgQTBsDlnMqw8QsTcFFg1IIlEJCGQ9tHXlkre3nF0gzBqUNMQJrCQzloh6sblqUZYm2adAqA9l61MqiobZCXko8RDG4kLDOr4CLysIIrBWasoTXem0zXa+5Wa1RM46GF3DW7vAwlM4BLEV+cwUxTWAKDieKJW5d4We5fg5ZBWUdCq0gbq8w+/kd9eUPdJMboJaA0eiC17WE4wyKZdAsg+cMsIbWjtZoK2DnodIE9fUvmIdb6MkdbHQP/3gHRHdAGsPMUsjJPUQcwVQVUDB0zm4B185TO49KG2RS4D6b4okziEpSdCnn2paywdf13MNwLN4PbLkHhkUhws5ZWGtgjF4mudaGEjvk4NKJ3qGdQFnVKEpBORbqpo/ktq3DhoPSA6tGgZWS8pEXJeq6oaQOnjnnsJ5uf+VhuDXTjC235X0H5z1p+zKst3cCZzlHms1Q1S3qVsGEa9drw7Mt2+0hLxDFT3RfQz2c5X8BZ3mOSRTjKc0oKJQi9PJ0/wYshATjJUpZkRaB2IjugO0E5pzjMU4Qxck8fYwd3PLOoCwH+sGMCURRQu8dLwR4pSEag4YCZDH0Sm08sNv/Ns1zXCcJEi5QNRpSyg3Qtna+hwv7HH/Fx8tP+BJ/G3gT5xoELhp0C5QmL4ztEGIQPi+h1NajNR7Geqov5P8IDCBj4Vy4DR2M8yRLCu2O+m2Qm5cr0OoMfwPBCTL+HIVoQwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screencapture-github-settings-applications-2086973-2023-01-15-15_55_47.png\"\n        title=\"screencapture-github-settings-applications-2086973-2023-01-15-15_55_47.png\"\n        src=\"/static/5abdb8d4f62bdaa48f33b2f53b15f46d/fcda8/1673769413987-1a20778f-42a7-440c-aa0e-0e6e25f90444.png\"\n        srcset=\"/static/5abdb8d4f62bdaa48f33b2f53b15f46d/12f09/1673769413987-1a20778f-42a7-440c-aa0e-0e6e25f90444.png 148w,\n/static/5abdb8d4f62bdaa48f33b2f53b15f46d/e4a3f/1673769413987-1a20778f-42a7-440c-aa0e-0e6e25f90444.png 295w,\n/static/5abdb8d4f62bdaa48f33b2f53b15f46d/fcda8/1673769413987-1a20778f-42a7-440c-aa0e-0e6e25f90444.png 590w,\n/static/5abdb8d4f62bdaa48f33b2f53b15f46d/efc66/1673769413987-1a20778f-42a7-440c-aa0e-0e6e25f90444.png 885w,\n/static/5abdb8d4f62bdaa48f33b2f53b15f46d/c83ae/1673769413987-1a20778f-42a7-440c-aa0e-0e6e25f90444.png 1180w,\n/static/5abdb8d4f62bdaa48f33b2f53b15f46d/6871f/1673769413987-1a20778f-42a7-440c-aa0e-0e6e25f90444.png 2688w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />需要的主要信息是，授权回调地址。另外，得记下 ClientID，并生成一个 ClientSecret。\n<a name=zk1RR></a></p>\n<h1>波折一</h1>\n<p>因为之前在 IdentityServer 中对接过 Azure AD，使用的是 AddOpenIdConnect() 方法。因此想当然地认为，集成 GitHub，不过是另一个身份提供商，应该和 Azure AD 类似。结果，在使用这个途径时，发现必须传入 Authority 这个字段，否则运行不起来。\n<a name=LCO7f></a></p>\n<h1>波折二</h1>\n<p>于是我先填写了 <a href=\"https://github.com%EF%BC%8C%E7%BB%93%E6%9E%9C%E6%8A%A5%E9%94%99%EF%BC%9A\">https://github.com，结果报错：</a> InvalidOperationException: IDX20803: Unable to obtain configuration from: System.String.。于是我又换成： <a href=\"https://github.com/login/oauth/authorize\">https://github.com/login/oauth/authorize</a>，发现仍然不工作。</p>\n<p>在网上搜索  GitHub 的 OpenID Connect 认证服务器地址， 没有找到相关的说明。</p>\n<p><a name=vUFbO></a></p>\n<h1>波折三</h1>\n<p>直接在网上搜索在 IdentityServer 中集成 GitHub 登录的例子，居然找不到相关的。向 ChatGPT 询问，据它回答，GitHub 不提供 OpenID Connect 认证服务，这让我大受震憾！我现在还颇感怀疑，但是 ChatGPT 说可以使用 AddOAuth()方法来集成 GitHub，我一试，还真行。前面的主要代码，就是 ChatGPT 提供的。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5f02ce7a40f02e194822db904e423ec6/4ee93/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrElEQVR42kWSyW4TQRCG5zlIyImQiC1KjO2YkAuHnHg8ECcQAl6CI0dewXg8i2fvnu7Z7JmJJT7UHUu09KmWrvqlqm7n2/cffPj4ic9fvpIXgrppqOoGXdXW9sNA3w/s+sH6u4M/jPeWbrujaTvatmXse5xnz1/x6PiIk+MX/PqZs922FIVAKW0xfhTFFt8PiePEEkUJWZbTth37/R5z/gLO1WTB2flLJpMZWna2cbl08bwA1/Xx1gG+F7IJY+uHYcRmE7NaeSRJitKaum4OcuC8vb3j4mLBu7v3BCJlGEY7Ql23VG2F6iRlK5BNgWqlRdQ5ulPUTWvXYgS7bmt7nevFLZeXM6Y3t/x2l7jrkChOieOCsPAJhEuQe/j5mlD4RDJgna7w8j9sogQhFEIq8kLa8Z3Tp+ccPT5hNptTlZpClPZS6YpCSERZkmQZcZpSSEEuBLquKJWmNPWFREqF1jW7XY+zeHPDk9MzXk/nZHmB0g+va1CqsoVSaouJjUhVNRYTG7GH3EFwNr+2gleTKVKWZJmwoyRJbr+L2ctoGO8Zx9FicsMwHOx/TP0/LCsrhXsZHYgAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/5f02ce7a40f02e194822db904e423ec6/fcda8/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png\"\n        srcset=\"/static/5f02ce7a40f02e194822db904e423ec6/12f09/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png 148w,\n/static/5f02ce7a40f02e194822db904e423ec6/e4a3f/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png 295w,\n/static/5f02ce7a40f02e194822db904e423ec6/fcda8/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png 590w,\n/static/5f02ce7a40f02e194822db904e423ec6/efc66/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png 885w,\n/static/5f02ce7a40f02e194822db904e423ec6/c83ae/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png 1180w,\n/static/5f02ce7a40f02e194822db904e423ec6/4ee93/1673768910996-eba2a97f-b077-4193-8e4e-a05da2a5a03e.png 2648w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>但是，在跳转回来后，总是报 InvalidOperationException: sub claim is missing 的错误。在 ChatGPT 的提示下，我加了一行代码，解决了：</p>\n<p>csharp\noptions.ClaimActions.MapJsonKey(sub, id);</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2cf68508dc75e9d737a1e8893cf7e13a/d185f/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.675675675675674%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABQUlEQVR42jWQy0rjYABG8wpemCew6sBYLyCoMIO4KOjWnc+g6La68+lciAoudEybi61J/lubRtv+SVqPNOjicHYHvs9pXl7RbF5xdn7Kxdk19zeKREZ0uhFaG4TUKKVwQ8Gtq7lzFXctzX27x4PX4/ZFofrvFHnOdDLBmZtfYKn2m4XFX/ypbxNGKWWZMxqNK8ZjS1EU2LxgOP7G/rhkZEvKyZTP6SdlOcFZWV1jZ3efen2bg8MjHuOQwOvy3/V5em4Rhm8YkyKExug+Shqk1BjTrxZIqRBCIZVhOBzhbG7t8fdfg/WNHY6PT8iyFK/r8xK4tDsesY6RfUGsI0QvqUhMjBkY0kFGmmaVB4MMa3OcpdoKa/UNasurNBqHiDQmEG1aHZcw8QmFz6sIKntRiyDx8eM2+iPBWltFZsyumQW/AIBQT1sQkAJiAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/2cf68508dc75e9d737a1e8893cf7e13a/fcda8/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png\"\n        srcset=\"/static/2cf68508dc75e9d737a1e8893cf7e13a/12f09/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png 148w,\n/static/2cf68508dc75e9d737a1e8893cf7e13a/e4a3f/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png 295w,\n/static/2cf68508dc75e9d737a1e8893cf7e13a/fcda8/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png 590w,\n/static/2cf68508dc75e9d737a1e8893cf7e13a/efc66/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png 885w,\n/static/2cf68508dc75e9d737a1e8893cf7e13a/c83ae/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png 1180w,\n/static/2cf68508dc75e9d737a1e8893cf7e13a/d185f/1673769020790-637b4d35-c4c8-42ed-82ec-0c11e0515afa.png 2686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=v98sI></a></p>\n<h1>总结</h1>\n<p>在解决这个具体问题的案例上，Google 真的没有帮到我什么。反而是 ChatGPT，帮了我的大忙。虽然一波三折，好在一个小时内就全部解决了。否则，我不知道要探索到什么时候。</p>\n<p>不过，我记下了这一篇，下次，再有人搜索这个具体的问题时，Google 可能比 ChatGPT 还好使，直接给到结果，不用再进行多轮对话了。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}