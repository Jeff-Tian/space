{"componentChunkName":"component---src-templates-post-js","path":"/posts/dfrkoggp171iwvo3/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/dfrkoggp171iwvo3","relativePath":"posts/dfrkoggp171iwvo3","frontmatter":{"title":"屎山后续：在废墟上建城邦（在站点编译过程中，将远程图片下载到本地，解决图片显示问题）","stackbit_url_path":"posts/dfrkoggp171iwvo3","date":"2022-12-05T12:34:32","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p><a name=pihkm></a></p>\n<h1>在站点编译过程中，将远程图片下载到本地，解决图片显示问题</h1>\n<p><a name=tABTB></a></p>\n<h1>前情提要</h1>\n<p>十几年前，开始写博客，不过采用的是 BlogEngine.NET，它是一个动态网站，部署在虚拟服务器上。后来由于没有及时续费，就被关停了。然后，在学习到了 JAMStack 后，就使用 gatsby js 把它静态化了，部署在了 <a href=\"https://jeff-tian.jiwai.win\">https://jeff-tian.jiwai.win</a> 。详细过程见：《<a href=\"https://zhuanlan.zhihu.com/p/359908165\">10 年前老博客以 JAM Stack 方式满血复活！ - Jeff Tian的文章 - 知乎</a> 》。</p>\n<p>老的 BlogEngine.NET 自带管理员后台，并且配备了一个富文本编辑器，之前的老文章都是通过这个富文本编辑器写的，在静态化后，它们都是 HTML 形式的静态文件了。虽然用了 gatsby js 对原有站点进行了静态化，但是还没有配置相应的管理员后台。也就是说，要写新的博客，就得使用新的形式了。</p>\n<p>最早写博客时还没听过 Markdown，但如今，提起写文档，或者写博客，使用 Markdown 是很自然的事情了。于是当我要写新的博文时，自然想到了 Markdown，而支持 Markdown 的编辑器，数不胜数。基于多种原因（文本绘图和 API 等），我爱上了语雀。之后，新的博文都是使用语雀来写的。</p>\n<p>《<a href=\"https://zhuanlan.zhihu.com/p/551301145\">连点成线，拼凑软件 - Jeff Tian的文章 - 知乎 </a> 》里我分享了自己基于语雀构建了一整套工作流，即通过语雀生产源文章，然后通过多个平台（博客、知乎、公众号、小程序等）来分发文章，并给这个工作流起了个名字叫“叽歪”。</p>\n<p><a name=ROMRj></a></p>\n<h1>问题</h1>\n<p>这个工作流整体上还是不错的，能够一次生产，多处发布。在知乎、公众号、小程序上也都能展示，然而在自己的博客网站 <a href=\"https://jeff-tian.jiwai.win\">https://jeff-tian.jiwai.win</a> 上的展示却有一个严重的问题，那就是新博文的图片总是显示不了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ecf171f141a0271c19b0376ccb7d792b/cc95c/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACS0lEQVR42m2R3UtTAQDF9weISYIQxtD2oftyuuH1I0Wzwq+C/oQIhB6iF5+ihwgroogso9barEUP0oO9Z74Pishq5HSf9273brtzm3dauE1+oYseogMHztMPzjm6paW3+AKv8Xi9LHhe8MTrw+Nf5Lnfj8fv46nPy6vASwKBRZaX3zEzc5nW43qM5k5sjh4sVkfdti7sjm50AGo+jyiKKJnMYU7JaVLpFLX9Gv9q/vECTU3N2HoEbN0C7SdMf200daDbq1WQRIlQKEQkskk8FmV9/QfhcJhEMoEsy6RSaSQxfQicu3mHIw3N2BwuhL4B7HYnJwxm9Po2TAfAaqVCIpEgHoujyFlkJUdSlCkUNEoFjeJWCTWfQ85JwD5zD+doNhzD7BboHT1P39gFXMNTdA1O4Bo8ja5aq5JMisiqRK6SQtqNkdjZJLkbJlZaI17+SmT7MxulT5SJc/3NfRqnh2g9dxHD1CymySu0T16lbXoWy/gldNVqFVVVicVjxMUoCSlKUVMp/yxRKKsUd/KUdzU0rXxY+d7deRoaWrA6BZzufswddgwmK/p2EwZjR/2UYDDIh5VVVt6vspUr8F/t8wf4gMaDDW1ORsbOMjI2Tv/JURzdAp0WWx2oKAoZVUFWRdKFFIomU6qVKOxtkd2WyGoSqWKEKtvcenYN/UAjXSNOegenEIYncAqn6O47g9M9VAcevBiOhliXvrCZ+UYk9521ZJBQ+iPZShRlb4P0rzA1NG4/ukFL21GsbhduYRiXS8DqcGG2OjGaLfwGnNACVgrYoXoAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ecf171f141a0271c19b0376ccb7d792b/fcda8/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png\"\n        srcset=\"/static/ecf171f141a0271c19b0376ccb7d792b/12f09/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png 148w,\n/static/ecf171f141a0271c19b0376ccb7d792b/e4a3f/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png 295w,\n/static/ecf171f141a0271c19b0376ccb7d792b/fcda8/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png 590w,\n/static/ecf171f141a0271c19b0376ccb7d792b/efc66/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png 885w,\n/static/ecf171f141a0271c19b0376ccb7d792b/c83ae/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png 1180w,\n/static/ecf171f141a0271c19b0376ccb7d792b/cc95c/1670240485193-7d2b92fa-ec75-40b3-9bd7-cd1515ac16ed.png 2796w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>稍有工作经验的人，就知道这是由于图片的链接是一个远程 URL，而这个远程服务器，探测到了其源网页地址不是它自己，就拒绝提供服务了。具体来说，这是语雀服务器地址，因为新博文写在语雀里，添加图片时，图片自动上传到了语雀服务器。语雀虽然很棒，但似乎并不愿意被用作图床。</p>\n<p>然而知乎、公众号也有自己的编辑器，在“叽歪”导入语雀文章时，它们的编辑器是会自动抓取图片并上传至自己的服务器的，所以可以正常展示图片。而小程序，又不是浏览器，在引用外部图片时，不会带上 http_referer 这个标头，语雀服务器并未阻止这种形式的访问，所以也能正常展示。</p>\n<p><a name=aG0K7></a></p>\n<h1>解决思路</h1>\n<p>既然不能动态引用语雀的图片，那么仍然使用 JAMStack 的思想，将这些图片静态化，在编译站点时，将其下载至本地。</p>\n<p><a name=ZrM2B></a></p>\n<h1>波折</h1>\n<p>这个思路相当简单直接，然而在实施过程中，还是碰到了一些波折。如果是一帆风顺，也许就不会有这篇文章了。\n<a name=TW4kl></a></p>\n<h1>几个 gatsby js 插件</h1>\n<p><a name=qHja4></a></p>\n<h2>gatsby-source-yuque</h2>\n<p>具体到 gatsby js 的工具链，有几个插件可以使用。首先，在语雀里的文章，要导入到 gatsbyjs 的站点，可以使用我的 @jeff-tian/gatsby-source-yuque  插件。它会自动下载指定知识库的文章，并保存为 markdown：</p>\n<p>javascript\n// 在项目根目录的 gatsby-config.js 的 plugins 里加入：\n{\nresolve: @jeff-tian/gatsby-source-yuque,\noptions: {\nlogin: tian-jie,\nrepo: process.env.YUQUE_REPO ?? blog,\nmdNameFormat: slug,\n},\n},</p>\n<p>如果你去看 @jeff-tian/gatsby-source-yuque 的源码，你会发现它是基于别人的插件 fork 过来的。这就是波折一，别人写好的那个并不太好用，于是我改造了一下。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/13c3cc97d76dbfaf9a2a7b515eefc609/2bef9/1670241378139-c86e65d3-0937-43b7-b09a-ab1cdae14e47.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 115.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADIElEQVR42p1UiW7bRhDVpzRBD6AI2rguiuaoE7gt8uO90MaSDNSpm9iSSIqUSC7PXd7cfcGMTFqugNTtAk8zO9odzbx5q8mLlz/gydMTPH32Aqffv8KjL47w7ZPnOD39Ed+dvMSz5yf46vgbHB1/jS8fH+Px0TE+/exzfPTgYzx4+MkBJvP5OWazOWM6JczG/Wx+jumN/8tPv+O3X//AbL6Ln51N8fpsypbuEMif4J7r8ucN3p1b+PPNHIvr6zFelSWqskDbNLyfaK1RVh3yokOuWsiiY5C/jzRvkOY1RKwYFMvkLkaQqobue0zaTmPtV/BFAZE22IoC27CASBpEWXuAOO8YYyxtEcQl3KBG22pMylrDj2uUMoXuO6xtG6vFAl1b35MMg6rIESQ1yrrHxGgDP2qwIYj6Bvv+fdDAj2pobXZDaZoGUhYoywrGANqYD4LOtF2Hum6gVIkkyVDXu44mhg/sQAPa338IMNztwZ4r5MB/XLIXCLoFYu0g0jai3oE2/S5h13UI/BCet0EQhNhutvD9gG0kIo4JESGKYo7HUYygWaJqSuRZDpVVCBsLtVG7hH3fw117cNcuX14uVrAth0F7z91gu/HZt1Y2wiBCZCyI1sYmW8JNlnDqCzSmvK1QqQJFUaBQBaSUDIrluUSappC5RJZlkFJB5gpe4MCLV3DFCqF0UfQJjNG3Fa6WFt7+fQXLsscKXdfjyqkqx1nDsdfwXI9t4AtksUQsUqi8BDR4+rccBuHYYhiEbAfuAj9gLsmP44Q5pCJ6vQPdJ7Bs6GOQyzBxKn2IkdXmUE6ccA907k7Cf1v/TDDAmNsfHhNSucThm4tL5oc4vL5aMH/v3l7xnl5F27Yj6HXRvTTNIEJxt2XaJEmKLM14mjThPM+hpEKapDxpqmDgjc4zFVpzcnp2BwnFDeks3m2AMBQ8CLIkcNLhxtvyA6DvafJkSQlUzMD5KBua8F8Xl1itbD48CJsu2JbN7a8dl0VOVimFsihZu1VV3fC5l5BaJElwy7nkNknY1Da3rxSj4CQldzUMZvDHlv/Pn8MoKW3uyO49qjm6V7zOwaMAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/13c3cc97d76dbfaf9a2a7b515eefc609/fcda8/1670241378139-c86e65d3-0937-43b7-b09a-ab1cdae14e47.png\"\n        srcset=\"/static/13c3cc97d76dbfaf9a2a7b515eefc609/12f09/1670241378139-c86e65d3-0937-43b7-b09a-ab1cdae14e47.png 148w,\n/static/13c3cc97d76dbfaf9a2a7b515eefc609/e4a3f/1670241378139-c86e65d3-0937-43b7-b09a-ab1cdae14e47.png 295w,\n/static/13c3cc97d76dbfaf9a2a7b515eefc609/fcda8/1670241378139-c86e65d3-0937-43b7-b09a-ab1cdae14e47.png 590w,\n/static/13c3cc97d76dbfaf9a2a7b515eefc609/efc66/1670241378139-c86e65d3-0937-43b7-b09a-ab1cdae14e47.png 885w,\n/static/13c3cc97d76dbfaf9a2a7b515eefc609/2bef9/1670241378139-c86e65d3-0937-43b7-b09a-ab1cdae14e47.png 1024w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>目前在 gatsbyjs 的 source 插件列表里搜索 yuque，我的版本排在第一了。</p>\n<p><a name=b6Meo></a></p>\n<h2>gatsby-transformer-remark和 @jeff-tian/gatsby-remark-images-remote</h2>\n<p>在语雀文章被转换成本地的 Markdown 文件后，需要将其转换成页面，这时需要使用 gatsby-transformer-remark来处理 markdown。它工作得很好，但是它的结果如前面的图片所示，它将 markdown 转换成了 html，但也仅止于此。对于外部的图片引用，它只负责转换成 <img /> 标签，并不会自动下载图片到本地，也不会做 src 替换，也就是会让页面展示坏掉的图片。</p>\n<p>这里从网上找到了 gatsby-remark-images-remote这个插件，不幸的是，也不太好用，会导致 gatsby 的构建过程中断。于是又 fork 了过来，进行了改造发行成： @jeff-tian/gatsby-remark-images-remote 。这是波折二：</p>\n<p>javascript\n// 在项目根目录的 gatsby-config.js 的 plugins 里加入：</p>\n<p>{\nresolve: gatsby-transformer-remark,\noptions: {\nplugins: [\n{\nresolve: @jeff-tian/gatsby-remark-images-remote,\noptions: {\n// Its important to specify the maxWidth (in pixels) of\n// the content container as this plugin uses this as the\n// base for generating different widths of each image.\nmaxWidth: 590,\n},\n},\n],\n},\n},</p>\n<p>在做了改造后，网站在构建过程中会自动解析所有对外部的图片引用，并尝试下载到本地。对于某些错误链接，会展示一个兜底 DOM 结点，而继续构建站点直至完成。\n<a name=vG9I4></a></p>\n<h2>@jeff-tian/gatsby-plugin-sharp</h2>\n<p>一不做、二不休。既然将远程图片都下载在了本地，那么不如再对其进行优化。因为源图片可能很大，这时利用 gatsby-plugin-sharp对其进行处理，将其优化成合适的大小，并且在展示文章时，先展示一个低分辩率的，在用户阅读过程中，下载完源图片后，再替换成高清图片。遗憾的是，官方的 gatsby-plugin-sharp竟然在遇到某些它不能很好地处理的图片时，也会粗暴的中断构建过程，导致站点生成失败。这是波折三。</p>\n<p>这个波折困扰了我好几天，我实在没主意了就去 StackOverflow 上问了： <a href=\"https://stackoverflow.com/questions/74546620/gatsby-remark-images-remote-make-the-build-fail-how-to-troubleshoot-the-root-ca\">https://stackoverflow.com/questions/74546620/gatsby-remark-images-remote-make-the-build-fail-how-to-troubleshoot-the-root-ca</a>，没有得到回答，反而得到了一个踩：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/92d6089c52b826942be0774f89beda3b/c4093/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsElEQVR42kWR246bMBRF8zsNEMAXsI0N2EBJGnUazYw6I/X/v2NVOFP1YWnbR8fb53JaJs/BbUvc95XvaWJ0PcH2WC3pZftFg/lSWZeIqkDVFcF0DF2LkQ2jM5za5oIULcEP9J3GOcMYPH4YGJzFDy7rkPV5Dt4/Y86R4sw8BaYx5NxTUZaUVYWxFiEEvdbs+w+cG1C6QxuHUiqjj7vWdF2HUhp5xLV+ojSXuuZUVRVlWTJNE9YabBCY6flISE2rOpqmRUqV844CiuKp5Rfn85nz+Vs+Z8OiKBBCIlSLcg121ixbIq47cb8zrTtzTIRpxsctMxyMESUbXu4jry+R29pzOlwvlwtjGFGdpA8KO3akLbIsK9+3jRhjnpdzFucc3nustdRNQ9tUvD8WPt72bJoNjypDGPHB04+SfhLMcWJOK+N6ZVqvudJ5u5EOXfdsbIxBq5aP18Tn+8rj7p6GB9fbjRgTbXvMS7IsCzEtpHXLDGHEWIfzIWtvTEaKhsfPyMf7lbdfy/8K67rJg5VCIKQkpSW3eui6brnN46N/G89LE4L6UvD22Pjz+cLvtyt/AdFnLO3TVMItAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/92d6089c52b826942be0774f89beda3b/fcda8/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png\"\n        srcset=\"/static/92d6089c52b826942be0774f89beda3b/12f09/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png 148w,\n/static/92d6089c52b826942be0774f89beda3b/e4a3f/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png 295w,\n/static/92d6089c52b826942be0774f89beda3b/fcda8/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png 590w,\n/static/92d6089c52b826942be0774f89beda3b/efc66/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png 885w,\n/static/92d6089c52b826942be0774f89beda3b/c83ae/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png 1180w,\n/static/92d6089c52b826942be0774f89beda3b/c4093/1670242105878-9b1b8f1d-20e7-4cde-9a37-ede6877249e9.png 2646w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>官方文件说将 failOn设置 none可以在遇到错误时继续构建站点，但实测下来根据并不是这样。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/622efc6b2396978dfedb0c906c352568/aea0a/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVR42lWR226TMRCE8zSo9q734PX6P+bQkPykVatQKoEKF4T3fwnkllRl9Mnem7Fn7NX54XB/mk+naVnmu9P++bxfvozHw7Qcp8Pn8eHx/tflz9PL5dvPy9eX3+fn70+Pu8NhOB6nZRlXTGBFrLJYyoXdWY0SQkqACMykVjj7P1SFgQgRoVRZASAAStKqPZOQEimJMStxJoAYws0bsRFiE8QIALBCxAjR1AafLJuoECUWIiYWpqtSSu8zXNXMgBggitrQz9UHK4VFEotq1pyzmeYsoqINzTkCtAAAK0AkhAo3k8iu+MbyredZaJbkwi5iTMbkWQuzC9esrlKYCOIqIirANn7aMi1eb432ndwJ/uCw47RVXkvaKM/KQ4IhxSFBj3HE6BDazU0Qi9i6nzf9ZqhD8QoiyJxafiZVEg4AN7EFDgABIL51xtfOKjbVzejrroxdmV4LsrK6ecml81pyKcW9eu1rSgjv5vbgUjb9ft3vBp+33Th5zVpq7l2r59qVwa3LpViffbT/zICQxfoyDWXqbDAz4RRCCLHFDFdibHsI8fpVKWFKwkyJ3kgNRkyvx35cPw5NfwHixoya2v9CtwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/622efc6b2396978dfedb0c906c352568/fcda8/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png\"\n        srcset=\"/static/622efc6b2396978dfedb0c906c352568/12f09/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png 148w,\n/static/622efc6b2396978dfedb0c906c352568/e4a3f/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png 295w,\n/static/622efc6b2396978dfedb0c906c352568/fcda8/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png 590w,\n/static/622efc6b2396978dfedb0c906c352568/efc66/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png 885w,\n/static/622efc6b2396978dfedb0c906c352568/c83ae/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png 1180w,\n/static/622efc6b2396978dfedb0c906c352568/aea0a/1670242255117-9d2dc028-38ec-454d-9183-cbf867b2e6b9.png 2018w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>它在遇到某些图片时，会报 Input buffer contains unsupported image format，然后就没有原由地中止了整个构建过程：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/732b6aad1c4cc21a60772c1561a61fe4/31d79/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVR42kXO3YrjMAwF4LxH201kx5JlW/5L0jZJZ2DbXuyTLDPs+98vLlsWPg6S4IA64/KA0bpymXfOVxtmGxeSxr6S3pe2xnObw2xctbJ06CqgKIo+nWW++bKGuoW6ybTH5SMuH+n8GerWyvFsU4NhUjaNXDr1ap4Ua86+rJwunC4uXXxtM4XJ+Dq6MnIeUAAjoAxG+tH3JnRAsUc5jV77icqG+Yp5pbJRWXm62bpz3V3dbb6O//6ftU2DEUDpHElGL8ZnCpuPe0i3kG6Sb5L30CwsTpMDwwoPYI/AJ9UcFXeJAmLQvk5p+bo/vh/P78fz6978/nn/83je6/kAdtBONLVvG9frpssUMjqxkn3OoU5xqjKVULLPQhI5FpaAXtCXkQ6KD/BfpymOKN6XJZQlLXNdl2ld6jrVNceZbfrFnDl5Ts5Ga5MZGd86RXFA6bUjznr0PVCv2Ggr2iZNQdGsTNEYNAVNWRMpOyiGl1YGlKNisBkoAcWBoqYIQApQAw0v8EoN+APs4e0vl3Bm5FxD0hUAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/732b6aad1c4cc21a60772c1561a61fe4/fcda8/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png\"\n        srcset=\"/static/732b6aad1c4cc21a60772c1561a61fe4/12f09/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png 148w,\n/static/732b6aad1c4cc21a60772c1561a61fe4/e4a3f/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png 295w,\n/static/732b6aad1c4cc21a60772c1561a61fe4/fcda8/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png 590w,\n/static/732b6aad1c4cc21a60772c1561a61fe4/efc66/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png 885w,\n/static/732b6aad1c4cc21a60772c1561a61fe4/c83ae/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png 1180w,\n/static/732b6aad1c4cc21a60772c1561a61fe4/31d79/1670242311710-58bb2046-358b-495e-b01e-acafe9cb7872.png 1954w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=G0b4l></a></p>\n<h3>TDD 是大救星</h3>\n<p>在没有任何去回答我的问题的情况下，我只能回到开始，设想自己是 gatsby-plugin-sharp的开发者，我会怎么做。整个 gatsby的代码库特别庞大，大概翻了下代码，没有头绪。于是开始给它加测试用例，模拟了一些外部依赖后，将出问题的图片喂给 gatsby-plugin-sharp，完美地重现了这个 BUG！ 虽然在站点的实际构建过程中，程序退出得莫名其妙，没有任何错误堆栈，但是在测试用例里，就有详细的错误路径了，于是通过失败的测试用例，顺藤摸瓜立即定位到了 BUG 的根源：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0680713aa7062cfb9ec1d85cd3c2d147/d185f/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxUlEQVR42i2QR3LbQBREcRsb8yf8SRgiTEAgKAEgIAZRyeXyyvb9T+Ci5K6uV715m86meTqelmlZuuHQxOij9yG0qUypKqvKpzQtx/FhCn2f9vtuP/q2920bh30/LdnT3L+d6+efLg5OCXQ7h1IholQSAArnxuW46x5EmXTTy7oTu3jfvo/DY7auh/dzuP0xabbIddk0xhqpkHPxKVdhGIfHdZi2Ydraw9Idlnac63aM3Zid1vHjUl8/XDpaRqXWSgiklJF78qIxXWu9N2UsdsG4YItgbaOtV+nQZsd1fruN19c+bTvkSkrkAhljAAAsV7WUnNWCFhwKDpIRyQiFnIi8m7tsXN+ef/19+vG7GR8EF9Y5bQ2iFCgZUlMbRnjP8SBkz9FTEZhwwBWncYzZ07p/v1aXrUqx5kypkhbzN/jOKaNAc+OlNMwaKAx1FoqSWAuFptqBa4vstu1fztX1FFIsGVdouO7g6y1CiDRaajSF0ha10eVMbSWVlkKysmmy27F/vewuWwy+IkBJTigjAPl/WWqtjVJaIHID3MInCfDc+5A9r8PLqTpvMaUGpWKMMcq+QilVd1NJbSlaKhAo3MvurEP6BxELhf5kRLmkAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/0680713aa7062cfb9ec1d85cd3c2d147/fcda8/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png\"\n        srcset=\"/static/0680713aa7062cfb9ec1d85cd3c2d147/12f09/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png 148w,\n/static/0680713aa7062cfb9ec1d85cd3c2d147/e4a3f/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png 295w,\n/static/0680713aa7062cfb9ec1d85cd3c2d147/fcda8/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png 590w,\n/static/0680713aa7062cfb9ec1d85cd3c2d147/efc66/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png 885w,\n/static/0680713aa7062cfb9ec1d85cd3c2d147/c83ae/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png 1180w,\n/static/0680713aa7062cfb9ec1d85cd3c2d147/d185f/1670242615829-6d5d085e-9fc2-40b8-b5f3-920ca1fd9940.png 2686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>原来它在碰到错误后，直接 process.exit(1)退出了！根据没有读取所谓的 failOn选项。</p>\n<p>于是我给 gatsby提了一个 PR，并且把能够触发这个 BUG 的图片带上了。很奇怪，这个是我的公众号二维码图片，由微信公众号后台生成的。不知道为啥会让 sharp 这个工具报错。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81e4e7524e2487a96a93891c034ab4a1/37114/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACzklEQVR42l2S3WscZRSH97+QNrK77s6+8/HOxzszO5md2U232TVERFq0LdqilaIYWtN8bJsEcxFQ2tWga/xo2oJYpEjRK1FpvRFB0AtbEKIlIFhaL+2FoESqNvWRnSapeuDh3BwefnB+uVraRA0OotIIP6yhwhjL8ZFuiHQCLFtRMWw0YVHR5X8QpoNuOBiui4wVQtrkdFnFjCLcVopUCdKvoTsRFTvE9Acx3BhhBAgzpCQ8ippDQbPJlySa6SNkhAgD7JEaZc8jV6zYlISLo9JMVjY8gqjO2NEOz0/PcHhqlqempzg4PcUzEx2enegwNnmc5452MsYmjnF4/BhHxmepN0fJPSCcTOJFDUw3Ylu+wu49+7n11234Gz67ucLpbz/mnZVLHFg9zaOrb9L8rktz5STGlTkWf7oI62QzPTNPrqS79JF+ghPWub9ksHvv4/zy2xp/3rrNBze+5tzbZ1l+7Q1al09w8sePmFw5x9wPFzh49QxTq+dZX1vnjzt3mOjM3U3Yx1IxdpCwPV9h3xMH2JyLv35P75sPWfzqfR67dop3f/6S965/waXfr3Jh7QpLNz/fup15YeFeQiEDDDciX7ZIhtq8srRM79QZFno9xpdOMLnUZezlBQ5153m6O8+TL82y/8XjzCx2efX1ZXpvnWX0kT33hP2UxYpDqb+Fz3a9wYAI0cwYzUjQzRRTNiiLmHzBo1BUFIo+A0WX+wp2Rl5zyPUfsinNxBUHzVYEI0O4aUowNIy7o4U71MLf0cIejLOaiMBHBAH6BkYYoklFblteJ6vOv4WeIt43jGrXqbZ2Eo08iGq3sZsNrHqMkUYYSRW9FtwlDtCTAM3xyD28axdSRRQ2pFvCvTtxh1NkGuM3GziNGmZSxWrUkI0kE2eiTWobwk8/OU979CEGikbWx6yXloedxshqjBXECBWiOYqy7f4Pb4u+rGS6/AMiic/aVC7o4wAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/81e4e7524e2487a96a93891c034ab4a1/fcda8/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png\"\n        srcset=\"/static/81e4e7524e2487a96a93891c034ab4a1/12f09/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png 148w,\n/static/81e4e7524e2487a96a93891c034ab4a1/e4a3f/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png 295w,\n/static/81e4e7524e2487a96a93891c034ab4a1/fcda8/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png 590w,\n/static/81e4e7524e2487a96a93891c034ab4a1/efc66/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png 885w,\n/static/81e4e7524e2487a96a93891c034ab4a1/c83ae/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png 1180w,\n/static/81e4e7524e2487a96a93891c034ab4a1/37114/1670242869107-615f3b8c-a13a-4573-86ee-aafd8b00fdfa.png 2300w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>然而，这个 PR 目前还没有得到回复，所以不得不将修复后的 gatsby-plugin-sharp发布在自己的名下： @jeff-tian/gatsby-plugin-sharp，并在项目中引用：</p>\n<p>javascript\n// 在 gatsby-config.js 的 plugins 中加入：</p>\n<p>{\nresolve: @jeff-tian/gatsby-plugin-sharp,\noptions: {\ndefaults: {},\nfailOn: none,\nbase64Width: 20,\nforceBase64Format: png, // valid formats: png,jpg,webp\nuseMozJpeg: process.env.GATSBY_JPEG_ENCODER === MOZJPEG,\nstripMetadata: true,\ndefaultQuality: 50,\n},\n},</p>\n<p><a name=mUqP0></a></p>\n<h1>成果</h1>\n<p>在解决了以上几个波折后，站点就能够成功地被构建出来了，而且在网站里可以正常显示图片了！</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/31b004c7c2fff26dd17b5b4e28373743/5eb2a/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAACTUlEQVR42i2R6UvTAQCG95d4pOLmNZupiEmmWctZaqlT1ERjzYrIcEh0gKam5lmaayIpaIs+2AlBdmk6G3jMQkySpbYyDY9N235z0z2R9MLz6fn08IrOFuVTlJ1NnjKLU6fVDA8bKKnQknqmmhPFNaSrq8m52EDGuRqOFpTT0P6A1/2vCAoOw9fXn7CQUCKkMmIio5GGSRHp6i/TWl+KSpFH961K/k3bN05x3Usq9JNU6k1U6U3c6B3jkm6I0VkreLYJlITg5bMHb18/FIdTuFJ2FS9vX0SVN2u53jfEhVo9uoZGdtimrdfA+apndA585/7QT7qHFukctFDfb2Zibo0N6woJ8UmEh0UglgQTHRNHUKgML58ARCMfR9l2bWG1rdPd8xC3y0VTzzCF5X20v5mn7e0CuoEfaN9ZqHsxx8i3FX5tmklVyUlUxhJ7QE78kUwSFdnEJSgQmUwmHILA0vIy2nsdbG05efJ+msZeA4+NFp6PLe7y1LjAo8FZTJY//LbZkGemk5imIFelITdfTVF+AcqTGYgGPhgQ7JssLy/RfLsVq3WdifFJjMYJzOZ5nIIDpyDgdAoIggCeHTZsNo4lp3DoYAI5aSnkHJeTn55MqjwJ0adJ0+4RTje0tLSwsrrKzJdpZr/OYNuw/Xfu3QqHw4HHs8Pa+jrScBmSECmyfVEEBooRiyWIxUGISjVlKDVdlFxrRlNagsvlprGtg5xCNcoCFVkFKqrqm9B1dnHnrpbPU1PY7XbEQaH4SaTIovYj3RtJSHgk/gES/gLXQbTNQTbh/AAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/31b004c7c2fff26dd17b5b4e28373743/fcda8/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png\"\n        srcset=\"/static/31b004c7c2fff26dd17b5b4e28373743/12f09/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png 148w,\n/static/31b004c7c2fff26dd17b5b4e28373743/e4a3f/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png 295w,\n/static/31b004c7c2fff26dd17b5b4e28373743/fcda8/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png 590w,\n/static/31b004c7c2fff26dd17b5b4e28373743/efc66/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png 885w,\n/static/31b004c7c2fff26dd17b5b4e28373743/c83ae/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png 1180w,\n/static/31b004c7c2fff26dd17b5b4e28373743/5eb2a/1670243130241-146b6e60-0c83-4b18-905b-a85435104e27.png 3250w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=wItRf></a></p>\n<h1>总结与感想</h1>\n<p>还是和《<a href=\"https://zhuanlan.zhihu.com/p/522752605\">屎山并不可怕 - Jeff Tian的文章 - 知乎</a>  》一样，我总感觉，屎山一般都是香的。在解决以上问题的过程中，多次利用屎山项目，并且在没有进展时，回到原点，以及适时利用 TDD，成功地解决了问题，效果令我满意！</p>\n<p>每次回顾这些进展，我都会感激所谓的“屎山”项目，不敢想像如果从 0 开始，我要什么时候才能解决掉这些问题。每次改造一些开源的项目，都是因为原来的不够好。虽然不够好，但比没有强太多了！虽然很难改动，但是只要用一用 TDD ，再加上适当地重构，它们就能发挥非常大的威力。多数时候，**屎山不是技术债，而是技术资产！**它们能够助你一臂之力，它们在唱：</p>\n<p><strong>你将造你的城邦，在废墟之上！</strong>\n<a name=F3F5I></a></p>\n<h1>彩蛋</h1>\n<p>前一阵子，gitee 的一个改动，导致大量将 gitee 用作图床的网站出现问题，图片显示全挂了。看了这篇文章，你应该知道该如何应对了吧。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}