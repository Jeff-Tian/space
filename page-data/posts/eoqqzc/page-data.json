{"componentChunkName":"component---src-templates-post-js","path":"/posts/eoqqzc/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/eoqqzc","relativePath":"posts/eoqqzc","frontmatter":{"title":"Coding.Net + 阿里云 npm 模块仓库 自动化发包","stackbit_url_path":"posts/eoqqzc","date":"2019-11-02T09:47:00","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>让一切自动化，干掉所有人肉操作。对于 npm 包的作者来说，利用 semantic-release 就能解放双手，只需要提交代码，让发包自动进行。<br />如果代码托管在 GitHub 上，而且 npm 包最后是要发布到官方仓库里的话，那么可以配合 TravisCI 来完成。这样就非常简单，只需要运行一下：\nbash\nsemantic-release-cli setup</p>\n<p>就能自动完成相关的配置（GitHub 和 TravisCI 的 token 创建等等），而你只需要在项目里添加一个 .travis.yml 文件即可。具体实例可见：<a href=\"https://github.com/Jeff-Tian/wechat-oauth-ts\">https://github.com/Jeff-Tian/wechat-oauth-ts</a></p>\n<p>但是对于其他代码托管服务，或者是将包发布到自己的模块仓库，就没这么方便了。不过虽然用不了 semantic-release-cli ，但是 semantic-release 本身还是可以用的。<br />这里给一个具体的例子，代码托管在 Coding.Net 上，模块仓库在阿里云，利用 Jenkinsfile 来完成自动化。\n<a name=q1klK></a></p>\n<h2>在 package.json 里添加 semantic-release 相关依赖</h2>\n<p>json\n{\n...\ndevDependencies: {\n...\n@semantic-release/npm: ^5.3.1,\nsemantic-release: ^15.13.28\n}\n...\n}</p>\n<p><a name=Aalmy></a></p>\n<h2>在项目中添加 .releaserc </h2>\n<p>json\n{\nbranch: master,\nrepositoryUrl: <a href=\"mailto:git@e.coding.net\">git@e.coding.net</a>:xxx/yyy.git,\nplugins: [\n[@semantic-release/npm, {\nnpmPublish: true\n}]\n]\n}</p>\n<p><a name=z7f5L></a></p>\n<h2>在项目中创建 Jenkinsfile</h2>\n<p>groovy\npipeline {\nagent any\nstages  {</p>\n<pre><code>    stage(检出) {\n        steps {\n            checkout(\n                [$class: GitSCM, branches: [[name: env.GIT_BUILD_REF]],\n                userRemoteConfigs: [[url: env.GIT_REPO_URL, credentialsId: env.CREDENTIALS_ID]]]\n            )\n        }\n    }\n\n    stage(安装) {\n        steps {\n            echo 构建中...\n            sh docker version\n            sh npm i\n            sh npm rebuild\n            echo 构建完成.\n        }\n    }\n\n    stage(测试) {\n        steps {\n            echo 单元测试中...\n            // 请在这里放置您项目代码的单元测试调用过程，例如:\n            // sh mvn test // mvn 示例\n            // sh make test // make 示例\n            sh npm test\n            echo 单元测试完成.\n        }\n    }\n\n    stage(发包) {\n        steps {\n            sh echo registry=https://registry-node.aliyun.com/org/xxx/registry/yyy/ >> .npmrc\n            sh echo //registry-node.aliyun.com/org/xxx/registry/yyy/:_password=${npm_password} >> .npmrc\n            sh echo //registry-node.aliyun.com/org/xxx/registry/yyy/:username=${npm_username} >> .npmrc\n            sh echo //registry-node.aliyun.com/org/xxx/registry/yyy/:email=${npm_email} >> .npmrc\n            sh echo //registry-node.aliyun.com/org/xxx/registry/yyy/:always-auth=false >> .npmrc\n            sh echo grpc_node_binary_host_mirror=https://npm.taobao.org/mirrors >> .npmrc\n            sh NODE_ENV=production npm run build\n            sh npx semantic-release --debug --no-dry-run --no-ci --unsafe-perm\n        }\n    }\n}\nenvironment {\n    GIT_CREDENTIALS = your-coding-user-name:${coding_token}\n    NPM_CONFIG_REGISTRY = https://registry-node.aliyun.com/org/xxx/registry/yyy/\n}\n</code></pre>\n<p>}</p>\n<p><a name=fNUAB></a></p>\n<h2>创建 Coding.Net 访问令牌</h2>\n<p>这是用来让 Jenkinsfile 读取代码用的，后面会通过环境变量形式注入到 Jenksinfile：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVR42n2Qy2oCQRBF5/+/KItAFnGVZCEoQRKNJiIRdYZ2+l3d0yfMjAtNIBcuVNXi1K2qfBS8D6SUEUkYYwlB6ID8y8k5smrIhx3z+ztWjw+w+yS2LarV+BCpQhROdTMAeinr0SGRdEunanK9J60XlO077L+gOVC+N0wnE9bzOcSIpMy51UOgyrrA4VgTmxN5t0FeX7CzJ/RiRli/4bcrjFKk4CmlUC5pe/V1J0KMQmscrfFUtdIsP7Ycp8/o5YLsLclqJGcEkMKQoHcPpBSSjG+y1lG8J8aEcRGl3Xjy8VSTLhsLV7oAbkb8VZQ8AM890AdBa0OXM6XrxrP+8bjntr8G/gBTbNEdjxC8+QAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8f31f8be3dfb5405821a8c680ac024df/fcda8/1572687439407-f9fb1bbd-cef9-491c-ade4-e178c7f4f989.png\"\n        srcset=\"/static/8f31f8be3dfb5405821a8c680ac024df/12f09/1572687439407-f9fb1bbd-cef9-491c-ade4-e178c7f4f989.png 148w,\n/static/8f31f8be3dfb5405821a8c680ac024df/e4a3f/1572687439407-f9fb1bbd-cef9-491c-ade4-e178c7f4f989.png 295w,\n/static/8f31f8be3dfb5405821a8c680ac024df/fcda8/1572687439407-f9fb1bbd-cef9-491c-ade4-e178c7f4f989.png 590w,\n/static/8f31f8be3dfb5405821a8c680ac024df/efc66/1572687439407-f9fb1bbd-cef9-491c-ade4-e178c7f4f989.png 885w,\n/static/8f31f8be3dfb5405821a8c680ac024df/c83ae/1572687439407-f9fb1bbd-cef9-491c-ade4-e178c7f4f989.png 1180w,\n/static/8f31f8be3dfb5405821a8c680ac024df/b30aa/1572687439407-f9fb1bbd-cef9-491c-ade4-e178c7f4f989.png 1405w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvElEQVR42o2UTW7cMAyF5/7XKdBNT1B00QsEA0yCzMTWjyVLtmxJ1CtI15MiHQcRQHBh8fPjI+0TAIQ44XbrkHOWKIWwZMKaCaU2tMa3Gji11iSOzqmVgqW7on++4HZ+gn+7YrIO6qrhegt7UwhKoQUHhOFeuIM/xolyBuk3TN0V4+szyGnAGxTboTkNezmjPz8hXF+QdYdcKlauIToAUpOHMYzI64pGhFrKFjnDGIswjoghYJpmpGXBNCeUWo+ABGoNIUTYwUk7lUiUcDbWwY/hP6+4mI4VNsQYobSWofBFVlJKlZcYO2BOSVp9dB4CWaH3fgNSQ85FgIPzcH6UzLEsK1JasKzv+SFwDAEhRgGxDYU9rFXUaTMIzPsR0zxvXqYF8W8+VKiUwjzP0jIrYYXsYa8MjBlkGF9umRUOw7ZnrJBbEQ/t7uG7kn1luO5wKBvQ3Qt2ICtU2kh765rFhqOl/tBygLEWtdI/wCLe7ZPWxsrQPv9SqMlbnffoxcMkD3YgT5iBnHmV6sEXcgeyov2EMCKlJD+DbShFWmYgwz5TdgfypcvLK759/4Gfv36Lkly21dlb35e9fSH+AOKJlQxhrLtlAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/7e69d9e39174594809426607b5d10654/fcda8/1572687503404-3999556f-ca3e-4948-8192-afb46de6298d.png\"\n        srcset=\"/static/7e69d9e39174594809426607b5d10654/12f09/1572687503404-3999556f-ca3e-4948-8192-afb46de6298d.png 148w,\n/static/7e69d9e39174594809426607b5d10654/e4a3f/1572687503404-3999556f-ca3e-4948-8192-afb46de6298d.png 295w,\n/static/7e69d9e39174594809426607b5d10654/fcda8/1572687503404-3999556f-ca3e-4948-8192-afb46de6298d.png 590w,\n/static/7e69d9e39174594809426607b5d10654/efc66/1572687503404-3999556f-ca3e-4948-8192-afb46de6298d.png 885w,\n/static/7e69d9e39174594809426607b5d10654/84a90/1572687503404-3999556f-ca3e-4948-8192-afb46de6298d.png 982w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVR42m2RQU4DMQxF5/qsWHKeLlgiIXEBBK0qATMDk8ROnNi/dVoGBmHJSpTEz/87QyLG/nBESBmXMPwNM1tTVfvZw+MTbm7vsNvdA+MIXRawNAy1NjiUiFGKIItCpCGXAmKG1AazH6japeGyBDy/7DHPn0ApMBFwqRhqa0iJsITQwYEUxNILpvkLTARrteu2DrPrunXgwVkwuAU/4Jy7SqIEcogqWAT5+Ap7O6zA39ZFKj7GCXWaYDGCS8PQvJAZMUaEEBFiRIypq+77ELtKB3w399H4Gx/J+zhBxivQZ6jqHXUt2KZtQP9lv/OPcpfnGZ4AX2HUD6Q3ljgAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/5ac60ce1c726339dd767e5b09f86526d/fcda8/1572687576248-b4f38a02-7bea-4fa1-9d3e-9e00e6a5ecc4.png\"\n        srcset=\"/static/5ac60ce1c726339dd767e5b09f86526d/12f09/1572687576248-b4f38a02-7bea-4fa1-9d3e-9e00e6a5ecc4.png 148w,\n/static/5ac60ce1c726339dd767e5b09f86526d/e4a3f/1572687576248-b4f38a02-7bea-4fa1-9d3e-9e00e6a5ecc4.png 295w,\n/static/5ac60ce1c726339dd767e5b09f86526d/fcda8/1572687576248-b4f38a02-7bea-4fa1-9d3e-9e00e6a5ecc4.png 590w,\n/static/5ac60ce1c726339dd767e5b09f86526d/efc66/1572687576248-b4f38a02-7bea-4fa1-9d3e-9e00e6a5ecc4.png 885w,\n/static/5ac60ce1c726339dd767e5b09f86526d/5b587/1572687576248-b4f38a02-7bea-4fa1-9d3e-9e00e6a5ecc4.png 1010w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />将访问令牌复制下来。一旦你关闭这个页面就再也看不到明文令牌了，如果你没有及时复制就关闭了，可以重新再创建一个。\n<a name=l0O0V></a></p>\n<h2>配置 Coding.Net 持续集成 Jobs</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrUlEQVR42p2STU9TQRSG5w+oMbLDREhMaxEK5UNlQSwVkBUL4sofyIpGRSJEfwYrqCIpthpLez97P2bm3sfMvfUGSN14klnMyZnnvO85I3bevKVUW2diaoHmwTEmlFKkafpfR8wsNygt1Lk3OUvzw9EIqLkdpnhc7nZezKxsUF19PQIeF8DrXa+HUS+VQms9Fi6qL7aYX93m/sO5GwoLIClK6ywXBCGtbxects5pX3bROkFKRZKY2oyKeFxdo7y4zt3JOfY/fs6BUt5QF4QRvb7FwHZwHA/H9bEsh95giOXGhlSoFItrO7zc2KVSXuHw3UEO/GsD8EOPYRCSJEmWswOPK3dAFMvsHsYxfTvA8vJX4slSg9nnW0xPVzna2wOri26dkP7ugDvA8iV+YBTnQGcY87NvE8soB0Y+fhATy3ymorLcwEDvGMuHX3KFvgftM9KvJ7Q7Pc7Of2QqM6Dj0un+yuaXKbYdvl9cEkV5A1Gq1aksveLBo3ma7z/lwCQtLAehwvEVemTZbDiMomK+ZlmxlMVIRLlW5+mzTSamauwXW1akpmBk819/cdz9DwLOweLuty1qAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/95e88f5d802cbf5dee673eccdad87f57/fcda8/1572686929793-d24761b6-0877-4777-b513-1841b3495c12.png\"\n        srcset=\"/static/95e88f5d802cbf5dee673eccdad87f57/12f09/1572686929793-d24761b6-0877-4777-b513-1841b3495c12.png 148w,\n/static/95e88f5d802cbf5dee673eccdad87f57/e4a3f/1572686929793-d24761b6-0877-4777-b513-1841b3495c12.png 295w,\n/static/95e88f5d802cbf5dee673eccdad87f57/fcda8/1572686929793-d24761b6-0877-4777-b513-1841b3495c12.png 590w,\n/static/95e88f5d802cbf5dee673eccdad87f57/efc66/1572686929793-d24761b6-0877-4777-b513-1841b3495c12.png 885w,\n/static/95e88f5d802cbf5dee673eccdad87f57/c83ae/1572686929793-d24761b6-0877-4777-b513-1841b3495c12.png 1180w,\n/static/95e88f5d802cbf5dee673eccdad87f57/71e8d/1572686929793-d24761b6-0877-4777-b513-1841b3495c12.png 1304w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 115.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC70lEQVR42pVVPWsUURSdXqz8SKxijIIIosYUVhbiD/AvWVnYqI1YiCBYpBCNSUyCMQZSSEAR7NRoTLIf8z3zZmbn+82Re3dndmc3G8yFCzP73px377vnnFVM20FLNRBGMRzhI05SHCeKoqilcuvOPWxubfPi3719BEEHeZ4jCEK4wofwAgjP5wM9v/vseQGiKEYUx5A9INlL5eS5K3i79IEBPd+HlBJxkkA3LP44y3KkaYo0y5Cm/cyl5IMJbDCUs9OzWFz5yC+0gSKKE2i6yRXx6VJCyoJzGGC4beX01HUsrX1isJ3fu4jjGHGcwLIdmJbT/YAOkxJZniNJUm6Z1rIsqwFyhSVgFEX4tfMHYRRBFoDrChimBdt24fvBSDWD77WWGXB1g1agqhpXQKHqBnb3Gmi2NaiaCdsR1dow2CCocmZ6Fu/er49s9IMYjisQdEJ4foeTKJWkKTphVN33cMXKxMzNCpDuhDcAMEWCtqrxYGjiSZLw9E3Lxn6jhTCMDm954gIB9qdcbkjTBK22hmZbRaPZxkGzXVU17v4q2iwsr48AEmkJkKojQHouAeVAmyMVTl+9jeW1zV7LfUAagG6YUDUD+wdNHDRaDJqW1zIGVLk0excr61sjrdiOy3flB53ub1KO1XKtwlNT1yqlGIbJgyEeEpArPE4aQJZL1rkQHjzP52fZO6RW4eTMHBZXN3iRzIGmScsERMSm9NkwCjiOy1Om6onw2QB1arQhYhPQj5876IQhS494RxwkMHIcR3hsFo7rwQ/CI5Ry/gYWVzb4Re+1TCCkEs0wkaQZW1XpNtQ+HTh2KARY8rAMIQSCIKjEX/7muu6RHOxKbwCwBLAsu1ICuQx9rGk6TNMkyY+4dM2+6A4XetIjaZHnkTU5jqhVQhLsm0Mx9i9Bmbw4V9FmONhYi66xluCl0Y5L5uH86yV83v6K+w8e4fnLeR7OIMeOk8qJict48vQFvnz7joePn+HV/BtounEoaf8n/gFaPL2aDoI0PgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ce6c2fef9573be7b113fa962b2be8464/fcda8/1572686986748-42d0c8d3-0390-44ff-b061-943960070b04.png\"\n        srcset=\"/static/ce6c2fef9573be7b113fa962b2be8464/12f09/1572686986748-42d0c8d3-0390-44ff-b061-943960070b04.png 148w,\n/static/ce6c2fef9573be7b113fa962b2be8464/e4a3f/1572686986748-42d0c8d3-0390-44ff-b061-943960070b04.png 295w,\n/static/ce6c2fef9573be7b113fa962b2be8464/fcda8/1572686986748-42d0c8d3-0390-44ff-b061-943960070b04.png 590w,\n/static/ce6c2fef9573be7b113fa962b2be8464/fdaf8/1572686986748-42d0c8d3-0390-44ff-b061-943960070b04.png 674w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVR42qWT66oTMRSF5/3fSRCEgyiICPpLaLE9euzM5H6fyXySnLa2ioIYWOxrVrJ3doZplqSUaWvbuJO/rlt/07ezY7sJDNpYQoystbIuK8uysCwrpRRyLmd7ufM3fV3XjlKaXq85g5CK0zgzCsP+yXE8GYTSKGMRyqCMu8L4wCQU7RJK2y4nITHWIZVGKsPgwsLckoSgeIdRno+fFfPTN+R4YgkeSu4yaE2w7rdS70o+zZrDfs/45Ui2Gic1h6PicbfjuNsRlIAcqMGRjCKOT2y1XoluSRuG2hw5gtNIMaOmiaAFViqSs/hWusxonSmpgJXPm29IbjFcrlqswc0jdhoJUlC9ZQuuowbP1uHYcvwjWSd8/+ETr9+8Y394xIVEWSv/s4ZXD2958fIBbRypjcm69vH4K9qYrBdZiSnjfOz6sG6wVPCxYH3G+vRPcCEzzorj1+/4kBh8yCgTMC5izklddxEb8tXW9j6ubTjbuY/daZyotTLEtCCU7af4mJHGM86628YF1NmepCbm0oku8ZByJ5+lZpxmUs4MoZeaMDb0R7ncoP0M6wItrq1nnET/Ebms/RAhDT5EUl76XiE1QrmfhC7ku75YH2ntaL1tBLPQvfHPBwSkdp2oVdVI17qRl8oPbLc+autBfFkAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ddbff89fe2681de78d931264325147b6/fcda8/1572687174070-dfa8a5ef-69be-4a00-9845-e5d294e6e443.png\"\n        srcset=\"/static/ddbff89fe2681de78d931264325147b6/12f09/1572687174070-dfa8a5ef-69be-4a00-9845-e5d294e6e443.png 148w,\n/static/ddbff89fe2681de78d931264325147b6/e4a3f/1572687174070-dfa8a5ef-69be-4a00-9845-e5d294e6e443.png 295w,\n/static/ddbff89fe2681de78d931264325147b6/fcda8/1572687174070-dfa8a5ef-69be-4a00-9845-e5d294e6e443.png 590w,\n/static/ddbff89fe2681de78d931264325147b6/efc66/1572687174070-dfa8a5ef-69be-4a00-9845-e5d294e6e443.png 885w,\n/static/ddbff89fe2681de78d931264325147b6/99661/1572687174070-dfa8a5ef-69be-4a00-9845-e5d294e6e443.png 1098w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />注意，在最后一步需要用相关的环境变量形式把阿里 npm 模块仓库的认证信息填写上去：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.43243243243244%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVR42pWTzYvdNhTF/f/vSyGEdtlFIWRa6KoQ6LabliwyoTOdPPc925Kfvy3Jkiz/imRPMy+r9MJBvtbV0fG519m6rpjFYp0jhMAasQZC2FL+jPV5XdeEbdvYuI2wbWRKa2TdUFQ1l1JQVJJS1JRVjaivVKKm6XraruefS5VqRN2glMZbzaxUEhPzeEnmfGBSC8M4MowT1rqkwHmPsSvjbBjHiWlW6bA/FEbcXxzXdqLr+3Q2RrZ46CZLWYmkJhbusWE8yGbifCm4FBVN2x07sG3w5nf461Tz+Pg3pZA7YfTlXAg+PnxC1C3dMKMXhzI2rYtbsT4kxOf0fpwwZiEEj/MrfgXrQtrLopHTrGm6AaUXFutS0WI92tjUsJhHKyKhMwZzemCSArX4vd4dxH4lizK1NsyHqc8RiyZlWKxlWZakyHoPbkGdc6pTzjiqFxbt8R9hNFUbs4/DtiWF8ROUNnT9kGCsOwhPyDxnnHRSlXw9ziXCeVZpLKKK7XDcOs+sDMZotNYMw4iL82k0Q34oHOYbwqQwrsM4c2365GH0IiL6N0yaQvaUskXIK4W40jcN9Yd7yqcTw6iSNXHEbxSuYWMNEGfSur0hUaFeVvJroB73vyftxwu1xh1N+jKy2MWHpzP3DyeezoK8vHKRHRfRJWWybqlkSyFeQHYUsqUUbap5iUybhfcfHvnj/Ufyx0+Ic0Evr8hSkhc1p8uO/Abyi/wzMu/3GbJdw7u7t/xy9zNvf3zDn+9+hS3wfyOz1jLOmq4s+OH1d7x+9T3ffvOK3366Y1t96vqz4V+D7DN3bHs0ORy4HYevJfwXDCvQay+lkssAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/5c13dece00015e4d5d5154778bd5919c/fcda8/1572687679938-b9b9be3a-a0f1-4407-b550-5b4c3c593847.png\"\n        srcset=\"/static/5c13dece00015e4d5d5154778bd5919c/12f09/1572687679938-b9b9be3a-a0f1-4407-b550-5b4c3c593847.png 148w,\n/static/5c13dece00015e4d5d5154778bd5919c/e4a3f/1572687679938-b9b9be3a-a0f1-4407-b550-5b4c3c593847.png 295w,\n/static/5c13dece00015e4d5d5154778bd5919c/fcda8/1572687679938-b9b9be3a-a0f1-4407-b550-5b4c3c593847.png 590w,\n/static/5c13dece00015e4d5d5154778bd5919c/6c2f2/1572687679938-b9b9be3a-a0f1-4407-b550-5b4c3c593847.png 767w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=Bf1XI></a></p>\n<h2>配置完成，手动触发第一次构建吧：</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.945945945945947%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbElEQVR42p2OMQqAMAxFc/8rCC5eQxxEB3F1kOJYO2lBKLRDmy9aqo7qgxD4CY9P1jksq4b3Hsz8eUIIuGAG6c1AzupxYLzikHH8F32HIssxtA3IWI9wtsOPhlGoJoG6rCDFCOKYIu1vJOnNDnSzOZ4XrHbhAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/1df6cd4a2bdd6811baa54bc81c973b23/fcda8/1572687751922-783f16b8-a48c-4d68-8f8f-11894bd5b097.png\"\n        srcset=\"/static/1df6cd4a2bdd6811baa54bc81c973b23/12f09/1572687751922-783f16b8-a48c-4d68-8f8f-11894bd5b097.png 148w,\n/static/1df6cd4a2bdd6811baa54bc81c973b23/e4a3f/1572687751922-783f16b8-a48c-4d68-8f8f-11894bd5b097.png 295w,\n/static/1df6cd4a2bdd6811baa54bc81c973b23/fcda8/1572687751922-783f16b8-a48c-4d68-8f8f-11894bd5b097.png 590w,\n/static/1df6cd4a2bdd6811baa54bc81c973b23/efc66/1572687751922-783f16b8-a48c-4d68-8f8f-11894bd5b097.png 885w,\n/static/1df6cd4a2bdd6811baa54bc81c973b23/2e694/1572687751922-783f16b8-a48c-4d68-8f8f-11894bd5b097.png 1048w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 571px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJElEQVR42q2T2W8SURTG52/00Ucf9LkBKoRlwPqXkGhJTCxMiFuicYmFQQwxKUwiJUZamGGffebO9pl7WQotqRo9yS93mXO/c79zM1w6nUYqlfonkskkcrkcCoUCuHK5jG63i3a7DUmS0Ol0/gp6rtfroVgsMnGu2Wzif0S1WkU8Hgf3pdHAfKHh/acaXr/9iLb0nSUEQYAwDH+L53ksnzpNJBJUUATxfPQvh9A1DYHvs4QoijbVt+fXgxamUalUloKNhgg/CNH78RO6pm8qU5EgWM7XovuEbwjW63W2MZ3NoekmZGUM3w/YYcdx4bhkR/A6NwRFUWQbymgMy7Zvvc2+CMM9gtRa/2IAwzBXSSHCKFo23Q9YSwLWiuiK1XeXeLuCtVqNbRBCENHerYlCVkgzLHjEZVB79ObhygEttJjO2XlBEK56SM3NDAea7TFMEjAsh2AwddC5IOhPCFub9jYuFpq5K1g7PQUCF7B0wNYBxwAZK7DGClyXYKb76E88TFQPjuvB3oKuTcvdWI5Twa8f3uG8UUfpSQkvygKEZ8+hjUfAdIjQUNetp0916yufnJQRo39KR/wM4WkJd+7ex0Eih3sPDjCQR4CzuvEfBrUci8XBvXn1Euq5hFG7BeWshYn0DaOzFuSzFpTBJWRFgSzLOyiKsmE4HEJVVRwfl3B4+BAcz+fBPzpCnnL0mI38mnwePM/vJZvNIpPJsHE5zyKdzuAXaExuFeF2lVAAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/af40504713c23617a73ea2461906be86/17d73/1572687808005-084619d4-6d2c-4ebb-995b-4e24fe313fdf.png\"\n        srcset=\"/static/af40504713c23617a73ea2461906be86/12f09/1572687808005-084619d4-6d2c-4ebb-995b-4e24fe313fdf.png 148w,\n/static/af40504713c23617a73ea2461906be86/e4a3f/1572687808005-084619d4-6d2c-4ebb-995b-4e24fe313fdf.png 295w,\n/static/af40504713c23617a73ea2461906be86/17d73/1572687808005-084619d4-6d2c-4ebb-995b-4e24fe313fdf.png 571w\"\n        sizes=\"(max-width: 571px) 100vw, 571px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=JH48Z></a></p>\n<h2>后续自动发布</h2>\n<p>只要代码提交，都会触发一次构建。但是会不会发布新的版本，就看提交历史是怎么写的了：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f57db0f7e849580ba00d88f0363d4345/d4377/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVR42p2S3UrEMBCF+/6v44U3PoPghYggyIK7trK1ze/k/0gmbdmqC+JAmEk4+eZk2u59+IBUGj4EKEM49QPIOVyLUsqPOueMp+cXvB7e0PXnEUo7GPKQJsJax4IqTim1nDPykiujbHXhvXMeN7d3uH94RJdzYUDiVaCdRIiRz6qwntuaU+KX1FzDEnHtfWD9Gh2wPqHlkzpgnCbURvVCSgXKJm4wfk4wllhnjEWMkZu6EJGlRCCHrtku2zwGfcQsxAaMDGyOp1mAyLF2nXMF+hCB2sCH6hA74Nn0kFrxPi9jMNQcCqkYwCDvWdOenAAixPALcDBHSHUBTAV6Ac6z3Dn7E5AdXgEK0RyWHdC3j/IdeAn+z8LyK30BUv3B/RePOtEAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f57db0f7e849580ba00d88f0363d4345/fcda8/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png\"\n        srcset=\"/static/f57db0f7e849580ba00d88f0363d4345/12f09/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png 148w,\n/static/f57db0f7e849580ba00d88f0363d4345/e4a3f/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png 295w,\n/static/f57db0f7e849580ba00d88f0363d4345/fcda8/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png 590w,\n/static/f57db0f7e849580ba00d88f0363d4345/efc66/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png 885w,\n/static/f57db0f7e849580ba00d88f0363d4345/c83ae/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png 1180w,\n/static/f57db0f7e849580ba00d88f0363d4345/d4377/1572687928708-8e2e43c1-f4fe-4c6a-9091-edcb90af0944.png 1294w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />如果有新的版本发布成功，就会自动同步一个版本号到代码版本的标签栏中：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0787184469470e4ca80a26f54ab661ff/fba00/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDElEQVR42pXPy07CUBSF4fMgOoEQ0ZBSG4g3qBCZgS9vTBw4MQpCrLRApefS9vymJ0ZnWneyZjtf1hJnoxmH7XN64S1xvCFTmnyfYuKI6qy1v6a01v3d3T+4iJP+hKY3JBhMSTZbMqmQux0yWf+J/aDw+PTG8yJCdPoTGp0BvXDGOk7QWqNNjimKWlh12pSskoJUWkTDCzloX7jJFZhlkkxKlFI1QYvOS+bviiQ1CD8I6Xav6A+nrOMNUkqkVCila4N5URJtDWlWIDx/SMe7/AbdZDfb/K9hpEg+ckTrdETTH3Hcu+F1uXLN/jcZTF6yjDXbfY5oB2Na/jVHwZiX+cK1q0BZF7TWgasv8BOBEjyFiuJCFAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/0787184469470e4ca80a26f54ab661ff/fcda8/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png\"\n        srcset=\"/static/0787184469470e4ca80a26f54ab661ff/12f09/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png 148w,\n/static/0787184469470e4ca80a26f54ab661ff/e4a3f/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png 295w,\n/static/0787184469470e4ca80a26f54ab661ff/fcda8/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png 590w,\n/static/0787184469470e4ca80a26f54ab661ff/efc66/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png 885w,\n/static/0787184469470e4ca80a26f54ab661ff/c83ae/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png 1180w,\n/static/0787184469470e4ca80a26f54ab661ff/fba00/1572688002959-5441d639-dd18-4fa1-ab13-0c302b5004e0.png 1529w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}