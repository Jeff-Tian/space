{"componentChunkName":"component---src-templates-post-js","path":"/posts/ltdlnkcecvttt18f/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/ltdlnkcecvttt18f","relativePath":"posts/ltdlnkcecvttt18f","frontmatter":{"title":"账号链接与用户联邦的区别","stackbit_url_path":"posts/ltdlnkcecvttt18f","date":"2023-10-02T12:08:22","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>在多个系统之间进行账号互联，有账号链接和用户联邦两种方式，这里列举一下我观察到的一些区别。\n<a name=cPHE7></a></p>\n<h1>协议不同</h1>\n<p>账号链接一般使用 OAuth 2.0/OIDC 或者 SAML 协议。尽管可能存在其他协议，或者定制化的方式，但是很少见。<br />而用户联邦一般使用LDAP或者Kerberos协议，或者定制化的方式，定制化的方式也很常见。\n<a name=kR3Nt></a></p>\n<h1>用户感知不同</h1>\n<p>使用账号链接的方式，允许使用系统 B 的账号登录系统A，那么用户认证一定发生在系统B。也就是说，用户在登录系统A时，会被显式跳转到系统B的页面，在B的页面上完成认证后，再跳转回系统A。<br />如果是第一次登录，那么系统A以系统B的用户信息，在系统A中，创建一个账号，并且将系统B的用户标识做为了一个用户属性储存起来。<br />而如果使用用户联邦的方式，通过系统B的账号来登录系统A的话，则可以直接在系统A的页面完成认证。尽管系统A的后端仍然会和系统B交互，但是前端交互却可以没有。<br />哪怕是第一次登录，用户也可以直接在系统A的页面内直接输入系统 B 中的账号密码，完成登录。系统A可以在后端调用系统B的接口，验证通过后，在系统 A 内创建账号。也可以提前批量调用B的接口，将用户全部导入。<br />总之，用户联邦的集成方式，可以不询问用户的授权，可以没有页面跳转。\n<a name=L3W6m></a></p>\n<h1>交互深度不同</h1>\n<p>账号链接，系统 A 调用系统 B 的用户信息接口，基本上就完成了，不会再有进一步的交互。而用户联邦，则不限于此，A可以调用系统B中的更多相关接口，比如查询用户的组织信息等等。<br />并且，账号链接方式，完全不可能在系统A内修改系统B的用户信息。比如你可以使用微信登录一个网站，但要修改微信账号信息，一定需要用户自己在微信侧完成。<br />但是，用户联邦则可以直接在系统A里修改系统 B 的用户信息。甚至常见的是，用户在系统 A 中修改了信息，需要实时或者定时同步回系统B。\n<a name=Dvkfw></a></p>\n<h1>举例</h1>\n<p>拿Keycloak做为例子，它的身份提供者（Identity Provider）程序使用的是账号链接，允许第三方系统的账号登录Keycloak。常见的社交账号登录，都是账号链接。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACxUlEQVR42pVTy27TQBT1tv2BLuiqiZOW9JE0LajqK6Ug1IcEBbFjCSz5HWDDL/AFVEjsC5tSRZUCYlGgedjjGT9n7IPuJGMlhgWMdOTx6M655557x2rt3cPmVgs7u/u4s38fK411rN/awNZ2C9s7e9jc2kVz7TaWllc1lldWsbhUx0q9Ofpv6rN6Yw21xTqs+YUa5udvYoG+CzWUSjbm5soolyuwK1WU7QpKZRtzpXIB9jB2tDewKraNG7Oz2HjyFK39u6jYZVSrVczMzGBqagrT09P/Bev4+BiHh4d48OgxHp6c4OjoKMfBwcE/ge6bvXV9fY3z83NcXFyg0+ng8vIS7XYbnuchyzIolSKRcgwKSimkaZqD/gkUb/m+j263i4HjoN/vwxkM4DiOhuu6CHwBGfmIA44k8vWeuS485oIxVyc28bS3DLvOqhUNM6VpBiUlrnoe3p918OHzN5yedXD66St4EEOlQCJTDakyqDQDLSuKIrgug+dxcC7AmIcgDBGGEULB8O7jFzRfvMHOy7doPH+NxrNXaH/vQUQpul6CvlBwfAU/ToeEMklAGKpK86/Zk2/cD8G4jzBOciW0qJo4jhBFIUgY3bF6fQe/ugMdMG60xsgCwbn2SwiuwTkHeU8kV1c/QI0lUKw1EBI/GSmcJDIKJREKoQ0noiEEkiRBHMfw/SBXrLscJQo8lPACqYmyAoh4MOo8Y0wTkjJaRMq1epafWUGs0PNiEHHRx2xUMo0PXSJF42qIkBJRBeaOJUIJRyQUMjwsKDQjNU5EMApJPambICSFIpITHc49lDIvmQgMKS1STMrHq7LCWIHKTlT6h39GIb0gumiIxhUGQTChXDclln8nM4TkkSnLkBlCGh/ztodvOZLo8xjMT0aHkyVTMKkjlTQ6xZLJDmqaSWiRd+QjNaU42EVC8rNISN7Suzce/gaEJwaeW+0wWQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/3d4c2b777c38eefeac22f3321867de7b/fcda8/1696203152148-a3023e60-2dec-40e0-a2d4-1dd66e8ffb2e.png\"\n        srcset=\"/static/3d4c2b777c38eefeac22f3321867de7b/12f09/1696203152148-a3023e60-2dec-40e0-a2d4-1dd66e8ffb2e.png 148w,\n/static/3d4c2b777c38eefeac22f3321867de7b/e4a3f/1696203152148-a3023e60-2dec-40e0-a2d4-1dd66e8ffb2e.png 295w,\n/static/3d4c2b777c38eefeac22f3321867de7b/fcda8/1696203152148-a3023e60-2dec-40e0-a2d4-1dd66e8ffb2e.png 590w,\n/static/3d4c2b777c38eefeac22f3321867de7b/efc66/1696203152148-a3023e60-2dec-40e0-a2d4-1dd66e8ffb2e.png 885w,\n/static/3d4c2b777c38eefeac22f3321867de7b/c83ae/1696203152148-a3023e60-2dec-40e0-a2d4-1dd66e8ffb2e.png 1180w,\n/static/3d4c2b777c38eefeac22f3321867de7b/ec5f6/1696203152148-a3023e60-2dec-40e0-a2d4-1dd66e8ffb2e.png 1852w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />而用户联邦（User Federation）提供者程序使用的是用户联邦。一般来说，和一些企业系统，使用用户联邦进行账号互联。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVR42qWPvW4TQRSFV/YDBInCSQECx0EGx7uOTQgJxkih4AWQaOh4EURBwztQ4V0jkJBSUETwAmkMTXoorZ39mbWd/ct+aEZrsCiCI1b6dO7cPXPmXqM/OGT/YMBgcEj37h7d3j3u7/d50H+kdae7S9vcwbS6v1VhdXpl3aO1bdHa7uie0W6btNoWuwcPMU2LZvMOzeZtGlu3aDS2qG82qNc3L+RmifIaG7UaV9c36Dx+wo3r16it17iytkalUqFaVVQvheE4DqPRCHs41KoYDm1sx8FZwraXa1vj/OVRGEmS4vs+rhBMJhPCUPI/nzGbRkhfEHouMhBEgYcMQ2QY4HuexnVd/ajnCYQQBL5fnj2E8pS1wnj7eczTlx948eaI568/8ezVR05/CKK4wJ9lRPH55SY8Of3Ju+Mx779+wz4eM/ryHU/Oyc8hTjLmZzFJkhDH8UoYeXoG6ZwinUORAn8myrJUI6XU6/jlqhdhhFLiCo8kzXRIsTR+lmUURcF0OtXmIAj+iRFFkZ5ArbUgTVOteZ7rYOVZOVCFqQvqoGqli8uz2UxPqforBy52141S/SVd/r9K6C+LMTzbLOSkigAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/eb9582b5e182e2501e3e6ebb0aa6ab48/fcda8/1696203188431-b5ffd78c-f063-454c-993f-fa4f2042983b.png\"\n        srcset=\"/static/eb9582b5e182e2501e3e6ebb0aa6ab48/12f09/1696203188431-b5ffd78c-f063-454c-993f-fa4f2042983b.png 148w,\n/static/eb9582b5e182e2501e3e6ebb0aa6ab48/e4a3f/1696203188431-b5ffd78c-f063-454c-993f-fa4f2042983b.png 295w,\n/static/eb9582b5e182e2501e3e6ebb0aa6ab48/fcda8/1696203188431-b5ffd78c-f063-454c-993f-fa4f2042983b.png 590w,\n/static/eb9582b5e182e2501e3e6ebb0aa6ab48/efc66/1696203188431-b5ffd78c-f063-454c-993f-fa4f2042983b.png 885w,\n/static/eb9582b5e182e2501e3e6ebb0aa6ab48/c83ae/1696203188431-b5ffd78c-f063-454c-993f-fa4f2042983b.png 1180w,\n/static/eb9582b5e182e2501e3e6ebb0aa6ab48/da893/1696203188431-b5ffd78c-f063-454c-993f-fa4f2042983b.png 2130w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=fftiG></a></p>\n<h1>总结</h1>\n<p>账号链接是系统之间通过标准协议和open api的方式，进行账号互联。而用户联邦，则更像是一个系统将另一个系统的用户数据存储当成数据库一样的方式进行操作。<br />账号链接，多用于终端消费者场景。而用户联邦，多用于企业对内的系统。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}}}},"staticQueryHashes":[],"slicesMap":{}}