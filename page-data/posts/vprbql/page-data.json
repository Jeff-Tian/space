{"componentChunkName":"component---src-templates-post-js","path":"/posts/vprbql/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/vprbql","relativePath":"posts/vprbql","frontmatter":{"title":"利用 Keycloak 的 API 来给用户分配角色","stackbit_url_path":"posts/vprbql","date":"2022-03-22T13:35:42","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>上次有用户咨询如何编程创建 Keycloak 用户，我推荐的方式是直接利用 Keycloak 的 API 来完成这件事。因为引入第三方库或者所谓 SDK，增加了复杂性，而它们的本质，还是拼装了 HTTP 请求来调用 Keycloak 的 API。引入库或者 SDK 在大型工程中还是有价值的，但是为了快速演示和解决问题，还是直接调用 Keycloak API 来得快。</p>\n<p><a href=\"https://player.bilibili.com/player.html?bvid=BV1nS4y1D7Xj\">点击查看【bilibili】</a></p>\n<p>随后，又收到<a href=\"https://www.zhihu.com/consult/conversation/1488647402479935488/archive\">咨询</a>如何使用代码给 Keycloak 用分配角色。对于这个问题，我仍然采用直接调用  Keycloak API 的方式来加以说明。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d330e79038e87d52bb66237e53df512/8c381/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.054054054054056%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVR42pWQ6wqCQBBGfV/Tynv9CG8sBNKTqni/u1/MglkGRgOHnZkdzrIj2c4Vln3BWTOg6aZANywB5ap6giwrOChH0bs5JjzXQ+AHYOEdzGEIXQ9+wBBFD0j4EV3X4Z+QOOcg5nn+YBxH9H2PsixfUJ9v5uZpnZ+maRW+QzEMA6qqQhzHSNMURVGImsRN0wiobtsWdV2Lx0n89eVFSAMkSZIEWZYhz3MB9eiOVkEyypdzV7h8YbuOvfWQ8AnuzLoRVCOTzgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8d330e79038e87d52bb66237e53df512/fcda8/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png\"\n        srcset=\"/static/8d330e79038e87d52bb66237e53df512/12f09/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png 148w,\n/static/8d330e79038e87d52bb66237e53df512/e4a3f/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png 295w,\n/static/8d330e79038e87d52bb66237e53df512/fcda8/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png 590w,\n/static/8d330e79038e87d52bb66237e53df512/efc66/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png 885w,\n/static/8d330e79038e87d52bb66237e53df512/c83ae/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png 1180w,\n/static/8d330e79038e87d52bb66237e53df512/8c381/1647954627232-bc191c5d-bdf3-4c5d-b475-acbafafd3c04.png 1267w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>首先，Keycloak 的 API 文档列出了它所有的能力，这个文档地址在： <a href=\"https://www.keycloak.org/docs-api/17.0/rest-api/#_role_mapper_resource\">https://www.keycloak.org/docs-api/17.0/rest-api</a>。</p>\n<p>分配角色，对应了 Keycloak 的 role-mapping API。这个角色映射，又分为两种，即客户端角色，以及领域角色。我在上次的示例应用中分别添加了两个路由： assgin-role，和 assign-realm-role 来对应这两种角色映射。</p>\n<p>源代码见： <a href=\"https://github.com/Jeff-Tian/keycloak-springboot\">https://github.com/Jeff-Tian/keycloak-springboot</a></p>\n<p><a name=clBP4></a></p>\n<h1>分配客户端角色</h1>\n<p>在上一次的文章里，分享了如何创建用户，并为示例创建了一个 demoapp 客户端，以及在这个客户端里增加了一个角色 visitor。</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/480816990\">Free Arch: 如何在 Spring Boot 应用中集成 Keycloak？</a></p>\n<p>现在用代码给指定的用户分配这个角色，需要先分别找到这个客户端的 id 以及角色的 id，这可以通过 Keycloak 管理后台的界面 url 上的最后一部分复制到。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACK0lEQVR42qWRzWsTQRiH9+xOtNhD25MIamzN126y2WyStjQW6+fB/0abxggxhBIoeNG7B8G/wosITWKwaf28ewvUbLK7SbPJI7ulMWCpoD94eJmZ3WfemZFiqo6qGahKmkxUJ+UR0clGkhiRJNl4lphqoMWiaAmdVCpDZiVHPBLmtqoQTiTY2LhLNpHEiKlI11SN4OISC/MLzM7MEJBlLgrBfEBwQQjOC4EQgoB8jkAg4CO8KsvMCoEsBHNzcwhZJre2hhSOpwgpGsGlKK9ev6H16TONeo29VouWx/7+cW2d1NZkvDc1Pjg4oNlsIilahpCiE1ZTNJof8WLbNv+S0WiEpBirpFduEtPSvHu/izVwMU0Ty7axbYfDw584/T49y6Lf7/tr3ryHZVn0ej06HdOXHR0dIaXX73PnwUPSq+vs1hqMXBd3NPI/GA6Hk53H4/GkepwWX3gjqqHqy4RiSWqND/Sd464Gg4HfgSc9jRPx9AbevBRNpMndukfCWPGFXrxjuaMxQ9c9U+jlD2EkbhDTMlwPx6k3mv6ibXZ4+6PHt3bX+2VyBdOcKVyMJHx2a3X/hc1OB9N26Fpnv/a09PeR4wZxfdnvsFZv+Mdtt9s4tkW328V1Xf+y/4YncxwHKapl0LM5giGVL1+/87+RrgaXuHT5Coqmky9s8ri0zaNCie2d55TKFXZevOTJ0yL5zTxbW1vk83mfQqFAsVikVH5GuVymWq1SqVT4BX+UKWQfwVSTAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/791f7835e1e6dab31654fc11a8d5480c/fcda8/1647761528901-7608448e-adcb-4fb6-886b-944ae38baf67.png\"\n        srcset=\"/static/791f7835e1e6dab31654fc11a8d5480c/12f09/1647761528901-7608448e-adcb-4fb6-886b-944ae38baf67.png 148w,\n/static/791f7835e1e6dab31654fc11a8d5480c/e4a3f/1647761528901-7608448e-adcb-4fb6-886b-944ae38baf67.png 295w,\n/static/791f7835e1e6dab31654fc11a8d5480c/fcda8/1647761528901-7608448e-adcb-4fb6-886b-944ae38baf67.png 590w,\n/static/791f7835e1e6dab31654fc11a8d5480c/efc66/1647761528901-7608448e-adcb-4fb6-886b-944ae38baf67.png 885w,\n/static/791f7835e1e6dab31654fc11a8d5480c/c83ae/1647761528901-7608448e-adcb-4fb6-886b-944ae38baf67.png 1180w,\n/static/791f7835e1e6dab31654fc11a8d5480c/1307b/1647761528901-7608448e-adcb-4fb6-886b-944ae38baf67.png 3000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />以上是客户端 id，复制记下来，再找到 visitor 这个角色，复制记下来。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVR42qWSS08TURiGZ1dMW1pEN94SJISL7dCZ6XQ67TBFBEOixsSF/gBD0zP4P/AXqWsTY4AKUWPiioSyLCEo9DKl5TFn7CQVQRd8yZNzf8/7ne8oM/o8Wq6AodvkTRcn71KwHGzDwTEdbNPFMAu4RQe3tMD84jJLy08wzRwFw8QqOJRKDyhaNrqaQUkbJmpGZ3J8ipsj1xkZinMjlmQ0muBaNEEymmQomiB+JUI8NkxiOMFw8iqJoQjj8SiReIyxsbuMxuKY6izKxGyWiel73Lp9h2fPX+AJj1crZV6WK6yUVxCigucJhOchhOhTCcZl4eEJwerqKhUhWHu9hpK15siYRVTD5uu371wm/LaPoup5VCNPKpPj/YeP/Gz5/Dg8pN1u02g0ODk5odvt/oWcH+T09JT9/X2UwuJjlh89JT+3QHVrm26vx2Ff8Pj4OGjP4vt+IBDS6/UChwcHByia5VIsLaHlimxWt4IFKShvlQc7nc65SKEwwn4gmNIsbHcRzSyyvlENFsIULorQ2dl+ICiL4dx/yGzWZmPzt+CgM5nOefxTcFrNMpnSqX7aotPxg7drtVocHR39cWiQwVTDVj5VIJjWLabSBut9h9JBs9kMBGVFL3J51rHMTJF/UFZYutz+/IXLhjKjZklrOaZSGm/evqNer7O7u0utVgvY29v7L+G+nZ0dfgG4zSo587SvYQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/e688c65581d3e63da37346ad2d945ce5/fcda8/1647761574924-59f6c32b-0508-406a-ab7f-b55425daa39a.png\"\n        srcset=\"/static/e688c65581d3e63da37346ad2d945ce5/12f09/1647761574924-59f6c32b-0508-406a-ab7f-b55425daa39a.png 148w,\n/static/e688c65581d3e63da37346ad2d945ce5/e4a3f/1647761574924-59f6c32b-0508-406a-ab7f-b55425daa39a.png 295w,\n/static/e688c65581d3e63da37346ad2d945ce5/fcda8/1647761574924-59f6c32b-0508-406a-ab7f-b55425daa39a.png 590w,\n/static/e688c65581d3e63da37346ad2d945ce5/efc66/1647761574924-59f6c32b-0508-406a-ab7f-b55425daa39a.png 885w,\n/static/e688c65581d3e63da37346ad2d945ce5/c83ae/1647761574924-59f6c32b-0508-406a-ab7f-b55425daa39a.png 1180w,\n/static/e688c65581d3e63da37346ad2d945ce5/1307b/1647761574924-59f6c32b-0508-406a-ab7f-b55425daa39a.png 3000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />随后，使用 <a href=\"https://www.keycloak.org/docs-api/17.0/rest-api/#_client_role_mappings_resource\">https://www.keycloak.org/docs-api/17.0/rest-api/#_client_role_mappings_resource</a> 文档列出的 API 端点，拼装出请求即可。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaklEQVR42n2Ra2vcMBBF/f9Jk77o2rsOaWjot5a29AeVULIb1rZkybKe9imSm4ZS6MDljoS4cwZVVy8uubx6S/vhC+3dN9q7r9x8/E77/hM3t5959bLh4uI19a6maRr29TXNm5p6f6BuDuzrmtt3De1ux+HQUs2zw0wzSwqk6IkpUspb8A6Ch3WBJStt/X+qOp4lWcbMSKWQfc/6eEJ1HVKORWN2IZFCFFdK45zDWlfcOV/6EAJVJxT3x4FjNzL2PfbhJziL0YpJK6yzxBgRUuCDJy2pbBFiKD7bGT3p8ialRNVLxY+HgXMvsaInxsAK20OtUUqxLAshh6X0l/L9RmpLn1UIz4PCe1tCMva6LGitGMeRcZR4n9eyf7SdHd57pkljzFQGZphqkJpuUMzzjJ3NFriuZeoTYaaZpgljDCnF3zSJdV1wOdRYfIjPhPenodBZ+xyYJ2c6IcQ/hE8K3qG05nQW9FKXT/kFiSVYa4IFEHsAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/72cdd88e925bca2db1b312caaf3cbdb5/fcda8/1647955131996-b70e0dfe-7a7c-4b4c-8dca-32f56953755b.png\"\n        srcset=\"/static/72cdd88e925bca2db1b312caaf3cbdb5/12f09/1647955131996-b70e0dfe-7a7c-4b4c-8dca-32f56953755b.png 148w,\n/static/72cdd88e925bca2db1b312caaf3cbdb5/e4a3f/1647955131996-b70e0dfe-7a7c-4b4c-8dca-32f56953755b.png 295w,\n/static/72cdd88e925bca2db1b312caaf3cbdb5/fcda8/1647955131996-b70e0dfe-7a7c-4b4c-8dca-32f56953755b.png 590w,\n/static/72cdd88e925bca2db1b312caaf3cbdb5/efc66/1647955131996-b70e0dfe-7a7c-4b4c-8dca-32f56953755b.png 885w,\n/static/72cdd88e925bca2db1b312caaf3cbdb5/c83ae/1647955131996-b70e0dfe-7a7c-4b4c-8dca-32f56953755b.png 1180w,\n/static/72cdd88e925bca2db1b312caaf3cbdb5/575bd/1647955131996-b70e0dfe-7a7c-4b4c-8dca-32f56953755b.png 1791w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />关键代码见下，注意还是要先获取管理员的访问令牌，并在请求时带上这个令牌。\njava</p>\n<p>public Response jsonRequest(String url, String payload) throws IOException {\nvar mediaType = MediaType.parse(application/json);\nvar body = RequestBody.create(mediaType, payload);\nvar request = new Request.Builder().url(url).method(POST, body).addHeader(Content-Type, application/json).addHeader(Authorization, java.lang.String.format(Bearer %s, getAdminAccessToken().access_token)).build();\nvar res = client.newCall(request).execute();</p>\n<pre><code>System.out.println(java.lang.String.format(jsonRequest response = %s, res.toString()));\n\nreturn res;\n</code></pre>\n<p>}</p>\n<p>public String assignRole(String userId) throws IOException {\nSystem.out.println(java.lang.String.format(assigning role for user = %s, userId));\nvar clientId = 98ea8f07-a7f2-4607-ab56-b5208a90eaa1;\nvar url = java.lang.String.format(<a href=\"https://keycloak.jiwai.win/auth/admin/realms/UniHeart/users/%25s/role-mappings/clients/%25s\">https://keycloak.jiwai.win/auth/admin/realms/UniHeart/users/%s/role-mappings/clients/%s</a>, userId, clientId);\nvar payload = java.lang.String.format([{id: bef4bf69-371b-460a-8a0c-b2943da1983b,name:visitor,description:add roles programatically,composite:false,clientRole:true,containerId:%s}], clientId);</p>\n<pre><code>System.out.println(java.lang.String.format(payload = %s, payload));\n\nreturn this.jsonRequest(url, payload).toString();\n</code></pre>\n<p>}</p>\n<p>一个成功的请求，会拿到 Keycloak 的 204 空返回结果，不要惊讶，这正是操作成功的反馈。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABvklEQVR42q2SS27UQBCGfVqOxA0QG0AimXhmwg1YsmMVkAK2x3Y8/bb74Q91O5NEgl1o6VO1ylXl+qu6Oh5vqfcH6vrA4XDkePzCfn9gt7vZuKmf/BcOt0fevt/z7mPNbV2z3+24vrrm89U1Vd8PaClQRjP7hRiWYrVWnM8TUpyZl5noHWFxRGeY7cTXn5a7k2O2Gjs94LREK0lljMFZi9IKpRRSymKzf11X8sl2XdNGipASlyNzrFvo5YwwC9UwDIzjiBSCcRg59f0T+dv5fMZaW36Q7QVtNrzTfG8Mbz5IPn0zVDnBOYc2piTlToWYUHIqEpTSRb7QjpjWx27/ppMBYSNVlhhTYrEG6xbMHDDOo8yMVoaQEmmFGBMppX8Wo5AIwW8dprQSYyQ8UpLXleQc6/TAai15mpkc50MgxGd8TDifSl4lpeBh6MsismxtdJnRsuSNh20B4wC/f5V7bsYHT0yRkImBJSaEzcXTJnnxviygbVu6tqPrOpqmoW0autOJYZrof9zR398zTlOJ7dqWtmkRQmwvQ4rSfZU74yLFe0KW84LsK6SEf4x5SZ7rS54K/o+TF1QkPz/e1/MH1p6XGEdKwd0AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信截图_20220322115353.png\"\n        title=\"微信截图_20220322115353.png\"\n        src=\"/static/96c27732baeb077506efa052490c6060/fcda8/1647955617783-b83164af-b6cb-4f0a-8277-1787bee6faa7.png\"\n        srcset=\"/static/96c27732baeb077506efa052490c6060/12f09/1647955617783-b83164af-b6cb-4f0a-8277-1787bee6faa7.png 148w,\n/static/96c27732baeb077506efa052490c6060/e4a3f/1647955617783-b83164af-b6cb-4f0a-8277-1787bee6faa7.png 295w,\n/static/96c27732baeb077506efa052490c6060/fcda8/1647955617783-b83164af-b6cb-4f0a-8277-1787bee6faa7.png 590w,\n/static/96c27732baeb077506efa052490c6060/efc66/1647955617783-b83164af-b6cb-4f0a-8277-1787bee6faa7.png 885w,\n/static/96c27732baeb077506efa052490c6060/c83ae/1647955617783-b83164af-b6cb-4f0a-8277-1787bee6faa7.png 1180w,\n/static/96c27732baeb077506efa052490c6060/869d7/1647955617783-b83164af-b6cb-4f0a-8277-1787bee6faa7.png 1477w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />不放心可以在 Keycloak 的后台验证一下。执行请求完成后，去客户端角色详情面板的用户列表查看，可以找到我们传入的用户 id 对应的用户。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.75675675675676%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABR0lEQVR42q2P0UvCUBTG9+jUkdtUrJEVSVaYwyamkAT9eUH0H4Ttbv5DUQ9B5PSxEndxLt3uvrgXq5eeahd+3MP5Dt/5jlSt7mBzy0A+r0CWc5DlLDJy7odMFhuKAk3VoKlF6IoOXS+iVK6goKowtCJKBRWVchmGsQ1pd7+O6l4NV9c3GBAXt4M72LYN13XhOM43hBAQZw2viQ3CNdF3xPxwOIR0bHbQ7l3g9e0daTypafVgdfu4f3hEQCnoZALqUywWC8xmM8znc4Hv+wjDENPpVPS5HgSBgOuUUvFLjdYZTKuHp+cXsCgG+wjBkgSMMURRJP44jkWdJAmWy6UgWc986XzZarWCdHhioWl14Y3HIjI3+9fJB41T8LNH3tqQMbH9r0j1Xwz/lZAbmu0UE9aOTDRaHYxGXjoJW51zdPuX8MaTVBJ+AuCY6d47tRJOAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信截图_20220322115427.png\"\n        title=\"微信截图_20220322115427.png\"\n        src=\"/static/9ecf25b01848152cf2c58541d7d3ad1d/fcda8/1647955632065-c6a20b97-60a8-4968-96c6-b516e88be9a9.png\"\n        srcset=\"/static/9ecf25b01848152cf2c58541d7d3ad1d/12f09/1647955632065-c6a20b97-60a8-4968-96c6-b516e88be9a9.png 148w,\n/static/9ecf25b01848152cf2c58541d7d3ad1d/e4a3f/1647955632065-c6a20b97-60a8-4968-96c6-b516e88be9a9.png 295w,\n/static/9ecf25b01848152cf2c58541d7d3ad1d/fcda8/1647955632065-c6a20b97-60a8-4968-96c6-b516e88be9a9.png 590w,\n/static/9ecf25b01848152cf2c58541d7d3ad1d/efc66/1647955632065-c6a20b97-60a8-4968-96c6-b516e88be9a9.png 885w,\n/static/9ecf25b01848152cf2c58541d7d3ad1d/c83ae/1647955632065-c6a20b97-60a8-4968-96c6-b516e88be9a9.png 1180w,\n/static/9ecf25b01848152cf2c58541d7d3ad1d/a2498/1647955632065-c6a20b97-60a8-4968-96c6-b516e88be9a9.png 1764w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />点击进入用户详情，对比用户 id，正是我们传入的。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.37837837837837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABJ0AAASdAHeZh94AAAB5UlEQVR42pVTf2/aMBDNR1j/gCBNGz9WNmljaLC1Uj91J03TNKDVPso0spDwIyQ2xnFI/KYzxCBKV3rS0118zvO7O9u5vHyLeqOFRvMNXtebBvRtUW/i5asG2q0WOu/a6Pe+oNP5iKveDT63+/jU7aLXv8L19Q3ef+jCeXFxgarrolKpwHXd/6AGt1ZDtVo13+SrtX2+XHduv32HTFOEQYAkScBXK6yEwIr8EcTOc863a/zhHmcwvIMGIIRAqhSUlEBRwJqmrDbehE+Y82MwMoSkSi4jrIMJYt+HnM8gZlOswsB4Nh5j4ftIswx5nmOT58aXKIrCwBmM7g0zadLxEpswAJvOMB97iLy/iP0JIj8A/zPGehGBZznYOgWXyoBioTKjXmtNhHe7yjQW8zn4MoLkHMliASUEdJahICi1U6KtGost27Zkq7AoIGVq+iilNIPKi8KUZrHZnAQdpE8RUpLIhEwf/fk0Dgh/Drclp3R1wtAQfv3NsFwr24pzzBKO7n+ZgDEGz/OglMI8ZljGMfRxrx6BNldqRzjclUyEURQhyzJwliCYTIxaKonWnip738PhfsrT6dTc9oQxu+kchTSUksMOhQjotVCSlFL8HHsw5fKUw4mXvTkH9ukdEh4nnzPlkvAfZ5Z2+M3phUAAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信截图_20220322115446.png\"\n        title=\"微信截图_20220322115446.png\"\n        src=\"/static/73a1e7891c27315c2179976480e3278f/fcda8/1647955841481-41b5f80a-cdbc-4397-a173-8f8150bfa136.png\"\n        srcset=\"/static/73a1e7891c27315c2179976480e3278f/12f09/1647955841481-41b5f80a-cdbc-4397-a173-8f8150bfa136.png 148w,\n/static/73a1e7891c27315c2179976480e3278f/e4a3f/1647955841481-41b5f80a-cdbc-4397-a173-8f8150bfa136.png 295w,\n/static/73a1e7891c27315c2179976480e3278f/fcda8/1647955841481-41b5f80a-cdbc-4397-a173-8f8150bfa136.png 590w,\n/static/73a1e7891c27315c2179976480e3278f/efc66/1647955841481-41b5f80a-cdbc-4397-a173-8f8150bfa136.png 885w,\n/static/73a1e7891c27315c2179976480e3278f/c83ae/1647955841481-41b5f80a-cdbc-4397-a173-8f8150bfa136.png 1180w,\n/static/73a1e7891c27315c2179976480e3278f/0d0e4/1647955841481-41b5f80a-cdbc-4397-a173-8f8150bfa136.png 1230w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=SS3tp></a></p>\n<h1>分配领域角色</h1>\n<p>和分配客户端角色基本相同，也就是一个请求的事情。但是要注意，payload 有所不同，比如，你不能再将客户端角色 id 和 name 填进去，不然会是 404 Role not found。另外，注意 Keycloak 对角色名称是区分大小写的，所以大小写写错，也会是 404 Role not found。</p>\n<p>当然，API 端点也有所区别，分配领域角色利用这个 API： <a href=\"https://www.keycloak.org/docs-api/17.0/rest-api/#_role_mapper_resource\">https://www.keycloak.org/docs-api/17.0/rest-api/#_role_mapper_resource</a><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABTElEQVR42oWRQWvkMAyF89N76FLoQumQyUw7hV4Keyy07O/ZvU47ycR2bMuJ7XyLPbTXFTwky3rSE2p+3NxyddPSPr9yeHnj8PLO06/fdM+vXN92XF3/5G6zp72/p+v27DePtJuWbvdAu91x6DqeNlsed1v2DwcaFxLGL6ScgEy1WViDhxQv73WFXP5W/mfN8TTSnzUShKk/Yf7+IY9njNZopVBfGMfqRQKhIIQaz/NMCHPNxRhpTmfD8aQQNWI/P5iMqTonNeKcZVkWRASlFTFFlrjUXEFpYIzBe1/jnDPNx6D57BVz8DjxlZxTwovUYhFf1VhrKyml9I3SoAyNcalxXjNNPxqOvcY6RxBfCwtxmgzD0KO1xnvHMAw1N8+hogwp3kwT2lic9xeFZeXJOkKQquZLelmpqCrEMqQov9xn/UYx64TRCBJiPdo/ClQKfJFDavkAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c97ce1b67f348c96710d63bd86967ffe/fcda8/1647955462891-e535b0f7-56be-4042-9d9f-af871006df9f.png\"\n        srcset=\"/static/c97ce1b67f348c96710d63bd86967ffe/12f09/1647955462891-e535b0f7-56be-4042-9d9f-af871006df9f.png 148w,\n/static/c97ce1b67f348c96710d63bd86967ffe/e4a3f/1647955462891-e535b0f7-56be-4042-9d9f-af871006df9f.png 295w,\n/static/c97ce1b67f348c96710d63bd86967ffe/fcda8/1647955462891-e535b0f7-56be-4042-9d9f-af871006df9f.png 590w,\n/static/c97ce1b67f348c96710d63bd86967ffe/efc66/1647955462891-e535b0f7-56be-4042-9d9f-af871006df9f.png 885w,\n/static/c97ce1b67f348c96710d63bd86967ffe/c83ae/1647955462891-e535b0f7-56be-4042-9d9f-af871006df9f.png 1180w,\n/static/c97ce1b67f348c96710d63bd86967ffe/776d3/1647955462891-e535b0f7-56be-4042-9d9f-af871006df9f.png 1814w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>关键代码如下：</p>\n<p>java</p>\n<p>public java.lang.String assignRealmRole(String userId) throws IOException {\nSystem.out.println(java.lang.String.format(assigning realm role for user = %s, userId));\nvar clientId = 98ea8f07-a7f2-4607-ab56-b5208a90eaa1;\nvar url = java.lang.String.format(<a href=\"https://keycloak.jiwai.win/auth/admin/realms/UniHeart/users/%25s/role-mappings/realm\">https://keycloak.jiwai.win/auth/admin/realms/UniHeart/users/%s/role-mappings/realm</a>, userId);\nvar payload = java.lang.String.format([{id: 5e47a34a-5c22-457f-af3f-e5dea7b06839, +\nname:offline_access,description:add roles programatically,composite:false,clientRole:false,containerId:%s}], clientId);</p>\n<pre><code>System.out.println(java.lang.String.format(url = %s, with payload = %s, url, payload));\n\nreturn this.jsonRequest(url, payload).toString();\n</code></pre>\n<p>}</p>\n<p>同样，当拿到 Keycloak API 204 空返回时，就是操作成功了。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d9a01d6581cd7524eefb471b268a69b/bb5d0/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAABJElEQVR42mWRW24YIQxFZ6fdXpfRDWQFVftR5SNhHrzNe04FEylSgnSEBdhcX28igvce5xzW2sWMnbWUUhjjZozxjfu+aa2t90EKb2dY+3YcB9d1rQL7vn+gUPvOeZ6Y8ySGQBJBvhCi0HPg12/hx0/Hy7/MFmN8LkNgxs5PdZroLT4ERF/448TntlR9BW76uHnVDSmDrdRK750iggkZ7TOXS5xW8FJWe10pWu2Mm49CfCvK/VixBe8JPpBSJuZCTJlSO7WP5d9aKcH720yj1kYqhdwaZVEJZWCkL6XbbHX6ppRCqffFcezsSmG1XgMLKRH//iE7Ry4FkYikx8co0yaP8/FRWGtdP8/JGvM5ZWPMQmu9MNZSS3nsmQpz/iSldTbb/w/iSh2Zfe3j0QAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信截图_20220322130639.png\"\n        title=\"微信截图_20220322130639.png\"\n        src=\"/static/1d9a01d6581cd7524eefb471b268a69b/fcda8/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png\"\n        srcset=\"/static/1d9a01d6581cd7524eefb471b268a69b/12f09/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png 148w,\n/static/1d9a01d6581cd7524eefb471b268a69b/e4a3f/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png 295w,\n/static/1d9a01d6581cd7524eefb471b268a69b/fcda8/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png 590w,\n/static/1d9a01d6581cd7524eefb471b268a69b/efc66/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png 885w,\n/static/1d9a01d6581cd7524eefb471b268a69b/c83ae/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png 1180w,\n/static/1d9a01d6581cd7524eefb471b268a69b/bb5d0/1647955752757-519919b9-7b98-4358-98e8-6581503ddf0a.png 1453w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />不放心可以通过 Keycloak 后台来人肉验证。</p>\n<p>比如，以上代码是将指定的用户分配到领域 UniHeart 的 offline_access 角色里。执行请求前，先看一下 Keycloak 的角色详情中的用户列表：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d24cd3d8571629979549f55939f89043/29114/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABzklEQVR42qWR64rTUBDH8wgqgtReNkWb9GIprYtrEVdl/SCyzUUL9SlkL7UiIj6ACL5k62LTZtsmJ2nS5ic5264i+kEd+HHO/M/MnGFGudfapdloopdr5PMquYJKLr9DJlsgl/p5ldKOiq7pVPU6tVKdUrlKpdag2WzR0KpoxSJ3ag10vYpyu1zlyrXraHoF07LoHB5imiaGYUg6nQ6maWBZFrZlY6enbUss06Br27y0LV71enS7XZTG3TZZVWPw/iOpiSAk4d9N2XvwhJtFnZOjU5LFnMV4jDd1iWYz4vmMYDohnp0T+j6r1QohBEEQyHscx5csl0upKY8OnqHqdQbHfaZ+xGTmEQqB8H2J657juy7u2RlBGDJxHIbDIX76nsZtGI1GUlPa+wdkb1Xovz5mvgj4+m3C0vOIhJCIxUJ2u3AclnEskxzHIQxDoiiSpN2Nx2PZuVJv3SejavRPBhBHeBOHledBEJAE4gIhYLW6mG3yY8JJklyy9ZXW3kMyhRJv3n2Q4noT/+titsWSTeIfl7Lb3ier6gw2BdMB//zz36JotSZXb+Q5On0rC6ab+h9TjBc9Hj99zqfPX6SQDjktmrJeryVb/3dsY7Z8B1JCzTh9TvszAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信截图_20220322115939.png\"\n        title=\"微信截图_20220322115939.png\"\n        src=\"/static/d24cd3d8571629979549f55939f89043/fcda8/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png\"\n        srcset=\"/static/d24cd3d8571629979549f55939f89043/12f09/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png 148w,\n/static/d24cd3d8571629979549f55939f89043/e4a3f/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png 295w,\n/static/d24cd3d8571629979549f55939f89043/fcda8/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png 590w,\n/static/d24cd3d8571629979549f55939f89043/efc66/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png 885w,\n/static/d24cd3d8571629979549f55939f89043/c83ae/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png 1180w,\n/static/d24cd3d8571629979549f55939f89043/29114/1647955785521-2759795b-be83-4350-b52d-d345120f5224.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />没有 test 用户。</p>\n<p>执行请求成功后，再次查看，有了。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/91b6534bddd0b870cb19c58938cc9d9b/91b29/1647955737169-9bc7212c-1c11-4547-9fdb-029afa83d3d8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABr0lEQVR42p2Ra2/SUBiAGwo4yOb4pnF+98JtLSuFzWUYkQX878Zvkg26RZhmWMKlhV6gPOYcgYRFk+lJnvS9nD49b4+il8qYlTPK5imablA8Lm0pFHWJ2HNiVHbquXyRbF7nfdWgWjZp1C+p1T6gHB29JJPJcHiYIZlIoqpx4vEEajxBTFVlHoupEhHLXFW3tVQywZNkknQqzd5eCuXZ8xek9w/YP3jK+UWNy2aLj/U6jUaDVqv1Vz6taa7zZrMpUd4WDbKaiWacYfW+I1a0XPK/S8lpJkJaKFVpt9s40wmu4zCdThmPRjiOw2q1IoqiR6G8zpd4ldOltGPdsPR9Jnd9Zp6HGywZzkPc8PEn3hFedS1m9k98q0sQRQR+QBCGBIEgkIRhyGw2kydfLBb4vi+n2fSV7HH598h6ha+dLj++3XH/+QsDb4nveXiex3w+3yIEw+GQwWAgY9d16ff7sib6il45RzPfYZxe0L7q0LsfYt32GNg2tm3L04gXvbV8I9nUhWQymWz7uyNfX8sLEV8bjUaMx2M54j9dypvCCUIqhNbN7R9/tBA+fD6MN/wCJp2PTyHiyFQAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信图片_20220322130743.png\"\n        title=\"微信图片_20220322130743.png\"\n        src=\"/static/91b6534bddd0b870cb19c58938cc9d9b/fcda8/1647955737169-9bc7212c-1c11-4547-9fdb-029afa83d3d8.png\"\n        srcset=\"/static/91b6534bddd0b870cb19c58938cc9d9b/12f09/1647955737169-9bc7212c-1c11-4547-9fdb-029afa83d3d8.png 148w,\n/static/91b6534bddd0b870cb19c58938cc9d9b/e4a3f/1647955737169-9bc7212c-1c11-4547-9fdb-029afa83d3d8.png 295w,\n/static/91b6534bddd0b870cb19c58938cc9d9b/fcda8/1647955737169-9bc7212c-1c11-4547-9fdb-029afa83d3d8.png 590w,\n/static/91b6534bddd0b870cb19c58938cc9d9b/efc66/1647955737169-9bc7212c-1c11-4547-9fdb-029afa83d3d8.png 885w,\n/static/91b6534bddd0b870cb19c58938cc9d9b/91b29/1647955737169-9bc7212c-1c11-4547-9fdb-029afa83d3d8.png 983w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=h4uZY></a></p>\n<h1>总结</h1>\n<p>几乎所有的编程操作 Keycloak 的 SDK 或者库，本质上都是利用 Keycloak 的  API 来完成的。我们也可以直接使用一个 http client，编程操作 Keycloak。本文在上一篇编程创建 Keycloak 用户的基础上，再次详解了编程分配用户角色。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}