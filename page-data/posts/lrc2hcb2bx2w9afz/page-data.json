{"componentChunkName":"component---src-templates-post-js","path":"/posts/lrc2hcb2bx2w9afz/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/lrc2hcb2bx2w9afz","relativePath":"posts/lrc2hcb2bx2w9afz","frontmatter":{"title":"【继续更新】尝试在 Keycloak 里打通整个微信生态","stackbit_url_path":"posts/lrc2hcb2bx2w9afz","date":"2023-08-26T14:36:06","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>继上次《<a href=\"https://zhuanlan.zhihu.com/p/652167012\">【重磅更新】关注微信公众号即登录插件升级支持 Keycloak 22！ - Jeff Tian的文章 - 知乎 </a> 》之后，今天继续增加了在 Keycloak 里使用微信开发平台扫码登录的功能。最早基于 Keycloak 实现了关注公众号即登录的场景，一是该方案具有一定的商业价值，二是对于个人来说，可以使用测试公众号，在粉丝数少于 100 人的情况下，实现扫码登录。<br />最近该 Keycloak 微信插件得到知友的支持，通过提供的企业级微信公众号，打通了 Keycloak 的手机端微信登录。今天增加的使用微信开放平台的桌面网页扫码登录，虽然很常见，但是对企业资质要求更严格了。好在有知友的大力支持，暂时也是打通状态（由于开放平台的限制，只能配置一个回调域名，因此后面可能要被收回）。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAAA40lEQVR42qVSW27EIAzk/qdaqWeJFCmpsoAXCI9MNe66zUelbVpLA8Yy9sDY9d4hIqDRz6VAHoI+usaO47gEx2WMAbMgAbe3G+Ij4i/myKrWitaaMmy9IaWkMT0/469QG/cBl3PGNE3wPiDGiG3b4L3Xb+D5N5AYcfcRORe4Vive1xX7visbTRBR/wpq/XyJMlyWBSGEr2JX2Bm2e0AiQ4piatIoUClFGbMZfcL8fPLP6gIHi8BRgHmeleF/MK8Bksr32Fgn/gO7U2Wy3G1/wuLMYa7dG+M0h2ezomzyalR+uvsBuysOHtPSZ0cAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8b8b4c69221ae0c9a28290215f5241cc/fcda8/1693059764387-8b70e416-d27f-49f2-9e8c-46f01ce547ab.png\"\n        srcset=\"/static/8b8b4c69221ae0c9a28290215f5241cc/12f09/1693059764387-8b70e416-d27f-49f2-9e8c-46f01ce547ab.png 148w,\n/static/8b8b4c69221ae0c9a28290215f5241cc/e4a3f/1693059764387-8b70e416-d27f-49f2-9e8c-46f01ce547ab.png 295w,\n/static/8b8b4c69221ae0c9a28290215f5241cc/fcda8/1693059764387-8b70e416-d27f-49f2-9e8c-46f01ce547ab.png 590w,\n/static/8b8b4c69221ae0c9a28290215f5241cc/efc66/1693059764387-8b70e416-d27f-49f2-9e8c-46f01ce547ab.png 885w,\n/static/8b8b4c69221ae0c9a28290215f5241cc/c83ae/1693059764387-8b70e416-d27f-49f2-9e8c-46f01ce547ab.png 1180w,\n/static/8b8b4c69221ae0c9a28290215f5241cc/c7dae/1693059764387-8b70e416-d27f-49f2-9e8c-46f01ce547ab.png 1621w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>总结一下目前 Keycloak 微信插件的功能：\n<a name=G6n4F></a></p>\n<h1>关注微信公众号即登录</h1>\n<p>这是最早开发的一个功能，适用于桌面端网页。用户选择微信登录，会展示一个带参二维码（可以展示在非微信的网页里）。用户扫码后，如果是非粉丝，只需要点击关注即登录。而如果是老粉丝，扫完即登录。体验链接： <a href=\"https://keycloak.jiwai.win/realms/UniHeart/account/#/\">https://keycloak.jiwai.win/realms/UniHeart/account/</a>。</p>\n<p>有企业认证的服务号，就可以实现该功能。注意上述链接中使用了我个人的测试公众号，只能支持 100 个用户。\n<a name=oU1fs></a></p>\n<h1>手机端微信登录</h1>\n<p>手机端的微信登录，仍然是使用了公众号的能力。所以只要有一个企业认证的服务号，就可以同时实现桌面端和手机端的微信登录。体验链接：<a href=\"https://keycloak.jiwai.win/realms/UniHeart/account/#/\">https://keycloak.jiwai.win/realms/UniHeart/account/</a>。</p>\n<p><a name=s0EaD></a></p>\n<h1>利用微信开放平台的桌面网页微信登录</h1>\n<p>体验链接：<a href=\"https://keycloak.jiwai.win/realms/Brickverse/account/#/\">https://keycloak.jiwai.win/realms/Brickverse/account/#/</a>，注意，这是另一个域了，因为 UniHeart 域已经配置了关注微信公众号即登录，所以开了一个新域用来展示开放平台的微信登录功能。要使用这个功能，需要企业在微信开放平台里注册网站应用，这是除了公众号认证之外，又需要额外维护的一个微信资源，尽管每年额外的 300 元的认证费并不贵，但是一年一次，挺烦的。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.54054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABuElEQVR42l2OS2sTcRTF5/voJCmpMFqbCPUDuHAnmIeJSSC4E0HwE7h2IRZ8btSd6EKKC02mU6ugYGmMbWqTSdMxE21tyWQenfnJ/x9jWy8c7j3nnvtQ9n/bDPZ+0e0P6ZgWna0B6x0bc8vih2libW5gWgPs9gbdjkl3u0+/1aTd7WH1trG+r9M2e/T6P+laNsraWovGaoOVLyu8qS+woL+i/k7nba1GTTfQl5ZZNAyMDx8x3i+jLxrUpbY05n/7ggsoqnoSNaainoiTr17iQnWW2TPnmDk7w/m5OVKpFLFYjKmpBKemp0kkEpzWNJLJJPF4nHQ6jaZp0iOyksvlEMhkL3Pj+k2u3blIqXqFYuEqlUqFUqlENpuVnkKhIOtisUg+n5d1uVyWPJPJyL7CkRjtB3zafU07/Mye59J3ban7vk8YhrJ2RiOZPc/DcRypR1EkuYAiiMBkwGMHPbg3PnDgMukLiAjDQ/9k2VGu/DNGIS82X/Kg+ZDbX2/x6NtjdtxdooMI13UJgkB+IPJkRsThsbF2bOHT1nPmG/d50nzG3dV5bMcmDEKGwyGe7+M4IzzPP7bof/wBiY8Na2nS4EYAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8136b207351014c05ced232f37c5ba92/fcda8/1693059552043-bd5e0caa-a8f6-4943-b42c-0fb4a7233737.png\"\n        srcset=\"/static/8136b207351014c05ced232f37c5ba92/12f09/1693059552043-bd5e0caa-a8f6-4943-b42c-0fb4a7233737.png 148w,\n/static/8136b207351014c05ced232f37c5ba92/e4a3f/1693059552043-bd5e0caa-a8f6-4943-b42c-0fb4a7233737.png 295w,\n/static/8136b207351014c05ced232f37c5ba92/fcda8/1693059552043-bd5e0caa-a8f6-4943-b42c-0fb4a7233737.png 590w,\n/static/8136b207351014c05ced232f37c5ba92/efc66/1693059552043-bd5e0caa-a8f6-4943-b42c-0fb4a7233737.png 885w,\n/static/8136b207351014c05ced232f37c5ba92/c83ae/1693059552043-bd5e0caa-a8f6-4943-b42c-0fb4a7233737.png 1180w,\n/static/8136b207351014c05ced232f37c5ba92/b1584/1693059552043-bd5e0caa-a8f6-4943-b42c-0fb4a7233737.png 1342w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />要使用微信登录的能力，还得确保接口状态是已获得。总之，比开发关注公众号即登录的前置条件更繁琐，但是具体到写代码时，由于是标准的 OIDC 协议，可以无脑对接，相对关注公众号即登录少一些挑战。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.27027027027026%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVR42pWSy27bMBBF9Xm1DclOFoY/O+tskyiuHhxqhk9RMywox62LJKh7QBAkpIN7CbI6nU7H4/FwOOz3++12W688Pjw2dVPX9Y8bNpvN5bemaZq63u12lda6HwYA8N67K7frz/gQPLOLscorIpJSyncSQn5+zkRF7roONCgYfZj/oYmUydr09MRKFRkUTKgp4rLw8h3MCzOLXNacMzNXIYS2bQkJEQHArFDZ/YYQ1HQ+w/l9fHvFcUQirRQhViICACLCzEqBtdY5Nyf5q2xw2ZnZWTMO2ZpcYkuDKqXU98O80nfdz26YyMY4p1tiTNY4UNj3S4zLktDNLixVDOH15QWRiOha25rPWPsx1s8TEllXMbPW+lLbkMl3IyJFHvrhemZljAEArTUhlbg16ssn8CG3beucTykhorU2hHBvsoiEEJxzRZ7QO/8ftUX+3Iolc2fsRf4FobQJHh+6+J0AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f74c3ad4735f4fe479e9aee3142bd524/fcda8/1693059650745-63430ddd-2e2c-482e-bf71-57011a55f619.png\"\n        srcset=\"/static/f74c3ad4735f4fe479e9aee3142bd524/12f09/1693059650745-63430ddd-2e2c-482e-bf71-57011a55f619.png 148w,\n/static/f74c3ad4735f4fe479e9aee3142bd524/e4a3f/1693059650745-63430ddd-2e2c-482e-bf71-57011a55f619.png 295w,\n/static/f74c3ad4735f4fe479e9aee3142bd524/fcda8/1693059650745-63430ddd-2e2c-482e-bf71-57011a55f619.png 590w,\n/static/f74c3ad4735f4fe479e9aee3142bd524/efc66/1693059650745-63430ddd-2e2c-482e-bf71-57011a55f619.png 885w,\n/static/f74c3ad4735f4fe479e9aee3142bd524/c83ae/1693059650745-63430ddd-2e2c-482e-bf71-57011a55f619.png 1180w,\n/static/f74c3ad4735f4fe479e9aee3142bd524/e9140/1693059650745-63430ddd-2e2c-482e-bf71-57011a55f619.png 1226w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=wzk2S></a></p>\n<h1>配置项</h1>\n<p>一共有 4 个配置项，<strong>小程序</strong>的留待以后再说。前 3 个配置分别对应上面的 3 个功能。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.48648648648649%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJklEQVR42p2Sa08TQRhG918YQal0awpYLUVQehECGGP838bEL4JpY0ShiJR2293u/b4zx0yXkGA0Jm5y8s7uh2fOzLPa02aL9ScN9FqNRqNBvb72V3S9RlXXqS7mn9Hq6xvcX1pms7XF+w8fOT75zMnxMYN+n/5vDAaDf6JtPt/h4apOZ2+fIIrJ8gLJ/z/azm6HlWqNl+0u0+sR3nyOORljGQaOZWKbM1zLIvY9hJQIuEMhBEVR3KI929pmqVJlv9MhmhpI38M3xsTmlNS2SOcWqT0nt0ykaSDOThHD7yWXQ2Qc3TVsNFssVVbp7baZD8+JpwbxdEIym5LPzUVQZpmLtdpMWjOk5yLV+8xAFgVSitupHb55S3P7Be+OjnBNkyQMiQOfJAxIo4giSSiyDBH4iLOviNMviP6nxZRXP5DjK8T5N8TlBTJN0XZ7e2w0W7w+OGR2MSS2TLzJNf5kTGzNKDyH3HUoXKc0c2ykMUamCVLKEiFKpER7pD/m3oMVXrXb+MaExLEJzRmhZZI6NrnvLShUkDquChtdIifXyPGovMefF+V3FajX11muVOl1utijK7zJmMicIQOfzLERqt0bSsN5aWnPkVGIDAOkbS3Wi1L0+hr3K6scdLt4U4PU9/FMk9h1yMKAPAop1F2qQGUxHpUhqoQkRkYRMs/K8CIvDVXLe93e4piZ75F5LoUqxXMRYXCL9G8MlVHglaaqbWWufqss4xcprBtntSdTKwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c726d915d94171a3ff14a5f832f1f9b3/fcda8/1693059222226-197c85c1-3c64-44a1-ace4-13548a9861c1.png\"\n        srcset=\"/static/c726d915d94171a3ff14a5f832f1f9b3/12f09/1693059222226-197c85c1-3c64-44a1-ace4-13548a9861c1.png 148w,\n/static/c726d915d94171a3ff14a5f832f1f9b3/e4a3f/1693059222226-197c85c1-3c64-44a1-ace4-13548a9861c1.png 295w,\n/static/c726d915d94171a3ff14a5f832f1f9b3/fcda8/1693059222226-197c85c1-3c64-44a1-ace4-13548a9861c1.png 590w,\n/static/c726d915d94171a3ff14a5f832f1f9b3/efc66/1693059222226-197c85c1-3c64-44a1-ace4-13548a9861c1.png 885w,\n/static/c726d915d94171a3ff14a5f832f1f9b3/c83ae/1693059222226-197c85c1-3c64-44a1-ace4-13548a9861c1.png 1180w,\n/static/c726d915d94171a3ff14a5f832f1f9b3/7af19/1693059222226-197c85c1-3c64-44a1-ace4-13548a9861c1.png 1359w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=wftjH></a></p>\n<h1>温馨提示</h1>\n<p>对于第一次使用微信登录 Keycloak 的用户，会被要求补充邮箱，这是由于 Keycloak 的默认设置，对用户都会要求有 Email 字段。如果希望不要用户补充邮箱，可以从域配置中禁用，具体的做法是在 Authentication 的 first broker login 里 Disable Review Profile 选项。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACAklEQVR42pWRXU8TQRSG+xe4AYGmQVr6IQRFSUwMMZoYokGRYgl2SzDxN9GtQjVyKxr5WZha3H7s7O7MzjxmBrZR442TnLzZzZln3vec3Lfzc86+fOXT6SndDx9p+z7tts+RVT/TDn6n4/So7eN33k3U3jk+6fL++ISTbpdcvlBgoVhiamqKm4uLeK0Dmp5Hs9nE8zxaXguv2XTf/6r9/f2rvlaLw8NDctXaMsVSmemZWeq7DcJI0r8MGA4H6DRFqoT/Obnba+tUaivM5RfY2W0QxQmhiBBxgoglYZSQpqlrNoA2BmPMtV5BTPZPa3J31++zsrrGzGye+qs9okQ5SCQNQmrCRDuQSmJkJDBKYZR0qqVkPB47UAZ1Dpcqt5idL/Cy3kAbiKMIrdNrT0CaEvV7jPo/MJFAixCSmHHvO+dnn4nieOI0t3rnHuXqMnP5Ai92Gkhte2NGo9EkqgWmwSXxcIARoQNqCx4GRMFP9G+xc5XqMsWlKtM35tnarqM0SJkQDAYEQYAQgiRJMGlKLEJSKa9jK7SSk2VMgJtPn/Nk85mb48Gbtw7otislSinn0s7IVigEWhs3iGwxtieDOeCDjUdsPHxMqVxj7/UBykCqlIucDTxzYJ1aQPZAVn8AF0sViuWa2/LW9u4E2Ov1uLi4oN/vu+jWsQVazR74G2aBvwCjRM2Xn+afHwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/855b9a97c7a4fc5ce7d8421d6dcdbc00/fcda8/1693059443816-5ea0ba68-36cf-44e9-adf8-5a16da3c9fee.png\"\n        srcset=\"/static/855b9a97c7a4fc5ce7d8421d6dcdbc00/12f09/1693059443816-5ea0ba68-36cf-44e9-adf8-5a16da3c9fee.png 148w,\n/static/855b9a97c7a4fc5ce7d8421d6dcdbc00/e4a3f/1693059443816-5ea0ba68-36cf-44e9-adf8-5a16da3c9fee.png 295w,\n/static/855b9a97c7a4fc5ce7d8421d6dcdbc00/fcda8/1693059443816-5ea0ba68-36cf-44e9-adf8-5a16da3c9fee.png 590w,\n/static/855b9a97c7a4fc5ce7d8421d6dcdbc00/efc66/1693059443816-5ea0ba68-36cf-44e9-adf8-5a16da3c9fee.png 885w,\n/static/855b9a97c7a4fc5ce7d8421d6dcdbc00/c83ae/1693059443816-5ea0ba68-36cf-44e9-adf8-5a16da3c9fee.png 1180w,\n/static/855b9a97c7a4fc5ce7d8421d6dcdbc00/56fb6/1693059443816-5ea0ba68-36cf-44e9-adf8-5a16da3c9fee.png 2752w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />之所以是从 first broker login 里改，而不是从 registration 里改，是因为 Keycloak 在配置第三方 identity provider 时，First Login flow 默认选的是 first broker login。如果改成了 registration，应该就是要在注册那里改。关于 first broker login，可以从《<a href=\"https://zhuanlan.zhihu.com/p/474133251\">首次代理登录流程 - Jeff Tian的文章 - 知乎 </a> 》了解更多详情。</p>\n<p><a name=IgPq9></a></p>\n<h1>如何保证不同端的同一账号被正确识别？</h1>\n<p>如果同一个用户分别使用桌面端网页微信登录和手机端网页登录，在 Keycloak 里会分别创建出两个不同的用户吗？<br />这取决于是否能够拿到该用户在同一个开放平台下的 unionid。微信开放平台的 unionid 对于公众号和网站应用，对同一人分配的都是同一个。但是公众号下的 openid 和网站应用下的 openid，肯定是不同的。<br />对于企业来说，可以将公众号和网站应用绑定在同一个开放平台账号下，从而保证它们的 unionid 是和用户一一对应的。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMElEQVR42p3Py07CQBTG8b4QljIzpVwKC5+Ct/QGRgKU686wMGHrAnVjYkQRWmhn/qYNJGgMGr/klzM5mXzJsVyvTNEr49fqVKo1pHRRqoiQKiNdD+kWcYSiIF2EdCkISUEonILI5p5URSzHccjn89i2nc1c7gTf92k0GvjVKvVyidN6DWXbuI6DEALP81BSUalUMumuVCqRdlnj8ZjvhsMhwaDPqHVF7/KcSfuG7s0lg+YZQavJcDyh1+0SBEH2v9PpMBqN6Pf7WBxLomG7hSSGeA3hkt9iJUnCITQswlfaj9e05hfMnqcQa8x2g4m3aKPRWmN2svdul7KMMRxKE8URdw8zbu+nzF+eeFuueV1+sEi9H/fl5H2h0YZoHROuNmyimFUYsgqjP/m5cDf/k09nqwmag2As0gAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f1fc84cf762cd014ef8d2100f78b5c2c/fcda8/1693059998487-75fc55d0-d228-47ea-bf00-26c5fefe520c.png\"\n        srcset=\"/static/f1fc84cf762cd014ef8d2100f78b5c2c/12f09/1693059998487-75fc55d0-d228-47ea-bf00-26c5fefe520c.png 148w,\n/static/f1fc84cf762cd014ef8d2100f78b5c2c/e4a3f/1693059998487-75fc55d0-d228-47ea-bf00-26c5fefe520c.png 295w,\n/static/f1fc84cf762cd014ef8d2100f78b5c2c/fcda8/1693059998487-75fc55d0-d228-47ea-bf00-26c5fefe520c.png 590w,\n/static/f1fc84cf762cd014ef8d2100f78b5c2c/efc66/1693059998487-75fc55d0-d228-47ea-bf00-26c5fefe520c.png 885w,\n/static/f1fc84cf762cd014ef8d2100f78b5c2c/fcbaf/1693059998487-75fc55d0-d228-47ea-bf00-26c5fefe520c.png 895w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />对于我的 Keycloak 实例，<a href=\"https://keycloak.jiwai.win\">https://keycloak.jiwai.win</a> 来说，则不能保证。原因是混用了个人，以及不同的企业（甚至会随时变化）的微信资源。</p>\n<p><a name=YC8E6></a></p>\n<h1>最新版本</h1>\n<p>目前的最新版本链接：<a href=\"https://github.com/Jeff-Tian/keycloak-services-social-weixin/releases/tag/0.4.4\">https://github.com/Jeff-Tian/keycloak-services-social-weixin/releases/tag/0.4.4</a><br />源代码，以及 jar 文件，都可以从上面的链接里找到。如果要通过 maven 的方式引用，可以添加如下内容到 pom.xml 的依赖项里：\nxml\n<dependency>\n<groupId>org.keycloak</groupId>\n<artifactId>keycloak-services-social-weixin</artifactId>\n<version>0.4.4</version>\n</dependency></p>\n<p>然后执行 mvn install即可。\n<a name=ITd3B></a></p>\n<h1>使用方法</h1>\n<p>将 jar 文件复制到 Keycloak 的 /opt/keycloak/providers/目录里即可。 <a href=\"https://keycloak.jiwai.win\">https://keycloak.jiwai.win</a> 就是这样用的，源代码见： <a href=\"https://github.com/jeff-tian/keycloak-heroku\">https://github.com/jeff-tian/keycloak-heroku</a></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}