{"componentChunkName":"component---src-templates-post-js","path":"/posts/解决JFreeChart的中文乱码问题/","result":{"data":{"sitePage":{"id":"SitePage /posts/解决JFreeChart的中文乱码问题/"}},"pageContext":{"url":"/posts/解决JFreeChart的中文乱码问题/","relativePath":"posts/解决JFreeChart的中文乱码问题.md","relativeDir":"posts","base":"解决JFreeChart的中文乱码问题.md","name":"解决JFreeChart的中文乱码问题","frontmatter":{"title":"解决JFreeChart的中文乱码问题","stackbit_url_path":"posts/解决JFreeChart的中文乱码问题","date":"2010-04-04 13:01:23","excerpt":"","comments_count":0,"positive_reactions_count":0,"tags":[null],"canonical_url":"https://be-net.azurewebsites.net/post/2010/04/04/解决JFreeChart的中文乱码问题","template":"post"},"html":"<pre><code>    &#x3C;p>今天在Web项目中使用JFreeChart做图表，图表中的中文字符全为方框，如下：&#x3C;/p>\n</code></pre>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c37ec410f1e181a98acf30521216a383/8c557/image_202.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 57.432432432432435%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACRUlEQVR42m2TS2sTURiG++9qQXDjqkV02+Ky4sK1FpdCsYiCtIIgCW2axCaTmXObSzJJzMw0qSnYSVpC3YgLXagg6iNzUoqii/fcODzf5bxn4fT0lDzPmUxy8nzCycnUzsX5YDCg1+uRpSnJYGD34/GY6XRi7+T59OL+1DLOzs5YMMbgui6eJ9C6Sre7h5A1HKeFEAIpJW4hrZFC4LkujuMiRJUgKNHtVgiCKq1WC9/3WYiiCKUUxiiCwCGOHXzfQymN8iRCSDquS6dWw9MaIRVSaozxMKZJGLoEQRFYUbAWwjC0wCJKp7NPr1dDqQbSkzQiyZm7Dy93YGWF2fpdjC+JIjkPqMylikr+AEqCoEG7fUAcH6BUCy1d6uVjSq2PfHlR4+uNm4wePaC8F7Ozk9isikS0LqT/BRpTs1nG8Wuk18QJPM4fHvFz45h28xlO5Tnbr45ZXv7B6uoHtC7a4iPlfzOcR/J9aaW1oOWGHI8eM+YKt75fo/ymzJ3bn1lcgrW192jdIIqatNsOYej8DZw3uSh3l36/gpR1PKEIlWJjcp+r365T6m5zb/0Ti0u/2NxsE0V1tN4ljmv4ftU6wgKLoeiB1tKWYYy4WGuU1OiWoa5qCL/J0ydDtrZigsBDax+tA1v2fL545bkPPXx/n3anRJJUMKZqvVZ4TggP5RUeVGjTJAhchCfs+VzC6tKH5+fnzGYz8nc5aT+h389IkpH9HelRSpqmDEcpWZYwSt6SDjKS4ZD08JDDLGOYZUwmE8soWL8B89rKJ9+hInwAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image 202\" title=\"image 202\" src=\"/static/c37ec410f1e181a98acf30521216a383/fcda8/image_202.png\" srcset=\"/static/c37ec410f1e181a98acf30521216a383/12f09/image_202.png 148w,\n/static/c37ec410f1e181a98acf30521216a383/e4a3f/image_202.png 295w,\n/static/c37ec410f1e181a98acf30521216a383/fcda8/image_202.png 590w,\n/static/c37ec410f1e181a98acf30521216a383/8c557/image_202.png 700w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<p>后来想，可能是由于JFreeChart是外国人开发的，所以对中文支持不太好。于是对每个要显示中文字符的地方都显式指定中文字体，解决了乱码问题。即在页首import java.awt.Font，然后使用chart.getTitle().setFont(new Font(\"宋体\", Font.PLAIN, 12)); chart.getLegend().setFont(new Font(\"宋体\", Font.PLAIN, 12)); 的方式指定字体。</p>\n<p>效果如下：</p>\n<p>&nbsp;</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ad16a11a66a6e54a60030dc6e2a43467/8c557/image_203.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 57.432432432432435%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQElEQVR42m2TzWsTQRyG88+JX+DR0mORXkS86s2TXkQsgkJB0aJosVXatEl2d3Y+9mPy2SS7mzZUI1LSg3qQouhNeGQ2te3Bw8P8BoaHmZd3KuPxmDzPKYqCPHeMynm2z+l0OoggQIUhoRD0+31Go9HJ2VNynKsSRRFCCISQpGmV4XADrbfxPJ8gCJBKoeIYmaaY8mxAo+GjVJVOZ51+f4NWq4rv+zhXxVqL1po4lsSxT5L4GB1iTEQkFSaU7DQ8+qurKCGQ2qB1hDEKrUO0lsezptlsUklTJ1RYu02rtUWvV8dEAUpIttqKqdqENyswN8eX6zeIjMBaJzAYc4pSzmHPCj3abY9Wq4HWAmMEjVefWa394sdKg58L1xgsP+Dtepfl5YIkkcdS/X9hmjZoNh11tAzwY8m3+wN42CFSj6nVX/L89Qfm5/+wsHBEGKoyFqWiMoIzwhSlNFGkSVNVYiJJIFL2x4/oco55LvNuZ41bN4+4eAkWF78ipU+z6V4VYG2AUnImtNYJDWnq0ett0utVkbJOKDWJ1tz9dI8rv6+y1n3BndvfOX8BlpY6WFvH2lnmSbKNlCdCW+bgbuiIY7fOgtbu5kFMTdVQsc+zpxlPnrRJEteCGK1jlIqPZz0T/uthkmzQ6b5nMHA93MLzgrLQoRQooZGhQhuPOA4IhSR0RXfIECnDsrNlD6fTKQcHB3zcnzDo9tnpFwyHu2Xzs72MLMsY7WYUxZBisEc2yBmORgzd73JkGZPJpHQcHh7yFzxAx+Sw1Ww0AAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image 203\" title=\"image 203\" src=\"/static/ad16a11a66a6e54a60030dc6e2a43467/fcda8/image_203.png\" srcset=\"/static/ad16a11a66a6e54a60030dc6e2a43467/12f09/image_203.png 148w,\n/static/ad16a11a66a6e54a60030dc6e2a43467/e4a3f/image_203.png 295w,\n/static/ad16a11a66a6e54a60030dc6e2a43467/fcda8/image_203.png 590w,\n/static/ad16a11a66a6e54a60030dc6e2a43467/8c557/image_203.png 700w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<p>&nbsp;全部源码为：</p>\n<pre class=\"brush: java\">&lt;%@ page contentType=\"text/html;charset=GBK\"%&gt;\n&lt;%@ page import=\"org.jfree.chart.*,\n\t\t\t\torg.jfree.chart.plot.PiePlot,\n\t\t\t\torg.jfree.data.general.DefaultPieDataset,\n\t\t\t\torg.jfree.chart.servlet.ServletUtilities,\n\t\t\t\torg.jfree.chart.labels.StandardPieSectionLabelGenerator,\n\t\t\t\tjava.text.NumberFormat,\n\t\t\t\tjava.awt.Font\" %&gt;\n&lt;%\n\t// 设置数据集\n\tDefaultPieDataset dataset = new DefaultPieDataset();\n\tdataset.setValue(\"初级程序员\", 10000);\n\tdataset.setValue(\"中级程序员\", 23000);\n\tdataset.setValue(\"高级程序员\", 10000);\n\tdataset.setValue(\"项目经理\", 6000);\n\tdataset.setValue(\"系统分析师\", 6000);\n\tdataset.setValue(\"软件架构师\", 3000);\n\tdataset.setValue(\"其他\", 10000);</pre>\n<pre><code>JFreeChart chart = ChartFactory.createPieChart(\"IT 行业职业分布图\", dataset, true, false, false);\nPiePlot pieplot = (PiePlot) chart.getPlot();\npieplot.setNoDataMessage(\"无数据显示\");\n\n// 把“中级程序员”的那一块“挖”出来50%\npieplot.setExplodePercent(\"中级程序员\", 0.5D);\n// 显示各项所占的百分比\npieplot.setCircular(true);\npieplot.setLabelGenerator(new StandardPieSectionLabelGenerator(\"{0} = 沙滩脚印\", \n\t\tNumberFormat.getNumberInstance(),\n\t\tNumberFormat.getNumberInstance()));\n\n/* 解决项目名称中的中文乱码问题 */\npieplot.setLabelFont(new Font(\"宋体\", Font.PLAIN, 12));\n\n/* 解决图表标题中的中文乱码问题 */\nchart.getTitle().setFont(new Font(\"黑体\", Font.BOLD, 16));\n\n/* 解决图例的中文乱码问题 */\nchart.getLegend().setItemFont(new Font(\"宋体\", Font.PLAIN, 12));\n\nString filename = ServletUtilities.saveChartAsPNG(chart, 700, 400, null, session);\nString graphURL = request.getContextPath() + \"/DisplayChart?filename=\" + filename;\n</code></pre>\n<p>%>\n<img src=\"&lt;%= graphURL %&gt;\" width=\"700\" height=\"400\" border=\"0\" usemap=\"#&lt;%= filename %&gt;\">\n</pre></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}}}},"staticQueryHashes":[],"slicesMap":{}}