{"componentChunkName":"component---src-templates-post-js","path":"/posts/dr6bhyi25ei95gw0/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/dr6bhyi25ei95gw0","relativePath":"posts/dr6bhyi25ei95gw0","frontmatter":{"title":"在 Duende IdentityServer 中集成 Epic Games 登录","stackbit_url_path":"posts/dr6bhyi25ei95gw0","date":"2023-07-26T12:20:10","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p><a name=VQaIC></a></p>\n<h1>效果演示</h1>\n<ul>\n<li><a href=\"https://id6-jeff-tian.cloud.okteto.net/Account/Login\">https://id6-jeff-tian.cloud.okteto.net/Account/Login</a> 或者</li>\n<li><a href=\"https://id6.azurewebsites.net/Account/Login\">https://id6.azurewebsites.net/Account/Login</a></li>\n</ul>\n<p>关于如何部署 Duende IdentityServer，请参考《<a href=\"https://zhuanlan.zhihu.com/p/482103322\">身份验证哪家强？IdentityServer 初体验 - Jeff Tian的文章 - 知乎 </a> 》和《<a href=\"https://zhuanlan.zhihu.com/p/591856146\">Free Arch： 将 IdentityServer 部署到 Okteto - Jeff Tian的文章 - 知乎 </a> 》。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7UlEQVR42p1SXWsTQRTdH1vBPigIftekWlRETEyapIZaUPTJVxFRmoJPtm7b1H63kcTN4qZZjflYZnY32Zk5MtNksrWliBfO3pmdc+/cufcYr16/QTpbwON0FqlMHunZAp5kcsqnsnkUigvIF58jPTuHp7mzMYpJZXIwEslHuHozganpGSRnHip/5+59JO49wI2paVy/ncSVa7cwcfESJibPxoXJyxoGhiaEQL/fRxiGcF0XPc/D/5ghuFALQgh2dvdwcHiIza0t1Grf9UVxcM5PIX5uyI+0IAhgWXU0my663a6qdpRQ+X+ucBggn1q3bRwdNUEIRRRFGAwGYIwpyEoixkCpry6XkDFBGGqe5OiE8ofTaKBaq6FS+Yb9/QO0Wi0VRCkdeoJqtQrLsmDbtoLjOOCMwfd9xdEJZXb5VM/zTlUn95JHgwCfzXVsbO+ivLmD5bUyvqxtwFz/qs4l1xg1U5qc7O92Z9y30SCG+3bDwbO5ebxYeIlPi0tYXTGxbJaxslrWfCMe3G530Ot54FycmJ4SAotAfthYev8BH9++Q6/hAIIhLjudUE/aJ/Ap0aRjWYjxBZyPE/DjdjDOlY8lHEvD/kVRsZqq2Z1O96RsVEBMl+fLRiBiHEUTmC/VsVgqwf3Z0lX+Le7z8Afe47dmV0ejGAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/9fbc5a22df09e63fcddb34a5f3ffc59f/fcda8/1690369808872-ab75c680-f636-4a78-8d1c-421e3e6794f3.png\"\n        srcset=\"/static/9fbc5a22df09e63fcddb34a5f3ffc59f/12f09/1690369808872-ab75c680-f636-4a78-8d1c-421e3e6794f3.png 148w,\n/static/9fbc5a22df09e63fcddb34a5f3ffc59f/e4a3f/1690369808872-ab75c680-f636-4a78-8d1c-421e3e6794f3.png 295w,\n/static/9fbc5a22df09e63fcddb34a5f3ffc59f/fcda8/1690369808872-ab75c680-f636-4a78-8d1c-421e3e6794f3.png 590w,\n/static/9fbc5a22df09e63fcddb34a5f3ffc59f/efc66/1690369808872-ab75c680-f636-4a78-8d1c-421e3e6794f3.png 885w,\n/static/9fbc5a22df09e63fcddb34a5f3ffc59f/c83ae/1690369808872-ab75c680-f636-4a78-8d1c-421e3e6794f3.png 1180w,\n/static/9fbc5a22df09e63fcddb34a5f3ffc59f/7fc10/1690369808872-ab75c680-f636-4a78-8d1c-421e3e6794f3.png 2634w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />登录成功：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4klEQVR42q2S+3LSQBjF896WaWsRC9KpD6Ait0DFtqMPoc4I2suM09IgJIFALhvSLDdDkuPsF6GDo3/IuDNn9re7X85mz64ky+colKt4VaygUKridVnGi0IJ1XoDjbN3qDXOUHtzirfn7/GyWEGxUkOxWkdJSK6jUJaTsXxCLO3uZ5HJ5ZHJHuEwf4xs/jnST58hkzuiuSeHeRxkcjSX2k8jtZfGzu4BdkS/l8ajX5wifgwJ/7lJYRgRMOai2fqCi8srfL24RLPVwudmi/hOUXB1fY0PHz/h9rZN9WEUIfqDpDiOqWC5XELTdKiaBtO0MJvNMJ1OqZ/P5xu8WCz+qg1Dvd9Hu30HTddpUXz8LxIbrg3F73LO11mEYUibCAn+fZxwuF4T2jhyFMf43u1BHxgwLRuj0QiOw2DZNgxjCNt2iEU/GplgjCVsmlRnDIcUy9owDn6gqyhQOx0w26YcxUU5joMhmTskYSTWXHcMhzFYlgXmulSTGAq36QSh72GgKGCDPjytB8/zwPkEvu9jPPbg+5xYyLu/B59MHphzqk8uhQw5It+D0VFgayoC29z+Ha4zDALoqoqp7ycRxPFWesgQQLen4tvNDWWxram0AtHErfVUdeP5bH3k1TtacRAEW+kniYJeS/bD+ksAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/2d4388a2fe94512df69169f907a1d055/fcda8/1690369991556-efe82876-d722-41b1-b53e-c8642cd551d4.png\"\n        srcset=\"/static/2d4388a2fe94512df69169f907a1d055/12f09/1690369991556-efe82876-d722-41b1-b53e-c8642cd551d4.png 148w,\n/static/2d4388a2fe94512df69169f907a1d055/e4a3f/1690369991556-efe82876-d722-41b1-b53e-c8642cd551d4.png 295w,\n/static/2d4388a2fe94512df69169f907a1d055/fcda8/1690369991556-efe82876-d722-41b1-b53e-c8642cd551d4.png 590w,\n/static/2d4388a2fe94512df69169f907a1d055/efc66/1690369991556-efe82876-d722-41b1-b53e-c8642cd551d4.png 885w,\n/static/2d4388a2fe94512df69169f907a1d055/c83ae/1690369991556-efe82876-d722-41b1-b53e-c8642cd551d4.png 1180w,\n/static/2d4388a2fe94512df69169f907a1d055/098d4/1690369991556-efe82876-d722-41b1-b53e-c8642cd551d4.png 2142w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />Duende IdentityServer 后台日志：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACF0lEQVR42k2Q207bQBRF8wcVpZDE8SUej+3x+BrnRpwE6CXAU8VjP6mqWggkJFD6r6uyEbQPW2cfjWZp79Pa7v9wc/fA3eaR9WbP+n7P/faJm/UDv9Zbft5umn27e37R/p82u9/cbZ94fHpmt3vk+49bWmEyxhYxfZli2IqO6eOFBe2e5ODI4agrOGz3eX/c57Dtvvn67eDY4d0HBxmEeEFEx4poLT9/JRt9RKgRUT5HFQtUWjGZXyHjCaPqC4PpJ/LxOaNqxXC2arzUE/x4SpCcINQYGU2a/63q9IpksMASCVKVeHpIUJRMlpfodIlK5shwiorn6HxOUp4i9RgRDhtoDclGZ+hi8QKcLS9Q6ZSeoxBBQV/lJFXO1bcL/JmLVXQwQqPRYcega7jY/YBuT+D6KaYT0rMkttAYVkDrfHVNOVs1lcN01lS2+ik6G6KLAfnJgOo6Y3Ttk50l5NmUrBiTDybkxbjxSTZE6RzHDWhNF5eorMINhwTJlDCvsL0YpUuknxNGBXlREukcGWb4YYLrRU1Ky/HfpuspDNOl5UVjatUJ61nfpb6nIzSmo3BESFSEyNjHsP0GHMWDBtqzPCxHYtqygba7Dq0a9Ap7nbZIcGWC42qEr0lLTZAoLDdCJ4MGGKclocpw+gGm7WG/Av9P+Ab0EnyVY1g+huXh+h62EHR6AuFFCBk1CT0/bu5mWl5T3TAFfwFh9UDH13n22gAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/2b3694739ec0d3bb9e1765fa9d84a63e/fcda8/1690371025303-4a72c077-52c9-4d74-97f5-3420001d72c8.png\"\n        srcset=\"/static/2b3694739ec0d3bb9e1765fa9d84a63e/12f09/1690371025303-4a72c077-52c9-4d74-97f5-3420001d72c8.png 148w,\n/static/2b3694739ec0d3bb9e1765fa9d84a63e/e4a3f/1690371025303-4a72c077-52c9-4d74-97f5-3420001d72c8.png 295w,\n/static/2b3694739ec0d3bb9e1765fa9d84a63e/fcda8/1690371025303-4a72c077-52c9-4d74-97f5-3420001d72c8.png 590w,\n/static/2b3694739ec0d3bb9e1765fa9d84a63e/efc66/1690371025303-4a72c077-52c9-4d74-97f5-3420001d72c8.png 885w,\n/static/2b3694739ec0d3bb9e1765fa9d84a63e/c83ae/1690371025303-4a72c077-52c9-4d74-97f5-3420001d72c8.png 1180w,\n/static/2b3694739ec0d3bb9e1765fa9d84a63e/05883/1690371025303-4a72c077-52c9-4d74-97f5-3420001d72c8.png 2808w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><a name=ayxuC></a></p>\n<h1>配置</h1>\n<p>要集成 Epic Games 登录，首先，需要去 Epic Games Dev Portal 创建一个 Client。</p>\n<p><a name=ZtJ9M></a></p>\n<h2>先决条件</h2>\n<p>同意 Epic Games 账号服务协议，如果你不是组织的拥有者，可以去组织成员里找到拥有者，并让拥有者去同意相关的协议。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8ElEQVR42o2Mu2rDMBiFPZe2GEnGluV76rUQiCWwLvgx8g592+xZOhfaOVCdImGHlHTo8HGOzi++pCxLNE0TqaoKjLFfUErvtjvinwyUZUiCsK5rFEWBPM/BOYcQAmEP27+ELANLH8HSJyRBwDn3hJBvSqlfwU3+CSFk7Qz0+QGpe0N6OCIRQvhxHNH3Pdq23fA3PdJ1XWTrwzCstw5tU6F5teDjHkmQLcvyLqU8KaW+pJSXaZogpfRrIqRSKrJt8zxfb9MkoQ57DF19FX4aY87W2g9jzEVrDa21XzNijIG1NorC2zkXt9DDZq3DbveCH6iNp9OfHp9cAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/6dfc9323944131a27c16e86c591eb02f/fcda8/1690370532920-70d6bbb7-a8c3-42a7-8931-646fe4474f1f.png\"\n        srcset=\"/static/6dfc9323944131a27c16e86c591eb02f/12f09/1690370532920-70d6bbb7-a8c3-42a7-8931-646fe4474f1f.png 148w,\n/static/6dfc9323944131a27c16e86c591eb02f/e4a3f/1690370532920-70d6bbb7-a8c3-42a7-8931-646fe4474f1f.png 295w,\n/static/6dfc9323944131a27c16e86c591eb02f/fcda8/1690370532920-70d6bbb7-a8c3-42a7-8931-646fe4474f1f.png 590w,\n/static/6dfc9323944131a27c16e86c591eb02f/efc66/1690370532920-70d6bbb7-a8c3-42a7-8931-646fe4474f1f.png 885w,\n/static/6dfc9323944131a27c16e86c591eb02f/c83ae/1690370532920-70d6bbb7-a8c3-42a7-8931-646fe4474f1f.png 1180w,\n/static/6dfc9323944131a27c16e86c591eb02f/86a1e/1690370532920-70d6bbb7-a8c3-42a7-8931-646fe4474f1f.png 1296w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />同意协议的链接是： <a href=\"https://dev.epicgames.com/portal/en-US/%E4%BD%A0%E7%9A%84%E7%BB%84%E7%BB%87ID/organization/licenses\">https://dev.epicgames.com/portal/en-US/你的组织ID/organization/licenses</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e0973fabb964708d0eeb9f0e582d255/2c5fd/1690370988147-4f3c4111-231b-4311-a13f-ad6a458a4257.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpklEQVR42oVSTU/bQBD1ndgmdhzny44T27t2/BXng0ZFUCrSlqqXHrlQbr30f/Sn9A/02FskpEApoUAgLRWiP6K34lftRkG0KuLwNLOzM2/fzoxw/f0M1z9mmM0ucDX7iuvLKX5enuNoMsFofISD4ylG++fZaP8YewdHv85OT0/GB4dXo/GXm73PxxhPptnh5ASz6Sm+XUwhRGGITpoiSRK0kxi9bhedtI1+N0UnDtBtR2hHEdIoyDpJiJV+F900QRoHDFkS+ogCH1HYQhwGEGRZRi6Xm0MUsbSUgyhJYHFJkiFKMiRZziSZ+1lOFH+LknQjilKmqCpcl2SGafJcViMUNQ22bcNxHDQaDRBCUKlUUCgUoGnavWD35VIJvu/zukW+wBwWYISWZXHCUqkERVE4VFW9tSz3LliMqcrn87cxgQWLxSI/3LWMtFarQdd17i9UPQTh7tfK5TJK5SqKRR3VahWu68IwDN4C9rAkSVxtXlGhqHOF/0JgcgeDAbq9HjzioGUb8KkD32+BEJf3l5F6noe1tTUei2gD1K6j2WzeguWxnwj55WVsbm7i6cY60tUhvOEugv4G2nGIKIp501lBGIbY2nqBtNtH8OwN3MErUEJAPQ+UUv4g+4lQ0DQ0bQdJi8Bc3Ubx7UdUH2+DWBU4LuFDcmwbZt1CHAXw24+g735A5fV7ENfmZIRQblnLhKaiYMV10WGkRg1pTUdiVBHX64hNk9vQMEBYj0sl6HoR5YKEsrYMnZ/1vwYnmJKEly+3MBwO0e910GuHCAOfK6OUwKMUtuuCPayxVVLnA7l3KE1VBW0FnMh6sgP93SfU1ndAHROu1+I9ahKChqpCZ0UPrQ0j9Mw6WpYJ1wlhJc/h2CForQpimqCmCdeozRUuCP+z5AvCP/S7p9ZA+fSpAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/6e0973fabb964708d0eeb9f0e582d255/fcda8/1690370988147-4f3c4111-231b-4311-a13f-ad6a458a4257.png\"\n        srcset=\"/static/6e0973fabb964708d0eeb9f0e582d255/12f09/1690370988147-4f3c4111-231b-4311-a13f-ad6a458a4257.png 148w,\n/static/6e0973fabb964708d0eeb9f0e582d255/e4a3f/1690370988147-4f3c4111-231b-4311-a13f-ad6a458a4257.png 295w,\n/static/6e0973fabb964708d0eeb9f0e582d255/fcda8/1690370988147-4f3c4111-231b-4311-a13f-ad6a458a4257.png 590w,\n/static/6e0973fabb964708d0eeb9f0e582d255/efc66/1690370988147-4f3c4111-231b-4311-a13f-ad6a458a4257.png 885w,\n/static/6e0973fabb964708d0eeb9f0e582d255/2c5fd/1690370988147-4f3c4111-231b-4311-a13f-ad6a458a4257.png 1006w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=EIkOx></a></p>\n<h2>将域名添加到组织里</h2>\n<p>打开页面： <a href=\"https://dev.epicgames.com/portal/en-US/%E4%BD%A0%E7%9A%84%E7%BB%84%E7%BB%87ID/organization/settings%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%9F%9F%E5%90%8D%EF%BC%8C%E5%B9%B6%E4%B8%94%E8%AE%A4%E8%AF%81%E3%80%82\">https://dev.epicgames.com/portal/en-US/你的组织ID/organization/settings，添加域名，并且认证。</a><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7klEQVR42o2QQU7EMAxFcwLUaZxWiZM2bVXRzgIaFl2OxAm6Y8MduA7iTGy5BuIG+ciaGcRICM3iyd/Wl/VtNQwDvPcoigJa66sgoqMmAp1qSTU0VVBt26Lve8QYcwghW2vhnMvMnJ1zYGbpcdZ1Xf8sJTKg3Q128R709Iry8QXKGJOrqspiNMaIOR/NdJnmly7L8hJtQDZA1wzVNA3kbGb+dM59hRBE5xP4C3mRwFJl5j1siJDrVEoJ27YhpfSxruv7siyYpinP8yzgf/bY344YHw4Iz29o7w5Q3vvcdZ38D4L05wRXExr4boRlj2/HnaAWIXNZogAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c3bc64eea1a7e8a01ad93d0c82903c7a/fcda8/1690371188734-9d4ffdc4-8ba5-4bde-bc66-09acbb7a1823.png\"\n        srcset=\"/static/c3bc64eea1a7e8a01ad93d0c82903c7a/12f09/1690371188734-9d4ffdc4-8ba5-4bde-bc66-09acbb7a1823.png 148w,\n/static/c3bc64eea1a7e8a01ad93d0c82903c7a/e4a3f/1690371188734-9d4ffdc4-8ba5-4bde-bc66-09acbb7a1823.png 295w,\n/static/c3bc64eea1a7e8a01ad93d0c82903c7a/fcda8/1690371188734-9d4ffdc4-8ba5-4bde-bc66-09acbb7a1823.png 590w,\n/static/c3bc64eea1a7e8a01ad93d0c82903c7a/efc66/1690371188734-9d4ffdc4-8ba5-4bde-bc66-09acbb7a1823.png 885w,\n/static/c3bc64eea1a7e8a01ad93d0c82903c7a/c83ae/1690371188734-9d4ffdc4-8ba5-4bde-bc66-09acbb7a1823.png 1180w,\n/static/c3bc64eea1a7e8a01ad93d0c82903c7a/e8d6f/1690371188734-9d4ffdc4-8ba5-4bde-bc66-09acbb7a1823.png 1273w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.405405405405407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBUlEQVR42mWRUUvEMBCEC3Y32aQ2pelBe1Zbevjq//83go/+AuVkRza0x4kPH5sQMszMVswM7z1EpMwD51zB3plZa6qR2qTL84tO06R93yPnrDlnmxiGoVDtH0BEf+EdIvADgyrStmsxvy7Ytg2Xy0VtLstSWNcV4ziics5pCMFcqZ13Z+rIwdW7y5613mo0b83P+eX8MT/N12maYE5NxLD76XS6OdRbPGJlYnBDoJFAK4EW0rqr0aZWhzx83UW9RT4wQU0poWma9xjjZ3gMkLOozAIZBCEGBAoQFu1SV3raO9Ojt3uKYIzRlvItIlcvHj569exRsCWJV+cdUkomYq4OsX+iv/4AiyaRN6XhAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/3d1b2f611e08455449beb8e9b928f60f/fcda8/1690371224217-0535efec-3c08-40c2-b41d-52e84510ae7f.png\"\n        srcset=\"/static/3d1b2f611e08455449beb8e9b928f60f/12f09/1690371224217-0535efec-3c08-40c2-b41d-52e84510ae7f.png 148w,\n/static/3d1b2f611e08455449beb8e9b928f60f/e4a3f/1690371224217-0535efec-3c08-40c2-b41d-52e84510ae7f.png 295w,\n/static/3d1b2f611e08455449beb8e9b928f60f/fcda8/1690371224217-0535efec-3c08-40c2-b41d-52e84510ae7f.png 590w,\n/static/3d1b2f611e08455449beb8e9b928f60f/efc66/1690371224217-0535efec-3c08-40c2-b41d-52e84510ae7f.png 885w,\n/static/3d1b2f611e08455449beb8e9b928f60f/c83ae/1690371224217-0535efec-3c08-40c2-b41d-52e84510ae7f.png 1180w,\n/static/3d1b2f611e08455449beb8e9b928f60f/a9577/1690371224217-0535efec-3c08-40c2-b41d-52e84510ae7f.png 1784w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><a name=F6oM3></a></p>\n<h1>概念</h1>\n<p>要创建客户端，先来搞清楚一些 Epic Games 里的概念。主要需要了解一些关系：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06f5179d4bb01fd91b18c827f507c0c9/e6eac/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.027027027027025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVR42h2QTUsbURiFz504k5nM3JvembhQ46IV/GipXWUnDQr+AIVuJRVLlfqVSizWkDEfpEYFiUoLltKfoCKIBVfVjUqxiht158adisW0EvUt4+LA2Z3nPJgV/4wBuW4NyQ1rWlwZBAARIOiXyrfD79hp2kKxcQYE0j9gRG1pb+G5dM5J5VxnvXW1gkC+bEc62PmqM6wqqoYpcRHgNUw61UK+k8vakUbCVfv89U8bQrH4a34SOdQJpRApZfWN080shyvxsTg+ZfK40M/YKY5BBsFWpa+qpkrBPKdAUZS1oij75zkZa2apAj+AweH3Pjftmp/7F3yEkkmMjF6tR2+ONNv5bF6mcilxWnmsEUhLv3RlW3tbnf3ItjDHb9kXToqXOXHPNgPX3j3E3nYjMTWK/Re7+Kufszv80feDO6CfhInMhDL5cVK5YZfopxH8Hv/FiAiJwig8Qny1CIucHvoKv/UsoisWQzKTxFHjwcMAgdQxI2E+fv7ELmQL5ng+ae492/Ycqmu1S/5oNFoXDodD/wE0CY4lqEQSEQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/06f5179d4bb01fd91b18c827f507c0c9/fcda8/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png\"\n        srcset=\"/static/06f5179d4bb01fd91b18c827f507c0c9/12f09/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png 148w,\n/static/06f5179d4bb01fd91b18c827f507c0c9/e4a3f/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png 295w,\n/static/06f5179d4bb01fd91b18c827f507c0c9/fcda8/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png 590w,\n/static/06f5179d4bb01fd91b18c827f507c0c9/efc66/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png 885w,\n/static/06f5179d4bb01fd91b18c827f507c0c9/c83ae/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png 1180w,\n/static/06f5179d4bb01fd91b18c827f507c0c9/e6eac/1690371596725-c3cd78f0-6e6e-42db-bcf8-6a8e5cf22202.png 2923w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />每个客户端可以关联多个应用，由于现在我们要对接的是一个 Web 应用，所以可以为客户端设置一个 Web 应用即可。</p>\n<p><a name=TYtkc></a></p>\n<h1>创建产品</h1>\n<p>比如我们创建了一个名为 Account 的产品，Epic Games 会给我们创建沙盒，我们可以查看沙盒详情，如下：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.027027027027025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVR42iXOMXMSURSG4Z2B850DQcK97LJ3CavCZiBkiRRoantrf6Vjnd9igzbWmsmMFoTzORuLZ972zSbAnwj8NYBQdbUXFAEFQkAoAPM8Z13XL1JKTKlkmSqfzUovioL5ZMQijJkl1cdLVfYhVKibGAc64MjAIUDpw9EH81j41aL2MqVzqubneVWd03xxLlN6zovZKb7/fIr7T8/Z0OxkUJee0C7MtVJHI5wOlJd9pYxAeSVeb0re799xv9lwv93ydrdj22lb7u7uuLv/yKY9MBuo0YZKmYrbG6XNjVYaB10XSn2rLtfGq+vcPyxXPw+r5fHQrL7fNk3nx3a9fmhvbr606+br8vXiIZtBPRocF0J0nYKYgDLuzkD04OgpJ+Pg0xCeYgi/Ygi/8/8eYwjHEMK3Tozx+A8WQHd4pLLzDQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ebc490311a6aa8e7d1d2484e54916c70/fcda8/1690371486524-69d964b0-3e6d-44e1-8798-8cacba711673.png\"\n        srcset=\"/static/ebc490311a6aa8e7d1d2484e54916c70/12f09/1690371486524-69d964b0-3e6d-44e1-8798-8cacba711673.png 148w,\n/static/ebc490311a6aa8e7d1d2484e54916c70/e4a3f/1690371486524-69d964b0-3e6d-44e1-8798-8cacba711673.png 295w,\n/static/ebc490311a6aa8e7d1d2484e54916c70/fcda8/1690371486524-69d964b0-3e6d-44e1-8798-8cacba711673.png 590w,\n/static/ebc490311a6aa8e7d1d2484e54916c70/efc66/1690371486524-69d964b0-3e6d-44e1-8798-8cacba711673.png 885w,\n/static/ebc490311a6aa8e7d1d2484e54916c70/c83ae/1690371486524-69d964b0-3e6d-44e1-8798-8cacba711673.png 1180w,\n/static/ebc490311a6aa8e7d1d2484e54916c70/0ec65/1690371486524-69d964b0-3e6d-44e1-8798-8cacba711673.png 2009w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=IrVky></a></p>\n<h1>创建客户端</h1>\n<p>我们在产品下创建客户端。你如果有多个环境，可以分别创建多个客户端，创建完成后，可以从这个链接里列出你创建的所有客户端： <a href=\"https://dev.epicgames.com/portal/en-US/%E4%BD%A0%E7%9A%84%E7%BB%84%E7%BB%87ID/products/%E4%BD%A0%E7%9A%84%E4%BA%A7%E5%93%81ID/epic-account-services\">https://dev.epicgames.com/portal/en-US/你的组织ID/products/你的产品ID/epic-account-services</a>\n<a name=gCrQE></a></p>\n<h2>记下客户端凭据</h2>\n<p>一旦客户端创建完成，就会得到一组凭据，记下来。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bbd6504e49e4f5686c531b14e0db48ff/a4f52/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVR42nWRvU4DMRCEI/B5/XN39sX2OeYikUCoKBHv/yhQIBBNhJCgQGEXrXOhguLTel2MZmcWSqkHrfWblJKM0Wi0Iv0PAEBd3+E0TZRSohACxhgpxlgn/y2UUp8sJqVEbTRp/TcAgEIIbE1LpZSPnMdDFUsJA4unxMJV8AskoDyTZJRBYwwqpRiaZ32DAhTnAlvfUrkoT+M4Po85U04JS4wMjSzIZ7C7ZmoQAhAIIAlHx7PzuoMEklqivbW0vd7Ser3e51K+b3Km++WAd97TZVjSorrzEpuxobZvX73zj865d+ccOeeQGYaBXOewn3ryK4+7qx1uthvOkHPDxKeHUPfFKb96sjEHa+1ea/1ijOEdZ/jNWWLf9ewOSymY8wpXpVDOGWNKx1KapiGmlqI11bwAagnzpDkWEkKQtZYF6dT03PIvP3MeoTtI3O92AAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/bbd6504e49e4f5686c531b14e0db48ff/fcda8/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png\"\n        srcset=\"/static/bbd6504e49e4f5686c531b14e0db48ff/12f09/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png 148w,\n/static/bbd6504e49e4f5686c531b14e0db48ff/e4a3f/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png 295w,\n/static/bbd6504e49e4f5686c531b14e0db48ff/fcda8/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png 590w,\n/static/bbd6504e49e4f5686c531b14e0db48ff/efc66/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png 885w,\n/static/bbd6504e49e4f5686c531b14e0db48ff/c83ae/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png 1180w,\n/static/bbd6504e49e4f5686c531b14e0db48ff/a4f52/1690372241974-6d5ac3b1-2453-4cf3-b7b9-e4e04e2d8514.png 2024w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=tbTHg></a></p>\n<h2>添加回调地址</h2>\n<p>没有回调地址，在授权完成后，就接收不到 code。配置如下：<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRUlEQVR42n2SS0/bUBSEDY3je/1M4iR+5uU4DkkIlISiVkJdoK4qddH+DYpIKCgPWFT94191DajtpovRnKsrjc7MGe3XbsPPhx/cXF9z/f2G29sVq/Wa1eoP1nd3bLZbdrs99/cPbHc7Hp+e2D8+lvN+v2e72bBe36FpmsYbTVPDf2GaJs1mEyklh4eHHBwclPw6V6tVKpUKmmlZ2I6DNE1MKQlcm8RzaTg26k8KgWVZ5HnO6ekpwyyjk6bEcfwPwjAkCAK02BSklsSqVtF1HU8YNCwTWwgMIRBClNulacqoKOj2ekRRTKREoqhEFEU0Wy1830ezTIllmhgvgoaUuK5bwnvhWs0jiUImRcF0PGbY75P1ewx6XfrdDr00JQratFtNtNctDMMoBVVGtYaPU6/j1Wp4Xp3QrjGMIhazCcejIdNswCzPmI/yEpNBnw9nb8nCNpoQssxPf9lQ5Vg068xadZJ6HT9pMFq4DKYJs+m8tJ0NhwyyrLT9an2xXJInMZonBTUpcI1nQXWExHPoeja+6+LUXJLIIe1GjI8mpVh/MCDLhnS6PVrtAL/Z4myxZNztoLWlgW9KQtPA0HWqyroQVBSrKuhV6oagSBPen51yfjzjpBgxGfSY9VOKNCBtuCyOcsadGM1UVxQC+VeG6hC2bSMMo8xWxTDKMj5eXvLp6oqL5YJup0eYnxMXF0T5O/zOnDhOVIbP9dD1Z8vqrcRU9xQrOI5T1qYYj5mfnDCZHNEfTWjMvxAvvxItv+EffyaIO/wG+vUnceLcc/8AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/4c375c8a6d1a10e58ebac629317db708/fcda8/1690372364345-a88bbbb2-0b31-4f9e-b148-1c989be0fe29.png\"\n        srcset=\"/static/4c375c8a6d1a10e58ebac629317db708/12f09/1690372364345-a88bbbb2-0b31-4f9e-b148-1c989be0fe29.png 148w,\n/static/4c375c8a6d1a10e58ebac629317db708/e4a3f/1690372364345-a88bbbb2-0b31-4f9e-b148-1c989be0fe29.png 295w,\n/static/4c375c8a6d1a10e58ebac629317db708/fcda8/1690372364345-a88bbbb2-0b31-4f9e-b148-1c989be0fe29.png 590w,\n/static/4c375c8a6d1a10e58ebac629317db708/efc66/1690372364345-a88bbbb2-0b31-4f9e-b148-1c989be0fe29.png 885w,\n/static/4c375c8a6d1a10e58ebac629317db708/c83ae/1690372364345-a88bbbb2-0b31-4f9e-b148-1c989be0fe29.png 1180w,\n/static/4c375c8a6d1a10e58ebac629317db708/412e0/1690372364345-a88bbbb2-0b31-4f9e-b148-1c989be0fe29.png 2990w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=H40DZ></a></p>\n<h1>创建应用</h1>\n<p>我们在上面创建好了客户端，它是为后台通道调用（使用客户端凭据获取令牌）使用的。现在我们还需要为用户授权界面创建前端通道。在 Epic Games 这被称为应用。我们可以通过在 “Epic Account Services” 下面创建应用，并且在其中关联客户端。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/58a59e0d0a3c32f00875950deb69d958/54ad1/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACKUlEQVR42l1S21LaUBQ9BEp9cUhCbiSRkJDmQMgFGotCHaqW8UEfWrHfU/VBbrYdeaw/uzpnA51pH9bs61qzz96Hvby8YLVe4/v9Pe4fHvE0n2O+WOBpvqD8YrnCcrXC+vkZy50vsFgu8ePnL/x+fcVms4HQeXx4ADs8PIQiy6hWq3hTqaBSqUCSyihLEsrl8haSBKlUQomxv2CMUe7g4C1x9mCu68LzPFiWBcMwEPgeBv0MSZoiyzJCmuXoJRmSLEeS9ZGkOdI0Q7rryfMc3W4XjUYDzPd9BEEATdNQr9fhOjbiDkfEOTqcg/MIYdSB/64LP4oR8BR+1EM76oBzjjAMCc1mkzSYHwRwj452gioVIhLiMK0GZLUORVWhKjKUHYQvyzJxkiShCYUVL2Res4mg5cE0DCi1OhqWTSsQsN0mdNuDbtpE1jR9Z7fQdZ36Wq0WDSJiNs5TnA36yEMP3rECJ9RgaCZUVYEs12hqXdOgKApB2/mqqpJfq9VoWhGLlbG8wzGIu/BtC7qjohV4KIoCJ6en+PTxDP24Ryv4fHmJ8/Nzet5kMsF4PCZ/Op1iNBohiiKYpglmOw4c193uq6ag3Q5xcXGB90WB46JAmiR08W+3t5jNZvgwHOLL7VfcXF9jeDLE7O4OV1dXiON4K+g6DlqeRycXI4vFioL4RsKalkk1EQsIX/QI7PO2bZOlK+//oCALwT1JLHhP1A0dhq5T7p/8fzkh+AcjpEE8Dj4pQwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/58a59e0d0a3c32f00875950deb69d958/fcda8/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png\"\n        srcset=\"/static/58a59e0d0a3c32f00875950deb69d958/12f09/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png 148w,\n/static/58a59e0d0a3c32f00875950deb69d958/e4a3f/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png 295w,\n/static/58a59e0d0a3c32f00875950deb69d958/fcda8/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png 590w,\n/static/58a59e0d0a3c32f00875950deb69d958/efc66/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png 885w,\n/static/58a59e0d0a3c32f00875950deb69d958/c83ae/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png 1180w,\n/static/58a59e0d0a3c32f00875950deb69d958/54ad1/1690372447747-28d18004-1d52-4e52-a4bd-1b3b7da8a840.png 2918w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=WBNfM></a></p>\n<h2>关联客户端</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4b3c1025df3f83d7237303d7136763b/000b4/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.75675675675676%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACjElEQVR42i2SW4vUSBiGA3MzgzvdptNJp3NOpXPqJN3JjN2Dh9l1xEUQFURXFnYVDyBeKHqjojMyCp4RGbzz2n+w7M3+Ai/FX/QsVXrxUlD11VPf+72l7e/vs7u3x9Onu7x9+ZI3L17w7vFjPjx5wpuHD7l79x43b93i6rVrXL9+g93dPQ4ODth//px379/z6vVrHnz6l0dfvnHn2Se0Xw4d4rCu41gWn8+d5b8/LvH14gW+X7nMPyd/xdB1VlZW0DRNScQx28eOkSSCZtbQNA297dvYlz/Sn55G6/f7DIdDRqMRR6uKnbbl9HLJb13HVl1h2zbj8ZjBYIDn+8RC0B1Z0G0uqJsZddMwr1KmEx/XNtEkzHEcVRwKwfbODk3bkhYFSZrieR6u62IZBpHvIcKAsqyomzmzqqIqcqZ5QZ5m6nHNsix8CQtDsizjwvnzbG1tMWsaijwnCEMFEZZJFoVM3DGp7+IaOs5AxzUGOMaAwDIJzCGatCphURRRlqWCylVK7odRRBpHhPYIL/CZbh7n1O9nWCyXtN0G7cYGbdexuVjQZukPYBAECjiZTGjbVqmuG+I4VsAkjkhsizz0mWYlR5qGrsiZ5+nPNeNoO2c5n6GZpqnmJG3L7mRq8/mcuq5VAPIxKcs0CYMAIW0LQfJTvudhj0Y44zFJkqDJ9OQwZTCyQ6UkIU0EcRTiOK46k3Wu56lLRVmS5zl5UZBlKYHvMRwayqXW6/UwDAMZTjmtOL7sCE78if7XF4an7jMyDaQLWSe/j+xWQoUQP5SkiEmO6wXq62lra2usr6+j67qyLuIIN85wigV2PGWg6/T6fVZXV9UFCZejmDU1fjTBWv6Nu3Of0eYVBnqf/wGh203no2mu5QAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/a4b3c1025df3f83d7237303d7136763b/fcda8/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png\"\n        srcset=\"/static/a4b3c1025df3f83d7237303d7136763b/12f09/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png 148w,\n/static/a4b3c1025df3f83d7237303d7136763b/e4a3f/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png 295w,\n/static/a4b3c1025df3f83d7237303d7136763b/fcda8/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png 590w,\n/static/a4b3c1025df3f83d7237303d7136763b/efc66/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png 885w,\n/static/a4b3c1025df3f83d7237303d7136763b/c83ae/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png 1180w,\n/static/a4b3c1025df3f83d7237303d7136763b/000b4/1690372489794-dd2c75ec-f7ae-45ce-83b7-37e72799c4ce.png 2912w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=bdxab></a></p>\n<h2>填写法律必须的 URL</h2>\n<p>这依赖之前的域名验证步骤，只能基于验证通过后的域名，在后面添加路径。</p>\n<ul>\n<li>应用站点： <a href=\"https://brickverse.net/\">https://brickverse.net/</a></li>\n<li>隐私协议页面： <a href=\"https://brickverse.net/\">https://brickverse.net/</a></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d3a23cc0fb1c6706ce19682ff90368b8/990be/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACx0lEQVR42j2S32scVRTH5yVGkjbS7MzcmXtn7vzc2Zmd2d24idt2Z2PwoVKwCtEioVDpi0+CFgtSfXBNSNGmFTWVUkJ9EcRn/wmLoIJ/0UfuBH34cuDce758v99zrJNHj3h4csLj777n4eNveXB4yNeHR3xzdMTyyyWf3b/Pp/fucffuJ3y+fMDxL79z/OsfHP/wE8/PnnH65EdOT5/w7OlTlsuvsDZ7PbT0OXv7LX57b58X++/w5813eXH9GnOlsFZWsCyrw0uXFN7BGfKDn3Em17i8PaIa1gyqkrZt0WGI1bNtfCF4fzbjw73XubNoubO74Pb8KoUOEZ6H4zg4rouONIM8oewn+J7Adl1cIbo/phpY0vdRSiHjmGw4pJxMiIsBQZYhg4BAKWzbRrguAx0SCZdU+kSug3Z6aMcm6G3SDyRFILGCICCKIrI05dbBAW/s7dHUNeOmIYnj7s0oCH2PKtKkSUI1KEjjCOE4CMfGtXvEOmSgfCwzYFBVFePxmNFoRF3XpGna9U31pSRSkiLWaOMkz0mSBBUEnU3jYNO20a5zThjHMWVZMplM/ifNsgytdVf/I6ziiDzPqauSIs8IleryN0o9ISiMQjNkYJQ0TXOusGk6FaZvlPgmZykpI03iCTLlkyvZ1Ug4BHavyzGXHpZZiMlxOBx2RKN6yKQe0E8jwiDoSIVwEUIQmUzjuHMUhmHXM5bNBSRpRt7vY3mej5SSLMsZViVJURNN9ohGLSoIUUqen43jdC52dnaYTqddNIOiT5nHFFlMPciII421vr7OxsZF8rzPbDpGTa+zdvM5F26c8ErPZePiBVZXV1lbW+tUdY7CkDBQyCjHH87RzRxRXsEPU6zt7R1em81o2wXzdsHu7i6Ldk579Qqz2WWm0222tl5lPNnqCM2S6mZEmWkuTfd5+eN/yL/4i5WP/mZz9Cb/AnBqcBY+vwYbAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/d3a23cc0fb1c6706ce19682ff90368b8/fcda8/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png\"\n        srcset=\"/static/d3a23cc0fb1c6706ce19682ff90368b8/12f09/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png 148w,\n/static/d3a23cc0fb1c6706ce19682ff90368b8/e4a3f/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png 295w,\n/static/d3a23cc0fb1c6706ce19682ff90368b8/fcda8/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png 590w,\n/static/d3a23cc0fb1c6706ce19682ff90368b8/efc66/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png 885w,\n/static/d3a23cc0fb1c6706ce19682ff90368b8/c83ae/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png 1180w,\n/static/d3a23cc0fb1c6706ce19682ff90368b8/990be/1690372643773-23d8e894-219b-4ce9-9684-958ad26de0b9.png 2748w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>我这里没有填写真正的隐私协议页面，所以导致该应用不能通过 Epic Games 的审核。不过出于演示目的，不需要通过 Epic Games 的审核，已经可以使用了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCUlEQVR42i2N32tSYRzGD0iKv3Y87/dVj7rj+f2ecxxHcaU2hw4E8cqdYS7Iush/ICKo2yi2C6WpwYqKSYELCrpfsPuuoujOiJqtdlHspqI2ojROGzw8PDw8Hx7K5XI5HA5VkY3UKf+5x/qV7dmrz8VL20y1XZyfq9VqlmVVq9VsNptKpSqVSrPZLJVKyWRS13XK4/E4nU5NlY10/sTld5Ebe6S1j1YPvBe38sXs0plavV5fPrtcKBQyp7OL1mKj0bAsK5fLEUIon8/ndrsJIYqixETNSJ3M5Bd4Yk6LhBd5URJlWZYVmY/zMZEjCS1pmul0WhRF0zQpmqa9Xi8hhGVZFKARw+Ag1nWNDYcDDDAIAgFE00w0xkmSEucFu2GQ2+0pl8sUwzB+v58QLRqNqHJcV4UZTcikE6YhGaqgq4LAsVw0KPFRInGqxAnTYZFjp6Z8NgwAAZpWiU6EyJtV2O3h1yv45U30agUP23i3h0ddGHVhp4M+rB0JvqwHlzLe/EKZwhgzTEDVDEOOfL2LxgP4uQEHffi1Ab8fwWQTxgMYb8JkcJz/DmDyLHih4J0rlqlQKAQIKSQxq7Fb19CL63j/Dv5829bekffs8KmHd7t41MGHfZg8DZ6f/w+Hw2GMQdNn7Od1dNiHYQu/beNhy57urOH3t/DHDv52D348gO/34c9DmDw5hv8BvJyYZSH5wQkAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/1c64b777eb893673df8329c458d72efa/fcda8/1690372741821-b8fb6c6a-261b-48d5-a78d-27d9c7dde314.png\"\n        srcset=\"/static/1c64b777eb893673df8329c458d72efa/12f09/1690372741821-b8fb6c6a-261b-48d5-a78d-27d9c7dde314.png 148w,\n/static/1c64b777eb893673df8329c458d72efa/e4a3f/1690372741821-b8fb6c6a-261b-48d5-a78d-27d9c7dde314.png 295w,\n/static/1c64b777eb893673df8329c458d72efa/fcda8/1690372741821-b8fb6c6a-261b-48d5-a78d-27d9c7dde314.png 590w,\n/static/1c64b777eb893673df8329c458d72efa/efc66/1690372741821-b8fb6c6a-261b-48d5-a78d-27d9c7dde314.png 885w,\n/static/1c64b777eb893673df8329c458d72efa/c83ae/1690372741821-b8fb6c6a-261b-48d5-a78d-27d9c7dde314.png 1180w,\n/static/1c64b777eb893673df8329c458d72efa/5faa8/1690372741821-b8fb6c6a-261b-48d5-a78d-27d9c7dde314.png 1444w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=r54Ce></a></p>\n<h1>Epic Games 的 OIDC 端点</h1>\n<p>即使应用没有通过  Epic Games 的审核，已经可以调用它们的 OIDC 接口了（只是用户授权时会看到一个警告）！</p>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OpenID 自发现配置信息端点</td>\n<td><a href=\"https://api.epicgames.dev/epic/oauth/v1/.well-known/openid-configuration\">https://api.epicgames.dev/epic/oauth/v1/.well-known/openid-configuration</a></td>\n</tr>\n<tr>\n<td>授权接口</td>\n<td><a href=\"https://www.epicgames.com/id/authorize\">https://www.epicgames.com/id/authorize</a></td>\n</tr>\n<tr>\n<td>令牌接口</td>\n<td><a href=\"https://api.epicgames.dev/epic/oauth/v1/token\">https://api.epicgames.dev/epic/oauth/v1/token</a></td>\n</tr>\n<tr>\n<td>用户信息接口</td>\n<td><a href=\"https://api.epicgames.dev/epic/oauth/v1/userInfo\">https://api.epicgames.dev/epic/oauth/v1/userInfo</a></td>\n</tr>\n<tr>\n<td>令牌内省接口</td>\n<td><a href=\"https://api.epicgames.dev/epic/oauth/v1/tokenInfo\">https://api.epicgames.dev/epic/oauth/v1/tokenInfo</a></td>\n</tr>\n<tr>\n<td>JWKs</td>\n<td><a href=\"https://api.epicgames.dev/epic/oauth/v1/.well-known/jwks.json\">https://api.epicgames.dev/epic/oauth/v1/.well-known/jwks.json</a></td>\n</tr>\n</tbody>\n</table>\n<p><a name=n8owV></a></p>\n<h2>授权</h2>\n<p>参考 <a href=\"https://dev.epicgames.com/docs/web-api-ref/authentication?sessionInvalidated=true#web-applications\">https://dev.epicgames.com/docs/web-api-ref/authentication?sessionInvalidated=true#web-applications</a>，这会打开一个页面，询问用户是否同意授权我们的应用获取其在 Epic Games 服务器上的信息。如果用户同意了，我们就会得到一个用户授权码。<br /><a href=\"https://www.epicgames.com/id/authorize?client_id=%7Bclient_id%7D&#x26;redirect_uri=%7Bredirect_uri%7D&#x26;response_type=code&#x26;scope=basic_profile\">https://www.epicgames.com/id/authorize?client_id=%7Bclient_id%7D&#x26;redirect_uri=%7Bredirect_uri%7D&#x26;response_type=code&#x26;scope=basic_profile</a>\n<a name=Oa2vo></a></p>\n<h2>获取令牌</h2>\n<p>参考 <a href=\"https://dev.epicgames.com/docs/web-api-ref/authentication?sessionInvalidated=true#requesting-an-access-token\">https://dev.epicgames.com/docs/web-api-ref/authentication?sessionInvalidated=true#requesting-an-access-token</a>，通过这个令牌接口，我们提供上一步拿到的用户授权码加上我们的客户端凭据，就可以获取到用户的令牌了。需要注意的是在这一步，这个接口使用了 Basic Auth：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoklEQVR42o3QWwoDIQwFUPe/Vc3UV0xirJbRobUDhZ4PEa83guY4Du+9f5xijM+p/8fEGH0IDpy1FgCss865lBIi5pwRsfxmKnPxIISFCalwFZ6IqJRCRKpaa13rjWmt9dZ670QUfCjzJVUlImZe/bVfRD7TTUop5VOcRKRNzDw2qho3tdYxhnnH6w/eVxFxL4sIABwXYMpf5d0+6HZ4RTN9AfU7mFZO2SaHAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/959884b468d53020ff4b1c4ae5b538c6/fcda8/1690373116404-c6f3159f-9d27-4fb1-8fd8-c557af106560.png\"\n        srcset=\"/static/959884b468d53020ff4b1c4ae5b538c6/12f09/1690373116404-c6f3159f-9d27-4fb1-8fd8-c557af106560.png 148w,\n/static/959884b468d53020ff4b1c4ae5b538c6/e4a3f/1690373116404-c6f3159f-9d27-4fb1-8fd8-c557af106560.png 295w,\n/static/959884b468d53020ff4b1c4ae5b538c6/fcda8/1690373116404-c6f3159f-9d27-4fb1-8fd8-c557af106560.png 590w,\n/static/959884b468d53020ff4b1c4ae5b538c6/efc66/1690373116404-c6f3159f-9d27-4fb1-8fd8-c557af106560.png 885w,\n/static/959884b468d53020ff4b1c4ae5b538c6/aa61c/1690373116404-c6f3159f-9d27-4fb1-8fd8-c557af106560.png 1065w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><a name=OdTJY></a></p>\n<h3>典型的响应</h3>\n<p>正常的响应如下：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5ec33903ac5bb5d17d1eb077680c2d5e/6a5c3/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.75675675675676%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjUlEQVR42o2Oy47bMAxF/f+/0mW/ZICZJG2neTiJ5Vi2rCdFiZZYOA6KWXRR4iwOCF3qNsYYpdQgpVKTcw5jRIwppYT4TzAiRfftLXzfYRMRYd2gDx5iBETMmUopzPULS61/nZkVVhVr05+OWU3sHTu7sWiNUhZrFjmwEDwMLAe6tjw8ngzcC+6uaZJN314W78jZ4n0NngGK92EcUansLBMxUSWqOS+IOSGlRAkXTEvKjTEGvNM+OEAi2ooV5lK5fOnJzLWWwqXUUrnWWomoYa5auV+d/RzCeQw3Fa8qXiY4yXCZ4DLBdYLe4MOkXmNvXnQax9k2zCwNHDq7F/4g3FGGo4TPR/g9rKwiQztBp3Gw6bGC0q0+G7eF48fd7jq3F+55wu+F2zYfd7sX7mfvzyPc5nh/0huUNqlXWMOuc7tufXQQfvP32xp+v9utzmlc/28nOI/Qqig0Tto1tRY76vahrzOMPhkgHWgOeQXyS0K2QCEtG5CXSMU618RMSy/mfjz0/ofwc8j8fxNj/AM0fnJN/T/JbQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/5ec33903ac5bb5d17d1eb077680c2d5e/fcda8/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png\"\n        srcset=\"/static/5ec33903ac5bb5d17d1eb077680c2d5e/12f09/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png 148w,\n/static/5ec33903ac5bb5d17d1eb077680c2d5e/e4a3f/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png 295w,\n/static/5ec33903ac5bb5d17d1eb077680c2d5e/fcda8/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png 590w,\n/static/5ec33903ac5bb5d17d1eb077680c2d5e/efc66/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png 885w,\n/static/5ec33903ac5bb5d17d1eb077680c2d5e/c83ae/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png 1180w,\n/static/5ec33903ac5bb5d17d1eb077680c2d5e/6a5c3/1690373164944-e203a8fb-da3d-4c90-99aa-56f285d0c611.png 1646w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>cURL 示例如下：\nshell\ncurl --location <a href=\"https://api.epicgames.dev/epic/oauth/v1/token\">https://api.epicgames.dev/epic/oauth/v1/token</a>\n--header Content-Type: application/x-www-form-urlencoded\n--header Authorization: Basic [base64(appId+appSecret)]\n--data-urlencode grant_type=authorization_code\n--data-urlencode deployment_id=[deployment_id]\n--data-urlencode scope=basic_profile\n--data-urlencode code=95fe72821ac94e5f9c48d5dda9b42e5c</p>\n<p>响应的 Json 结构是这样的：\njson\n{\nscope: basic_profile openid,\ntoken_type: bearer,\naccess_token: eyJ0IjoiZXBpY19pZCIsImFsZyI6IlJTMjU2Iiwia2lkIjoiV01TN0Vua0lHcGNIOURHWnN2MldjWTl4c3VGblpDdHhaamo0QWhiLV84RSJ9.eyJzdWIiOiI3NTk4MzU2ODQxMDE0OWJiYmY0YzllMDZmMjk1MjZiMCIsInBmc2lkIjoiMDM5MGFkNmU5NDY2NDI4MDliYTA1ODEyOGRlNzBkY2MiLCJpc3MiOiJodHRwczpcL1wvYXBpLmVwaWNnYW1lcy5kZXZcL2VwaWNcL29hdXRoXC92MSIsImRuIjoiSmVmZiBUaWFuIiwibm9uY2UiOiJpUEFnbkM1QlZHU0h4MkJrd200d3J3IiwicGZwaWQiOiJhOTA2NjkwYzBkOTg0NGUxOWQzMWRkODRiMTRiMjYxMiIsInNlYyI6MSwiYXVkIjoieHl6YTc4OTFVS0FOVk5TZzdrQkZTSWdWUTRKSUNIdTAiLCJwZmRpZCI6IjczZmY5Njk3NjI3OTQxYjNhNGQxOGRkN2Q3MGExYTFkIiwidCI6ImVwaWNfaWQiLCJzY29wZSI6ImJhc2ljX3Byb2ZpbGUgb3BlbmlkIiwiYXBwaWQiOiJmZ2hpNDU2N0V1ZnlEeVdjb1Z3bGdwWFd4dFlIZFFrZyIsImV4cCI6MTY4NTAyNTg4OCwiaWF0IjoxNjg1MDE4Njg4LCJqdGkiOiI1YWM3MDM1NjIyOTA0YzI3OWIwNjZhMDk2NzNlMzg0OSJ9.eW5Lv8dhNlXHa4YX_q9ivBXX-kl8nwmH8fY-u4hMnE9IFXFGlXzIfenH4VzQi4_Qg23kpkLZqH7lDB1VKrz2_c0_qtRe660FPUM5h6GXSI8eV4lfqbDZtHIjoTuog0jBmnPNSCM-gn6NCpfhxb8rs1HgS5sTTEyloRANDZEbI-Q4I4AcEe4HAp6Ar-v0pdNDIzOPgC5vsQuqRuxinecmN3UiuoVTEIJlykF6--F8KepD4nnV_gqmADz62NQ7MkTzS5qQV8njrAHglXWZ2MOVXPxtYs4qym9AbpsK_tNH9zu7sM1YH4dPbTRDUrBt8DbuTuK-qbJmBn841Ua0g165Fg,\nrefresh_token: eyJ0IjoiZXBpY19pZCIsImFsZyI6IlJTMjU2Iiwia2lkIjoiV01TN0Vua0lHcGNIOURHWnN2MldjWTl4c3VGblpDdHhaamo0QWhiLV84RSJ9.eyJzdWIiOiI3NTk4MzU2ODQxMDE0OWJiYmY0YzllMDZmMjk1MjZiMCIsInBmc2lkIjoiMDM5MGFkNmU5NDY2NDI4MDliYTA1ODEyOGRlNzBkY2MiLCJpc3MiOiJodHRwczpcL1wvYXBpLmVwaWNnYW1lcy5kZXZcL2VwaWNcL29hdXRoXC92MSIsImRuIjoiSmVmZiBUaWFuIiwicGZwaWQiOiJhOTA2NjkwYzBkOTg0NGUxOWQzMWRkODRiMTRiMjYxMiIsImF1ZCI6Inh5emE3ODkxVUtBTlZOU2c3a0JGU0lnVlE0SklDSHUwIiwicGZkaWQiOiI3M2ZmOTY5NzYyNzk0MWIzYTRkMThkZDdkNzBhMWExZCIsInQiOiJlcGljX2lkIiwiYXBwaWQiOiJmZ2hpNDU2N0V1ZnlEeVdjb1Z3bGdwWFd4dFlIZFFrZyIsInNjb3BlIjoiYmFzaWNfcHJvZmlsZSBvcGVuaWQiLCJleHAiOjE2ODUwNDc0ODgsImlhdCI6MTY4NTAxODY4OCwianRpIjoiODMxNDYzZTU5NDkwNDA4OTk3OGVjN2RiYWUyYzYzOTUifQ.Tf1QIEvo9GeqWlMK18ccEpRK24tNpi00EEVo_3cEUT-qIxtTK7w1LXQ6WG7jijKzPLz71SA98VgPACNCU8AgzbIXh5RbJ4RDAZSz63PMmhMyZW0PEEhMj4wPWii6yCWI6jkWsJYreZj9DNw_ChVd3wkjFHw62ceQ-EieT_VxMn0hCkwX1WmpMxkDsQ687aadk6Qmccl5Bqqwl2OmRsr8HgKKJNCdRXIXF5xM_5bdXNknTWRDCaCOyOcxuxAwxyK0cMTF1oLdMGc7CydIYJjGaePRb-jXbqJPaNk28ecMlmHN4i7yrsm4lb-WEDLUtmzZ7C3Jp6CJMDFQ6FPoy-PbSw,\nid_token: eyJ0IjoiaWRfdG9rZW4iLCJhbGciOiJSUzI1NiIsImtpZCI6IldNUzdFbmtJR3BjSDlER1pzdjJXY1k5eHN1Rm5aQ3R4WmpqNEFoYi1fOEUifQ.eyJzdWIiOiI3NTk4MzU2ODQxMDE0OWJiYmY0YzllMDZmMjk1MjZiMCIsInBmc2lkIjoiMDM5MGFkNmU5NDY2NDI4MDliYTA1ODEyOGRlNzBkY2MiLCJpc3MiOiJodHRwczpcL1wvYXBpLmVwaWNnYW1lcy5kZXZcL2VwaWNcL29hdXRoXC92MSIsImRuIjoiSmVmZiBUaWFuIiwibm9uY2UiOiJpUEFnbkM1QlZHU0h4MkJrd200d3J3IiwicGZwaWQiOiJhOTA2NjkwYzBkOTg0NGUxOWQzMWRkODRiMTRiMjYxMiIsImF1ZCI6Inh5emE3ODkxVUtBTlZOU2c3a0JGU0lnVlE0SklDSHUwIiwicGZkaWQiOiI3M2ZmOTY5NzYyNzk0MWIzYTRkMThkZDdkNzBhMWExZCIsInQiOiJpZF90b2tlbiIsImFwcGlkIjoiZmdoaTQ1NjdFdWZ5RHlXY29Wd2xncFhXeHRZSGRRa2ciLCJleHAiOjE2ODUwMjU4ODgsImlhdCI6MTY4NTAxODY4OCwianRpIjoiZjllNmFhM2UzOGMyNDg3ZGJiNDE2NDhiYzc5MDZkYTQifQ.MqhRi3Rxn1kuGOpeFFtWMtUwbE8isNRp4dia4aVLVepjPFI1qera0PY3SUncRmRpRtbo7LVnc0H6dLTkIWlAo3SwjxbVAAiUaXaMOi2dfBklRJb2z8PRqqxUJScDMI0klYoMYhHAD9NphEwwMNwGW82-gD-2qhgDafDDXbPLeNVTfMj3Wih4S0_vXGGTihiMYL8DNS-OGDXSMD9DrwQEgzEv0WaRFzP8BHqlNS8bt70yzaTc1xzv25Mi6gUWZOboOcQs-t6kYSxpGoBVJA8_1DxfJ6EVUO2brjFigxRWSJ3eY2oji8h8mau9Fl33Tpzz7x58Plsys5Z-16a76soY2w,\nexpires_in: 7200,\nexpires_at: 2023-05-25T14:44:48.000Z,\nrefresh_expires_in: 28800,\nrefresh_expires_at: 2023-05-25T20:44:48.005Z,\naccount_id: 75983568410149bbbf4c9e06f29526b0,\nclient_id: xyza7891UKANVNSg7kBFSIgVQ4JICHu0,\napplication_id: fghi4567EufyDyWcoVwlgpXWxtYHdQkg,\nselected_account_id: 75983568410149bbbf4c9e06f29526b0,\nmerged_accounts: []\n}</p>\n<p><a name=oel6k></a></p>\n<h1>代码实现</h1>\n<p>主要提交见：<a href=\"https://github.com/Jeff-Tian/IdentityServer/commit/41233386812e598c0a9050ad2b187c51fb6cf9e4\">https://github.com/Jeff-Tian/IdentityServer/commit/41233386812e598c0a9050ad2b187c51fb6cf9e4</a></p>\n<p><a name=jcbt7></a></p>\n<h2>增加 Epic Games 配置</h2>\n<p>我们的客户端凭据信息等，可以通过环境变量注入。为了结构化地读取这些外部身份提供商的配置，我们定义一个配置类：\ncsharp\nnamespace IdentityServerHost.Configuration;</p>\n<p>public class ExternalIdPsConfiguration\n{\npublic const string SectionName = ExternalIdPs;</p>\n<pre><code>public EpicGamesConfiguration EpicGames { get; set; } = new();\n</code></pre>\n<p>}</p>\n<p>public class ExternalIdPConfiguration\n{\npublic string ClientId { get; set; } = string.Empty;\npublic string ClientSecret { get; set; } = string.Empty;\n}</p>\n<p>public class EpicGamesConfiguration : ExternalIdPConfiguration\n{\npublic const string SectionName = EpicGames;\n}</p>\n<p>然后，定义一个配置扩展类，以封装读取配置的逻辑：\ncsharp\nusing IdentityServerHost.Configuration;\nusing Microsoft.Extensions.Configuration;</p>\n<p>namespace IdentityServerHost.Extensions;</p>\n<p>public static class ConfigurationExtensions\n{\npublic static ExternalIdPsConfiguration GetExternalIdPsConfiguration(this IConfiguration configuration)\n{\nreturn configuration.Get<ExternalIdPsConfiguration>(ExternalIdPsConfiguration.SectionName);\n}</p>\n<pre><code>public static CookieConfiguration GetCookieConfiguration(this IConfiguration configuration)\n{\n    return configuration.Get&#x3C;CookieConfiguration>(CookieConfiguration.SectionName);\n}\nprivate static T Get&#x3C;T>(this IConfiguration configuration, string section)\n{\n    return configuration.GetSection(section).Get&#x3C;T>();\n}\n</code></pre>\n<p>}</p>\n<p>环境变量和 appsettings.json 结构有一种对应关系。我们定义的类，在 appsettings.json 文件里是这样的：\njson\n{\nExternalIdPs: {\nEpicGames: {\nClientId: xyza7891UKANVNSg7kBFSIgVQ4JICHu0,\nClientSecret: xxx\n}\n},\n}</p>\n<p>通过 k8s secret 的环境变量注入的方式如下：\nyaml\napiVersion: v1\nkind: Secret\nmetadata:\nname: id6\nlabels:\nbranch: main\ntype: Opaque\nstringData:\nExternalIdPs__EpicGames__ClientId: xyza7891UKANVNSg7kBFSIgVQ4JICHu0\nExternalIdPs__EpicGames__ClientSecret: xxx</p>\n<p>通过 Azure Portal 的配置方式如下：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACKUlEQVR42qWSTW/TQBCG/dsRF24IDr31ygW1IIF6ABWhqL3QFigH1DRq0jTxR+z12t4vO2vnQXFCaCk3Vno0u6vRO7PvbLB3mvL8eMqT9yP2BxMOz6YcnM84PJ9xcLaJb7/OeXMx3+wv5jsOt3nvvoXsfb7l6dGY4NlxxP4XwcuTlNeXkuPrkg9XJR+HVc+nkWIwsQzGdhP/Zmw5vbW8+l7y4kQQpNEdvsrwVYo3Euj4nxUIWVAvl7hmSbP0KNWQZSVloSm2SKlJE4EUJc40NM5Tu7bHWd9jrccYTzC9m2Gtoes6VqsVeVJx/XPCzfCOZJ6TRpIkLLgaLRjdZIxvJVHsyGJFFpVo2TwgqCqFMRrv/abnFQiRoY3m94XvWjK9RFpPbpqeSiuqqsC3/gHBbDanKCRpmlK7Bu0lYTwnSzOEED3GWOLCEcotRY2QJVJKlkuPv0eQJDFhOMdUDtlEXNZHvViSJFRVhbUWVzdEpWehPInypLpFaYtS6vFQ1mJN0/SHoR9QtxpVarT+k9ytVhTWU7m2R9VdX8Q51/t+nyCMQvJFwdT9oCTuf826SBxFu0K+7QiLJXG1IVEtpdKUZflYMI4WCBcSuSErT29snue9d3Vd7wRTtR5KS248hW0x1mGMeSw4GU+YxxOs1djttHMhyHOx67DtVgjte7E1a2FtHEbrfzw5DCmLCu/bjV9dh8gy0nTRd7o23tV1P5BMbxCmRRmLVuqR4C+oPdqPkEPhEQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/0abb70b2306350b5f664e10c6dd3d3db/fcda8/1690374050107-3972b8d8-b4e3-471c-86bd-ee911fb40091.png\"\n        srcset=\"/static/0abb70b2306350b5f664e10c6dd3d3db/12f09/1690374050107-3972b8d8-b4e3-471c-86bd-ee911fb40091.png 148w,\n/static/0abb70b2306350b5f664e10c6dd3d3db/e4a3f/1690374050107-3972b8d8-b4e3-471c-86bd-ee911fb40091.png 295w,\n/static/0abb70b2306350b5f664e10c6dd3d3db/fcda8/1690374050107-3972b8d8-b4e3-471c-86bd-ee911fb40091.png 590w,\n/static/0abb70b2306350b5f664e10c6dd3d3db/efc66/1690374050107-3972b8d8-b4e3-471c-86bd-ee911fb40091.png 885w,\n/static/0abb70b2306350b5f664e10c6dd3d3db/c83ae/1690374050107-3972b8d8-b4e3-471c-86bd-ee911fb40091.png 1180w,\n/static/0abb70b2306350b5f664e10c6dd3d3db/b5c8e/1690374050107-3972b8d8-b4e3-471c-86bd-ee911fb40091.png 2194w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=adsG8></a></p>\n<h2>增加 Epic Games 登录</h2>\n<p>在 hosts/main/Extensions/ExternalIdentityProviders.cs里添加一个新的方法：\ncsharp\nusing System.Threading.Tasks;\nusing Duende.IdentityServer;\nusing IdentityModel.Client;\nusing Microsoft.AspNetCore.Builder;\nusing Microsoft.Extensions.DependencyInjection;</p>\n<p>namespace IdentityServerHost.Extensions;</p>\n<p>public static class ExternalIdentityProviders\n{\npublic static void AddGitHubProvider(this WebApplicationBuilder builder)\n{\n// ...\n}</p>\n<pre><code>public static void AddEpicGamesProvider(this WebApplicationBuilder builder)\n{\n    var externalIdPsConfiguration = builder.Configuration.GetExternalIdPsConfiguration();\n    var epicGamesProviderConfig = externalIdPsConfiguration?.EpicGames;\n    \n\n    if (epicGamesProviderConfig != null &#x26;&#x26; epicGamesProviderConfig.ClientSecret != string.Empty)\n    {\n        builder.Services.AddAuthentication().AddOpenIdConnect(epic-games, Epic Games, options =>\n        {\n            options.Scope.Add(basic_profile);\n            options.SignInScheme = IdentityServerConstants.ExternalCookieAuthenticationScheme;\n            options.Events.OnRemoteFailure = context =>\n            {\n                context.HandleResponse();\n                return Task.CompletedTask;\n            };\n            options.Events.OnAccessDenied = context =>\n            {\n                context.HandleResponse();\n                return Task.CompletedTask;\n            };\n            options.ClientId = epicGamesProviderConfig.ClientId;\n            options.ClientSecret = epicGamesProviderConfig.ClientSecret;\n            options.ResponseType = code;\n            options.Authority = https://api.epicgames.dev/epic/oauth/v1;\n            options.Events.OnAuthorizationCodeReceived = context =>\n            {\n                context.Backchannel.SetBasicAuthentication(context.TokenEndpointRequest!.ClientId,\n                    context.TokenEndpointRequest.ClientSecret);\n                \n                context.TokenEndpointRequest.ClientId = null;\n                context.TokenEndpointRequest.ClientSecret = null;\n                return Task.CompletedTask;\n            };\n            options.CorrelationCookie.Path = /;\n            \n        });\n    }\n}\n</code></pre>\n<p>}</p>\n<p><a name=J48oB></a></p>\n<h1>完成</h1>\n<p>提交代码，上线测试，如开头所示。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}