{"componentChunkName":"component---src-templates-post-js","path":"/posts/Array-对象的最大最小值方法之修订版/","result":{"data":{"sitePage":{"id":"SitePage /posts/Array-对象的最大最小值方法之修订版/"}},"pageContext":{"url":"/posts/Array-对象的最大最小值方法之修订版/","relativePath":"posts/Array-对象的最大最小值方法之修订版.md","relativeDir":"posts","base":"Array-对象的最大最小值方法之修订版.md","name":"Array-对象的最大最小值方法之修订版","frontmatter":{"title":"Array 对象的最大最小值方法之修订版","stackbit_url_path":"posts/Array-对象的最大最小值方法之修订版","date":"2011-12-18 03:12:35.3981614","excerpt":"","comments_count":0,"positive_reactions_count":0,"tags":["javascript","max","min","最大值","最小值"],"canonical_url":"https://be-net.azurewebsites.net/post/2011/12/18/Array-对象的最大最小值方法之修订版","template":"post"},"html":"<h1><font color=\"#9b00d3\"><font style=\"font-weight: bold\">一、背景：</font></font></h1>  <p>十月27号，我写过《<a href=\"http://www.zizhujy.com/blog/post/2011/10/27/%E7%BB%99JavaScript%E7%9A%84Array%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0%E4%B8%A4%E4%B8%AA%E6%9C%80%E5%A4%A7%E6%9C%80%E5%B0%8F%E5%80%BC%E6%96%B9%E6%B3%95.aspx\">给JavaScript的Array对象添加两个最大最小值方法</a>》，非常简洁。今天我发现，这个简洁的实现给我惹了点麻烦。如果有一个数组，里面并不全为数字，那么，简洁版实现的最大最小值方法，将返回NaN对象，即Not a Number。</p>  <h1><font color=\"#9b00d3\"><font style=\"font-weight: bold\">二、目标：</font></font></h1>  <p>我希望达到的效果是，如果数组里面不全为<strong>有限</strong>数字，最大最小值方法仍然能够返回其中的<strong>有限</strong>数字部分的最大最小值。如果全不为数字，则最大值方法返回-Infinity，最小值方法返回Infinity，让调用者知道程序返回了无意义的结果。</p>  <h1><font color=\"#9b00d3\"><font style=\"font-weight: bold\">三、解决方案：</font></font></h1>  <p>显然，需要对Array对象再添加一个筛选有限数字的方法。怎样筛选呢？又需要添加一个判断一个对象是否为有限数字的方法，我把这个判断一个对象是否是有限数字的方法添加到了Math对象中。如下：</p>  <pre class=\"brush: javascript\">    //\r\n    // 判断一个对象是否是有限数字\r\n    //\r\n    Math.isFiniteNumber = function (o) {\r\n        if(typeof o === &quot;number&quot;) {\r\n            return !isNaN(o) &amp;&amp; isFinite(o);\r\n        } else {\r\n            return false;\r\n        }\r\n    };</pre>\n<p>&#160;</p>\n<blockquote style=\"border-bottom: black 1px solid; border-left: black 1px solid; background-color: #eeeeee; border-top: black 1px solid; border-right: black 1px solid\">\r\n  <p>上面的测试条件中使用了===。用VB多年后，学C的时候，看到==，我崩溃了。后来再学JavaScript，居然看到有===，于是再次崩溃。其实，===与==意思一样，就是判断是否相等，只不过===是更严格的相等。JavaScript中有undefined对象，你可以<a href=\"http://www.myfootprints.cn/OldWeb/javascript/default.asp?s=alert(undefined%20%3D%3D%20null)%3B%0Aalert(undefined%20%3D%3D%3D%20null)%3B\" target=\"_blank\">测试一下</a>，undefined == null 返回 true，而 undefined === null 则返回 false。</p>\r\n</blockquote>\n<p>有了这个，就可以给Array对象添加筛选有限数字的方法了。</p>\n<pre class=\"brush: javascript\">    //\r\n    // 筛选有限数字\r\n    //\r\n    Array.prototype.screenFiniteNumber = function () {\r\n        var data = [];\r\n        for(var i = 0; i &lt; this.length; i++) {\r\n            if(Math.isFiniteNumber(this[i])) {\r\n                data.push(this[i]);\r\n            }\r\n        }\r\n        return data;\r\n    };</pre>\n<p>最后，是最大最小值方法。可以发现仅仅是将简洁版实现的this替换成了this.screenFiniteNumber()：</p>\n<pre class=\"brush: javascript\">    //\r\n    // 给数组对象添加一个 min() 方法\r\n    //\r\n    Array.prototype.min = function () {\r\n        return Math.min.apply(null, this.screenFiniteNumber());\r\n    };\r\n\r\n    //\r\n    // 给数组添加一个 max() 方法\r\n    //\r\n    Array.prototype.max = function () {\r\n        return Math.max.apply(null, this.screenFiniteNumber());\r\n    };</pre>\n<h1><font color=\"#9b00d3\"><font style=\"font-weight: bold\">四、效果：</font></font></h1>\n<p><a title=\"点击这里运行\" href=\"http://www.myfootprints.cn/OldWeb/javascript/default.asp?s=%0A%20%20%20%20Math.isFiniteNumber%20%3D%20function%20(o)%20%7B%0A%20%20%20%20%20%20%20%20if(typeof%20o%20%3D%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20!isNaN(o)%20%26%26%20isFinite(o)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20Array.prototype.screenFiniteNumber%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for(var%20i%20%3D%200%3B%20i%20%3C%20this.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(Math.isFiniteNumber(this%5Bi%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data.push(this%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20data%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2F%20%E7%BB%99%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%20min()%20%E6%96%B9%E6%B3%95%0A%20%20%20%20%2F%2F%0A%20%20%20%20Array.prototype.min%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.min.apply(null%2C%20this.screenFiniteNumber())%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20Array.prototype.max%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.max.apply(null%2C%20this.screenFiniteNumber())%3B%0A%20%20%20%20%7D%3B%0A%0Avar%20a%20%3D%20%5B1%2C%202%2C%204%2C%205%2C%20%22ab%22%5D%3B%0Aalert(%22%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%9A%22%20%2B%20a.max())%3B%0Aalert(%22%E6%9C%80%E5%B0%8F%E5%80%BC%EF%BC%9A%22%20%2B%20a.min())%3B\" target=\"_blank\">点击这里运行</a></p>\n<p>测试代码：</p>\n<pre class=\"brush: javascript\">var a = [1, 2, 4, 5, &quot;ab&quot;];\r\nalert(&quot;最大值：&quot; + a.max());\r\nalert(&quot;最小值：&quot; + a.min());</pre>\n<p>&#160;</p>\n<p>输出：</p>\n<p><a href=\"https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_428.png\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 244px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 37.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaElEQVR42o3NTXPSYBiF4fxut931P7jpjE5dWEMBq6SEEEpCwZIPSgMJJK18OKbNGwhJUTe3Qza6cNTFNeeZM2fmkeT6O/TOBy5NC8UcUFe7VJUr3jZayEqHitLhvGVy3r7m5WuZV3KTatehbrgo9ozGRZPLoxdox0ecnZwgGa5LtFwQLr8y+7xmEi649SPcachwPMPyQpxphOXNcacRthcyuA3K3vXvy5018pjMHqg2Wkh3foRjWehtjSAIEEnCLsvItlt22Z/lv92HXZZt2e/3KNoVknUXkDw9slytiOMYIVLS9P+IdMN2m5EIwS7P+agZSLY3p8h3pJsNm8NQCMRfpKngKREE65jp4guWH5Z5H6e8V7tI4/mSH9+/lR+Kovin5+cCkeWMHtYMR2PeVGo4ns9k9UhFNZFqWh/VsGj1bNp9p6Rd/3LoVdMqNY0hWs9G7zvU9U9U2gNqnRvOmj1q+g2n8gU/Ae808T1P+Be7AAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image\" title=\"image\" src=\"/static/7d18b7a8203de74a8bd2a0eb03242d9e/0cba8/image_thumb_163.png\" srcset=\"/static/7d18b7a8203de74a8bd2a0eb03242d9e/12f09/image_thumb_163.png 148w,\n/static/7d18b7a8203de74a8bd2a0eb03242d9e/0cba8/image_thumb_163.png 244w\" sizes=\"(max-width: 244px) 100vw, 244px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\" loading=\"lazy\">\n    </span></a><a href=\"https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_429.png\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 244px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.621621621621614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAByUlEQVR42oWPTVPaUBiF88e76kw3/Qld1oWdfqBWp4JggoBgREESSCAfJCpUqZDk5gbb6eLpeBlnumjHxTPnzvvOfc852sfSNrXaDkctk1r7jMpJh3L9jK96kz29TanSoFRt8eW4xbutz3zYN6h0HSqmjW6F6EcGJ29e0Xj7mt2t92j17hlB5BPEM7zoGjeIGHlThn7ElevTc3x6I4+L4ZhLe0zfCbC8GNuPccIbnCBmOHKZeCEHRzra0PWxBhanrRbRNCRNU9ZFTpELZC4oZI4Uglxk5EIgRIbIUkWWpmRPmmWsHx+pGg00axyyuL9jPPEJoxtm83uCaE58e8ft/F7p4mGpjJIk+Ser1YpcSsp6E20wiRFpgjuZ0ul59OwAozNS774d0jAd/GiuEj59Tv9zUErJoXG6OVhIoRJs4qeqaq6qZaric7q/9Zk8z9VMyoLy08FLd4oUGcvlUjm9RJKseFiumMwWOPEM03ZxrueEixV71RaaFc74/eunciiKl1mvCxIhseLvXNojPu1/48r1cOc/+FJtox02L6ifDzDMDXrniuN2n1q7r7RuDtReqTnguLOZ79W7lIwu+80eO8Y5B80+27tl/gA9AoUTRgi7XAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image\" title=\"image\" src=\"/static/83658671c2eeb1d979837eef07de9e55/0cba8/image_thumb_164.png\" srcset=\"/static/83658671c2eeb1d979837eef07de9e55/12f09/image_thumb_164.png 148w,\n/static/83658671c2eeb1d979837eef07de9e55/0cba8/image_thumb_164.png 244w\" sizes=\"(max-width: 244px) 100vw, 244px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\" loading=\"lazy\">\n    </span></a></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}