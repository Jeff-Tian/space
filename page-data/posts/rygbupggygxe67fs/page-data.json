{"componentChunkName":"component---src-templates-post-js","path":"/posts/rygbupggygxe67fs/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/rygbupggygxe67fs","relativePath":"posts/rygbupggygxe67fs","frontmatter":{"title":"【已解决】IdentityServer 多实例下的 Session 脑裂问题","stackbit_url_path":"posts/rygbupggygxe67fs","date":"2023-01-12T10:59:41","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>接上一篇，在将 DataProtectionKeys 和缓存持久化到一个中心化的数据库（PostgreSQL）之后，多实例下，用 Azure AD 登录 IdentityServer 报错的问题解决了。</p>\n<p>但是，仍然有一个问题，就是在登录之后不停地刷新页面时，一会儿显示登录状态，一会儿显示未登录状态。通过查看 Response header，会看到有时候是设置 session cookie，有时候是清除 session cookie：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9283cd1118e40c26d9e14c0bc7adefd/d6853/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABuElEQVR42iXOS2sTARiF4fwGEa2rMslcMpn7LUlNp02TdtImoS224qJCwU03gr9SKvUGRkQiYhXrTC6UBlQocfLKTBYfZ/HBc06hEXZo7fRpR31aUZeNVsRmu0O4FdHY3Ea3AxzbxzQsHMfFtFwqmoHjVbEdH8v28lsPW4Rhk8JO9xHR4QFbvS67/WM6vSO29w5p7+3T2t2nGfXwqmtoupUDXlDH8+s4boBhujmWl+g2puNTGE+m/IgvGXx7y5vhSz5ffiQZj5iMrhmPpowmE05OT1kVRJSyhlCSkMsakqwiSmXELEUFQVSQKjoFgCQZMxx+5fW7Cz59f88fRsyISbnN3pydvcAwbFw/wA1qmI5HRbfyggzL4JKoUBLlJTiZTvl5dcXNzYzFHNJFyu9/1yTzLyTpkMfPDri38gBZ0qnVQkwzoKJaKIqJKOkUSyqCoFAsKkswg37FMbPZjDRN81UslnGb/uXk+RFCeAdtTcYPffymhxc6aA8tKqGPUtVRPRnJlJZgHCecn7/iw2DAfD7PoWzlYrHEnxw/5e79FVRbpR6uU99o4NYC7KqL7duUdZWyoSJrKv8BFItDfpjkNoQAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c9283cd1118e40c26d9e14c0bc7adefd/fcda8/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png\"\n        srcset=\"/static/c9283cd1118e40c26d9e14c0bc7adefd/12f09/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png 148w,\n/static/c9283cd1118e40c26d9e14c0bc7adefd/e4a3f/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png 295w,\n/static/c9283cd1118e40c26d9e14c0bc7adefd/fcda8/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png 590w,\n/static/c9283cd1118e40c26d9e14c0bc7adefd/efc66/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png 885w,\n/static/c9283cd1118e40c26d9e14c0bc7adefd/c83ae/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png 1180w,\n/static/c9283cd1118e40c26d9e14c0bc7adefd/d6853/1673434018291-12d74c5a-76d5-4483-b5ff-5f5c10b8a6d2.png 3070w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d122ca7684ebeda70eb474f1741bd02a/3f99a/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACI0lEQVR42nWQy04TURjH5xUAE4yaOJfOTKdzaWfOXDotLRVaJJq4cMUbQEzcuPAF3PsSrtxU7qiJC18AghdEubhhQcBVd1DgZ3oMJAb9kl/+5yy+33e+o0xMPaB9/yGt9jSNVpvGvQ6NVodac4IgSgmCCM8N8PwBFSzbwSl5BBWBH4SSMEpotjpMdaZR0rFJsmabQVabbfLxDlljkmRsAjfKEWkNIVKSJCWvj1OtNcjrTeI0JxKpJIxiOSCoRCjLq29ZXF5lcWWNNwvLdOeX6C4s0Z1fZGXtPY9nZrh96w6GXkDVCqi6iW7YaLqJqpky/5wLFGwH5fDwkIODAzY/feZf9fzFS9R0iqD1CBGnxElKklavSLNcphAJkUhQdnZ22dv/ybft75ycnHB2dka/3+f0tC+Fc0+fcfOuhe0LuWZWG8P1yjgln6LjYRVdmcWST8FyUI6Pf9Hr9a5edHFxITk/P5f32dk5hoZGMAwTkVSJsxynFFAseRQKDppqoKk6qqqjaQbK7u4ee/v7V9JrwrknjNwYxTCKBEGMiGuUywmuG+L4LlYg0Ms1dD9DL0UoX7e2WF/f4Ojo6L/C4eFRTNcirFcQdUElr+AlHkFHx2mGmLUqZh5jxz7KxuYXtrZ/yL8biC6lfwlHRjEdCz/xpTCS0pAwE5STgFLZwgksnIqN8up1l3cfPsrmS8k1oVzZRsQ5WdbA8yJ03ZZoAzQLVR1g8huXc8c+JtuMswAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/d122ca7684ebeda70eb474f1741bd02a/fcda8/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png\"\n        srcset=\"/static/d122ca7684ebeda70eb474f1741bd02a/12f09/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png 148w,\n/static/d122ca7684ebeda70eb474f1741bd02a/e4a3f/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png 295w,\n/static/d122ca7684ebeda70eb474f1741bd02a/fcda8/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png 590w,\n/static/d122ca7684ebeda70eb474f1741bd02a/efc66/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png 885w,\n/static/d122ca7684ebeda70eb474f1741bd02a/c83ae/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png 1180w,\n/static/d122ca7684ebeda70eb474f1741bd02a/3f99a/1673434072664-5cb5023a-c5ab-438b-aa72-089fae657631.png 2840w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>即，登录状态仍然是脑裂状态。</p>\n<p><a name=BCiJ7></a></p>\n<h1>原因</h1>\n<p>通过查看文档 <a href=\"https://docs.duendesoftware.com/identityserver/v6/ui/server_side_sessions/\">https://docs.duendesoftware.com/identityserver/v6/ui/server_side_sessions/</a>，发现如果启用了 Server Side Session，默认会将 Session 数据保存在服务器的内存中。这就带来了状态，当有多实例时，无法共享，导致脑裂。我一看，自己部署的 IdentityServer 正是启用了 Server Side Session，并且是默认保存在内存的情况。</p>\n<p><a name=vsEZz></a></p>\n<h1>解决办法一</h1>\n<p>参考《<a href=\"https://zhuanlan.zhihu.com/p/571926698\">解决 IdentityServer 在多个 pod 情况下的登录失败（session 漂移）问题 - Jeff Tian的文章 - 知乎 </a> 》，可以设置 session 粘滞。但是这样做，会导致水平扩展受到限制，因为对同一用户的请求，总是落在同一个 pod 上。</p>\n<p><a name=CkRpm></a></p>\n<h1>解决办法二</h1>\n<p>删除启用 Server Side Session 的代码，将所有 Session 信息保存在 Cookie 中，这样每次请求都带上 Session 信息。但是这样做，会受 Cookie 的数据大小限制，无法很好的扩展。\n<a name=kP8oQ></a></p>\n<h1>解决办法三</h1>\n<p>将 session 数据也持久化到数据库吧，这是本篇重点介绍的选项。Session 数据是 IdentityServer Operational Store 的一部分，于是我们可以启用 OperationStore 的持久化功能。</p>\n<p>完整的改动提交见： <a href=\"https://github.com/Jeff-Tian/IdentityServer/commit/fec6b30d6f571646680a68e4c4bf7481af183ddf\">https://github.com/Jeff-Tian/IdentityServer/commit/fec6b30d6f571646680a68e4c4bf7481af183ddf</a>。</p>\n<p><a name=ErIvr></a></p>\n<h2>添加依赖</h2>\n<p>需要添加对 Microsoft.EntityFrameworkCore的依赖：</p>\n<p>xml\n<PackageReference Include=Microsoft.EntityFrameworkCore Version=7.0.2 /></p>\n<p><a name=fxO3Y></a></p>\n<h2>添加 Migrations</h2>\n<p>在项目目录下执行：\nshell\ndotnet ef migrations add AddPersistedGrantDbContext --context PersistedGrantDbContext --project hosts/main/Host.Main.csproj</p>\n<p>这样，项目里就多了如下 3 个文件：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1be8235ac46f365c43a6c584e3104627/efb68/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACfklEQVR42nWS25bcJhBF+0+SvuiCkBAggZBa1+5xMk4cO8685f//Y2cJje08JA97QRVUcaqokw8TLow0rqfrJ0zToRuPaTy1cXHdfd9WbX0838+EVOTFD3b7lEqLUA5pAqq9U5pAaXpUMyBNF31JYbhkFddccckU17zmJjSXvI7s9u4/pxWnq9CIuqPQHVnVxovXXJNZi/1jxH/aEMGROUvqDPX9jl1WZPDknUP0HcXQk/mGtDWcLmmN1AOqGUmLhp9uJedrSWYM7duE/7Ih+pYs2IhZJvQ6U60zcupJvSb1hrQzZJ3ldFOScmhwjwn/nNBzjwqaalS0f82EP58UvYuXd5p1wW4balsRvYvJ4pm3cX9K2wLV9bTTSjsuuHmjbDuKVR0KPx+BeWhioF0m+l9ekWMgdfr7QzsxYWIkt9xQmZG6nambmax0FGuNe5sIX1+iwvw9SM8jdltR20Ix+B8lvys9FUGh54B/zuipw8yBotPIbS/56GEeWtJdQVQ4Y9aF+rEhpyEmEbv60BwKdetJKk3VBgrjKKwnKxWi1UcPvz4xY8DeHfbuaZaZ+vGIycplQt476sEjho4slixqfk4qLlnNNTtm6pwo0vjLc1RYDh7ZN4j3Pu1KE1cfeE0SSz5KP50zFYd2H8p/k8gaNXj01CNdh7COovHItouftrPvZeMRtj0wLadvE37J1HfOSUlS9dTz3+iXN5r5I+30iWb8HTN8pO5/jVTdB4r2gbAbRXPw3wnTiquwJHriVg00ume4/4bvX6nsjFADhb4jzRjtm2w554aLsP+f8CZrhDcIZ5nDwPPlM+vzC/fllTB+wIYF7UdqdydRmmupIv8A1Ky7MxBwSpgAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/1be8235ac46f365c43a6c584e3104627/fcda8/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png\"\n        srcset=\"/static/1be8235ac46f365c43a6c584e3104627/12f09/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png 148w,\n/static/1be8235ac46f365c43a6c584e3104627/e4a3f/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png 295w,\n/static/1be8235ac46f365c43a6c584e3104627/fcda8/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png 590w,\n/static/1be8235ac46f365c43a6c584e3104627/efc66/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png 885w,\n/static/1be8235ac46f365c43a6c584e3104627/c83ae/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png 1180w,\n/static/1be8235ac46f365c43a6c584e3104627/efb68/1673520640931-11f1b112-cf6c-485d-8fd3-ef1a977529f4.png 2032w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=JDWXL></a></p>\n<h2>启用 Server Side Sessions</h2>\n<p>这需要在 builder.Services 中添加 IdentityServer 之后，增加如下代码：\ncsharp\n.AddOperationalStore(options =>\n{\noptions.ConfigureDbContext = b =>\nb.UseNpgsql(DatabaseHostingExtensions.GetConnectionString(builder),\nsql => sql.MigrationsAssembly(assembly));</p>\n<pre><code>            options.EnableTokenCleanup = true;\n            options.TokenCleanupInterval = 3600;\n        })\n        .AddServerSideSessions()\n</code></pre>\n<p><a name=WNcx7></a></p>\n<h2>更新数据库</h2>\n<p>可以通过执行 dotnet ef database update --project hosts/main/Host.Main.csproj --context PersistedGrantDbContext这样的命令来更新数据库，也可以通过如下代码来更新数据库：\ncsharp</p>\n<pre><code>var persistedGrants = scope.ServiceProvider.GetRequiredService&#x3C;PersistedGrantDbContext>();\npersistedGrants.Database.Migrate();\n</code></pre>\n<p>无论哪种方式，更新后数据库会多出如下表：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d3824d0e77334b6e7ef2706178e64611/cb88c/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8ElEQVR42o2S2W7TUBRF/f/fUQEpojwUNS0NNE2KRFJUUEmr1PGQOLHjIZ7teIwXcoIEBR7Y0nrY0j337rt1hPOL95ycvKXX+8D19YDhzQ3XgyHHx12OX3fpdM7odN7x4uUbjo5ecXrapd//xMerIVe/0fp+f4iQJAm+7xPHMUVRUJYFdQ2PjyGTic90GmHZYFlgt9h/4zhgmlAUICiKhCxLuO6GJInJ8y1pmiPOMhS14OF7hevUeEGB7RX4/r/xvII0LREsM6IlzxriuCGKGlotFB1tsSQuQxIsckqCip9q+KXmmRe0tY+yclmYDraTkm+hbDJm9lfG6iV6PMVyjX36/5Fw9U3m8vOS26cFVtIm8ZHLMbIrs7ZidC1ltUyRZYu1mWIYCbOZg6JsUNUNimKjKA7zuXf48u1kxs1Y4sv9nOlcIyr8/UviY0j3TGc00lBVg4eHKWGYEAQJq1XAZBKxXIa4bohphqzXAWVZIpTFjjyrqKuGZgdNfehFFDdcXBgMBjqqukKSZmTZlizL8P0MScrxvGzvoygjCFLqukJ43kBD0xwK1rQ1vd49o9ETd3ftJsj71QqCGFGMEMUY246I40Nq3w+pqgqhveBPWqmqhiiq+zXabtuhANM0sW0Hw7DRdZMgCMnzfH9+tzvM/gC/XOkUQKijyAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/d3824d0e77334b6e7ef2706178e64611/fcda8/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png\"\n        srcset=\"/static/d3824d0e77334b6e7ef2706178e64611/12f09/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png 148w,\n/static/d3824d0e77334b6e7ef2706178e64611/e4a3f/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png 295w,\n/static/d3824d0e77334b6e7ef2706178e64611/fcda8/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png 590w,\n/static/d3824d0e77334b6e7ef2706178e64611/efc66/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png 885w,\n/static/d3824d0e77334b6e7ef2706178e64611/c83ae/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png 1180w,\n/static/d3824d0e77334b6e7ef2706178e64611/cb88c/1673521008693-7f8b6d95-8f88-4e75-a78f-0c1ef0be29a4.png 2728w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=rBygG></a></p>\n<h2>提交代码，等待部署完成</h2>\n<p>再次在多个 pod 的情况下，使用 Azure AD 登录，一切就都完美了！<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b80af73140b5a2c983d1524464d93877/0eb37/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSklEQVR42q1QwUrDQBTMr3jwoKJCERQ8WFDQ3xHB3/EsXryoBwu1tXqVnkRT1GJLdtO0TW262d0kO/K2SVVQEPHB8JbZmfeG52xt76K8s4eNzTJWSutYWC79Gkura5ibX8T+wSEuLys4P7uAU2/conZ9gytCvWFRzftPID2BvJVqDb0gQFGOjGN4ngfGGMJRiL9WkiRI0xSO1hpSKUgpkSYpeqM+WkEXQmeIZIpYJVZMOq0T6NxIKIZkWQZjjIVTbDAwtt8PWjhqnuBtHCGaCGTGfElSGL8rYh2lFKLJxIpoU/FDiSjBlDcYRxGU0rNh5PMYQxzHEEJYrb3hcBjCdVuzO5KIcQ7f79nOGAf3fby02+h0upbjnMPzmOXcRxcPT894vWticHwKh6YHQd9uogS0eYpP7zwtpS44etP9pMw1QkAPw48b/le9AxHth24//8rWAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/b80af73140b5a2c983d1524464d93877/fcda8/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png\"\n        srcset=\"/static/b80af73140b5a2c983d1524464d93877/12f09/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png 148w,\n/static/b80af73140b5a2c983d1524464d93877/e4a3f/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png 295w,\n/static/b80af73140b5a2c983d1524464d93877/fcda8/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png 590w,\n/static/b80af73140b5a2c983d1524464d93877/efc66/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png 885w,\n/static/b80af73140b5a2c983d1524464d93877/c83ae/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png 1180w,\n/static/b80af73140b5a2c983d1524464d93877/0eb37/1673521087306-6276811f-40a4-4140-a89e-c246466df54e.png 3684w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}}}},"staticQueryHashes":[],"slicesMap":{}}