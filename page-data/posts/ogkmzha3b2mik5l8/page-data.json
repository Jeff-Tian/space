{"componentChunkName":"component---src-templates-post-js","path":"/posts/ogkmzha3b2mik5l8/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/ogkmzha3b2mik5l8","relativePath":"posts/ogkmzha3b2mik5l8","frontmatter":{"title":"【重磅更新】关注微信公众号即登录插件升级支持 Keycloak 22！","stackbit_url_path":"posts/ogkmzha3b2mik5l8","date":"2023-08-24T12:15:07","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p><a name=NQN5Y></a></p>\n<h1>前情提要</h1>\n<p>《 <a href=\"https://zhuanlan.zhihu.com/p/349504145\">基于 keycloak 的关注公众号即登录功能的设计与实现 - Jeff Tian的文章 - 知乎</a> 》推出的 Keycloak 的关注公众号即登录插件的第一个版本，针对的是 Keycloak 7，随后在《<a href=\"https://zhuanlan.zhihu.com/p/407932327\">Keycloak 关注公众号即登录插件升级了！ - Jeff Tian的文章 - 知乎</a> 》将它升级支持 Keycloak 15，不久我将 Keycloak （<a href=\"https://keycloak.jiwai.win\">https://keycloak.jiwai.win</a> ） 升级到 16，发现仍然可用。后来，《<a href=\"https://zhuanlan.zhihu.com/p/563242067\">关注公众号即登录插件适配 Keycloak 18 - Jeff Tian的文章 - 知乎</a>》提到 Keycloak 升级到 18 后，又不兼容，于是再次升级。接下来我发现直接将 Keycloak 升级到 19、20、21，都不用修改插件，正常使用，只是由于 Keycloak 的管理员配置页面抛弃了 Angular，改为了 React，导致有些配置项不显示，但可以通过 Partial Export 和 Partial Import 的方式来进行配置，并不影响使用。<br />今天，再次升级插件，以适配 Keycloak 22。</p>\n<blockquote>\n<p>在七夕节进行重磅更新，是因为感受到了来自知友的爱（尽管是男性知友）！这次没有知友的大力支持，做不到这个重磅更新。</p>\n</blockquote>\n<p><a name=Xw00o></a></p>\n<h1>重磅更新</h1>\n<p>有两点，一是使用了新的方式来实现配置项，从而可以在 Keycloak 22 的管理后台以 UI 方式进行配置，不再依赖 Partial Export 和 Partial Import。<br />二是手机端的微信登录也能正常工作了！这是由于手机端需要配置经过企业版认证了的服务号，而我一直没有，但是这次知友帮我提供了！<br />之前的版本，都只针对 PC 端的微信登录。因为个人公众号是没有权限调用相关的接口的，所以我使用自己的测试公众号，在关注者在 100 人以内都可以使用。目前也没有满，所以现在的 PC 版微信登录仍然走的是我的测试公众号。<br />手机端的微信登录，走了知友提供的公众号，因为我分别配置了两组不同的 App Id 和 App Secret。但只要你有通过企业认证的服务号，是完全可以只配置同一组公众号 App Id 和 App Secret 的。</p>\n<p><a name=vRAJl></a></p>\n<h1>在线体验</h1>\n<p>通过这个链接： <a href=\"https://keycloak.jiwai.win/realms/UniHeart/account/#/\">https://keycloak.jiwai.win/realms/UniHeart/account/</a> ，点击登录，并选择“微信”即可。\n<a name=PjFKk></a></p>\n<h2>手机登录体验</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.89189189189187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_0935.png\"\n        title=\"IMG_0935.png\"\n        src=\"/static/e352999b9a5151a65874e703f8752fbb/fcda8/1692878633707-d9f6dc7f-cf44-4acd-acf0-dd59c046a894.png\"\n        srcset=\"/static/e352999b9a5151a65874e703f8752fbb/12f09/1692878633707-d9f6dc7f-cf44-4acd-acf0-dd59c046a894.png 148w,\n/static/e352999b9a5151a65874e703f8752fbb/e4a3f/1692878633707-d9f6dc7f-cf44-4acd-acf0-dd59c046a894.png 295w,\n/static/e352999b9a5151a65874e703f8752fbb/fcda8/1692878633707-d9f6dc7f-cf44-4acd-acf0-dd59c046a894.png 590w,\n/static/e352999b9a5151a65874e703f8752fbb/efc66/1692878633707-d9f6dc7f-cf44-4acd-acf0-dd59c046a894.png 885w,\n/static/e352999b9a5151a65874e703f8752fbb/d9199/1692878633707-d9f6dc7f-cf44-4acd-acf0-dd59c046a894.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.89189189189187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAIAAAD3xz8iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFfElEQVR42qWUW3McxRXH56MkZbu4uaBC4rykAolxHvLCEwkpsF+Sh+Q9XyIfILaxheMEC9uFKkZSFQ9AEQdky2DLUnTzrsa7s7tz753py0z3TF9mpjs1u0JShBG48quzXd1nz79vc/pYGGPf9zudjuM48EgQQnEcO4OR3VkZdj+CMLEIIY7jLC0tra+vQwjTNE2SJJ1wsJMkCULIHY063cebq5/tPPgrTIE1TlKESZZTnGVJCuFkgEmGSYYwQZhgkk09KUQpwphkGS0zWiUpsjKCt7Y2PXeEEWQ0+8/a6qeffHz3zp3bt/+19MXnX95b/vLe8vLy3c//fdve6abJmGAUBv7A6WGYWv0Q9dzICcYuQN4YPxpEX23YK9v9B1uPVzuDjcfuynZvZbu32hl0hlE/RG18AHsB7IfIevVafupv9KdX6amr7CdXsl/OsjM3+Ws3yjM3+GvXy9PXizM3ytNtp/zFLHvlvfzn7+WvXKOvtpZbL8zQxb75+8P8/bXs2nbzzDv0+IX8xMX8xEX67CX63CX6zCX60rv0hcutnZxhk5Y+f5meeIdaP/sHoyWHIEj8wRCJU1fZizP0R+/Sl2boiYut/fA8Pf1+8eIM+/VN9ptbxa+uF6/PFa9/ULx8hVonZ4o/3Yp/f3P0h5vDPy6kz18ujp2nx87Tk5fp2/PF2QX29of0rXl6doH9+Ar9wfn82IXWjl+gxy9Q6+xC+dt58eaC/N2ieuMWf2uenVss37xV/PkTpurGGK3NFP2Xu8Ub/yzOLRRnF4pzi+W5xdJq3brZj9lDN1LKjY1Nx3Fs2yaEGNPOdTDEahq9tDG63w0e2uF6HzzoBE6Ium66PYhLqbgQJedVVRmt/TH5bHVwvxNsD8a0lK1YGwMQg1mZkCKGNEhzTHlCCpgVUoqSi7qquBBccKWqGDEXEJiVXFatWKp6vR9v9MGmA7YH4O6m2wug7aWPhuPOKLnf8e93/H4AHw3HD7p+z4cPd8I0KyeHNVajNcp5BGkIaQSpCzJEOaI8giwh5cTJGFeYCj+hABVhSguhds/MOVdSVEpOrVZSSrHvqaRSUordGKVEVUkheFmWnHMLY0wpy9tXlVNK2x9lE9vj0JCyCRjj9j3rb36n70JrTQixMCbGmDEuPrpnT71aT9uj5twVI4yNMRv9+Iv1kTHme27i65Xb1DF5IUpZMS4J44Tx6admXH7nttuVvXG2shNs9OMtB6x0g54Pv+p4Ww7QT2Jf/H9eWLtynudhGLquC8A4DEPP8xzHCcMwSRLP89I0BQBEURTHcZqmdV0bY/bFhBDf9z3P830/CALP88IwHA6HcRxPZgRhGEZRBABACLXv5KAYALCzs+N53nA47PV6g8Gg2+3atu04DgCg1+vZth2G4ZO3TbJs5Lqj0SiK4mZCXddNoyedvWHzhAszxgjOxwB4ngchfIoLa8Vaq8bIui0TVa2rRqtJW6pGVo2sdNMcmZ6QVZt+4ULZT4QNxCCVNhA7sdgKuIfl0RmmSVm7UIK8ijI1ptUQyhGUuKxcKAMsA6K4ar5l20YXsokzBVkF8gqXdcqqcV6hog6JCokKiBKVfrK4afbK4l6EPtQ/RNM0u+I8z0mWEZJ9TU6yPNu1lvaf/DC7YqVUPaH63iil9s8sq1qq+qkfBkRthi0ud+fvdIwxdaOfQowQMsZ0RknXTaaVpG6zUusjZ9FatwWQMSaEqOuqrmsh5ATFhSxLLg+g2gr8PzDGLCFEOaEo2lYIEUURxnjPzzlnjGVZxjkvDyCEaIv+QaSUaZoSQibT7TIt10KIQ8GHxWVZKqWmb3CPpmmUUvwbWIeUTdOsra3Nzs7Ozc19MGFubm52dnZtba2u6+kp9sT/Be4hMQIS0giAAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_0936.png\"\n        title=\"IMG_0936.png\"\n        src=\"/static/95706b1d473d37dad9e9be6bb08dd231/fcda8/1692878632325-12ab1a69-bf7e-496d-a621-babb90bc3173.png\"\n        srcset=\"/static/95706b1d473d37dad9e9be6bb08dd231/12f09/1692878632325-12ab1a69-bf7e-496d-a621-babb90bc3173.png 148w,\n/static/95706b1d473d37dad9e9be6bb08dd231/e4a3f/1692878632325-12ab1a69-bf7e-496d-a621-babb90bc3173.png 295w,\n/static/95706b1d473d37dad9e9be6bb08dd231/fcda8/1692878632325-12ab1a69-bf7e-496d-a621-babb90bc3173.png 590w,\n/static/95706b1d473d37dad9e9be6bb08dd231/efc66/1692878632325-12ab1a69-bf7e-496d-a621-babb90bc3173.png 885w,\n/static/95706b1d473d37dad9e9be6bb08dd231/d9199/1692878632325-12ab1a69-bf7e-496d-a621-babb90bc3173.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=MGZ8d></a></p>\n<h2>电脑登录体验</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/411e1af480938946db18d22c58df3f00/d9199/1692878697295-e598c417-7ae5-451c-bba3-113029a78192.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.89189189189187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAACE4AAAhOAFFljFgAAACm0lEQVR42u1XyYoiQRSsm7Za7vu+7/syreMCLqAiXgRF8KYXf0r8HPGPxMsb4g1ZlKU00zNz9BCdmS/fi4xcuitacjgclEwmGZlMhlwuF1ksFrLZbAqsVutTHzl+n49yuSKVCyFqVWxcK9ntdmq1WlSv17n1+XwPBK+AGrPZTIlEnD4/u/TzR4QWIzs5nU6SUGwymRh6vZ6MRiPJsvwAMQ8SEYNC2Wwmg+GDPgwyGYy/VUuQmUgkOCmdTlOn06FarUaFQoH73W6XW9GvVCpULBY5F0ohKBQKUrVa4QV5y263m9k9Hg/FYjGKRCKMaDTKQCwej1MoFOI+4Pf7lfPGMSGG4+AtAyDmbcgyryS2hxZxQLtl9QUhhjETCoJXl4GFoCwYDHJfe/vaGgk/IB8QBVrVajVoxVidrxCORiO6XC50vV5psViwmmazSdVqlbLZLD8noFwu82WUSiVljHmc9QPhZrOh2+1G9/udDocD3/h2u6XVakWNRoMwv9vtaLlc0nw+5xax6XTK5Mh/IMRjPp1OdD6fqdfrcUK/3+dkKMrn8/yE0BcQMah8IsRl4EHrdDq+GPz64a2hCFvK5XIvgTnk4Fk9EIqbFAesbv8ET5eifSbihr8DdZ306i/Kd/Glwn/Fm/BN+CZ8E74J34T/jfBvPptfQdJ+2GHiBdQf9FdxdUzEJbgt+BO04XCYfSCsXSAQUGJoAcQwr84F1HEJpme9XrMJgrWFZxkMBtRut9mqCTL82wHnBSMliGCWxuMxzWYzmkwmnC9BHRwYWiTBK8MMpVIpxWtDDUwRFsWCQjVqMEYuTBbiklqySMQYar1eL7eiD3MPYF5sWdQqW4Yi9VlBEQjgbI/HI+33ezaiAPqIDYdDzhHqRS24fgHRG0zGimj94gAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/411e1af480938946db18d22c58df3f00/fcda8/1692878697295-e598c417-7ae5-451c-bba3-113029a78192.png\"\n        srcset=\"/static/411e1af480938946db18d22c58df3f00/12f09/1692878697295-e598c417-7ae5-451c-bba3-113029a78192.png 148w,\n/static/411e1af480938946db18d22c58df3f00/e4a3f/1692878697295-e598c417-7ae5-451c-bba3-113029a78192.png 295w,\n/static/411e1af480938946db18d22c58df3f00/fcda8/1692878697295-e598c417-7ae5-451c-bba3-113029a78192.png 590w,\n/static/411e1af480938946db18d22c58df3f00/efc66/1692878697295-e598c417-7ae5-451c-bba3-113029a78192.png 885w,\n/static/411e1af480938946db18d22c58df3f00/d9199/1692878697295-e598c417-7ae5-451c-bba3-113029a78192.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>电脑登录，选择微信，还是需要用手机扫码的。扫码后，弹出以上测试公众号，如果点击关注或者已经关注，就会收到以上欢迎信息，然后电脑的网页会跳转至 Keycloak。如果是第一次微信登录，需要绑定邮箱，随后进入如下页面：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDElEQVR42mWSy2oUQRSG+0kkgpIXCO5cu1BB1H2yCChCXCgIghvfIUJAg1vdSYhZZ6FP4IjJmDiZTCYzTk9fqruqu+vS/UnXxGGiBz7OOV1df/+nqoObz96zsvGO5cfbLD96y7X1La6vb7G0tsnS6uYsL3B1gSurm9x48oa119vcevWRlecfCF5+gY19uLsDDz4vsAcP92Z5kXu7M+7vwu0dePEVdvvwdB/ufILgPMo5GkaMpymno4jBOKY/ihj+TmZ5knja56MwpXEWZ42ndpbKWNLCoq2jqR2BkpJcSpQqyHLpkUrN+zTLyaW6QFKWBUZX6KqiLAra/aVq90tfByKTCGUwrqFpamIhUZXDugZoGEeCojK0UdeOSCgK7agBrQ1xHJMkCfEFQSpyur0zOoc9pCpIUsG3g2OO+0O01kxTycHpFG3r2QfCmE73hF/9M+82TdNLBJkQHP3s0j08IM8zirJkMBz5cdsIw5BOp0MURb6fhhMOf3xnMDhFKeVFWodzQZFlHB33SEROXdeU2iAqqBzeUSoyRuMJWZbRNA3TJGMYCi9urfFjXnIYZ4qTaUUkHZVx/qV5NDUTUdE514SyxvlbdZS2Pc8Go/UldzOHsqQ3NSTKYl2NtXau1zqutKEwNaVpBR21c/N1Y8z/gu0oeT67dtn+Qnnuz6at//ZFoSiU8nXL4tq/gn8ATI4b9S7lDlYAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/3b4a32fca5ef06d0f3879d71d229159a/fcda8/1692878650529-a4af8dd6-c8c3-489e-845a-2fce8f885e23.png\"\n        srcset=\"/static/3b4a32fca5ef06d0f3879d71d229159a/12f09/1692878650529-a4af8dd6-c8c3-489e-845a-2fce8f885e23.png 148w,\n/static/3b4a32fca5ef06d0f3879d71d229159a/e4a3f/1692878650529-a4af8dd6-c8c3-489e-845a-2fce8f885e23.png 295w,\n/static/3b4a32fca5ef06d0f3879d71d229159a/fcda8/1692878650529-a4af8dd6-c8c3-489e-845a-2fce8f885e23.png 590w,\n/static/3b4a32fca5ef06d0f3879d71d229159a/efc66/1692878650529-a4af8dd6-c8c3-489e-845a-2fce8f885e23.png 885w,\n/static/3b4a32fca5ef06d0f3879d71d229159a/c83ae/1692878650529-a4af8dd6-c8c3-489e-845a-2fce8f885e23.png 1180w,\n/static/3b4a32fca5ef06d0f3879d71d229159a/412e0/1692878650529-a4af8dd6-c8c3-489e-845a-2fce8f885e23.png 2990w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=moAnj></a></p>\n<h1>配置指引</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACtklEQVR42lWRzWtjVRTAs+yiqyk06UubfsRk2qaZtNNxGIeBQQRBLCIq/jX+A+04SRooojjuXKXTinY2o3QziC4UwY3igJMObU3y0vS+d9/3x/0N7zWteuBw7+Lc3/mdczOPHn3JZ59/Qb3R5GG9zsN6g60Hn7K5ucXm1oOrrDcaNJvbNEa53WrRaDbTd61Wi9b2Njs7O2Qmrl1Dm5tnakpjfHycsbExJiYmmNI0srkc2WyWXC5HLjs5umeZnJxE06bI5/MUCgWmp6cplUpsbGyQubF6k+VKlYVimdL1ZWZmF9jf28cyBHqvizQER50OneMTXh4d8aLT4bTbpafrGKZJv99nMBhg2zZCCDK1tVus376TwoqlJbR8gSePd1GuQyhNCAPk8UvCnw6Rfz8nsi2U54LvEXg+nufj+z6XkamtrrNyY5X5YplieQktl+e7djstkoZBFIZYQuD1/kkbxIMeUf+UuH+Ko+uYUmKaJkEQoJRKRl5nqVJlbqFEsbSINj3Lwf43xI6FHOjgOamtSiwSs+hKBgX4YYgXBISxGhmu3WKlOjJMgDNzPNnbQzk29vkwhbi2he26eJaDtE7oGr8hnCOUKUAaIIZgGheGyys1yovL/wfutgkcGzE8IwoCzBfPMZ89xfzrT87cU4R5THDeRQ11lN5DiSEqDCEBVqo1KtVVFl67fgU8eLyL53noZ2fpSO6vPxJ9+zX2778wOJeIwZDYNCFZhS1RvpeOnxqurb/O3Xv3SUwTaL4wz0G7Tex7OFJCFCJdFxGESMfFMg0ix77YK/8JpS6AG+9/xAcffsw7777Hm2+9zRv37vPs8DCtiW2LwJI4QoBjgWuPrCxU4KcAFccX5yUw+ZTbd+5Srd2kvFhhZrbI0+9/uGr88x8nfPLVIZYf40f//u7liJeZCkQRrwA2ktWbxpW4IgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20230823-160209@2x.png\"\n        title=\"WX20230823-160209@2x.png\"\n        src=\"/static/fe1d7095f232bb203a5f6bfb3985fc1f/fcda8/1692792632400-3b9b85b0-4470-459d-9cc7-7f33f28a1bb4.png\"\n        srcset=\"/static/fe1d7095f232bb203a5f6bfb3985fc1f/12f09/1692792632400-3b9b85b0-4470-459d-9cc7-7f33f28a1bb4.png 148w,\n/static/fe1d7095f232bb203a5f6bfb3985fc1f/e4a3f/1692792632400-3b9b85b0-4470-459d-9cc7-7f33f28a1bb4.png 295w,\n/static/fe1d7095f232bb203a5f6bfb3985fc1f/fcda8/1692792632400-3b9b85b0-4470-459d-9cc7-7f33f28a1bb4.png 590w,\n/static/fe1d7095f232bb203a5f6bfb3985fc1f/efc66/1692792632400-3b9b85b0-4470-459d-9cc7-7f33f28a1bb4.png 885w,\n/static/fe1d7095f232bb203a5f6bfb3985fc1f/c83ae/1692792632400-3b9b85b0-4470-459d-9cc7-7f33f28a1bb4.png 1180w,\n/static/fe1d7095f232bb203a5f6bfb3985fc1f/412e0/1692792632400-3b9b85b0-4470-459d-9cc7-7f33f28a1bb4.png 2990w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />Client ID 和 公众号 App Id；Client Secret 和 公众号 App Secret 都可以是一样的，即通过手机或者 PC 的微信登录时，都使用同一个公众号。但是以上截图用了两个不同的，其中公众号 App Id 使用了我的个人测试公众号，在关注人数在 100 以内时可以使用。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.324324324324326%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvklEQVR42n3Py3LDIAyFYb//M3bj2HVMGC4GASE2/lsyXaSLZPGNFjpzNBoWs6KcYjY3vtaVUSuUuz3Z5HB5+8D/2bDJY8QybDESJKJ9YDYRKwXJiSBC333SM11MCec9SmuG70UxzSvWeuq9cBlHQoic58lxNNo7rZEkEUIgRuFoIJIYrqumlzofOFrDGEPOmX3fqbVS6/1lvqqUkp/Zrh/Iufwv7CXTNKGUYlkWvPdIfynGt/q+f7Q/HqTfwh/A3n/oSIXRogAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/b894e1b5a161f8e6ddc32ffe28acd953/fcda8/1692792727098-454f897d-9581-4731-a0e2-89d1d9297769.png\"\n        srcset=\"/static/b894e1b5a161f8e6ddc32ffe28acd953/12f09/1692792727098-454f897d-9581-4731-a0e2-89d1d9297769.png 148w,\n/static/b894e1b5a161f8e6ddc32ffe28acd953/e4a3f/1692792727098-454f897d-9581-4731-a0e2-89d1d9297769.png 295w,\n/static/b894e1b5a161f8e6ddc32ffe28acd953/fcda8/1692792727098-454f897d-9581-4731-a0e2-89d1d9297769.png 590w,\n/static/b894e1b5a161f8e6ddc32ffe28acd953/efc66/1692792727098-454f897d-9581-4731-a0e2-89d1d9297769.png 885w,\n/static/b894e1b5a161f8e6ddc32ffe28acd953/c83ae/1692792727098-454f897d-9581-4731-a0e2-89d1d9297769.png 1180w,\n/static/b894e1b5a161f8e6ddc32ffe28acd953/87cc4/1692792727098-454f897d-9581-4731-a0e2-89d1d9297769.png 2936w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />而手机端，则必须使用经过认证的企业公众号（特别感谢知友 <a href=\"https://www.zhihu.com/people/hhhnnn-78\">hhhnnn</a> 帮我提供，没有该服务号我没法调通手机端）。\n<a name=thJpc></a></p>\n<h2>域名验证</h2>\n<p>对于手机上使用微信登录，必须要使用通过企业认证过的微信公众号。在公众号后台，还必须将 Keycloak 服务的域名在微信公众号后台进行验证并保存，否则 Keycloak 服务没法调通微信的服务。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2dcce37e56610c49877a7ac00efa4a24/90eea/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.54054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVR42oWR2W6DMBBF+X9VEUnY8xDIf7VQVSDA7Pt+K08FaRPaWroaS8ZnzhhB1XUcRBG88lxNE0mSIAxDOI4D13VRVTWapkHTtOi6Dnmeo6oq2hdFQanrGuM4QlBUFeLpBM0wCGjdbojjGLZtw3n/wOubQzVJc6RZAcYi+L4Pz/MojDFqHkUR2raFwCGSokC/XAhoWhbSNCVoEAT08Vq5bcwY2ZRlSabDMGCaJsqyLBDOskyGiqZtwCzL6JB35OP0fQ+++KX/liBrGl4kEaqh3w2ThN5jnuet8gYU4L7ficDNDsfj08gc9NslfIM+GXLgWZI2oPUA/GH3ANwdef3LK/BqfgHXR/7LcA/4CczSQuSrYznTAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/2dcce37e56610c49877a7ac00efa4a24/fcda8/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png\"\n        srcset=\"/static/2dcce37e56610c49877a7ac00efa4a24/12f09/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png 148w,\n/static/2dcce37e56610c49877a7ac00efa4a24/e4a3f/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png 295w,\n/static/2dcce37e56610c49877a7ac00efa4a24/fcda8/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png 590w,\n/static/2dcce37e56610c49877a7ac00efa4a24/efc66/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png 885w,\n/static/2dcce37e56610c49877a7ac00efa4a24/c83ae/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png 1180w,\n/static/2dcce37e56610c49877a7ac00efa4a24/90eea/1692877098153-6a15798f-c36a-4021-bce1-b23585374dc5.png 2254w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />要验证域名，需要下载微信提供的一个 txt 文件，并上传至服务器的静态资源根目录。不同的情况有不同的配置方法，如果使用了 nginx 可以配置这样的记录：</p>\n<p>nginx\nserver {\nlisten 80;\nserver_name keycloak.jiwai.win;</p>\n<pre><code>location / {\n    proxy_pass http://localhost:8080;  # Forward to Keycloak\n}\n\nlocation /test.txt {\n    alias /path/to/static/files;  # Replace with the actual path\n    try_files $uri =404;\n}\n</code></pre>\n<p>}</p>\n<p>然而，我的 Keycloak 实例部署在 heroku 上，域名的 DNS 解析放在 Cloudflare 上。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c70e756c63251cdd0305c9adc2ea6a96/97a96/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEElEQVR42pWSTYvTQBjH8wn2LoKePHnwC6jfwi/iVRF6EvEoHgQXwQVByi4eFgrtZelhW23Vrdts04TN2zRt89pmpskkmcw8kla2++Jlf6fhD7+Zh/8zEtyG3u9Ty3YAQAgBANKt5B+9n7phbOViTV5chzHG1zDGLpJ+v6dpmhAizytDms3naULKlOB4C8bY8zxN0xRFcV0XY7zCMc/TReCO5T+ioIyuAt+TVgTTEkZBuR5kC2MsjuPlclkwBgBJXroJN/348KgTZuAlpR8tpTIlr9qrO+/8A4UCQMmvXCGEqAKePW+ind3o3ufg7ifv/l648zF40dQlluK335MHH/zWeSUzLi7gvBI9Pxj2uy9b+qOv0eN9/8lB+HQ/ePjFf3NkSARjAbDIxH/rbbfb9XqdEAIABReMAxPVgQNggqWz0chxJlNkW5Z9GYTQYDCo1WqqqrquZ1vWzEGzCZpOkIPs+dQZK4oUBIEQvOTVPvJLUEpt2/Z9vyiKLMtoliUZJTSleZbnOWMsDEOpSFaDIH196rk4Wzd0ffJNEBXZ4dxoeJZNySYnhEhQpHvd6bPds44WVb1ycaXqTWcxaarjb/a4YWvzKKRJ8k/O09WJFb1vjUNCb768+YaqFzVOhoHvObOZaVmLxQIAMMbScChrI1n+1R0rI9M0jRvohoEsU1fV4+NOp9PRdR0hZJqmLMt/AXacA3N+iiTjAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c70e756c63251cdd0305c9adc2ea6a96/fcda8/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png\"\n        srcset=\"/static/c70e756c63251cdd0305c9adc2ea6a96/12f09/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png 148w,\n/static/c70e756c63251cdd0305c9adc2ea6a96/e4a3f/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png 295w,\n/static/c70e756c63251cdd0305c9adc2ea6a96/fcda8/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png 590w,\n/static/c70e756c63251cdd0305c9adc2ea6a96/efc66/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png 885w,\n/static/c70e756c63251cdd0305c9adc2ea6a96/c83ae/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png 1180w,\n/static/c70e756c63251cdd0305c9adc2ea6a96/97a96/1692878107308-54abb15b-8856-487a-9115-ebde3e8caa08.png 2400w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>于是可以这样配置，在 Cloudflare 上添加一个 Worker，在默认代码的基础上，增加一条路由用来接收微信的域名验证请求，并返回对应的 txt 文件里的文本值：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be8fa3cbcf2f12db3be280848d2f7831/412e0/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACJklEQVR42p2Sy2sVMRSH50932cpt4balIi4q+EALgqXWLhSLKHRRqmJLcVG8tbdzH/PKPJJMMq9PZu6jVncGfiRnJvnyyznH2e6v01+5x4OHj9ja2qa/scnGxtZSi7jf36S3tr7Uysoqvd4aq/d7rK332dnZ4fnTJzi2qPmf0fy1chM4vQLHnYZEQiClxA9DfD8k8IMulkp1s1IKrfV8VqSZRMQZsYg4+h7y8dzD8wOuJxlOFIW4oxGp1khl8MYu04lHFMWE4ewyEccdXGlNUZado7quSeOQi18pA89SF5qmLnG0zrufEztA25wkEkzGU4bXY0ZjbwYUMWEUIYTAWtsBW8dSKqoih6YijpPuYifP826DKjMG+Tl5LPAnHkGUoo0l1znWGKwtKIqCppnlrE1FOXfbDs/zuhfNgQ11Ca65YpickEwjfJGRpQKTRBTGMufcAS7ctt+CYJb3pcOiqjBFjcoCMs8lCm5Ixj+RYtrlzWjbARbA9lxVVUuHSZJ0RbsFlhXaFhid4wUpXhwjQh+tVAf5U4ui6NxgjO3UArNM4ig9A+a2JG1dSEmcZkhjKMuGqoG2U1u16y5uwBYlV0OXoTtiNJkitUYkKQ61mTfnvMFznya8hPgKpAtqDHIMJoAqhUbdtnRT/+PcefbukseHF7z6POTtl4i9TwN2D7/x8uCUF/sn7B5+5fX7M/aOfvDm+Ib94xsOTjw+nMUUZX2nUG1OfwPO7YJ2O/TPRAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/be8fa3cbcf2f12db3be280848d2f7831/fcda8/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png\"\n        srcset=\"/static/be8fa3cbcf2f12db3be280848d2f7831/12f09/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png 148w,\n/static/be8fa3cbcf2f12db3be280848d2f7831/e4a3f/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png 295w,\n/static/be8fa3cbcf2f12db3be280848d2f7831/fcda8/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png 590w,\n/static/be8fa3cbcf2f12db3be280848d2f7831/efc66/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png 885w,\n/static/be8fa3cbcf2f12db3be280848d2f7831/c83ae/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png 1180w,\n/static/be8fa3cbcf2f12db3be280848d2f7831/412e0/1692878315924-875daef9-2597-4d49-96e0-336cd1480238.png 2990w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>然后，在域名的 Workers Routes 里添加一条路由规则，并将其 Worker 设置为新创建的那个。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9f01f5997e5b0d7da2758becbd87593/efe17/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJklEQVR42m2STWsTURSG84cEXSSTpkma3Elm7rkfmUkpulBx68qNO/duQxGRFBvJxl+jCAFdCE2ltbVNOpIPbGxC9NV7JoEIDjyc4TI895zzTkZUBcrFbVRFDZWKQLFURqm0g1J5h2uxWEY+X0DO24K3QTaXRzbnIZ/PM5VKFaQMMjIMQDKEtZZpNBrQWoNIIooaiOMYzWZzRfruztLvDGqhgR84FIgIGVIapBRLlNJcgyCAEIJv9jwPuVwO2azHuLNCYRtKKdQDiVteyu0tCSkJGSmdWcEYA200VylD7q7VaqHdbqPT6TCHhx10u10+5waIYHWK0cSXZJxMac3tazIwZOFX6thr3sNwMMT/niRJVmshns452OOEgVSo1QkUS5j7NUSPfKiHJew9Eegdv8N4NMUwucJVkmAwHOL6eoajfp8ncQK1WhlLnTCUCpIUtNUwEcHuKlCjjrsPYnz++AHjywuMBxcYXX7D9/MzTH/McdT/wgG6Dq1R6bgU/huKcSMrA6stfL+OSFkc93pYTCZYjMdYTsf4PRnxyOdfT3hFYSiRLRLuFAheWW4IKU3ZYa3hlN3vcXZyiuV8icl0hpubOX4tfiKZAe8/naJhFAvLQqJYldgRK6FLOZSUhqLTlF2Nohiv9vfx9k0H7YMD5nX7JZ4+7+LxsxfYjdzONKxJMSZtKOOW6va47nATv1ZDRQj4vs8I3wcFAir0OYz15Xr9l/wV/gGRBuRY6S66ygAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c9f01f5997e5b0d7da2758becbd87593/fcda8/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png\"\n        srcset=\"/static/c9f01f5997e5b0d7da2758becbd87593/12f09/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png 148w,\n/static/c9f01f5997e5b0d7da2758becbd87593/e4a3f/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png 295w,\n/static/c9f01f5997e5b0d7da2758becbd87593/fcda8/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png 590w,\n/static/c9f01f5997e5b0d7da2758becbd87593/efc66/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png 885w,\n/static/c9f01f5997e5b0d7da2758becbd87593/c83ae/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png 1180w,\n/static/c9f01f5997e5b0d7da2758becbd87593/efe17/1692878376070-014943b2-25e1-4087-b9b6-34b82893bdb7.png 2860w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=r9ORl></a></p>\n<h2>排障指引</h2>\n<p>注意只需要将公众号的 appid 和 secret 配置好即可，不要使用微信开放平台的 appid，否则会在用户授权时出现如下错误：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/51f530e2b7c15c75f546546250ed2132/d9199/1692878956005-d1aa57f0-a92f-4f94-b48d-96e54893892f.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.89189189189187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAIAAAD3xz8iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE00lEQVR42pWWzW8TRxjGXbWnHvpP9IBEK7VI0I8rt/ZGoRdoiBpICE6IP3Z3vnZmZ2Ydm8SK1HOV/iO5JdRIxBAJISQQTrSJQ2zsEORA7Hg39rraXdvZOKbAT49Go53n2ffdnXUmEQgh51xKmUqlMMbw/QAAdF1PSZNluPYXgRhGIISZTCabzS4sLGCMAQCBrz/2kwAALvj83XljQSb/YRAjL6xpmqqqiqIEPuyDEArGAEIIQggAoKiKpmgw4d03ghCKRqPJZDJw37p16+rVq+Pj45OTk2NjYxMTE9evXx8dHR0ZGZm+cwd5z4UUVY0n4l44qAwBwBgTjFVVnZ6eTiaTiqLE4/FEItEdYzMAaBghXxD5PUYYY34/EEK/P4ypD+dcCMG5kEIQxhViqJgmsa5gqmCqYmoYRoRzrmpQBQgiAjEBEENEEKGUccoMnRmMcaQbMUhVzFTMEoglMYO6wTn3wmlTzKXlXNoMK5MSfc3Nyvm0nJuVwWQ+LTMp4YWF4L+OaucuxS5cjvd1/rf4j1cSP/3u6YcrifOX431duBw/dyn2y6gqBI9Iwb++OBU5M/bZtzci3/R09sYX349/9fPkl+cnPv/uZuTs8ZJnOzP29cUpKfy2JxLkWhSNTA3RH1FPAxevRdFEghw/893ZY815kv5bkP1J2HB3VqRN0Q1L0+zLTKUMzhEmmBCIMKE6IkQDkAsRtknT7IbDn2Gw58HXmkwmNU1TlO6XG/ZgjL2wlHJ5eXltbS2fz6+urj548CDf4+HDh/35ao98Pr+2tra8vCyljGQymWaz2flEms1mJpPxwo1Go9Pp7O/vb25uWpZVLpdLpVK5XN7d3a34lEqljY2NYrFYqVTa7Xan0zk8POyGg8oHBweFQuHRo0eFQmF9ff3Zs2dPnjyxLKvg8/Tp08ePH6+vr7uue6Kybduu69q27TjO0dGRbdtHR0eO4/SvtFqtTqfTbrcDW6vVsm27G3Ycp9lsFovFzc3Nra2t58+fFwqFra2tjY2NUg/Lsra3txuNRqlUqlarrVYrnU6feGE7OzuWZVWr1b29vUql8ubNm2Dy9u3bWq324sWLarU62HY/vLe39/r16/39/VqtFtyiXC5vb2+/e/fOtu1Xr17VarXBt316qxzHsSyrUqkUi8WXL186jvPerRq6z8GWdDod1yc8+XB4wP1plT/2C6vX667rtk7SbretYrW4s+u67YEl13Xr9foHKh80nPqh83+VpZRLS0u5XO5eiBWf+/dz93P/rqys3DtJLpdbWlryflWc8+C4CaNpGgBA9UcAwFBD94+BEEKGME0TIaSqKoQwsOq6bppm2OOfB36YncQwDE3TZmZmNE2L+SCEDMMYsB2H6UkYY8InKDLU0A0bhnd2hBFCAACi0WgsFiOEBE2GCSJD2g46BwBM3r49NTUFITzd83FlSpmu0wExxqTgghtDV71zsPu2uSEFH5AQPIZoglBxaim4aTdMKEP6sWBv/DNJbioEhi72RYLKlFIVkZiG4z0lAEloJK5hFRAFkHhoKVBMw6p3gtOI7j2BznoyGNVUBSNoMNq/SHWiE8xCNkp1Xde9cBhKqf8PEelafBFdJ4Top4jow8Cn+KgwxjibzS4uLv4dYnFxMZvNYowHwv8BQhMwcrbcj7wAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_0934.png\"\n        title=\"IMG_0934.png\"\n        src=\"/static/51f530e2b7c15c75f546546250ed2132/fcda8/1692878956005-d1aa57f0-a92f-4f94-b48d-96e54893892f.png\"\n        srcset=\"/static/51f530e2b7c15c75f546546250ed2132/12f09/1692878956005-d1aa57f0-a92f-4f94-b48d-96e54893892f.png 148w,\n/static/51f530e2b7c15c75f546546250ed2132/e4a3f/1692878956005-d1aa57f0-a92f-4f94-b48d-96e54893892f.png 295w,\n/static/51f530e2b7c15c75f546546250ed2132/fcda8/1692878956005-d1aa57f0-a92f-4f94-b48d-96e54893892f.png 590w,\n/static/51f530e2b7c15c75f546546250ed2132/efc66/1692878956005-d1aa57f0-a92f-4f94-b48d-96e54893892f.png 885w,\n/static/51f530e2b7c15c75f546546250ed2132/d9199/1692878956005-d1aa57f0-a92f-4f94-b48d-96e54893892f.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}