{"componentChunkName":"component---src-templates-post-js","path":"/posts/frhfcm/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/frhfcm","relativePath":"posts/frhfcm","frontmatter":{"title":"给 Strapi 应用添加健康检查端点","stackbit_url_path":"posts/frhfcm","date":"2021-11-15T11:51:53","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>今天继续上周的主题，给 k8s 集群里的服务添加健康检查探针。上一篇《<a href=\"https://zhuanlan.zhihu.com/p/432241688\">给 SpringBoot 服务添加健康检查</a>》是针对 Java 服务的。除了 java 服务，公司还有一个 CMS 系统部署在 k8s 集群中，基于 Strapi 开发，是一个 nodejs 项目。粗看了一下 Strapi，感觉它的理念和 Koa 很像，仔细看它果然依赖 koa，并且文档中也提到了 Koa。这让我比较激动，毕竟，我也是 Koa 项目的 Contributor（尽管只有一丢丢贡献）：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.27027027027026%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABU0lEQVR42qVS2U7DMBDMj4CgtHHi+D6StOmBhJDKG///M4O8OWhDWgl4GK0nuzvxeifTJqJuO2x3R/jQQtsA4yK0SbEmFFwhLwSBlZIw8jmyFybxvKnwtOYUV7mYwHUN5XfQoYMOe4q2OcLEw8W3/ZSTbossNSbRJVSmIcFUOELY9orPc9mi2PCTJGjivr/lcNORE2b8puA4cirw7SsJKRqxg2tOk0AaNeVHTiPfEnxhAhvhwWRAISxK4VCqiFIFcBXBdaRIfDgX0i8LrpnAQy5xrip8Woui+YCo37EuDT3HagE5tyS+/IZM4DGXeNMO59iAhyOk78C1BxcOrFpGuumdkSVy06B0OyjXb/bbQt20FHXB5b0tr5iESFum4r4xNY0enDZ9gbtb7m1T//TbX3zYP/Tgw/pw03e9Lw+/9eHpSuBfPmTJezKQHSbMePLedBYeX3tartgI+Q4eAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/1e4f97f2434d3a6d5dbcb760cbb8ff31/fcda8/1636975196099-fed4dda9-0600-4166-a523-3c20e13a1ffd.png\"\n        srcset=\"/static/1e4f97f2434d3a6d5dbcb760cbb8ff31/12f09/1636975196099-fed4dda9-0600-4166-a523-3c20e13a1ffd.png 148w,\n/static/1e4f97f2434d3a6d5dbcb760cbb8ff31/e4a3f/1636975196099-fed4dda9-0600-4166-a523-3c20e13a1ffd.png 295w,\n/static/1e4f97f2434d3a6d5dbcb760cbb8ff31/fcda8/1636975196099-fed4dda9-0600-4166-a523-3c20e13a1ffd.png 590w,\n/static/1e4f97f2434d3a6d5dbcb760cbb8ff31/efc66/1636975196099-fed4dda9-0600-4166-a523-3c20e13a1ffd.png 885w,\n/static/1e4f97f2434d3a6d5dbcb760cbb8ff31/c83ae/1636975196099-fed4dda9-0600-4166-a523-3c20e13a1ffd.png 1180w,\n/static/1e4f97f2434d3a6d5dbcb760cbb8ff31/67a79/1636975196099-fed4dda9-0600-4166-a523-3c20e13a1ffd.png 1408w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><a name=rPUzk></a></p>\n<h1>先追求有，再追求好</h1>\n<p>如同上一篇给 SpringBoot 服务添加健康检查路由一样，本篇介绍只追求有，即添加最简单的实现。要完美的话，还需要写一些额外的代码，以便在一些外部依赖（比如数据库）发生问题时得到通知，并让健康检查端点返回错误。</p>\n<p><a name=a10Hy></a></p>\n<h1>测试</h1>\n<p>如同上一篇一样，仍然是在写实现代码前，先把测试写好，即把最终效果写下来，这是一种以终为始的思维方式，有助于避免掉进软件开发的焦油坑：《<a href=\"https://zhuanlan.zhihu.com/p/354687201\">我是如何从焦油坑里爬出来的</a>》。</p>\n<p><a name=ZKE9Z></a></p>\n<h2>添加测试工具</h2>\n<p>由于项目里没有引入测试工具，先补上：</p>\n<p>shell\nyarn add --dev jest supertest sqlite3</p>\n<p>jest 是 Facebook（现在叫 Meta？）开发的测试框架。supertest 用来测试 Web 服务，而 sqlite3 可以简化测试时的数据库依赖。</p>\n<p><a name=ViGOS></a></p>\n<h2>测试配置</h2>\n<p>增加 config/env/test/database.json 指定测试时使用 sqlite：</p>\n<p>json\n{\ndefaultConnection: default,\nconnections: {\ndefault: {\nconnector: bookshelf,\nsettings: {\nclient: sqlite,\nfilename: .tmp/test.db\n},\noptions: {\nuseNullAsDefault: true,\npool: {\nmin: 0,\nmax: 1\n}\n}\n}\n}\n}</p>\n<p><a name=JZAdv></a></p>\n<h2>测试命令</h2>\n<p>在 package.json 里的 scripts 字段中加入测试相关命令：</p>\n<p>diff</p>\n<ul>\n<li>\n<pre><code>test: jest --forceExit --detectOpenHandles\n</code></pre>\n</li>\n</ul>\n<p>在 package.json 的最后添加：</p>\n<p>json</p>\n<p>jest: {\ntestPathIgnorePatterns: [\n/node_modules/,\n.tmp,\n.cache\n],\ntestEnvironment: node\n}</p>\n<p><a name=dhNxl></a></p>\n<h2></h2>\n<p><a name=hdHfO></a></p>\n<h2>健康检查测试用例</h2>\n<p>tests/healthz/index.test.js</p>\n<p>javascript\nconst Strapi = require(strapi);\nconst http = require(http);\nconst request = require(supertest)</p>\n<p>let instance;</p>\n<p>async function setupStrapi() {\nif (!instance) {\n/** the following code in copied from ./node_modules/strapi/lib/Strapi.js */\nawait Strapi().load();\ninstance = strapi; // strapi is global now\nawait instance.app\n.use(instance.router.routes()) // populate KOA routes\n.use(instance.router.allowedMethods()); // populate KOA methods</p>\n<pre><code>    instance.server = http.createServer(instance.app.callback());\n}\nreturn instance;\n</code></pre>\n<p>}</p>\n<p>jest.setTimeout(20000)\ndescribe(Health Check, () => {\nbeforeAll(async () => {\nawait setupStrapi()\n})</p>\n<pre><code>it(should live, async () => {\n    await request(\n        strapi.server)\n        .get(/healthz/liveness)\n        .expect(200)\n        .then(data => {\n            expect(data.text).toBe(Im alive!)\n        })\n})\n\nit(should ready, async()=>{\n    await request(\n        strapi.server)\n        .get(/healthz/readiness)\n        .expect(200)\n        .then(data => {\n            expect(data.text).toBe(Im ready!)\n        })\n})\n</code></pre>\n<p>})</p>\n<p><a name=RVMw2></a></p>\n<h1>实现路由</h1>\n<p>首先增加 api/healthz 目录</p>\n<p><a name=mmCfX></a></p>\n<h2>添加路由配置</h2>\n<p>api/healthz/config/routes.json</p>\n<p>json\n{\nroutes: [\n{\nmethod: GET,\npath: /healthz,\nhandler: Healthz.index\n},\n{\nmethod: GET,\npath: /healthz/liveness,\nhandler: Healthz.liveness\n},\n{\nmethod: GET,\npath: /healthz/readiness,\nhandler: Healthz.readiness\n}\n]\n}</p>\n<p>注意，一定不要使用官方的默认示例，不能含有 policies 数组：\njson\n{\nroutes: [\n{\nmethod: GET,\npath: /healthz,\nhandler: Healthz.index,\nconfig: {\npolicies: []\n}\n}\n]\n}</p>\n<p>如果这样，运行测试就会得到 403 的错误，原因是它会触发 user permissions 插件的权限检查。 尽管你可以通过管理后台配置其权限公开访问：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/42fc9b4d2c841c82cbe719f367fe3dd0/9cac8/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4klEQVR42qWSWW/bMBCE9WtTwEbSJCpgx37Jv2zRtzanbV0UT/GaYteSKzVoXyrgA5eEMJzZZXFzv8fqZoP17RbXdztM+6tViat1+Xtdl/i0/sL71ecNru/3KO9KPGy22G4esN8+YlfuUKSU0Ykezg2gL2f811dUdYMfT8+omxailwxdoJRmpJQIIcL7gBAjExekC/Rf0bQdfj4943A8oZfqIqq0gbUOQiq4wSPFSP6R899JKaGo2w6nqmFXC0GlEWJCLSOOIqCRHrX0sM7zBX9ih4DBBxRNJ3A4VRfBiUlw4KgJIWZm7iaPDafaGMuxC3L38vqOw7FCVbdoO8GQKA3MOget9djyswD1Tiq1iDv1s3h5fcPXb995KAT1lNa+l4gpI4QA59z4As6CdCZEzz2mCwna81DIzdv7gUWk0ovIdGO++MKlJhI7G2uKbMfI1LtTVaOaPRuCxCmyMwZSCCAn5BiAFBG957McI0NnJB1pyvNBkNC0Sm0QjYYXHVzXAlYjGz2uCrZtkLTimlb6L1iDYu5qLiy1RVQ9tDZQ1sGHiCEEWDdAW8f11AryZ7RGkP3S4UdBCackRNchOMd4a5noB2QSJSi6swhK/kvQIAwDfC9YmOLOoZjnyORMQtc19/YXtJUireES5m4AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/42fc9b4d2c841c82cbe719f367fe3dd0/fcda8/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png\"\n        srcset=\"/static/42fc9b4d2c841c82cbe719f367fe3dd0/12f09/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png 148w,\n/static/42fc9b4d2c841c82cbe719f367fe3dd0/e4a3f/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png 295w,\n/static/42fc9b4d2c841c82cbe719f367fe3dd0/fcda8/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png 590w,\n/static/42fc9b4d2c841c82cbe719f367fe3dd0/efc66/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png 885w,\n/static/42fc9b4d2c841c82cbe719f367fe3dd0/c83ae/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png 1180w,\n/static/42fc9b4d2c841c82cbe719f367fe3dd0/9cac8/1636976497168-3df32969-6027-4d23-b2a6-9966e399e65d.png 2288w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>但是对于健康检查接口，没有必要专门配置权限，直接绕开权限插件即可：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/41a759f75462be262b0586ed3b72e410/7ca1f/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.05405405405406%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdklEQVR42p2Sa08TQRSG97sxGBKjAVrbiID0Bi32Ampi4v8wfvJCjEaJiRSxCBUTEUW+GSO0gr9B428Q+QN+MNoC7XavM7NtaXnNzG6Xi0Simzz7vmfO5MzljPTp8xc8GHuE57NZTE3PYHI6iyfTWWSys8jMPEP68RTG0xmMT2R2dWIK6T1MTD7F2MNx5D98hJSdfYFjbacwEAkhGAziTHc/PL5eePy96PL1otPbcyRefx/a2jtw7foNSPOvFuE7G0A4mkIgfGE/IVuDkb8THkzC3x3A6J37kOZeLogdJRJJRGIJhIdS6A8N2YRt7QtEXc4HY6624It6fH24NXoP0tz8G3R6z+HqlREkhocRHbmMwdRFQXT4EkLRxL4CB4sdUnABHd4eJFMpxOMJBPgRYkmEh5KiWHAgLjQUS7q7PbSg3yk4/3pRnD/i3GEwEv9n+B3yPoiCvMvHT5wWneJH53R4bPZ6QSvv3fUc3oP2k124efsupLVv63j7bkm8oeXcKpbzq8hxn18VMfc5Ppa3cwdZyq0I3i+v4OvaOqQdADph0E0CRTMEqm7CJAyaQYTnWt9ugM9t8h8gPKfhxK1PqtbrKGyVoRomTMoEBqF/+JYSZgkMnmeWoNHcQdNZTEK1CqOiQJcroKoqMCuKgCi2GhqFqVtArQrUao7uslO1XCS99BOaLoMQFZRqoFQFFd5Rd/wwVDAHyjQwuQhpSynghyGjaCooEhUbVMMm1YTyeJPpdixyqju+QRQUGUHBsvCLMmzUqzDNCqSSXMB3jaBENMhUg8z0IylTXcwtM4KyxVBiFOWaBaKXIW1rChqGhqb5v6guDU3BbzMIZ3K5MbnaAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/41a759f75462be262b0586ed3b72e410/fcda8/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png\"\n        srcset=\"/static/41a759f75462be262b0586ed3b72e410/12f09/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png 148w,\n/static/41a759f75462be262b0586ed3b72e410/e4a3f/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png 295w,\n/static/41a759f75462be262b0586ed3b72e410/fcda8/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png 590w,\n/static/41a759f75462be262b0586ed3b72e410/efc66/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png 885w,\n/static/41a759f75462be262b0586ed3b72e410/c83ae/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png 1180w,\n/static/41a759f75462be262b0586ed3b72e410/7ca1f/1636976615802-bcfd2d1f-042a-40aa-adfc-b0f99e25f6e6.png 1890w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=p1QDp></a></p>\n<h2>实现路由逻辑</h2>\n<p>api/healthz/controllers/Healthz.js\njavascript\nmodule.exports = {\n// GET /healthz\nasync index(ctx) {\nctx.send(Hello World!)\n},</p>\n<pre><code>async readiness(ctx) {\n    ctx.send(Im ready!)\n},\n\nasync liveness(ctx) {\n    ctx.send(Im alive!)\n},\n</code></pre>\n<p>}</p>\n<p>运行测试，通过。</p>\n<p><a name=Lxrkz></a></p>\n<h1>添加 deployment 配置</h1>\n<p>yaml</p>\n<pre><code>    readinessProbe:\n      httpGet:\n          path: /healthz/readiness\n          port: 1337\n      initialDelaySeconds: 30\n      timeoutSeconds: 10\n    livenessProbe:\n      httpGet:\n          path: /healthz/liveness\n          port: 1337\n      initialDelaySeconds: 130\n      timeoutSeconds: 10\n</code></pre>\n<p>部署后可以验证：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e7f49acb4f9d59494eb79533f4131f5/90712/1636976808708-d6200d7e-72ae-48ce-ac15-dc3eced1b7a7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVR42uWOS0vDUBSE7/+wPqOVigpVqeLGim7USPGRpC2lVBMfKK4srpTgfw1kkVXgNiTk8UmuIKVL686BYc4ZmDlH1LcarG/Uqa1tsr2zR7nPLWgcNI8wzA7Nw2PO9BZWu0tjd58lrcpKtaaoLa/+aGV2kZnKPMK2HxjcOPT7tzh3j/R6Ay4uDZ6eX3j/cJW+Dt9w3U9s556ra0uVG2Zb0bK6mFYHXW9xcnqOCMOQIAjwPA/f98nzXDGOY+RopDSKIqSUJElClmWkaaZ0fC4zRVEg0jT9DkupgtNCTBrllWkoJo3x0l99OF7yF/iHhV+oH8Ukq1zUzwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/8e7f49acb4f9d59494eb79533f4131f5/fcda8/1636976808708-d6200d7e-72ae-48ce-ac15-dc3eced1b7a7.png\"\n        srcset=\"/static/8e7f49acb4f9d59494eb79533f4131f5/12f09/1636976808708-d6200d7e-72ae-48ce-ac15-dc3eced1b7a7.png 148w,\n/static/8e7f49acb4f9d59494eb79533f4131f5/e4a3f/1636976808708-d6200d7e-72ae-48ce-ac15-dc3eced1b7a7.png 295w,\n/static/8e7f49acb4f9d59494eb79533f4131f5/fcda8/1636976808708-d6200d7e-72ae-48ce-ac15-dc3eced1b7a7.png 590w,\n/static/8e7f49acb4f9d59494eb79533f4131f5/90712/1636976808708-d6200d7e-72ae-48ce-ac15-dc3eced1b7a7.png 882w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>在 k8s 集群里查看是否生效：</p>\n<p>shell\nkubectl describe pod/your-pod</p>\n<p>...\nContainers:\ncms:\nContainer ID:   docker://7245d2d8644d6bcc7c7ff39fdea5e680457c4edf2ff70610a8607c3cef5d3332\nImage:          13659932xxxx.dkr.ecr.cn-northwest-1.amazonaws.com.cn/cms:cccc1aec\nImage ID:       docker-pullable://13659932xxx.dkr.ecr.cn-northwest-1.amazonaws.com.cn/cms@sha256:bc4317cc2347eb2aed74b8e4e9f39b901b613e4bbc7781e09957e2eb4a0bd0db\nPort:           1337/TCP\nHost Port:      0/TCP\nState:          Running\nStarted:      Mon, 15 Nov 2021 10:23:42 +0000\nReady:          True\nRestart Count:  0\nLimits:\ncpu:     1\nmemory:  2000Mi\nRequests:\ncpu:      500m\nmemory:   1000Mi\nLiveness:   http-get http://:1337/healthz/liveness delay=130s timeout=10s period=10s #success=1 #failure=3\nReadiness:  http-get http://:1337/healthz/readiness delay=30s timeout=10s period=10s #success=1 #failure=3\nEnvironment Variables from:\n...</p>\n<p>注意以上输出的 Liveness 和 Readiness 部分，小功告成！</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}