{"componentChunkName":"component---src-templates-post-js","path":"/posts/ka6wugb3kz04t2gb/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/ka6wugb3kz04t2gb","relativePath":"posts/ka6wugb3kz04t2gb","frontmatter":{"title":"算法可视化：使用 id3 构建决策树，以及对熵的一点点解释","stackbit_url_path":"posts/ka6wugb3kz04t2gb","date":"2023-05-13T12:16:58","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<blockquote>\n<p>当你面对多条信息做决策时，可以从信息量最大的那条开始。</p>\n</blockquote>\n<p><a name=XSBIA></a></p>\n<h1>从排序开始</h1>\n<p>这一原则，适用于排序逻辑。举个例子，甲乙丙丁赛跑，给你以下 3 条信息，让你推断其完赛顺序：</p>\n<ul>\n<li>有一个人排在乙和丙中间</li>\n<li>有两个人排在丙和丁中间</li>\n<li>乙不是第二名</li>\n</ul>\n<p>请问，他们的名次是怎样的？谁是第一、谁是第二、谁是第三、谁是第四？</p>\n<table>\n<thead>\n<tr>\n<th>第一名</th>\n<th>第二名</th>\n<th>第三名</th>\n<th>第四名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>？</td>\n<td>？</td>\n<td>？</td>\n<td>？</td>\n</tr>\n<tr>\n<td>甲</td>\n<td>乙</td>\n<td>丙</td>\n<td>丁</td>\n</tr>\n</tbody>\n</table>\n<p>由于一共只有 4 个名次，以上 3 条信息中，第二条信息含量最大。我们可以知道，丙和丁中间必定有一个人是第一名，另一个是第四名。我们可以先假设丁是第一名，那么丙就是第四名：</p>\n<table>\n<thead>\n<tr>\n<th>第一名</th>\n<th>第二名</th>\n<th>第三名</th>\n<th>第四名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>丁</td>\n<td></td>\n<td></td>\n<td>丙</td>\n</tr>\n<tr>\n<td>甲</td>\n<td>乙</td>\n<td><br /></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>接着我们看第一条信息，乙和丙中间有一名选手。由于我们假设了丙在第四名，乙就只能是第二名。这和第三条矛盾，所以我们之前的假设是错误的。于是得知丁必定是第四名，而丙是第一名：</p>\n<table>\n<thead>\n<tr>\n<th>第一名</th>\n<th>第二名</th>\n<th>第三名</th>\n<th>第四名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>丙</td>\n<td></td>\n<td></td>\n<td>丁</td>\n</tr>\n<tr>\n<td>甲</td>\n<td>乙</td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>再看第一条信息，乙和丙中间有一名选手，所以乙是第三名。而一旦将乙放在第三名，那么甲就是第二名。这同时满足了所有的条件：</p>\n<table>\n<thead>\n<tr>\n<th>第一名</th>\n<th>第二名</th>\n<th>第三名</th>\n<th>第四名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>丙</td>\n<td>甲</td>\n<td>乙</td>\n<td>丁</td>\n</tr>\n</tbody>\n</table>\n<p><strong>通过从信息量最大的条件开始，我们能够以最少的步骤推断出结果。</strong></p>\n<p><a name=pAB9K></a></p>\n<h1>信息量的量化</h1>\n<p>以上是一个简单的例子，很容易看出第二个条件的信息量最大。如果希望将选择信息量最大的条件自动化，就需要一种量化信息量的方式。常用的对信息量的度量是信息熵，用它来刻画任意样例集的纯度。给定包含关于某个目标概念的正反样例的样例集 S，那么 S 相对这个布尔型分类的熵为：</p>\n<blockquote>\n<p>Entropy(S) = -p+log2(p+) - p-log2(p-)</p>\n</blockquote>\n<p>其中，p+是在 S 中正例的比例，p-是在 S 中反例的比例。在有关熵的所有计算中我们定义 0log20 为 0。</p>\n<p><a name=TN7DL></a></p>\n<h2>亿点点解释</h2>\n<p>现在来解释一下为什么要这样来计算信息量，在构建决策树时，它是指导该怎样做分叉的基础。假设现在碰到一个树的结点，它包括一系列的正例与反例。在仔细检查计算信息量的公式之前，先考虑一下我们对信息量指标的需求。</p>\n<ol>\n<li>如果正例或者反例的数量为零，那么信息量指标也为零。</li>\n<li>如果正例和反例的数量一样多，那么信息量指标为最大。</li>\n</ol>\n<p>当然，以上要求对多个类别也成立，不仅仅只对两个类别。也就是说，如果一个结点中只包含一个类别，那么信息量指标为零，而如果包含多个类别，且它们的数量相等，这个信息量指标达到最大值。注意，这个信息量的数量指标，和信息含量是相反的。即信息含量越高，其指标值越小。而这个指标越大，表示越没有信息量。<br />这个指标就叫熵，我们所说的宇宙的热寂，就是熵达到最大值，即物质的分布达到了一个处处平均的状态，也就是没有信息量的状态，处处都一样嘛。在没有外部能量输入下的封闭系统总是会趋于这一状态，而要减熵就需要输入外部能量。</p>\n<blockquote>\n<p>启发：对于如今这个自媒体时代，想要赚到钱，就需要提供有信息量的内容，人们只会为<strong>减熵</strong>付费（尽管有信息量的内容不一定是“好”的内容）。</p>\n</blockquote>\n<p>再回头看一下前面用来计算熵的公式，它正好满足我们的两点需求。当一个集合中只包含一个类别时，信息量最大，即熵为零，因为这时候这唯一的类别在集合中的比率为 100%， 也就是1，而 1 的对数为 0。</p>\n<blockquote>\n<p>如果你在用网页的话，可以 F12 打开开发者工具，输入 Math.log2(1)，即可验证：\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fcb1e10c5e15b371f34ff095c0577317/48c0e/1683970486299-063edbab-ed29-431b-9b0f-d58fb47f4a03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVR42o2S6W7TUBBG/SBtHNvXduLd8ZbYca3ipE2bxVEKRCoSAiIkEA8BPPlBvq1akKDix9Enzcz9NMtVkiShKArSLCeOE5IkJc+n5MXLTKcz2os5u9WS3c2S7uaK5qJGybKUKIp5tbzm/YfPrLcdnhdijz3Gjs9o7D+q96Q9tsTn46cT33/85MvXb1TzGmWxWFDXF/hBRDVvmJY1Y+fx0ciVWPZYmlm2g+P6kr6m167bc3//ju12R1lWKFVVkaYpbdtyPB6J45j1ek3TNKzXGzabDYfDHbPZjLZdkOc5aVaQ5TOyrMAQJpeXlyyvrmROWa1WZFnGbrfjdDoxmUzouo66bnj99p7j8Q13hwNlVXJ7e0teFMznDe3imrZdYlkjttst+/1e3kKxLBvf9zEMS45QFCVRlBCGDlnqkU5zvCDENEfoholpjRGmjW5Ykn4NQtgyN0lSFCEEjuvKQBD2F66IJzlRNKIuHdJZgeOHnJ9rqJpgoBqow2cGqv6kQRCh9G1mWY5uCAJ/iqEHnA1UBqrg7Nx4MFJ1hrpgqP0dTRPSNAxjlH7586pioJkMTQ9NF2i6+Zs+8C8zaaibz4au6xKGoRxH1aw/xvlfhnIVOkEYofTfoacPDDXjxU5e4sEw5hfBb1eHxK87ZgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/fcb1e10c5e15b371f34ff095c0577317/48c0e/1683970486299-063edbab-ed29-431b-9b0f-d58fb47f4a03.png\"\n        srcset=\"/static/fcb1e10c5e15b371f34ff095c0577317/12f09/1683970486299-063edbab-ed29-431b-9b0f-d58fb47f4a03.png 148w,\n/static/fcb1e10c5e15b371f34ff095c0577317/e4a3f/1683970486299-063edbab-ed29-431b-9b0f-d58fb47f4a03.png 295w,\n/static/fcb1e10c5e15b371f34ff095c0577317/48c0e/1683970486299-063edbab-ed29-431b-9b0f-d58fb47f4a03.png 440w\"\n        sizes=\"(max-width: 440px) 100vw, 440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</blockquote>\n<p>当一个集合包含的类别数量相等，比如正例和反例各占一半，即 50%。那么这时候熵就达到了包含两个类别的集合的最大值：1。</p>\n<blockquote>\n<p>可以输入 -0.5<em>Math.log2(0.5)-0.5</em>Math.log2(0.5) 验证：\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f0914f4f5feab386c983605b373bde04/48c0e/1683970554817-d6692ef7-ea08-49e0-adeb-e3e550dbd2c4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACUklEQVR42nWS2W7TQBSG/RxN7MS7PXbseN+yNI2zlEq0jSpooRf0EQDBFfDqH/JULKrg4tM/Opr5zzm/Rqmqil+kaUaW5VRVTd201HXzf5qGfr3gVb/hst/w+rBht1miJEnCfD4nLxvePX7g5nRHmha4XoAvZv/E85/VcgS3pzu+ff/Bx0+fWZ9vUS62W66urgijOd3iXBajOMFxBZ4XSGPb8fH8UJ4HfTYNcV3Bfn/g6emJ+/t7FosVSlmW1HVNlmWcTifSNGW9XnNxccF223M4Hri+vmG5XEqatpV3m6ah67rfEfV9T1EUKIfDgd1uR9u2fP36RerxeGS323Nze8f7x0fevnnDZrNht+tls6oqZbPj8ZL1asV+v+fh4UEOpgRBiBACx/UwLYeirMmLmigKSZKAvEhJilyub9kutuPJVQe1bRfH8XFcX76N4vlgGBCGoSwMYTftirLqmEWCZetRVinzskTXLSZT8wV/amNNx/MDlGHvIQvTshFBgmPljEYao/GUs7HOaGCkM9YMtIHJs04mJqqmM1an0lCbmAgRoiwWC5nNYOg4AjeOEXlK2y0p8pp4npBnHnWdkLQFcZEzy1JEFtOt1nSLlVx1aCSCGUoURQx/0TBtaVp2Eettxuayp9uek5cV89imyCNEEiOiGBFHODPBLE5Is0JONhj6w4R1VTFMORgaps8sDChSgRfFmL7AdgPORgYj1URVjb8wGavPkaiaKRn+pxInGWVRYts6cTTDcwST6RhDVzF1DdPQsK2JxHqBbU1/YxgqYejzExqCesRDd4QgAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f0914f4f5feab386c983605b373bde04/48c0e/1683970554817-d6692ef7-ea08-49e0-adeb-e3e550dbd2c4.png\"\n        srcset=\"/static/f0914f4f5feab386c983605b373bde04/12f09/1683970554817-d6692ef7-ea08-49e0-adeb-e3e550dbd2c4.png 148w,\n/static/f0914f4f5feab386c983605b373bde04/e4a3f/1683970554817-d6692ef7-ea08-49e0-adeb-e3e550dbd2c4.png 295w,\n/static/f0914f4f5feab386c983605b373bde04/48c0e/1683970554817-d6692ef7-ea08-49e0-adeb-e3e550dbd2c4.png 440w\"\n        sizes=\"(max-width: 440px) 100vw, 440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</blockquote>\n<p>其他情况下，熵值在0到1之间。\n<a name=RUexm></a></p>\n<h2>熵的计算公式的特性</h2>\n<p>要满足我们对信息量的指标的那两点需求，有趣的是，似乎只有一个函数可以做到，这就是前面所展示出来的熵。前面展示的公式是一个包含着两个类别实例的集合的特例，对于包含 n 个实例的集合，其熵的计算公式如下：</p>\n<blockquote>\n<p>Entropy(p1, p2, ..., pn) = -p1log2(p1) - p2log2(p2) - ... - pnlog2(pn)</p>\n</blockquote>\n<p>之所以用负号，是因为比率值都是小于1的，而小于1的数，其对数是负数。为了让熵值为正，所以在公式中用了负号。正如公式所表明的，对比率取对数时，使用的底是 2。而熵的单位，也叫做比特，就和计算机中的比特名字一样。<br />公式中的参数 p1, p2, ..., pn，不仅可以用小数，也可以用分数表示。总之，它们的和为 1。<br />熵的计算公式满足如下特性，这在多阶段决策时非常有用：</p>\n<blockquote>\n<p>Entropy(p, q, r) = Entropy(p, q+r) + (q+r) x Entropy(q/(q+r), r/(q+r))</p>\n</blockquote>\n<p>其中 p+q+r=1。<br />当比率用分数表示，再结合对数函数的特性，可以在实际的计算中，不必真正计算小数。举个例子，一个集合，包含3种类别的实例，第一种类别有2个，第二种有3个，第三种有4个，那么：<br />Entropy(2, 3, 4) = -2/9 x log(2/9) - 3/9 x log(3/9) - 4/9 x log(4/9)<br />= [-2 x (log2 - log9) - 3 x (log3 - log9) - 4 x (log4 -log9) ] / 9<br />= (-2log2 - 3log3 - 4log4 + 9log9) / 9<br />= 1.5304930567574824 比特<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4fb33a3da9ff56ad994e55ceb1d7f561/f6386/1683971795119-ccf429a3-d56d-4353-a355-b7dd0b4d4dd3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArklEQVR42p2NUW6DMBAFuUiLwfYSG8eGYFNQQ6ve/1BTBVDS736MdjVPu6/qYyKkyPyxMNwic+kZ80RrBX+NTNNCTGn3abwhzuOukZwXUkqU7BnLhAuRzvdU87JRysrXfeHz+4e5rIQhoxpDawRrHdoI0lmM7Wi0PbycXixGLrRa9qwSGQh+I/Qb/rLi3X2fqtEoZaiVPjn2R5F6uj/+zKrH17e65r1WL5Q6Dv/BL8CFdR69jJnwAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/4fb33a3da9ff56ad994e55ceb1d7f561/fcda8/1683971795119-ccf429a3-d56d-4353-a355-b7dd0b4d4dd3.png\"\n        srcset=\"/static/4fb33a3da9ff56ad994e55ceb1d7f561/12f09/1683971795119-ccf429a3-d56d-4353-a355-b7dd0b4d4dd3.png 148w,\n/static/4fb33a3da9ff56ad994e55ceb1d7f561/e4a3f/1683971795119-ccf429a3-d56d-4353-a355-b7dd0b4d4dd3.png 295w,\n/static/4fb33a3da9ff56ad994e55ceb1d7f561/fcda8/1683971795119-ccf429a3-d56d-4353-a355-b7dd0b4d4dd3.png 590w,\n/static/4fb33a3da9ff56ad994e55ceb1d7f561/f6386/1683971795119-ccf429a3-d56d-4353-a355-b7dd0b4d4dd3.png 686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=BMQHo></a></p>\n<h1>用熵来辅助构建决策树 —— ID3 算法</h1>\n<p>要构建一棵决策树，可以递归地实现。首先，选择一个属性放在根结点，然后针对该属性的每一个取值，都拉出一个分支。这就将一个大集合拆分成了多个子集，每个子集都对应所选属性的一个取值。将该过程对每个分支都重复地递归进行，一旦某个结点的所有实例都是同一类别，该结点就成为了叶子结点，不再对它进行拆分。<br />以上方法存在的唯一一个问题就是，每次拿到一个数据结点，该选择哪个属性来对其进行拆分呢？和最开始的排序示例一样，当然是选择信息量最大的那个属性。这就是 ID3 算法的基本思想。<br />考虑如下数据集（机器学习中著名的天气数据）：</p>\n<table>\n<thead>\n<tr>\n<th>#  属性</th>\n<th><strong>天气</strong></th>\n<th><strong>温度</strong></th>\n<th><strong>湿度</strong></th>\n<th><strong>风</strong></th>\n<th><strong>玩乐</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>晴朗</td>\n<td>炎热</td>\n<td>无</td>\n<td>否</td>\n<td>否</td>\n</tr>\n<tr>\n<td>2</td>\n<td>晴朗</td>\n<td>炎热</td>\n<td>高</td>\n<td>无</td>\n<td>否</td>\n</tr>\n<tr>\n<td>3</td>\n<td>多云</td>\n<td>炎热</td>\n<td>高</td>\n<td>无</td>\n<td>是</td>\n</tr>\n<tr>\n<td>4</td>\n<td>有雨</td>\n<td>温暖</td>\n<td>高</td>\n<td>无</td>\n<td>是</td>\n</tr>\n<tr>\n<td>5</td>\n<td>有雨</td>\n<td>凉爽</td>\n<td>中</td>\n<td>无</td>\n<td>是</td>\n</tr>\n<tr>\n<td>6</td>\n<td>有雨</td>\n<td>凉爽</td>\n<td>中</td>\n<td>有</td>\n<td>否</td>\n</tr>\n<tr>\n<td>7</td>\n<td>多云</td>\n<td>凉爽</td>\n<td>中</td>\n<td>有</td>\n<td>是</td>\n</tr>\n<tr>\n<td>8</td>\n<td>晴朗</td>\n<td>温暖</td>\n<td>高</td>\n<td>无</td>\n<td>否</td>\n</tr>\n<tr>\n<td>9</td>\n<td>晴朗</td>\n<td>凉爽</td>\n<td>中</td>\n<td>无</td>\n<td>是</td>\n</tr>\n<tr>\n<td>10</td>\n<td>有雨</td>\n<td>温暖</td>\n<td>中</td>\n<td>无</td>\n<td>是</td>\n</tr>\n<tr>\n<td>11</td>\n<td>晴朗</td>\n<td>温暖</td>\n<td>中</td>\n<td>有</td>\n<td>是</td>\n</tr>\n<tr>\n<td>12</td>\n<td>多云</td>\n<td>温暖</td>\n<td>高</td>\n<td>有</td>\n<td>是</td>\n</tr>\n<tr>\n<td>13</td>\n<td>多云</td>\n<td>炎热</td>\n<td>中</td>\n<td>无</td>\n<td>否</td>\n</tr>\n<tr>\n<td>14</td>\n<td>有雨</td>\n<td>温暖</td>\n<td>中</td>\n<td>有</td>\n<td>否</td>\n</tr>\n</tbody>\n</table>\n<p>决定是否玩乐的属性有 4 个，要将整个数据集做个拆分，拿哪一个来拆分比较好呢？<br />如果用天气，得到的结果是：\n<img src=\"https://cdn.nlark.com/yuque/__mermaid_v3/eb8de152420e3def95dcf75eb9ea4246.svg#lake_card_v2=eyJ0eXBlIjoibWVybWFpZCIsImNvZGUiOiJmbG93Y2hhcnQgVERcbiAgICBDe-WkqeawlH1cbiAgICBDIC0tPnzmmbTmnJd8IERb5pivPGJyIC8-5pivPGJyIC8-5ZCmPGJyIC8-5ZCmPGJyIC8-5ZCmXVxuICAgIEMgLS0-fOWkmuS6kXwgRVvmmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7mmK9dXG4gICAgQyAtLT585pyJ6ZuofCBGW-aYrzxiciAvPuaYrzxiciAvPuaYrzxiciAvPuWQpjxiciAvPuWQpl1cbiAgIiwidXJsIjoiaHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlL19fbWVybWFpZF92My9lYjhkZTE1MjQyMGUzZGVmOTVkY2Y3NWViOWVhNDI0Ni5zdmciLCJpZCI6ImZrYXlPIiwibWFyZ2luIjp7InRvcCI6dHJ1ZSwiYm90dG9tIjp0cnVlfSwiY2FyZCI6ImRpYWdyYW0ifQ==\" alt=\"\">\n如果用温度，得到的是：\n<img src=\"https://cdn.nlark.com/yuque/__mermaid_v3/ef98d3899b077a4805b7c7cd9bfa8d22.svg#lake_card_v2=eyJ0eXBlIjoibWVybWFpZCIsImNvZGUiOiJmbG93Y2hhcnQgVERcbiAgICBDe-a4qeW6pn1cbiAgICBDIC0tPnzngo7ng618IERb5pivPGJyIC8-5pivPGJyIC8-5ZCmPGJyIC8-5ZCmXVxuICAgIEMgLS0-fOa4qeaalnwgRVvmmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7lkKY8YnIgLz7lkKZdXG4gICAgQyAtLT585YeJ54i9fCBGW-aYrzxiciAvPuaYrzxiciAvPuaYrzxiciAvPuWQpl1cbiAgIiwidXJsIjoiaHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlL19fbWVybWFpZF92My9lZjk4ZDM4OTliMDc3YTQ4MDViN2M3Y2Q5YmZhOGQyMi5zdmciLCJpZCI6ImJVUnpGIiwibWFyZ2luIjp7InRvcCI6dHJ1ZSwiYm90dG9tIjp0cnVlfSwiY2FyZCI6ImRpYWdyYW0ifQ==\" alt=\"\">\n如果用湿度，得到的是\n<img src=\"https://cdn.nlark.com/yuque/__mermaid_v3/5cebeca9a39960340951b2a5a227767b.svg#lake_card_v2=eyJ0eXBlIjoibWVybWFpZCIsImNvZGUiOiJmbG93Y2hhcnQgVERcbiAgICBDe-a5v-W6pn1cbiAgICBDIC0tPnzpq5h8IERb5pivPGJyIC8-5pivPGJyIC8-5pivPGJyIC8-5ZCmPGJyIC8-5ZCmPGJyIC8-5ZCmPGJyIC8-5ZCmXVxuICAgIEMgLS0-fOS4rXwgRVvmmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7lkKZdXG4gICIsInVybCI6Imh0dHBzOi8vY2RuLm5sYXJrLmNvbS95dXF1ZS9fX21lcm1haWRfdjMvNWNlYmVjYTlhMzk5NjAzNDA5NTFiMmE1YTIyNzc2N2Iuc3ZnIiwiaWQiOiJ0ellWRiIsIm1hcmdpbiI6eyJ0b3AiOnRydWUsImJvdHRvbSI6dHJ1ZX0sImNhcmQiOiJkaWFncmFtIn0=\" alt=\"\">\n如果用风这个属性，那么得到的是这样的子树：\n<img src=\"https://cdn.nlark.com/yuque/__mermaid_v3/60105697d9442aa98a49193f2acf6747.svg#lake_card_v2=eyJ0eXBlIjoibWVybWFpZCIsImNvZGUiOiJmbG93Y2hhcnQgVERcbiAgICBDe-mjjn1cbiAgICBDIC0tPnzml6B8IERb5pivPGJyIC8-5pivPGJyIC8-5pivPGJyIC8-5pivPGJyIC8-5pivPGJyIC8-5pivPGJyIC8-5ZCmPGJyIC8-5ZCmXVxuICAgIEMgLS0-fOaciXwgRVvmmK88YnIgLz7mmK88YnIgLz7mmK88YnIgLz7lkKY8YnIgLz7lkKY8YnIgLz7lkKZdXG4gICIsInVybCI6Imh0dHBzOi8vY2RuLm5sYXJrLmNvbS95dXF1ZS9fX21lcm1haWRfdjMvNjAxMDU2OTdkOTQ0MmFhOThhNDkxOTNmMmFjZjY3NDcuc3ZnIiwiaWQiOiJtVVh5WCIsIm1hcmdpbiI6eyJ0b3AiOnRydWUsImJvdHRvbSI6dHJ1ZX0sImNhcmQiOiJkaWFncmFtIn0=\" alt=\"\">\n哪个是最好的选择呢？在上面的子树中，是和否都列在了叶子结点里。只要哪个叶子结点只包含一个类别——全是或者全否——就不需要再进一步拆分了，递归进行到这个分支时就可以停下来。因为我们希望构建出来的树越小越好，所以希望这种全是或者全否的情况越多越好。<br />如果我们有一种办法来衡量每个结点的纯度，那么在每次选择属性时，去挑那种能够产生出最纯的子结点的属性就好了。从直观上看上面的 4 个子树图，只有选择天气这一属性时产生了一个全是的子结点，其他的都没有。\n<a name=bwTE0></a></p>\n<h2>信息增益</h2>\n<p>当属性较多时，肉眼去看，是比较麻烦的。如果能够计算纯度，那就能够将挑选属性的过程自动化了。这个纯度，其实就可以用熵来计算。越纯，信息量越大，熵值越小。前面也介绍过了，其单位是比特。对照上面的树的结点来说，纯度对应了要将一个新的类别实例被归类为是或者否时所需要的信息数量。与计算机内存中的比特不同，所需要的信息数量比特一般都是小于1的！利用前面介绍的信息量（熵）计算公式，我们来计算一下以上4种情况下的信息量。<br />对于以上采用天气分拆的第一棵树，其子树中是和否的数量分别为：【2，3】、【4，0】以及【3，2】，这些结点的信息量分别为：<br />info([2, 3]) = 0.971 比特<br />info([4, 0]) = 0.0 比特<br />info([3, 2]) = 0.971 比特<br />我们将其平均，并考虑到每个分支中的实例数量：第一个分支、第三个分支都包含了5个实例，而中间的第二个分支包含了4个实例，以及去掉了。<br />info([2, 3], [4, 0], [3, 2]) = (5/14) x 0.971 + (4/14)  x 0 + (5/14) x 0.971 = 0.693 比特<br />也就是说，使用第一个子树来对碰到的新实例进行归类的话，我们需要 0.693 比特的信息。<br />又，对于整个数据集来说，其包含了9个是，5个否。其信息量（熵）为：<br />info([9, 5]) = 0.940 比特<br />于是，第一个子树产生的<strong>信息增益</strong>是：<br />gain(天气）= info([9, 5]) - info([2, 3], [4, 0], [3, 2]) = 0.940 - 0.693 = 0.247 比特<br />这可以解释为使用天气来创建分支带来的信息量。采用这种方法，我们分别计算每一棵树的信息增益：</p>\n<ul>\n<li>gain(天气) = 0.247 比特</li>\n<li>gain(温度) = 0.029 比特</li>\n<li>gain(湿度) = 0.152 比特</li>\n<li>gain(风) = 0.048 比特</li>\n</ul>\n<p>所以，我们选择天气做为第一次分支的属性，做为整棵树的根结点，这和我们前面用肉眼观察的结果一致。<br />我们递归地继续这个过程，进一步分拆，最终得到的结果（当一个结点不能再拆分或者进一步拆分得到的类别分布不变即<strong>信息增益是0</strong>时，就停下来）是：\n<img src=\"https://cdn.nlark.com/yuque/__mermaid_v3/dbbc98e267319f6757e88f7c3cf72454.svg#lake_card_v2=eyJ0eXBlIjoibWVybWFpZCIsImNvZGUiOiJmbG93Y2hhcnQgVERcbiAgICBDe-WkqeawlH1cbiAgICBDIC0tPnzmmbTmnJd8IER75rm_5bqmfVxuICAgIEMgLS0-fOWkmuS6kXwgRVvmmK9dXG4gICAgQyAtLT585pyJ6ZuofCBGe-mjjn1cbiAgICBEIC0tPnzpq5h8IEdb5ZCmXVxuICAgIEQgLS0-fOS4rXwgSFvmmK9dXG4gICAgRiAtLT585pegfCBJW-aYr11cbiAgICBGIC0tPnzmnIl8IEpb5ZCmXSIsInVybCI6Imh0dHBzOi8vY2RuLm5sYXJrLmNvbS95dXF1ZS9fX21lcm1haWRfdjMvZGJiYzk4ZTI2NzMxOWY2NzU3ZTg4ZjdjM2NmNzI0NTQuc3ZnIiwiaWQiOiJvdGJ1NiIsIm1hcmdpbiI6eyJ0b3AiOnRydWUsImJvdHRvbSI6dHJ1ZX0sImNhcmQiOiJkaWFncmFtIn0=\" alt=\"\">\n<a name=UHN3S></a></p>\n<h1>优化</h1>\n<p>用分而治之（自顶向下的）的方法来构建决策树，是由悉尼大学的 J. Ross Quinlan 发明出来的，并经过了多年的迭代，并被称为 ID3。后来又有很多优化方案，比如 C4.5。</p>\n<p><a name=dSAoh></a></p>\n<h1>彩蛋</h1>\n<p>好多年前，做了一个在线展示 ID3 算法的可视化，详见： <a href=\"https://id3.js.org/?weather\">https://id3.js.org/?weather</a><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 141.89189189189187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsTAAALEwEAmpwYAAAExElEQVR42o2Ta0yTVxiA+3fJ4l9JtjmXjXoBKaUt5VagXKsgG7rIQLcYaAtyh5aAYLwQGMJAlBYHXtj2w2ic4lzYnDeWDbeZLPuzH0s2uUxB5aarMDPH7VnOwXbFAe5LnpxzvnPOc973/c6nuPnRL9w4+TM/fdJL/4UH9H02Tu/5MfoujEtEv7dzfixawa1zY/x6epTfzswj+rc+nZ9TtJ08ypGjh3G2tyD6zmMOWo87aD32FO++e3zcwdETTlpPOCSi7zzWQnvHhygKC4rIyd4lybZkYzFbFmC1WLGa57GYrZizzJizLBJLlnudlaxMM7m78lDYbDYKCwspKiryUFxc7CE3N5f8/HxJQUEBdrudkpISifd64RBzUigWihcC0c/Ly5MISVtbG3V1ddTU1LB37146OztxOp00NTVJgVgj9olWuBYIhaSiokIurq+vp7q6mkuXLnHq1Cm5ubKykosXL1JbWyvnSktLPXsXFYpWhF9eXk5ZWZlc0NXVRUdHhxSISLu7u2W6ohTurJYUuqXeNXMj5sTagwcPemq2qFCc5q7XYiL32H1YTk7OggC8AxElUFSUV2ArsWEvtWOT2J4yPxbvS4pLFhzmfbgbUQL5lb/5/muu9lzmes8VrvVcofu7a1y/cZVrPZfl+Mq3X3Hzxx8YGPid3t5e+vr66O/vlwwMDHgQ48HBQRRFpiqqDM2URzRQGd3I+5va2B/nYHdkI1XRh7Br62m2tTHmGuXu0D1mZmZY7lHkavZwwP8k+wLaJRVKB7uVTqrWt0rKXnFQ894RRl3DTLgmcLlcPHr0SDI9Pc3s7OwCFP6BfqxWrmKN/xtEhAegUr2Kr+9KfJU+vOS7khd9XmDHzgwpujN4h/v378u+QAjEMzc392+EOq0OVYCKQFUgb0ZtJUm3hSR9Km+FpxGvTibM10i+pZDxh+MMDQ0xMjLK48ePmZyc9IgWCENCQtBqtQjxPnU7Tr8vcQZ14VB10Rr0BY3KTmqtzQw/vMfQ4F1Ghkf4c3KSiYmJxYXh4eEItBotprDNbDWmk5bwLltj0kkxvI3BL5b87ELGxse4ffs2w8MjMsIlhXp9MEFBQQRpNPhr1hEXryclyUBCQgipm6PwC3ydLGsmD8bHGZQ1HJbpio+yhFAvhRqNhhTNNt7RmNlpyCM7roQdodkkr02j2GrnoesBrj9cUvbkyRPJosKIiAhCw0JlHffr22hRfc4HG87SFHiOZnUndcrTVFsamebv/9y550YYHRpDZLBREhMWh0EXhXqdlhzrLs9Gb56VzQuD9ajVahlhla6FhvVnOBR8lsO68zQEnqba92MOmBuYYQrmni+VKcuvrNWyPdxKXnQlBQl7yDVWYIm0s83fTKm1nDlmPcJlfz3vlAO0/iRsjGLLFhObkoykpiayQbOWTEvmgpSXFYqLLVJWqVTyLkbqQ4nQaNFtUMl2/Zq1WCwWj1D8bs+m7Y1CqVTi4+PD6tWvERYWRrBej0anQx2k4eVVq1ixYgXp6en830dhMpkwGAzEx8eTsT2DtLQ0KchITyc2NhZRklKbjampKXn3/np6B5dCsSkpGUFioonk5M0kb04h0bQRQ2QU0dHGeYxGjDGxxCyDmI+NjeMfDWL9sne+x/4AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screencapture-id3-js-org-2023-05-13-20_14_28.png\"\n        title=\"screencapture-id3-js-org-2023-05-13-20_14_28.png\"\n        src=\"/static/bbd041f35b032bde9e8287a7f26df448/fcda8/1683980123910-e0919748-847b-41fa-8264-69c1d64e1003.png\"\n        srcset=\"/static/bbd041f35b032bde9e8287a7f26df448/12f09/1683980123910-e0919748-847b-41fa-8264-69c1d64e1003.png 148w,\n/static/bbd041f35b032bde9e8287a7f26df448/e4a3f/1683980123910-e0919748-847b-41fa-8264-69c1d64e1003.png 295w,\n/static/bbd041f35b032bde9e8287a7f26df448/fcda8/1683980123910-e0919748-847b-41fa-8264-69c1d64e1003.png 590w,\n/static/bbd041f35b032bde9e8287a7f26df448/efc66/1683980123910-e0919748-847b-41fa-8264-69c1d64e1003.png 885w,\n/static/bbd041f35b032bde9e8287a7f26df448/c83ae/1683980123910-e0919748-847b-41fa-8264-69c1d64e1003.png 1180w,\n/static/bbd041f35b032bde9e8287a7f26df448/50966/1683980123910-e0919748-847b-41fa-8264-69c1d64e1003.png 1921w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />另外，还做了一版 PPT 对 ID3 进行介绍，详见： <br /><a href=\"https://id3.js.org/how.html#1\">ID3 分类算法可视化</a></p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}