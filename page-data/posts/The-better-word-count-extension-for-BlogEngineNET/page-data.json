{"componentChunkName":"component---src-templates-post-js","path":"/posts/The-better-word-count-extension-for-BlogEngineNET/","result":{"data":{"sitePage":{"id":"SitePage /posts/The-better-word-count-extension-for-BlogEngineNET/"}},"pageContext":{"url":"/posts/The-better-word-count-extension-for-BlogEngineNET/","relativePath":"posts/The-better-word-count-extension-for-BlogEngineNET.md","relativeDir":"posts","base":"The-better-word-count-extension-for-BlogEngineNET.md","name":"The-better-word-count-extension-for-BlogEngineNET","frontmatter":{"title":"The better word count extension for BlogEngine.NET","stackbit_url_path":"posts/The-better-word-count-extension-for-BlogEngineNET","date":"2012-02-19 05:15:00","excerpt":"","comments_count":0,"positive_reactions_count":0,"tags":["BlogEngine.NET","Extensions","algorithm","word count"],"canonical_url":"https://be-net.azurewebsites.net/post/2012/02/19/The-better-word-count-extension-for-BlogEngineNET","template":"post"},"html":"<h1><span style=\"color: #800080\">What is its usage?</span></h1>  <p><span style=\"color: #800080\"></span></p>  <p>Displays count of the words in the post. </p>  <h1><span style=\"color: #800080\">How does this extension come out?</span></h1>  <p>The other day I found a <a href=\"http://blog.geniali.ch/post/2011/01/10/GEBEE-Version-20-der-WordCount-Extension-fur-BlogEngineNET-20.aspx\" target=\"_blank\">word count extension</a> for BlogEngine.NET that can display counts of the words in the post, and I installed it. But it only works well with Western Language posts, for example, with English posts. If you publish an Asian Language post, the count would be incorrect. For example, I posted a 2500 words long article in Chinese, the word count extension displays only 17 words long! After I investigated its source code, I understood the algorithm. It only splits article into pieces by space, and then calculates the count of the pieces. That’s OK with Western Languages, but for Asian Languages, the words are continous without delimiting by space. So I decided to improve this extension to be compatible with Asian Languages.</p>  <h1><span style=\"color: #800080\">How to install this BETTER version extension?</span></h1>  <p style=\"font-family: simsun; font-size: medium\"><a href=\"/blog/file.axd?file=2012%2f2%2fWordCount.cs\">WordCount.cs (2.45 kb)</a></p>  <p>Download the WordCount.cs from the above link and put it into your blog directory: ~\\App_Code\\Extensions\\WordCount.cs.</p>  <p>Then add this piece of code to your PostView.ascx file under your theme directory. For example: ~\\themes\\Standard\\PostView.ascx.</p>  <pre class=\"brush: csharp\">&lt;%= WordCount.GetWordCount(Post) %&gt;</pre>\n<p><a href=\"https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_476.png\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.486486486486484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABmElEQVR42m2Py07bQAAA8//nSuXUWy/0QSMQDYdQEE1VqHglNCqIpCYOsffh9e567ThxnOnr2pHmPtN58XKH990eBwfHdA9OODr6RO/jMYe9M7r7fW7OB8wfr5ncDxHRiMHnATuv3vF695C33WPefOj/dXevz97+Ph2vFjSxpow1eVayKUq2hWLTGDarhrWzhDxgCqicpvYrVmv+S1lldJoGKpWQRo9oobEmwyxi5OgWcTtGju4Rd1f40SV1/MDSZLQ2w7lnbJYQCofLDXUxJ1+kdNp2y3a7xsZDFpMpJk4xP8fcXd5wcz7m6vQL306uGZ5dMPt+ylP0RCIkc5WRJD9wUmGkopIJTgg6m3bLpqkIz1OcDNTSscwitBdkuSKEmNJWZK5AaomQCcZNUUqjjcDXLeUyZ0tLEcp/hX8I6YJgCtqipnGK4C3eWQqv8LbEO4V3glAtKesa7zPKco7zBmtzypCjlaazWq+pCk8efcULQyUylirBa41MI4SYk6Y5SkVI8YDSBmUDUs2xZoKUM9I0xZgZ4vfyL+k/BGjqFLbQAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"The better word count extension for BlogEngine.NET\" title=\"The better word count extension for BlogEngine.NET\" src=\"/static/3dd045b71866496df13c964f2fdd9bb9/fcda8/image_thumb_206.png\" srcset=\"/static/3dd045b71866496df13c964f2fdd9bb9/12f09/image_thumb_206.png 148w,\n/static/3dd045b71866496df13c964f2fdd9bb9/e4a3f/image_thumb_206.png 295w,\n/static/3dd045b71866496df13c964f2fdd9bb9/fcda8/image_thumb_206.png 590w,\n/static/3dd045b71866496df13c964f2fdd9bb9/2e237/image_thumb_206.png 790w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\" loading=\"lazy\">\n    </span></a></p>\n<h1><span style=\"color: #800080\">Screenshots:</span></h1>\n<p><a href=\"https://raw.githubusercontent.com/Jeff-Tian/blogengine.net/master/Source/BlogEngine/BlogEngine.NET/App_Data/files/image_477.png\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 82.43243243243244%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVR42m2TyZLjNhBE9f9fZrsPHW1REhdxAUAs3AAu6r4+ByD1zHjsQ0axQNSGzDqVQlOogWut+Sg6WrtSKkejHLU0tL3DzCujD/gwvTDiw/CEd3hv8cFxq0pOjVDkjaBuJdW9QduReFY3HWV1p25aZG9R2mC0RBuJidAvawRaC5xTNHXO6dg3Po+dddvR4aCfV+S8of2ODQdi3hjXnePxYD8Ojm1j3/cntp0tYeN4fKK14RTWlXVdmZZAoRxFP3JVA3k/kquBD+0RWY5/+4tFCOy6My2eaVlYwjM2hJAK9H3PKR7ECt57nO4xw4SdFqbBYdxA6QL3WuGqO8E5hrAz+8AS33TdUuy6bTweD7TWz4TfsG5ISSZn6aWg1xrRdSit6aRMHXRtQ9e2KTjauq7puo6maaiq6mfCWKlpO4qyZLSWpqp4f3/n4+Mj2dv1SlEUnM9nyjzncrkk/+3tjdvthlI9bdv+HHlZFoQQKKXQvU4/7/d7KlBWFWVZJb8SPbkwjOPEPM9Ya9P3byNvhPiG1iBFhxAdKiYXAmctyzwxjUOykcQ5sr5vCZGM7cX8L6SszGFl8BtuCQlq9IjRMyxrIiLChR07hyTyaOM9H8J/Wd63NV24SJfkcpEDZzXyt3BkeuGaVRR/vpOVkj9UIOvnhIvxLCGw/p9sQvAM1jBMU0rul5lxXjBhZ+ok47VgMgPb4zMFH/vO43FwHEfyv76+/i2b2LaxLunQOYcSHfe2o5OKVvV02tBIiZQSJSXi9R27ikRG+4PlH7JpGq63G04pmrLknGVcr1fKoqDI8yeKgizLEm4vP8omLwratuMUVb5vG1NYaYaQ1imOMU0TqlepC2NMGifiu5uI77MIax0qvmFcuSiZefHoYUrbES+kJMYkfab1+mWjfsc3y7HYP/jeoHzToySLAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"The better word count extension for BlogEngine.NET\" title=\"The better word count extension for BlogEngine.NET\" src=\"/static/43e08777862fe013d1cc9492ff8caf02/fcda8/image_thumb_207.png\" srcset=\"/static/43e08777862fe013d1cc9492ff8caf02/12f09/image_thumb_207.png 148w,\n/static/43e08777862fe013d1cc9492ff8caf02/e4a3f/image_thumb_207.png 295w,\n/static/43e08777862fe013d1cc9492ff8caf02/fcda8/image_thumb_207.png 590w,\n/static/43e08777862fe013d1cc9492ff8caf02/e185b/image_thumb_207.png 691w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\" loading=\"lazy\">\n    </span></a></p>\n<h1><span style=\"color: #800080\">How did you improve the original word count extension?</span></h1>\n<p>I just changed the algorithm for calculating the words. The algorithm is came from <a href=\"http://www.cnblogs.com/tracydj/archive/2010/10/20/1856548.html\">http://www.cnblogs.com/tracydj/archive/2010/10/20/1856548.html</a>. The C# implementation of this algorithm is as below:</p>\n<pre class=\"brush: csharp\">    /// \r\n    /// Calculate word count\r\n    /// \r\n    /// \r\n    private static int CalculateWordCount(string article){\r\n        var sec = Regex.Split(article, @&quot;\\s&quot;);\r\n        int count = 0;\r\n        foreach (var si in sec)\r\n        {\r\n            int ci = Regex.Matches(si, @&quot;[\\u0000-\\u00ff]+&quot;).Count;\r\n            foreach (var c in si)\r\n                if ((int)c &gt; 0x00FF) ci++;\r\n\r\n            count += ci;\r\n        }\r\n\r\n        return count;\r\n    }</pre>\n<p>A little more description:</p>\n<p>It is evolved from <a href=\"http://dnbegallery.org/cms/List/Extensions/WordCount\" target=\"_blank\">Word Count 2.5</a>, which is made by <a href=\"http://blog.geniali.ch/post/2011/01/10/GEBEE-Version-20-der-WordCount-Extension-fur-BlogEngineNET-20.aspx\" target=\"_blank\">GENiALi</a>. The original version has a critical bug - it does NOT work well with Asian Languages. For example, it displays only 17 words for a 2500 words long Chinese post. The cause is its word counting algorithm, it treats all characters separated by space as words, but Asian words are not even separated by space at all! So I improved its word counting algorithm and make it be compatible with Asian words post.</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}