{"componentChunkName":"component---src-templates-post-js","path":"/posts/pkaygb/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/pkaygb","relativePath":"posts/pkaygb","frontmatter":{"title":"使用万能 BFF，将语雀文章 GraphQL 服务化","stackbit_url_path":"posts/pkaygb","date":"2021-09-29T15:42:30","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p>几天前，我似乎吹了个牛，详见《<a href=\"https://zhuanlan.zhihu.com/p/412196725\">一顿操作猛如虎，部署一个万能 BFF</a>》。我号称部署了一个万能 BFF，即将 gatsby js 的本地开发用的 GraphQL 服务器，部署在了 AWS lambda上，从而可以借助 gatsby js 丰富的插件，实现所有数据源的对接，而不用再次开发（有点类似低代码的效果）。</p>\n<blockquote>\n<p><strong>小科普： AWS lambda，本质上是一个不需要编排的容器服务。</strong></p>\n</blockquote>\n<blockquote>\n<p>—— 现学现卖，今天去 AWS 听 Stan Lin 老师说的<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/adea45f8656124ecd6771f9bc1d4b65f/ec09f/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVR42p2S3Y6CQAyF5/1fzEtjvDNRkQQFTGCY6dgZQM6mFdw1u5usS/LRcij9G8zpdIKw3++V4/GIPM9xOByQZZn6i77b7dTKO/G32y02mw3W6zVWq5XqpigKXC4XnM9niF9VlSKaUJYlvPcIITytQERwzqHrOlhr0TSN6qaua3gixBi/wcxIKeGdy0hVqcKpB/HvH0/TJLevij7f7/cXTLjdtHWSkSiA58546TKyWumUXyZIaiWJFFswROG5F+mW5v0sONGIIIUlxjmvK5JYsaMmxGdCCRr6HuM4PsbCAl7H+1EHpnnUacZUda0nJOMOKWJgQs+EdPP/whTXFo0LsJ2Ddx28s+BAGPuEoY8Y1P4dc7WkpxuZ0doW1raI86/y2Ave4gPZJgYA4A2MowAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/adea45f8656124ecd6771f9bc1d4b65f/fcda8/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png\"\n        srcset=\"/static/adea45f8656124ecd6771f9bc1d4b65f/12f09/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png 148w,\n/static/adea45f8656124ecd6771f9bc1d4b65f/e4a3f/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png 295w,\n/static/adea45f8656124ecd6771f9bc1d4b65f/fcda8/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png 590w,\n/static/adea45f8656124ecd6771f9bc1d4b65f/efc66/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png 885w,\n/static/adea45f8656124ecd6771f9bc1d4b65f/c83ae/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png 1180w,\n/static/adea45f8656124ecd6771f9bc1d4b65f/ec09f/1632927183007-34134a49-1d4c-4560-99df-0171922472c8.png 1916w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aa1a1f28ebf839d14d76d3bcd659d13e/302a4/1632927203638-0a079349-a6ee-46b0-af48-0a00ed9fa33d.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.1081081081081%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/aa1a1f28ebf839d14d76d3bcd659d13e/fcda8/1632927203638-0a079349-a6ee-46b0-af48-0a00ed9fa33d.png\"\n        srcset=\"/static/aa1a1f28ebf839d14d76d3bcd659d13e/12f09/1632927203638-0a079349-a6ee-46b0-af48-0a00ed9fa33d.png 148w,\n/static/aa1a1f28ebf839d14d76d3bcd659d13e/e4a3f/1632927203638-0a079349-a6ee-46b0-af48-0a00ed9fa33d.png 295w,\n/static/aa1a1f28ebf839d14d76d3bcd659d13e/fcda8/1632927203638-0a079349-a6ee-46b0-af48-0a00ed9fa33d.png 590w,\n/static/aa1a1f28ebf839d14d76d3bcd659d13e/efc66/1632927203638-0a079349-a6ee-46b0-af48-0a00ed9fa33d.png 885w,\n/static/aa1a1f28ebf839d14d76d3bcd659d13e/302a4/1632927203638-0a079349-a6ee-46b0-af48-0a00ed9fa33d.png 1080w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</blockquote>\n<p>吹完牛，还提前预告后面将用真实案例，讲解利用该万能 BFF 的使用场景。</p>\n<p>今天就来一个真实场景，低代码实现语雀文章的 GraphQL 服务。尽管知道完全可行，但是真正搭建出来还是挺激动的。</p>\n<p><a name=yBzUc></a></p>\n<h1><a href=\"https://jqp5j170i6.execute-api.us-east-1.amazonaws.com/dev/gatsby/graphql?query=%23%20Welcome%20to%20GraphiQL%0A%23%0A%23%20GraphiQL%20is%20an%20in-browser%20tool%20for%20writing%2C%20validating%2C%20and%0A%23%20testing%20GraphQL%20queries.%0A%23%0A%23%20Type%20queries%20into%20this%20side%20of%20the%20screen%2C%20and%20you%20will%20see%20intelligent%0A%23%20typeaheads%20aware%20of%20the%20current%20GraphQL%20type%20schema%20and%20live%20syntax%20and%0A%23%20validation%20errors%20highlighted%20within%20the%20text.%0A%23%0A%23%20GraphQL%20queries%20typically%20start%20with%20a%20%22%7B%22%20character.%20Lines%20that%20start%0A%23%20with%20a%20%23%20are%20ignored.%0A%23%0A%23%20An%20example%20GraphQL%20query%20might%20look%20like%3A%0A%23%0A%23%20%20%20%20%20%7B%0A%23%20%20%20%20%20%20%20field(arg%3A%20%22value%22)%20%7B%0A%23%20%20%20%20%20%20%20%20%20subField%0A%23%20%20%20%20%20%20%20%7D%0A%23%20%20%20%20%20%7D%0A%23%0A%23%20Keyboard%20shortcuts%3A%0A%23%0A%23%20%20Prettify%20Query%3A%20%20Shift-Ctrl-P%20(or%20press%20the%20prettify%20button%20above)%0A%23%0A%23%20%20%20%20%20Merge%20Query%3A%20%20Shift-Ctrl-M%20(or%20press%20the%20merge%20button%20above)%0A%23%0A%23%20%20%20%20%20%20%20Run%20Query%3A%20%20Ctrl-Enter%20(or%20press%20the%20play%20button%20above)%0A%23%0A%23%20%20%20Auto%20Complete%3A%20%20Ctrl-Space%20(or%20just%20start%20typing)%0A%23%0A%0A%0A%0A%7B%20%0A%20%20yuque(id%3A%20%2253296538%22)%20%7B%0A%20%20%20%20id%0A%20%20%20%20title%0A%20%20%20%20description%0A%20%20%20%20body%0A%20%20%7D%0A%20%20%0A%20%20allYuque%20%7B%0A%20%20%20%20nodes%20%7B%0A%20%20%20%20%20%20id%0A%20%20%20%20%20%20title%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D\">在线演示</a></h1>\n<p><a href=\"https://jqp5j170i6.execute-api.us-east-1.amazonaws.com/dev/gatsby/graphql\">https://jqp5j170i6.execute-api.us-east-1.amazonaws.com/dev/gatsby/graphql</a></p>\n<p><a name=W2coR></a></p>\n<h1>截图展示</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8b82ba07a95e75cff018849c3284e6e/d185f/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.432432432432435%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByklEQVR42oWS3U7cMBBG8/4Pg1DFwi4ClaW3vaiQ2gsKrFAFZJNsEv8mTuKcyrMsAnpRS59mbHmOPnsmOzo65vj4C4vFqejkZMHp6RnL5YrV6lziPl9xJufnXFxcsr66Yr2+5vLyK+v1N66v1iwXS7JxHPnfCv3AMH88i6+aP+VZ2ypCCHjvSfB5nkUxRrkQvOf5qeThLqe4z6k3OdXdC+3zjnZbo4qGdttI1LUmU0oJrO97hnFkGIa9gP7xHvPrhjJvKR636Jcd6qVG5Q2mMdjWSDzkznVkWmuBJah3ji4MOGMwP3/gNr/pvaOtKvLWUjcOqyzWOCn2fcCn2oO6nswYQ4wTYxIwNDvCwy2Dapk7T3fzHX13S6k6ylxhao0uFba1AnC++6BMaUMfJibfM5UFsdoKaHp6ZNrcEpLbPlDsNFVpBOicl+LPQHGotEb5gaA0sa2JTcX0Z0M0Wro5jBPaGIraUFV7oPyZ+ugw5QLU2qBdYHKGWOZE1QhIpmSeZQKMtZQJWBpsY9DV/unpLw/QQ8ystYQxMvedAD6v1PEELA7A1NkE3Gmc9f+4lC475wjDIHP4Njav+67rMNaJw12hBZicvXf33uFfe75ERwJFvdgAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f8b82ba07a95e75cff018849c3284e6e/fcda8/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png\"\n        srcset=\"/static/f8b82ba07a95e75cff018849c3284e6e/12f09/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png 148w,\n/static/f8b82ba07a95e75cff018849c3284e6e/e4a3f/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png 295w,\n/static/f8b82ba07a95e75cff018849c3284e6e/fcda8/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png 590w,\n/static/f8b82ba07a95e75cff018849c3284e6e/efc66/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png 885w,\n/static/f8b82ba07a95e75cff018849c3284e6e/c83ae/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png 1180w,\n/static/f8b82ba07a95e75cff018849c3284e6e/d185f/1632928664453-58877b8f-38bc-4e3c-8963-5e3b31e252da.png 2686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=LrXkb></a></p>\n<h1>语雀</h1>\n<p>语雀是一款相当优秀的在线文档编辑工具，我最喜欢它对文本绘图的支持。我前些年开始使用语雀来记录自己的想法，并且同步到自己的博客： <a href=\"https://jeff-tian.jiwai.win\">https://jeff-tian.jiwai.win</a> 。这个博客站点其实就是利用 gatsby js 生成的静态网站。它使用了 @jeff-tian/gatsby-source-yuque 这个插件读取语雀的文章。现在要做的，就是在万能 BFF 里重用该插件，将语雀文章以 GraphQL 的服务暴露出来。</p>\n<p>在万能 BFF 里引入 @jeff-tian/gatsby-source-yuque</p>\n<p>shell\nyarn add @jeff-tian/gatsby-source-yuque</p>\n<p><a name=niprv></a></p>\n<h1>配置（低代码开发）</h1>\n<p>要做到纯配置，还得对万能 BFF 做一点改进，不过这留作以后优化，现在可以做一丢丢开发，主要是将语雀的用户名和空间名灌进系统里。因此在万能 BFF 项目里，添加一个文件夹，命名为 yuque，定义一下 schema，以及实现 read 和 all 接口，从而实现全量查询和使用 id 查询单个文章。</p>\n<p>typescript\nimport * as Joi from @hapi/joi\nimport {sourceNodes} from @jeff-tian/gatsby-source-yuque/gatsby-node</p>\n<p>const schema = {\nid: Joi.number(),\ntitle: Joi.string(),\ndescription: Joi.string(),\ncustom_description: Joi.string(),\nupdated_at: Joi.string(),\ncreated_at: Joi.string(),\nslug: Joi.string(),\nword_count: Joi.number(),\ncover: Joi.string(),\nbody: Joi.string(),\n}</p>\n<p>let articles = null</p>\n<p>const readArticles = async () => {\nif (articles) {\nreturn articles\n}</p>\n<pre><code>articles = await sourceNodes({\n    reporter: {\n        panic: console.error,\n        info: console.log,\n        error: console.error\n    },\n    actions: {\n        createNode: () => ({})\n    },\n    emitter: {\n        on: console.log\n    },\n    createNodeId: () => ...,\n    createContentDigest: () => ...\n}, {login: tian-jie, repo: blog})\n\nreturn articles\n</code></pre>\n<p>}</p>\n<p>const read = async (context, id) => {\nconst articles = await readArticles()</p>\n<pre><code>return articles.filter(a => String(a.id) === String(id))[0]\n</code></pre>\n<p>}</p>\n<p>const all = async () => {\nreturn await readArticles()\n}</p>\n<p>export {schema, read, all}</p>\n<p><a name=kiCSN></a></p>\n<h1>语雀 Token</h1>\n<p>其实，大功基本告成，但是直接部署运行，会碰到 401 错误。要解决这个问题，需要在语雀控制台申请一个令牌。但是，这个令牌无论如何不能写进代码里，因此，需要再对 serverless.yml 做个改造：</p>\n<p>yaml\nfunctions:\ngatsby:\nenvironment:\nSERVERLESS_EXPRESS_PLATFORM: aws\nYUQUE_TOKEN: ${env:YUQUE_TOKEN}</p>\n<p>plugins:\n- serverless-dotenv-plugin</p>\n<p>可以看出，需要用到 serverless-dotenv-plugin 插件，所以安装一下：</p>\n<p>shell\nyarn add -D serverless-dotenv-plugin</p>\n<p>这样，再次执行 YUQUE_TOKEN=xxx serverless deploy 就能安全地将语雀令牌发布到 AWS lambda 的环境变量里。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bcb72e88bb9b6239928af952c70bfbd7/12c06/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACG0lEQVR42oWS607UUBSF+zAmggISQFGCQRKNMfqmYpDLDA4330IUZjI4t3Z6v7fntJ3P9FQBEw0/vuy10911us6utvb8FSvPXiqWVjdYXNng8fI6j548ZW5pjbnFVeaX1hQPF1Z5ML+s9MLKBmvrW7x+84HN7Xe82HrL5vZ7tM7pV3Zbx+zsd9jZO+Lj7gE7nw/5tN+m1TmjfXJ+Q+v4jMMvp7SPzzk4OlHst5u61+rQ7pyhARiWQ/d6QH8w4udIp3c9pNu/JkozimqGKCuFVDS9rGbkRalmgjjBDSJSIdGyLGPihPRGU/rjKUM7oje2GJkebiJx4vwehMJNhOo1KSWe53HV7eEFIUIIRZ7npFlGluUN+X/I/kYTUmK7LroxZWJM0Q0D2xhj2TaGaeL5Pn4QqHof9ZwmiwLTsnA9j1wIgjDk28UFk4lOkiSEUUQUxaRpSqa++N/UiYIgbCJbtkMcx9Q6ThJMy8ZxPaXrAzw/UPHqNEL8QdxqKdW7tXFjaFmqUYZRhO84RIGP77okUcisLKiKgjSOydMUqgrKktlvSikp65mqQpNCoI8GKv9sNiMxp5j9Hs5oSOpYZI6N8Byk75LYJoE+YXx1yeD7BZPuFcPLH2SWiawTFmWzFMd11R3UOvQ9vKmBb1mEjk1gWzf4lolnmtj6ROEYuqrqeRCo61GG9UJq0/o3iepFxHFDFN/qO9Qzd2lmI8UvucJdm6CcPtEAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/bcb72e88bb9b6239928af952c70bfbd7/fcda8/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png\"\n        srcset=\"/static/bcb72e88bb9b6239928af952c70bfbd7/12f09/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png 148w,\n/static/bcb72e88bb9b6239928af952c70bfbd7/e4a3f/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png 295w,\n/static/bcb72e88bb9b6239928af952c70bfbd7/fcda8/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png 590w,\n/static/bcb72e88bb9b6239928af952c70bfbd7/efc66/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png 885w,\n/static/bcb72e88bb9b6239928af952c70bfbd7/c83ae/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png 1180w,\n/static/bcb72e88bb9b6239928af952c70bfbd7/12c06/1632929657122-76907c0e-234e-40ed-bf37-c85a3fffd1cf.png 2418w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=jFyZD></a></p>\n<h1>总结</h1>\n<p>通过在万能 BFF 里重用 @jeff-tian/gatsby-source-yuque 插件，低代码实现语雀文章的 GraphQL 服务。</p>\n<p><strong>感兴趣的同学请持续关注，后面会继续分享更多的万能 BFF 实际使用案例，以及在更多客户端（比如小程序中）使用该万能 BFF 的例子。</strong></p>\n<p>微信公众号链接不能点的问题，可以点击“阅读原文”，再在原文中点击链接。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}},"menus":{}}},"staticQueryHashes":[],"slicesMap":{}}