{"componentChunkName":"component---src-templates-post-js","path":"/posts/oac8455k1oayfy28/","result":{"data":{"sitePage":null},"pageContext":{"url":"posts/oac8455k1oayfy28","relativePath":"posts/oac8455k1oayfy28","frontmatter":{"title":"Free Arch: Keycloak 用户联邦 LDAP 初体验（感谢 Authing!）","stackbit_url_path":"posts/oac8455k1oayfy28","date":"2022-12-01T12:17:29","excerpt":"","tags":[],"categories":[],"template":"post"},"html":"<p><a name=rDpq4></a></p>\n<h1>什么是 Free Arch</h1>\n<p>Free Arch 是我杜撰的一个词，旨在为应用架构提供免费自由的架构指引，特别是针对个人开发者，但不局限于个人开发者。\n<a name=x7sTB></a></p>\n<h1>什么是 Keycloak</h1>\n<p>Keycloak 是开源的身份与访问控制系统。它实现了 SAML 和 OAuth 协议，可以为你的应用提供单点登录功能，还能仅通过配置就接入多个身份提供商，不用写代码。之前写过多篇相关的文章，但是除了接入身份提供商，它还做用户联邦，这个之前还没有探索过，今天就来探索一下。</p>\n<p>它支持两种用户联邦提供服务：kerberos 和 ldap。今天关注 ldap：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABJUlEQVR42p2OvUsCcRiAf4tlemdD9mFYWSrYh31AgRVkYJtUY/9NFCHIKcShebg4RLS2tfQHREM0RHNLRILeqemSdU94kWAQZC888LzL874iPL+I3x9gxDOKJLuQ5X4kyWXhdMo4JRf2Pgc2Wy+2nk7sdgdu9xDjYz5CUwG8wx5EaHaBgUEP8e1dNE1DSSmoqmp5LpezaPlvZLMZtPwJhdMCWl5DLK9G8QXnSB9n+O/cPdxwdl7gqfSIWItuMRGcYf8wwZsJRqVKo9GgXC5jGAb1ep1isdj2FrquU3utUTGqvJSeuby6IKkccHt/jYisx/D6pjlKKNa1ZvO9y//Mjk3E93ZY2lwhqX4Hm5im+WesZMs/vnYRiW0wGQ6RSCXbQboI/uQTyXKzohOsc9wAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/3fd05a9c13026046c8a9392fb2da6174/fcda8/1669890796321-4396a9f8-28f2-4c52-a246-e22c8a94c532.png\"\n        srcset=\"/static/3fd05a9c13026046c8a9392fb2da6174/12f09/1669890796321-4396a9f8-28f2-4c52-a246-e22c8a94c532.png 148w,\n/static/3fd05a9c13026046c8a9392fb2da6174/e4a3f/1669890796321-4396a9f8-28f2-4c52-a246-e22c8a94c532.png 295w,\n/static/3fd05a9c13026046c8a9392fb2da6174/fcda8/1669890796321-4396a9f8-28f2-4c52-a246-e22c8a94c532.png 590w,\n/static/3fd05a9c13026046c8a9392fb2da6174/efc66/1669890796321-4396a9f8-28f2-4c52-a246-e22c8a94c532.png 885w,\n/static/3fd05a9c13026046c8a9392fb2da6174/c83ae/1669890796321-4396a9f8-28f2-4c52-a246-e22c8a94c532.png 1180w,\n/static/3fd05a9c13026046c8a9392fb2da6174/963fa/1669890796321-4396a9f8-28f2-4c52-a246-e22c8a94c532.png 2666w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=UcdS5></a></p>\n<h1>什么是 Authing</h1>\n<p>可以参考其文档： <a href=\"https://docs.authing.cn/v2/concepts/\">https://docs.authing.cn/v2/concepts/</a>。它是一个身份云，在云上为企业和开发者提供专业的身份认证和授权服务。它拥有和 Keycloak 同样的功能，除此之外，还有更多贴心的服务。可以参考《<a href=\"https://zhuanlan.zhihu.com/p/469187151\">Free Arch: Keycloak vs Authing - Jeff Tian的文章 - 知乎</a> 》一文对比 Keycloak 和 Authing，不过，Keycloak 和 Authing 都在迭代，所以文章中有些内容可能已经过时了。\n<a name=rI5ST></a></p>\n<h1>什么是 LDAP</h1>\n<blockquote>\n<p>LDAP（轻型目录访问协议）是一种软件协议 ，使任何人都可以在公共互联网或公司内网上查找网络中的组织，个人和其他资源（例如文件和设备）的数据 。LDAP 是目录访问协议（DAP）的“轻量级”版本，它是 X.500（ 网络中目录服务的标准 ）的一部分。</p>\n</blockquote>\n<p>一般来说，企业都会有 LDAP 服务，员工的元信息都能在 LDAP 服务中查询到，以及密码等安全凭据都保存于此。</p>\n<p><a name=Pcdtq></a></p>\n<h1>在 Keycloak 中联邦 LDAP 用户</h1>\n<p>前几篇文章层层递进，从一个用户开始，验证了端到端使用 Keycloak 取代一个系统的用户登录功能；然后，第二篇详述了批量用户迁移；接着，第三篇介绍了关联在不同系统中的用户名不一样的同一用户的方法，从而能将企业中独立自建的各个系统的用户登录模块迁移到 Keycloak 中。</p>\n<p>本篇文章在前三篇的基础上，联邦 LDAP 用户，从而允许企业员工使用域账号登录 Keycloak。</p>\n<p>Keycloak 内置了 LDAP 提供商，在同一个 Keycloak Realm 里，可以联邦多个不同的 LDAP 服务。\n<a name=Q9HIO></a></p>\n<h2>LDAP 映射器</h2>\n<p>你可以将 LDAP 用户的属性映射到 Keycloak 的通用用户模型中，默认是映射用户名、邮箱、姓氏和名字，但是也可以通过 LDAP 映射器配置额外的映射。\n<a name=XGQB7></a></p>\n<h3>用户属性映射器</h3>\n<p>通过该映射器，你可以指定将哪个 LDAP 属性映射为哪个 Keycloak 用户属性，比如将 LDAP 中的 mail映射为 Keycloak 中的 email等。这必须是一对一的映射。\n<a name=vDZys></a></p>\n<h3>全名映射器</h3>\n<p>通过它可以指定用户的全名。在 LDAP 中，这通常被存储为 cn，而在 Keycloak 数据库中，这通常是 firstName和 lastName。\n<a name=BtYOv></a></p>\n<h3>角色映射器</h3>\n<p>同一个 LDAP 提供商可以配置多个角色映射器。\n<a name=nJaOZ></a></p>\n<h3>硬编码角色映射器</h3>\n<p>它可以为所有链接到 Keycloak 用户的 LDAP 用户分配一个固定的 Keycloak 角色。\n<a name=ArMkT></a></p>\n<h3>用户组映射器</h3>\n<p>它可以用来将处于 LDAP 树中某个分支的 LDAP 组遇到到 Keycloak 中的某个用户组。\n<a name=KCZRJ></a></p>\n<h3>微软活动目录账号映射器</h3>\n<p>这是微软活动目录（MSAD）专用的。它能将 MSAD 中的用户状态和 Keycloak 中的账号状态做对应，比如账号是否禁用、密码是否过期等等。它用了 userAccountControl和 pwdLastSet属性，这两个都是 MSAD 专有，而非 LDAP 标准。如果 pwdLastSet是 0，Keycloak 就会给用户添加一个 UPDATE_PASSWORD动作要求，从而迫使用户更新密码。如果 userAccountControl是514（禁用的账号），Keycloak 就会禁用该用户。</p>\n<p><a name=gr7bM></a></p>\n<h2>存储模式</h2>\n<p>Keycloak 默认会将 LDAP 用户导入到本地用户存储。被导入的用户副本要么按需同步，要么通过定期后台任务同步。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/71316692486cebbdc5ec48ea5637ae77/6568d/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvUlEQVR42o2STW4DIQxG5/4n6aonqXqCqrtJUqn8jdoAY8OrTDKRugpIT3iBnj8Di6rivcc5N3botH6ntSl67w+Wo8g5E7xHRNCa0b2irWENZzjEC0AphZQSzhKq8PKReDulkVZ0PqWtIbRUIQRijKgK57DxHRP0Pp3wITT7tm1DeLl8gVRePxPv5zgO3LrPcBdaYSMbJt1r4fRTcb9lPMyuHWnP+TfyIVvXles1U0eDinTGHT6T7e32K0z4BzKCJV8Qyl4dAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/71316692486cebbdc5ec48ea5637ae77/fcda8/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png\"\n        srcset=\"/static/71316692486cebbdc5ec48ea5637ae77/12f09/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png 148w,\n/static/71316692486cebbdc5ec48ea5637ae77/e4a3f/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png 295w,\n/static/71316692486cebbdc5ec48ea5637ae77/fcda8/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png 590w,\n/static/71316692486cebbdc5ec48ea5637ae77/efc66/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png 885w,\n/static/71316692486cebbdc5ec48ea5637ae77/c83ae/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png 1180w,\n/static/71316692486cebbdc5ec48ea5637ae77/6568d/1669897018667-c0924896-9941-4b03-a935-adc659fe92d9.png 1660w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>但是密码是个例外，密码不会被导入，密码验证会委托给 LDAP 服务器。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/075b8e06b09077824bdcb6151ecaf33f/bb543/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.189189189189186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABS0lEQVR42qWQy2ocMRBF+/+X/oeAd9lk45U3xpAQEgwOGfADEkJmerpbar1brccJ0iTLrCw4QlUqblXd4dc4M0nF6XhkXRVKvY3BWIfznhA8pRTeeoamOo4jWmuMMaSUSDnjYyLsiZwzMUa2bet/Ld73vTePcSfn0vP/ckN7+BB60CZtohWYQ0HGSikVrQ1CSpxzhBBQWneRlttixDrHqlQfZBBCME0T8zwjpECIhfF8QoqJeRo5TyPTfEbIhUqzpP7lPyu3VRutuzeBYHaCiQSbCCYRTWYzmd1WiMB+IceKcwbvLDFu3ZbGMC8Lh8MBuUp+hyde3Gee3Ee+2zse7S0P9oYv5gOfzHvu1TV36ztu1iue1Vdefsx8e/2JthcrvPcMYdu6oc2TWD2+KFxZsUViyoIpE7qcUeXEWo6dMT/3mlIhVSj1YkG7/wDjzmhgMVU52wAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/075b8e06b09077824bdcb6151ecaf33f/fcda8/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png\"\n        srcset=\"/static/075b8e06b09077824bdcb6151ecaf33f/12f09/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png 148w,\n/static/075b8e06b09077824bdcb6151ecaf33f/e4a3f/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png 295w,\n/static/075b8e06b09077824bdcb6151ecaf33f/fcda8/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png 590w,\n/static/075b8e06b09077824bdcb6151ecaf33f/efc66/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png 885w,\n/static/075b8e06b09077824bdcb6151ecaf33f/c83ae/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png 1180w,\n/static/075b8e06b09077824bdcb6151ecaf33f/bb543/1669895491436-712c2df5-94f7-4546-b69c-8c25de2190c5.png 1418w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>你也可以选择不将用户导入到 Keycloak 数据库，这样的话， Keycloak 的通用用户模型就在运行时依赖 LDAP 服务器。</p>\n<p>存储模式通过 Import Users开关来控制，如果要导入，就将它设置为开启：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACTklEQVR42n2S2U5TURiF+xiiCYTEEgVsC21pSwdoCRAlokBb0Ghi4jP4JlJGjS/jDRdemCA3IkQRe6ZOtD3z+czZLU00yk6+7PzJzspaa/+BVHqORCpLcjZHKBJlNuPPGR6vrvHi5StK5WeUyluCYmlzwEaxzPpGuX+XWFsvsrn1nEA4liIc7RGJzRJNZBkdm2Rn7xDPc6mpKs1Gg3q9TqvVot1u47rufwlMxdNEk1nuPYgKJiIzDI0EqezuY7sepxdVao0GkiQhyTKGYXDTCfgCM7PzpLIF0vOLxJI5bg3fpbJ7IB6ouosD6LpOp9PFg5sdTkQSRJM5UrkFxsNxJqcS3B4Z421lD8s0UWQJRZFRVVVE9o93k8PJ6SRx32FugWSmILocGg4OHDb7vWl+l80mnudhmyamaYj4AjGbGIbZi+wLxlNzwmFoOikEt3f2e248D8uyhDvD0LEch/OqgiQraJqGqmr9W0XVNAKhaIpEOk+usExmfpFsfok7o2NU9g4Ggj6+gK13+NlxeHOkcFbv/DtyfukRD1fXWVp5wsrTIoXlFYITYQ7efxBtSaJDBVmRabevsB2HC1mhKsvoehfHcbBte0DgfihGJJ4mkcmTzOTx18j/5e1+h4ZuYZk2nXYX07TBBU/XMbo6pmFh25ao5JrA9EwGP3ZwPCL20P/l3h4eCsGafYmmX3JaPeFX8wzFlPhcu0A2q7QcCdf1/lwbXyCWygmHvttrwZ3dd4DND/2EM/UL5/UTNP0bx1ffef3xE0fVYzT3K85fgr8BhhfYMiENywoAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f72d4a69bb717d10a44001c94b8c8365/fcda8/1669895662982-19605406-60b3-43dd-95eb-ac70b7e28517.png\"\n        srcset=\"/static/f72d4a69bb717d10a44001c94b8c8365/12f09/1669895662982-19605406-60b3-43dd-95eb-ac70b7e28517.png 148w,\n/static/f72d4a69bb717d10a44001c94b8c8365/e4a3f/1669895662982-19605406-60b3-43dd-95eb-ac70b7e28517.png 295w,\n/static/f72d4a69bb717d10a44001c94b8c8365/fcda8/1669895662982-19605406-60b3-43dd-95eb-ac70b7e28517.png 590w,\n/static/f72d4a69bb717d10a44001c94b8c8365/efc66/1669895662982-19605406-60b3-43dd-95eb-ac70b7e28517.png 885w,\n/static/f72d4a69bb717d10a44001c94b8c8365/c83ae/1669895662982-19605406-60b3-43dd-95eb-ac70b7e28517.png 1180w,\n/static/f72d4a69bb717d10a44001c94b8c8365/3c492/1669895662982-19605406-60b3-43dd-95eb-ac70b7e28517.png 1300w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=liOqx></a></p>\n<h2>编辑模式</h2>\n<p><a name=zDFVJ></a></p>\n<h3>只读</h3>\n<p>用户名、邮箱、姓氏和名字，以及其他的映射属性，一旦导入就不能更改。这时，任何修改尝试都会触发 Keycloak 的报错。而且，这种模式下也不支持修改密码。\n<a name=csiFi></a></p>\n<h3>可写</h3>\n<p>用户名、邮箱、姓氏和名字，以及其他的映射属性甚至密码，都允许更新，并且会自动同步回 LDAP 服务器。\n<a name=RaY2Z></a></p>\n<h3>不同步</h3>\n<p>用户名、邮箱、姓氏和名字，以及其他的映射属性甚至密码都会被存储在 Keycloak 本地存储。如何同步回 LDAP 取决于你。\n<a name=XgZ8g></a></p>\n<h1>实验环境准备</h1>\n<p><a name=IbBUj></a></p>\n<h2>Keycloak</h2>\n<p>实验将继续使用我的线上 Keycloak 实例： <a href=\"https://keycloak.jiwai.win\">https://keycloak.jiwai.win</a>\n<a name=DMowj></a></p>\n<h2>LDAP 服务</h2>\n<p>有多种选择，最推荐的是 Authing 提供的 LDAP 服务，所以标题特别注明了“感谢 Authing”。这里先列举几个，然后以 Authing 为例，详细记录在 Keycloak 中联邦 LDAP 的过程。\n<a name=pHsNY></a></p>\n<h3>OpenLDAP 容器</h3>\n<p>详见： <a href=\"https://hub.docker.com/r/rroemhild/test-openldap/\">https://hub.docker.com/r/rroemhild/test-openldap/</a>，它自带测试数据，可以使用以下命令运行：\nshell\ndocker pull rroemhild/test-openldap\ndocker run --privileged -d -p 389:389 -p 636:636 rroemhild/test-openldap</p>\n<p><a name=FcfM7></a></p>\n<h3>使用公司的 LDAP 服务</h3>\n<p>如果使用公司的 LDAP 服务，你需要知道连接它的账号和密码。<br />![在 mac os 上可以使用 Directory Utility 查看公司的 LDAP 服务信息](<a href=\"https://cdn.nlark.com/yuque/0/2022/png/221736/1669893093440-36224e62-5d4f-4e68-90f6-8577ff80e4f4.png#averageHue=%2349413e&#x26;clientId=uc810936d-02a5-4&#x26;from=paste&#x26;height=680&#x26;id=uef0029f4&#x26;originHeight=1360&#x26;originWidth=1618&#x26;originalType=binary%E2%88%B6=1&#x26;rotation=0&#x26;showTitle=true&#x26;size=674136&#x26;status=done&#x26;style=none&#x26;taskId=ue6afa98d-08f8-4974-81be-4efa7efce49&#x26;title=%E5%9C%A8%20mac%20os%20%E4%B8%8A%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20Directory%20Utility%20%E6%9F%A5%E7%9C%8B%E5%85%AC%E5%8F%B8%E7%9A%84%20LDAP%20%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF&#x26;width=809\">https://cdn.nlark.com/yuque/0/2022/png/221736/1669893093440-36224e62-5d4f-4e68-90f6-8577ff80e4f4.png#averageHue=%2349413e&#x26;clientId=uc810936d-02a5-4&#x26;from=paste&#x26;height=680&#x26;id=uef0029f4&#x26;originHeight=1360&#x26;originWidth=1618&#x26;originalType=binary∶=1&#x26;rotation=0&#x26;showTitle=true&#x26;size=674136&#x26;status=done&#x26;style=none&#x26;taskId=ue6afa98d-08f8-4974-81be-4efa7efce49&#x26;title=%E5%9C%A8%20mac%20os%20%E4%B8%8A%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20Directory%20Utility%20%E6%9F%A5%E7%9C%8B%E5%85%AC%E5%8F%B8%E7%9A%84%20LDAP%20%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF&#x26;width=809</a> 在 mac os 上可以使用 Directory Utility 查看公司的 LDAP 服务信息)\n<a name=PhDEr></a></p>\n<h3>Authing 的 LDAP 服务</h3>\n<p>如果不知道公司 LDAP 服务的账号密码，又不想用容器方案（不够真实，也不能在线上服务中使用到它），那么强烈推荐 Authing 提供的 LDAP 服务。</p>\n<p>首先，你需要创建一个用户池：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1fdf0214d3e3d8b695aeec4fb0795711/2c288/1669892204058-4e49eeb6-7a1f-4e44-abc5-acc025d07677.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.1081081081081%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAADHElEQVR42oWSS28bVRiG5y+1goqkSdPEduKUXCSX7gCJFRIS/6Ab2CCxKCs2CNgWFAkBC5ZUFFpBDXV9v7a1nbFnbI/tuXjulwfNmETBQfQbvXPO0ZnzfOf9vhGub9wk1uvX1hOl0nukMre4spblyhtprm3us7WbS7SROmY7+xY7+3fY2Dli7eYBV9cyXF3f5bXre8m3QjqTJZXeZ31jm80bO2R2b5HKvMna9jGb6WO293Ic5N7mIPcOh7ffTcZ4Hc93sre5kTpkM3XIVuaIrfQRQrFUpdGo0mrWKVfqlMpVSuUKlVqTUqVJsdygUKxdUrXWot7s8LTynGK9Q6H6gmf1HgLA71U7kbGw0XQb3XAwFg5hxCtjbMKvTWie6uQrXQTbWvDhZwM+uDfkwYOHfP/DTzwt1Oi8ENENM0liLKwV2fh+QBiGiDOfX4oKf5Re8vPjEoJpWtSez2l1VTRVZaLMmc3URAvTwjTty7JioE8YRchaSKHR51GhzW9/tRBUbQH4eD7MjIjYpetDEP6/Vdd1EqhhhxgumN5Sgqrp6AuHu1+rvH9P4UndodB2aYv++eEoilYEtm3jeR5RFBKGwbkEVdVZWA53v1J571OFUlul1+8SJxKHI172xARyBj6LM+BqCHNVx3VdLAd0G8IwwvODxHoQhDiu+0rgxdsnwPiQQ4A8krBth/F4xGQyRlXn/2n5InB1T5jNVYIo4uOPPiGX3WUwHHAqioiDAZquxbjz52KsWj5LJMznBoEH3337I19+/gUjSWE81nDsZVPCIH5BFMQlCP5RiGVZyy4bRgKPI04gyOqQhvmYKR0U2khRGZkSg6BI33vGqVei4zxh4vUTcBD4CTSGxLW/f/8bTk5O6HQ65PN5hOakheS1kMYePVmnM3T4s2VR6drJXDcjLKaIfnVpjX/X0NB1ZtMpuq4ntxVa4x5V6yGdRZWmXqSuVSgoZRp6hbZZoWvX6QZ5pKB1CRhbVg0T213WMu6FMJ3biPKUwUhGlOVklMby+fpUlugPZQbSlIGkIEoK0kjBNM3EujLT0Awz+dVi8N+NY7VJwMZpxgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/1fdf0214d3e3d8b695aeec4fb0795711/fcda8/1669892204058-4e49eeb6-7a1f-4e44-abc5-acc025d07677.png\"\n        srcset=\"/static/1fdf0214d3e3d8b695aeec4fb0795711/12f09/1669892204058-4e49eeb6-7a1f-4e44-abc5-acc025d07677.png 148w,\n/static/1fdf0214d3e3d8b695aeec4fb0795711/e4a3f/1669892204058-4e49eeb6-7a1f-4e44-abc5-acc025d07677.png 295w,\n/static/1fdf0214d3e3d8b695aeec4fb0795711/fcda8/1669892204058-4e49eeb6-7a1f-4e44-abc5-acc025d07677.png 590w,\n/static/1fdf0214d3e3d8b695aeec4fb0795711/2c288/1669892204058-4e49eeb6-7a1f-4e44-abc5-acc025d07677.png 684w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />可以选择 To E，为企业员工管理身份：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea264997a7c4574d505e0c7b3ba8665c/82e86/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADC0lEQVR42n2TbW/bVBiG8wv5gNq12lZeJLaOH8CXAWmaxLHjbO2mdWUMBmUgYBsUCTYE7Za0UCpKspQ4KVmrkGSNnbZJWtfNm504uZCdsiCQONKt+zznHF06t855PCMjY4yMv8bouTc4++qk6y+NOvUFxiYuMf7Km4w7PnGJsYlJzpy/yNj5Sc6cu8jo2QuMnrpTvzz+Op7L7/iRRJGwHEGWI0jyVd56O0h2ewez2+bIqKGfHKKfHGE0dOotg3rTGPjp/KR5TLvTJp54iudd7zQ+nx9RlJCkMGFZRpIi7JaLNKiRyWXIlXNs5beo1CvY9DDpYNF1ZbqysDhGySh4pgMSQiiMJA2AkUiE2ZlZnqsFujTo1vLYhzt0q8+wq1ns6hb2gYK9/zv2fhJb26C3r2DTJpVO4fH6BAJB0YWKUoRgMMiUd4pCqYDNEb38I/qFh/T/XMT+YwE7fYte+n16mdv0lDn6mzP0U/PYNFEyKTyXvRJefxi/IBMIRdzooZBIUS3S5IBD7Vdq6jq10hq13RVqxSdU88tU80tUcj9Q2f6OWn4JCwMlreAJBIL4/QEkUSIcDruxQ6JEeU+lbcHiI4uvv+3w4JsOC3c7LHxi8eldizsfWnx0x+LWnMUH77VwRjqTxhMMCjgSXaD8Ari3p9FqwZf3Gnx1v8m9zxvcnq8zf+2EuSsGs6LBzSsG1wWDeVkfAgMBwY3ogP6WA9Q0lR7wy9Yx0U2daFLncUJnKa7z44bO9+s6D9d0FmNHLP9mDIDpNJ6pKR9O7H8CBVFkr6xi9uCzZJ0vNpt8vNHk+mqdG6sNbq42mXnc4EasydXlJteWG/8PDEmDG/aBpGaS1CwSuxbrBZOfciYrOybRZyYr2xZPshY/b5tDoM83/Z/IQkhEVUt0exBLtFh52na1mmyzrrRZSw3mjqKJNhuZwaMoivOxp4dd4nZKWEaUwlQqFfdQ8QCeV4bSDkGtDWtnX6u5R8lmswOgIIReAJ1+liMR4vE4pVIJTS1Q1gqUT92t/7WmlvKoqko0FuMvBpmARUE4BtIAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ea264997a7c4574d505e0c7b3ba8665c/fcda8/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png\"\n        srcset=\"/static/ea264997a7c4574d505e0c7b3ba8665c/12f09/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png 148w,\n/static/ea264997a7c4574d505e0c7b3ba8665c/e4a3f/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png 295w,\n/static/ea264997a7c4574d505e0c7b3ba8665c/fcda8/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png 590w,\n/static/ea264997a7c4574d505e0c7b3ba8665c/efc66/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png 885w,\n/static/ea264997a7c4574d505e0c7b3ba8665c/c83ae/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png 1180w,\n/static/ea264997a7c4574d505e0c7b3ba8665c/82e86/1669892256709-25d870ab-46da-481c-bff5-0e9126e7d924.png 1978w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>给这个用户池取个名字，即可完成创建：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ce980abb0f26bb74e7cc38c6f1564fa3/e515d/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABnUlEQVR42q2TTW/TQBCG/U8RN8qHhMSJFjhwAgkpLhIkUUKReusRVQKhtE0jDumNU3tpK9GLa5vYTlvHm6x390FZu43TBiSqrvRo7Nfr1zOeWefL5ld2dn/Q2d5la6fHVrdnY+d/2O7x7XuHmuvinA2H3MWSUtJqtXB837eCEIIgHBD+jjk/T0nTlEwIlNYo9S+UfT/LMhqNBo7neVYIw5C9vT5Hh4ccHx9xcLDPyckvjNFlDmYhxpirhJrN5ixD+zWNJVcGbWbXuarGKgalZ4Y2wyAIrJBminh4wSA+YyI1MgeZm2vxJtl4ZvixXsfxS8Ox1IixZJRJxtIwyWGSmxIqsYLE7l1oOBIaLwIxwZZRlFig1Pz93DP9F8PiJ99+XRme+oVhf1/wrB7zci1hpZ2w8ilhuZ3w6nPCu40hr9cTnpf6lBdrid2/2R+VY1MaeqdFl7s/M+69GfB4NWLJjXjoRizVIp68j1huxzz9EPGgVupuxKPViPtvB2x003nD4K5LvjSczuFlA26gS67pi5tSDrbW+laZVU/K1PAPRzkT+kdx9m4AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ce980abb0f26bb74e7cc38c6f1564fa3/fcda8/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png\"\n        srcset=\"/static/ce980abb0f26bb74e7cc38c6f1564fa3/12f09/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png 148w,\n/static/ce980abb0f26bb74e7cc38c6f1564fa3/e4a3f/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png 295w,\n/static/ce980abb0f26bb74e7cc38c6f1564fa3/fcda8/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png 590w,\n/static/ce980abb0f26bb74e7cc38c6f1564fa3/efc66/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png 885w,\n/static/ce980abb0f26bb74e7cc38c6f1564fa3/c83ae/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png 1180w,\n/static/ce980abb0f26bb74e7cc38c6f1564fa3/e515d/1669892296928-954ed8f3-b1f5-4f80-b379-b3deecf75a37.png 1430w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>这时，在组织机构菜单下可以看到 LDAP 子菜单项，它默认是关闭的，需要点击开启：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e57dae58808ee80a46219ea654c18f69/f238d/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpklEQVR42n2SXW8SQRSG9z9rsVLLQqlpJcYf4b/wxju9aOyFjUmj6FJg+Shbli2zH/P9GJbYhoZ6kieZnJk5c973THDc6vKmfU777Xu6Zx8IT95x3DmjdXJO57RH2O3R7vZotk5pNNs0mh0aR20aRyGNZsjB65CXhyEHhyEvXrUI4vkK6xwO8OyGNo8ZY5/u7o9gFC9YpveUlarx3jKcO+KFJhrcMBhNiW7GRFHMdLwknsy5Gl7yafCRq/EQJUHKCiklWimC26UiL3VdTEqN956V8IjSYLSiLMBbMORM7A+uzWd+uy/cM8Oj8c5jrX0gSJYpRSkppUYqXcsXBTgN62JNasdE5oK++src9NGu2nrjwdc8WrFZB4u7DFFsWjZotT2YiAmR+M5AXTJzP6n8escnj6sv7yNY3KVkK0EucxIZM9HX/Eq/Ead/yHOBk2CURW3kVwVVVdUYY/YPZZoYRumcftZnms+waHRlMcrV/hirdzz6h9v8jD0Et8ucdF0gCoustq9IJesOnpO14dmC8WSKEGU9EKlUncyyjCRJHmT9r/BTD/8CDevtlJ9+82gAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/e57dae58808ee80a46219ea654c18f69/fcda8/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png\"\n        srcset=\"/static/e57dae58808ee80a46219ea654c18f69/12f09/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png 148w,\n/static/e57dae58808ee80a46219ea654c18f69/e4a3f/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png 295w,\n/static/e57dae58808ee80a46219ea654c18f69/fcda8/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png 590w,\n/static/e57dae58808ee80a46219ea654c18f69/efc66/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png 885w,\n/static/e57dae58808ee80a46219ea654c18f69/c83ae/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png 1180w,\n/static/e57dae58808ee80a46219ea654c18f69/f238d/1669892373833-64bd7a12-d257-487b-a4ab-040112cddeb6.png 2078w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>随后，去到设置、基础设置、密钥管理中，分别记录下“用户池ID”和“当前密钥”。它们是登录 LDAP 服务的凭证。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c28b365f4a733a566235131f48b003e6/0486e/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACSUlEQVR42pWT624TMRSE8/AIBCppCbRFXJ4ABE+BgL8ggUqBNklz2Wz24rXX9tpef2jdkCK1f7A0GtuyR55zxqN7Dw45GE84ODplcvySZ6eveHrykuPnr5k8e8Hh5DmHk9OE8ZMTxkcniR8fHSce9h88OuT+w3HC6HwBjdT8O0QtuLi8JGD53zFqGslsdkVVS1RrsZ2jEZJpdsG8yBFdifeeEHqC7685BPwOae5DOjNgNAgtVxnaOrTp6JzHdh2l2zAXgtJv6HGE6OnxiWPsiTHeiSR4tVjRaosxHuMNs/qcX+sz5tUZl9sfZGpB7XO2Zk3RrdCxTvYGgVuWB8F1lqfXGeMwziJ9iezqPVov0KGh9Q1tELh4XfPIHYJFJdgWFaa7tux9TyMU61VO7NMtbt3brYcH3rIsREuel1gbkqBzHm0tF9Mrvp+d8+tiynS+oKwbKiGpG0Wj2h1rtO327gYezcsr5tsppRkaY3Bu6FhENJp1VpJtqsSrdUFZyRQxqQyiaRNb6xOMdQmj33nFIodMFeSNQtuA6Aqkq+hQmCgTLHI/T+sdV2aLCW0qQ7I8q1Z8my9Zyg2l7JDWkpspW7mkaJcUekUxdNesKW2G7AtUXyRuY8nPYslCZfuuj2SryLYbjLVY61INHaCIDL3UwaNaRWt0KkmIgT729DEQ6SmUY9v4G8Hhd1RCJf9aW7o+4n/8xHz4lOAvZ9eN7iN3xC7t9XEXojh8PaUpa7kXdBHsx8+ot+9Rb97Rffl6c3OXvX9j8jdDf0P+Bw9PJXlcqwgMAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c28b365f4a733a566235131f48b003e6/fcda8/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png\"\n        srcset=\"/static/c28b365f4a733a566235131f48b003e6/12f09/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png 148w,\n/static/c28b365f4a733a566235131f48b003e6/e4a3f/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png 295w,\n/static/c28b365f4a733a566235131f48b003e6/fcda8/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png 590w,\n/static/c28b365f4a733a566235131f48b003e6/efc66/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png 885w,\n/static/c28b365f4a733a566235131f48b003e6/c83ae/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png 1180w,\n/static/c28b365f4a733a566235131f48b003e6/0486e/1669892454047-a52ccc3b-3b60-4f52-b1dc-612fa26d8ba9.png 2008w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=INl2v></a></p>\n<h2>命令行测试</h2>\n<p>运行一下 whoami，得到了 <a href=\"mailto:user@authing.cn\">user@authing.cn</a>的结果，说明一切正常。\nshell\nldapwhoami -H ldap://ldap.authing.cn:1389 -x -D ou=users,o=63887ae0829d0db6835ff760,dc=authing,dc=cn -w 8315***********</p>\n<p><a href=\"mailto:user@authing.cn\">user@authing.cn</a></p>\n<p>如果使用没有开启 LDAP 的用户池和密钥，可能得到 NoSuchObjectError错误：\nshell\nldapwhoami -H ldap://ldap.authing.cn:1389 -x -D ou=users,o=620097b69a9dab5e967d0c44,dc=authing,dc=cn -w ff5a******</p>\n<p>ldap_bind: No such object (32)\nmatched DN: dc=authing, dc=cn\nadditional info: NoSuchObjectError</p>\n<p>运行 ldapsearch命令查询用户，可以得到如下结果：\nshell\nldapsearch -H ldap://ldap.authing.cn:1389 -x -D ou=users,o=63887ae0829d0db6835ff760,dc=authing,dc=cn -w 8315********  -LLL -b ou=users,o=63887ae0829d0db6835ff760,dc=authing,dc=cn\ndn: ou=users,o=63887ae0829d0db6835ff760,dc=authing,dc=cn\no: 63887ae0829d0db6835ff760\nname: duplo\ncn: duplo\ndescription: duplo\ngidNumber: 63328\nobjectGUID: 63887ae0829d0db6\nobjectclass: organization\nobjectclass: top\nobjectclass: posixgroup</p>\n<p>dn: uid=63887ae152675c6a7e65212e,ou=users,o=63887ae0829d0db6835ff760,dc=authin\ng,dc=cn\nid: 63887ae152675c6a7e65212e\ncreatedAt: Thu Dec 01 2022 17:58:57 GMT+0800 (China Standard Time)\nupdatedAt: Thu Dec 01 2022 17:58:57 GMT+0800 (China Standard Time)\nuserPoolId: 63887ae0829d0db6835ff760\nusername: test\nphoto: <a href=\"https://files.authing.co/authing-console/default-user-avatar.png\">https://files.authing.co/authing-console/default-user-avatar.png</a>\ngender: U\nregisterSource: unknown\nemailVerified: false\nphoneVerified: false\nsignedUp: Thu Dec 01 2022 17:58:57 GMT+0800 (China Standard Time)\nblocked: false\nuid: 63887ae152675c6a7e65212e\nobjectclass: users\nobjectclass: posixAccount\ncn: test\nuidNumber: 8494\nhomeDirectory: /home/users/test\nentryuuid: 63887ae152675c6a7e65212e\ngidNumber: 63328\nobjectGUID: 63887ae152675c6a\ndistinguishedName: uid=63887ae152675c6a7e65212e,ou=users,o=63887ae0829d0db6835\nff760,dc=authing,dc=cn</p>\n<p>dn: o=63887ae1f22f9b1387548e97,ou=users,o=63887ae0829d0db6835ff760,dc=authing,\ndc=cn\nid: 63887ae1f22f9b1387548e97\ncreatedAt: Thu Dec 01 2022 17:58:57 GMT+0800 (China Standard Time)\nupdatedAt: Thu Dec 01 2022 17:58:57 GMT+0800 (China Standard Time)\nuserPoolId: 63887ae0829d0db6835ff760\norgId: 63887ae1dde6eb1865bb7f11\nname: duplo\nsort: 100000000\ni18n: [object Object]\ncode: ohMSBNiUiYXu2QGLApCyiBN8VmjzxA\nisVirtualNode: false\ngidNumber: 36503\nobjectGUID: 63887ae1f22f9b13\nentryuuid: 63887ae1f22f9b1387548e97\ndistinguishedName: o=63887ae1f22f9b1387548e97,ou=users,o=63887ae0829d0db6835ff\n760,dc=authing,dc=cn\no: 63887ae1f22f9b1387548e97\nou: 63887ae1f22f9b1387548e97\nobjectClass: top\nobjectClass: organization\nobjectClass: group\nobjectClass: domaindns\nobjectClass: posixgroup\ncn: duplo\npath: duplo\nparent: Root\nparentId: 0\nparentCode: root</p>\n<p><a name=B9QUz></a></p>\n<h2>图形界面工具</h2>\n<p>推荐使用 Apache Directory Studio，如果是 MacOS，可以通过 brew install apache-directory-studio安装。安装后如果不能打开，并且点击了设置中的 open anyway还是被阻止的话，就需要在命令行里输入： sudo spctl --master-disable再次 open anyway即可打开。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/e515d/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+ElEQVR42nVUSW/TQBTOf+bOhQM3JC5cAHGAEz1QEFBaNURtQ2jSJLUTr+Nlxtt4Jk7cjfuH3iSuKlQOn0a2xu+9b3nuFY6FZXCCQKTggiMVHFkmsMpzhLaNaGGD2RbKiOFW1bhV8lHc6RptWaB3snQxuLTxa+ni3PVw7riwwwBFqbEICojAgwgDpIFvsK4KXKkabS3Rqi2u6KwlblYavaA/wOmvMY6nFiZuAIvFCJIYvGhw7mlkoYfI8yAihiut0FKxf6EVNqrGNRVcfD/H2ekY8yhGwAX8NAXjAhulUOeZufSn3eBuszYn4Xbd/Be9/eMcg7GDS9+DFycIeYpICDSyAnOWKNIEq6qELnKoPMOqLHDTrB6FKXg6izCcLTB13F1Bvi1YS+RxhMhzDd0sYuAsRJ7EWMvqUeqG8sHPPvqjEWaOBz9JERjKHO1K32tGF693z12x7l33nkBT9t4PQvwYXWI4uYAdMvgpBxMCuirh2xacy/kW85mRgKZN/K1JPAyRUiKSGHUmtpSH4xkuZhNY1gSeb0FWKaqKGw3pIn0oWGhQ8dRMt6mlAUWlkRKqKKDLEtc04fOPDp58iPB0L8WzTzme7mu8GUjcNsp07Nylk54fUiWKFJe6LKGrakv57aGHF185Xh0VeN0v8PKwxt5viaYq4Dsu/IVtzNFlYRwmDZuqNCD3t9o1ZrobovzuyykGwxE8bwHGXNQVucixltJEJusoRwwyEyY6BNJMCm4adDAuf3ZafBvZGE0tuEkON06RCWE0IsHvI7NbPzKE7xpQhAjUkFiYgl+DBIcXFs4mFi5chmXMkQhhOvLd/lJhgpmWJhXc0O3yd6Uf5HDfOcHRbIqJk2DOMsyZQJByrJVClZf39NRuDR9uRmdOq5TZZ2PKwbcDHJ2NMZguMLR8/HZjE2z6OXyetmBLG55tmY2hySg6JSFNzEmT0VZpKXHXbtA7HifoTxz8nNoYzJYYOgFc+jloBV1WRrNOu/gBSFPSjpp0m0Iy/QUifMclAP5s2QAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-171735@2x.png\"\n        title=\"WX20221201-171735@2x.png\"\n        src=\"/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/fcda8/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png\"\n        srcset=\"/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/12f09/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png 148w,\n/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/e4a3f/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png 295w,\n/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/fcda8/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png 590w,\n/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/efc66/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png 885w,\n/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/c83ae/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png 1180w,\n/static/be9d3ab456d5b0a4d5b4d1a0987e98d9/e515d/1669892760837-5365ebda-a73c-44b1-a011-97c11948885d.png 1430w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>打开后，新建连接，输入 Authing 的 LDAP 服务器信息：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f889bdbcc1d4fde2ef1895efd59a60db/1acf3/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.8108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAADQ0lEQVR42m2UbW/bVBiG/YPR2AdeNAlEB9sHpjIhIQQSSPBhSHRoAk3rWIfohKq1TZy0bhs3id/fjuPYTmI7aQaoyYV8vAo0aunWOZZ9rnMf389j5ZtPN3jwxSYPv/qcrS83efT1fX68f5vvP7rJg4232fr4Jj/dvsGj2zf4eeMtnt67xa/3brHz2QfsbH7I9p132L7zLtt33+Pp3fdRpmnCxWREUST8PZ/y16JgURUsFxXzqiLLUtL0XxXFjLIsKGazRkUh76uyZLFcori2g+kI+lGCE5X4yZxxkjA87xGHgVTguXIUgc8szygmOcU0b8ZJzixPyZKYKIpQnCDh2dmS33qv2FIXPNZeIdIZvu/heT5BECKEIBIC07JwPQ+7NmGaeJ6HYZjyWZKM8XwfZRQLYM1/r/m8wjAM+v0+g+EAz/fkcZMkkRqNRlJX8zQdk2djwjBECaOIy8sVqzVcrtYSPZ/POT09pdPtYAwsfDfAdmzpaDweM5lMyPOcLMvI84wkzdEMgYhClHrn1Wolna3XjdOqqtB1nWHfRHP2OXXaJCJlVDscj6XbmQyklIFMZiW6M8IwBij1LqvXoCtg7fDk7ITOgcYP55/QNnaxaqee03zPKJLQem1Wp59NGLgxtm29Br7hsKxKXMtFtzV2wm/paia7hyfsqTpttUvr8JCj42N6vR6apqGfn2M5ngzqWuCsLLENwUv3CXvOL/h2gmE7GJaD7TQJW5aFbdu4risV+E1FXAucFBX6IOS5+x26eYJpWBjGUKqG1RoOh/i+L49fKwgCCb4WuKgusIXOQfJYhiFiQRzH/9MVrFZdMrKwrwNelH/SDV9wKvYZhSlhGMgFb0o6CyP8sBmHhtEA1+uVhDXgNfNywaF4Qih8hIhlstepBuZJxCxtxrq7lDgeESepLJWqKllUS+KpR39ySDGtmE6nsuZqXc3LspSFXf88nusLHh4t2T6r8IIIxfNs1E4XVVWljjsae71ntM7+4EzroaotWq0WrXYbVW3T6ah06nfbbbrdI3Zfdvh9X+PFwQmO66GkI1+mZVgWhmni2DZmcCznA9PGspsSsay69VycugUdB78ulSAkDh2maSx7uiwr/gF2R8286DnfMgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f889bdbcc1d4fde2ef1895efd59a60db/fcda8/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png\"\n        srcset=\"/static/f889bdbcc1d4fde2ef1895efd59a60db/12f09/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png 148w,\n/static/f889bdbcc1d4fde2ef1895efd59a60db/e4a3f/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png 295w,\n/static/f889bdbcc1d4fde2ef1895efd59a60db/fcda8/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png 590w,\n/static/f889bdbcc1d4fde2ef1895efd59a60db/efc66/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png 885w,\n/static/f889bdbcc1d4fde2ef1895efd59a60db/c83ae/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png 1180w,\n/static/f889bdbcc1d4fde2ef1895efd59a60db/1acf3/1669892855719-5c6db1cd-5e12-4054-99ff-51c4741b3f86.png 1596w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />以及登录凭据：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/edd87946bcdb16bfda5666704a297505/016a8/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAADB0lEQVR42nWU628bRRTF/WdDK4FaqUgNUPFoAQkhKr5UAtRGqAhIiUBN3DapQho79r68j9nn7Hudtf3JyQ/NuCklUkc6uqOZnTPn3rlnBz98fpufvv2SR99/zfZ393h8/yu2v/mUB7ev8+PWdR5uXWN7631+2XqPXz++xs4XN/nz7i12733E7t1b7Nz5kCef3eSPTz5g584NBlVVMG8qjb6t6LuOs65l0Xf0Z3OapqGpax3ruqZrW7quo20bWj1/jXnHYrlkkKUpMo015k1NP+8oZMrp6BWh71HmGTLZ7GdJRCkz6iKnLvM3sSokeRqTJgmD/uyMsqwoypKzvme5WjGfzwmjCMdxmEynGKZJFEWEYUScJMxmMwzTwPVcTNPE832klGRSMlApXB2LxUIfmk4mjMdjbNsmiWNNGr+OURiTRMnmErUWhkiZMaibmvV6zcXFhYYafd/j+z6u62qVap7n+X8oJKJw8HKDJI+0OiECHQdKzfn5uSa6JFwul4xGI4bDIcfHxxiGged5WqllWUysEcZsjC2m+jKZFhSyxPd8BqvV6g3RZVSXKJJLMsexsQwD2zSxbQvbcjDdCSf5U4LcQlQWXj4liDwGSs1Vhf1ioRWplJWCqWlxNJ5iuD5BGBKJGF94vBS7nLiHHM9eMBYvCWJ3o/Btwov1mr6pGJ2c8Hw45OjwENsPOZglPDMFpuMh/Bn78c+Y0RFZmJGoxxIRMpNXCLmgljneqUsaRyQiIAkFMgrxLQPh2HiWhe/biOqUrqypi4KmKKjyHHc2U4RvpXy+RoQpTw9S0izT7ZAkCZGKaUal3KId09CUne7dpi6Zt6VucNtx/l9D1T5ZltI2hbbZVVRlSVmWVNXGCMquQ6vl/ouex69aTGOySflyqBoWRcHR0T/s7e2xv7//TqiWGg73+f2vZzx68pzf/j7ANAwGXTcnk4W2m4JSIoTQL/wuBEGgGz4IBIE3w7UNfNfZNLb6a3i+0PW6rFmWZRtISZomei1JUj1XJVEH1bcqqj3lewWV3b82UYk++mXBHQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/edd87946bcdb16bfda5666704a297505/fcda8/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png\"\n        srcset=\"/static/edd87946bcdb16bfda5666704a297505/12f09/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png 148w,\n/static/edd87946bcdb16bfda5666704a297505/e4a3f/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png 295w,\n/static/edd87946bcdb16bfda5666704a297505/fcda8/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png 590w,\n/static/edd87946bcdb16bfda5666704a297505/efc66/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png 885w,\n/static/edd87946bcdb16bfda5666704a297505/c83ae/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png 1180w,\n/static/edd87946bcdb16bfda5666704a297505/016a8/1669892942747-b1ea2177-0974-4fc4-a0a5-8076df518e83.png 1576w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />连接成功后，可以看到新创建的用户池里的 LDAP 目录中有一个 test 用户，我们接下来可以使用 Keycloak 的用户联邦功能导入该用户到 Keycloak 的用户数据库中。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/6871f/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACbElEQVR42oWSS2sUQRDH5+LBu5/Ckzf9GoIBL15FDxJzCh5EBMGDYCAXQYiPHPRgCEGDKHjQeDCB+GDV3TXZzc6yu9Mz3fPqme55T/+lZzchBMGCmpnuqqn6Vf/bcJ1RzXmAVEoVeAyOTeAxBmrboITAIQTMcWBPxnCsCZhjw2MUnsuafR4ESEWsUCZAGlWGFByxkKqqSmR5hjJPUOQCe70/ILYF5lEMhgcYjsZgAUcYxRAiRlGWsBwGm1ggXojF9W11d/MrjA8/HPVux8RWy1Kff9r4+DvC9j7Fzq8tWHwAEpv40vqECfPAswpJUaEsClRVBZu6DfkB4+r0/HOcu/NSGQMSgvgJAlnDFxU8qeBFOTrdDsIwRMhDtFotHPT7cBmF7/ugjCFJElDXB7UJJn6Miw/XsLDyGgb+YXVVYDQaQcoEQsjm23YcuK6HIAwhhEBZllNCYoFFCS4treHGyiYMja6UOnJt+nza7TaiOG5+7nS7ME0T5nAIixBwzlHXNSyHwramBS8vr+P6k/cwdOBkQd2dUoosy5CmKRhj8DwPsW4gZUOuc4RMkGcpnCDC3IMXuLL8CsZhkeOmqbUXRYF8JkA5WxdFOd3P86P8MQswd/8pbq2+hZFlaRPUSbqrHlevNY1saKauSafECZI0Q5plTb42GnBcWHyEa4/fwHDssdKqBUGgoojDD/h0NBEjSWRTIEvThrKuNaUuVDUq7/X2MRqa+NbeU2euLuH87WfqcOTpYza+Ptf/mabr9fsY9Pax2+nh1PyqOntvoxGlnAmiDoXRBU/68Zh+a2J9C6SIQfxILWx8x8313eIvvUh7s3WLV98AAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/fcda8/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png\"\n        srcset=\"/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/12f09/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png 148w,\n/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/e4a3f/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png 295w,\n/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/fcda8/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png 590w,\n/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/efc66/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png 885w,\n/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/c83ae/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png 1180w,\n/static/1eed28d848c3dcd0cfb61ba0a5c85a0a/6871f/1669893328791-6eddc0f2-fa45-439f-9d37-d0a1d779fe68.png 2688w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=gr3VA></a></p>\n<h1>实验步骤</h1>\n<p><a name=AcTxR></a></p>\n<h2>一、在 Keycloak 里添加 LDAP 提供商</h2>\n<p>在 Vendor 栏选择 Active Directory 后，会默认填入多数选项。在输入 Authing 的 LDAP 服务地址后，点击测试连接，可以看到连接成功的消息：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7c3629ac4c1f0ef9049de3eff083dd0c/2e92a/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42oWRzW7TQBSF/RZtJVoWDZsWRIuglCpdUDZsWPASCIkH4Bka0iQWqdN2B4iyAHUFEg/AG7CBLUJRUFwn/knsmbH9IV9iFwISVzq6M6OZT+fcsXbqd1m7doNHj59wevqGntOj4xzztHXC816XZrdF+9Cm49g07CYHdhvHOeLQ6YmOjk948fIVb9+d8fH9B6w7u/dYXK7RsrtI5bm0MIOMlCgPSfIERUJCzP/Kuv/gIesbt2gcdOTAHQ7xgpCvwwCVKFKTYrSppJQmSRKRMeYPpWmKtV3f43JtrQJ6rksYJ3z5McIYTZZlcrFUsS/1K1Auqhxev7nDwqVVGs2ZQ9dFK0Xkj8VFCfwdVML/Cdze3ZMZlg5Hnkccx5XmYxXSWkufBxZdgAvLq+w323LY7/eZTCbyYN7RX9HznDSbA25u1VlcqbH/rCU/fO55KKUIw1AcFuvSUSWt0TOHZZVQa31ji6WVK1XkwWAgoNFoJOtiptPpVMCFCqDSGvKUT98CXn8e4icX8a2rm7dZKhzOPiXwfXkQRRG+7zMejwmCQByXoygcZ6nhfGr4HihMdhH5J9sgv9qseYc8AAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-181224@2x.png\"\n        title=\"WX20221201-181224@2x.png\"\n        src=\"/static/7c3629ac4c1f0ef9049de3eff083dd0c/fcda8/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png\"\n        srcset=\"/static/7c3629ac4c1f0ef9049de3eff083dd0c/12f09/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png 148w,\n/static/7c3629ac4c1f0ef9049de3eff083dd0c/e4a3f/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png 295w,\n/static/7c3629ac4c1f0ef9049de3eff083dd0c/fcda8/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png 590w,\n/static/7c3629ac4c1f0ef9049de3eff083dd0c/efc66/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png 885w,\n/static/7c3629ac4c1f0ef9049de3eff083dd0c/c83ae/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png 1180w,\n/static/7c3629ac4c1f0ef9049de3eff083dd0c/2e92a/1669893456641-6cd41d19-cb06-405f-8491-5ea6c33fbb11.png 2508w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>然后，输入 Bind DN 和 Bind Credential 后，点击测试登录，可以看到登录成功的反馈。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c0c56bafca67238b449b4b3ed4906159/bb33f/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR42n2S3W7TMBzF+yiABGhobExqKzTQxMWExPgaH+NNELCVrKFUe4GJK16AG96AZ+AGcbNF6w0JzYLybSeOnYP+bh3SDbB05MT2/+dzbHe6/VtYudHD5t0tjMcHsPZt2PYIo9EY9rsR9uy32N0fYG9oYTC08Hqwi5dvXsGyhnqt7q0h3o8PcHj4AZ3e+h1cuLKMB9s7ME1KqXtecJwWPn6xAFEZacUiRq4y/Kt1ujc3cOnqdWw9egZRCmRpiul0iqIowDlHWZaoqgpCiEY0RvMkmiMDRp31jU1cnDskWBRFiOO4KWwvlpVc/JcSSilUqoZUNeq6Rmetf7sBpnGMMAyRJIneneDGCW3QOK3+fAN1E1cDl1a6OvL97R0UnGsgOSRIEATwfV+PmehGGqYk3KTAx68+vpxEszO8ttqbAR8/10WcMe2QvsmhEW1C42maNmcpqwpMSExCDj8rzwOzLNcFBKCCPM8XXBm1zxD1mchtIC2gqFmWaSD15uBJBtKOTeMLz8YA6dlIpSDKAlEYophHTls3T5Fpk7ZbAgpVQ8j6vEPGmC42lxDHSQOlN0kyN16SOIMbMXz6dorP3wNETMyA+tk8eaHPjJwQ5GyU/zU5l468vNbH5aVV3Hv4FMeOA8dxcHR0jJPJBJ7nwXVdrR9/kZn76XnN2t80E4Lt2S4SVwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-181201@2x.png\"\n        title=\"WX20221201-181201@2x.png\"\n        src=\"/static/c0c56bafca67238b449b4b3ed4906159/fcda8/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png\"\n        srcset=\"/static/c0c56bafca67238b449b4b3ed4906159/12f09/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png 148w,\n/static/c0c56bafca67238b449b4b3ed4906159/e4a3f/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png 295w,\n/static/c0c56bafca67238b449b4b3ed4906159/fcda8/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png 590w,\n/static/c0c56bafca67238b449b4b3ed4906159/efc66/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png 885w,\n/static/c0c56bafca67238b449b4b3ed4906159/c83ae/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png 1180w,\n/static/c0c56bafca67238b449b4b3ed4906159/bb33f/1669893613524-aed510bf-cd32-4e2f-883d-b61710996c38.png 2208w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接着，将 User Object Classes 从自己填充的“person, organizationalPerson, user”修改为“top”。点击保存，就将该 LDAP 连接保存了下来。\n<a name=aKQur></a></p>\n<h2>二、同步所有用户</h2>\n<p>随后，可以点击“同步所有用户”，稍等一会儿，就能看到反馈信息，比如：成功同步了一个用户。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVR42o2T22oTURSG+yIqSEFMLwyIgo8iXgiKES2+ii8gCIpWzImmidIIXniVOzEeShGvvNEmQzLHvfcc9nyy9iRpUxW64GfNDLO/9a81azbqV29waavOzVu3Ge4PaTZb7O712Nl9RbPXojPo0u53XHbXgy6tfofmXpu3+2940RvyeGdAf/ie0WjERu3KNc5dvMy9B49wUZYuxTbC1z6BDvCVT2gCojQkyRNMqVFWufd+KvjwKyOtTrOxVb/Ohc0adxoPMcYwn88JwxCjDFEYkcQJcRSTJFU22pDnOXmWk2UZYMUF2IKiKCrg+c0adxvbrkIQBMRxjDEapRRlWWKtXUkOOeBChS3JihK76GwFFIcSSRwvgIYoitC6AmutXJbn4qxSzsmQ4scO7y8c+r4DCkjcClRGEJ8oJC6zPIciZ/w7oXs44/NRsu5QWtZKMZvN3BzlULloY1l9Kde6tVBaJnHKdy9hGqdulmtAceB5HtPp1Dk5DfqX/t9yYxulEudOlKbpmYDWOa7yGlA+isztNOxscVxgzaGABLhcF5ljZHJ8XWmuM2Yqc1nuA3mmMkxuV9C/9nAZshayzO9+zHj5xaP5zeP5eMKTj0c8G094/dWjfeDx9NOEQ6/6a6TtP6dIScWOoyCvAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-181330@2x.png\"\n        title=\"WX20221201-181330@2x.png\"\n        src=\"/static/33c45bc22f524b8e9f4fe8cc72cb3926/fcda8/1669893693757-48aa1bc8-e3c1-4904-a239-a29db054ce0a.png\"\n        srcset=\"/static/33c45bc22f524b8e9f4fe8cc72cb3926/12f09/1669893693757-48aa1bc8-e3c1-4904-a239-a29db054ce0a.png 148w,\n/static/33c45bc22f524b8e9f4fe8cc72cb3926/e4a3f/1669893693757-48aa1bc8-e3c1-4904-a239-a29db054ce0a.png 295w,\n/static/33c45bc22f524b8e9f4fe8cc72cb3926/fcda8/1669893693757-48aa1bc8-e3c1-4904-a239-a29db054ce0a.png 590w,\n/static/33c45bc22f524b8e9f4fe8cc72cb3926/efc66/1669893693757-48aa1bc8-e3c1-4904-a239-a29db054ce0a.png 885w,\n/static/33c45bc22f524b8e9f4fe8cc72cb3926/c83ae/1669893693757-48aa1bc8-e3c1-4904-a239-a29db054ce0a.png 1180w,\n/static/33c45bc22f524b8e9f4fe8cc72cb3926/90eea/1669893693757-48aa1bc8-e3c1-4904-a239-a29db054ce0a.png 2254w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=NJant></a></p>\n<h2>三、验证同步过来的用户</h2>\n<p>在用户页面，可以找到从 LDAP 同步过来的用户，会发现用户名被映射成了 duplo，即用户池的名字，而不是测试用户的名字。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fdb99b443ba70f12e8d5682ffc4f6567/d8ced/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVR42qWPXUvCYBiGd9gUnB1U0KcagawSP7INbR30t/KvtL37JxGdRVhHQQQeCH7gNqXaMOa8otcCobN64OK6eXgO7kepmk10/ZBcLs/a+gaatkpGy6JpWelMJouqpllRU79QU2l5s7m1g17UKRb2UYqlKrv5A7b3Cly2WriuwHEchBC4Qizsut8s5wVCONi2zZVt4wiBUjMsSrUGVcPi6fmF/45SOT3jxDznuGJwfXPL63uI5wd0Oh36/T6+7xMEAZPJhOFwKO15HqPRiPF4LHeDwYBut0uv10P5alYzLY4qBnf3bWLgLZryMZ2SJAlxHDObzSQ/edlhGEqiKJIo5XoT07qgXG/QfniUtefz5M8vfwJ+RWjlN34tGQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-182149@2x.png\"\n        title=\"WX20221201-182149@2x.png\"\n        src=\"/static/fdb99b443ba70f12e8d5682ffc4f6567/fcda8/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png\"\n        srcset=\"/static/fdb99b443ba70f12e8d5682ffc4f6567/12f09/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png 148w,\n/static/fdb99b443ba70f12e8d5682ffc4f6567/e4a3f/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png 295w,\n/static/fdb99b443ba70f12e8d5682ffc4f6567/fcda8/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png 590w,\n/static/fdb99b443ba70f12e8d5682ffc4f6567/efc66/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png 885w,\n/static/fdb99b443ba70f12e8d5682ffc4f6567/c83ae/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png 1180w,\n/static/fdb99b443ba70f12e8d5682ffc4f6567/d8ced/1669895980206-43a57d73-d01e-4f3a-92b7-2e19b0b5ec2c.png 2652w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f300d80d04454a4e1ba3a35a8d369cc/d185f/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaklEQVR42qWQyUrDYBSFs1QxbXFYOdAilFpqa5M0qSFWN76UiM+RJnkPcS1OXQiKVBT37aIZ25ipzZH8QakuXMQfPs7lcDn3/pdiBBGVShXFYgmra+vI5fKg56HzqUd/1QXiL9M5LCwuoVBYwebmNnbLFZSLJVDVBoviThkbWyWcnp1DVVUoSpdogqap3/VvNE2DqiiQZRlyV4aiqqBY4RB1VgQjdPD69o7/PooRJHDtDmpNAde3d/B8H7o9ge04GI/HME0LjuPAMEzougHLsgi6rmM0GpEe27aJep6XbpiE1pg2evc9BL4HdzKB73mkIVHf92GaJgaDAYbDIcEwDOIlmgxIvESpJi9BPDoBK0i4uOrBDWcIAx9hGP5JFEWYTqeEIAjgui4ZTO23RDQ4EXVGwOXNAz6iGPFslv2GfCfdrs4d4KXfJ2YyNY7jTFCceJzesMnj8el5LhDZAhlewh7TRrXR+hGY9cufIHGGLT4KSysAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-182031@2x.png\"\n        title=\"WX20221201-182031@2x.png\"\n        src=\"/static/0f300d80d04454a4e1ba3a35a8d369cc/fcda8/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png\"\n        srcset=\"/static/0f300d80d04454a4e1ba3a35a8d369cc/12f09/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png 148w,\n/static/0f300d80d04454a4e1ba3a35a8d369cc/e4a3f/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png 295w,\n/static/0f300d80d04454a4e1ba3a35a8d369cc/fcda8/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png 590w,\n/static/0f300d80d04454a4e1ba3a35a8d369cc/efc66/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png 885w,\n/static/0f300d80d04454a4e1ba3a35a8d369cc/c83ae/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png 1180w,\n/static/0f300d80d04454a4e1ba3a35a8d369cc/d185f/1669896726372-9d8909ca-a101-45a4-813e-b12f1d5f490a.png 2686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>这是默认行为导致的，它将 LDAP 中的 cn 映射成了 Keycloak 中的 username。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVR42p1SyXLCMAxNGAJDQnY7ix1bNk0Cbaf//3mvIx0YeqSHN5Is6Vlb0ugeZtvQOwdNBHPfYcIK8hu2xcE7wrqu8N5jWRaEEDCOI4wxICLRb7cb5nkWf2KNRSSCswvMNOMjRNxiwONxB8UoREzCkhNZcnJZliiKQsD6+XxGmqZIhknDOgtPDl3fQo8KbdtK0OFwQJIk78F/a8SfGTqWKOcMF5W+T/KH0HmQJ2ilEUNE13ZSHUNaeJcwfi6g3WAiBRM1XJxl0E3T/K/C+GWwrAOm0GOkDsrWuFwu/2/5mpco8iuaukV5rdDUDeq6frad57lskiVXzeCl9X0vcVVVPTedZRkSpRUoEIZhkKCu66CUEv10OuF4PEogS7YZfCIMfn+FXIW1Ftu2ydxYZ8QY5Uj5EyZ3zmHfd2itxeY7nKZJ/Fzda8u/+7nnPRLOpYYAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/fbffbbe3261f5bfe371209be7c5bd78a/fcda8/1669896186225-0f5c2f5f-2934-4179-ab4b-a35492dfd688.png\"\n        srcset=\"/static/fbffbbe3261f5bfe371209be7c5bd78a/12f09/1669896186225-0f5c2f5f-2934-4179-ab4b-a35492dfd688.png 148w,\n/static/fbffbbe3261f5bfe371209be7c5bd78a/e4a3f/1669896186225-0f5c2f5f-2934-4179-ab4b-a35492dfd688.png 295w,\n/static/fbffbbe3261f5bfe371209be7c5bd78a/fcda8/1669896186225-0f5c2f5f-2934-4179-ab4b-a35492dfd688.png 590w,\n/static/fbffbbe3261f5bfe371209be7c5bd78a/efc66/1669896186225-0f5c2f5f-2934-4179-ab4b-a35492dfd688.png 885w,\n/static/fbffbbe3261f5bfe371209be7c5bd78a/c83ae/1669896186225-0f5c2f5f-2934-4179-ab4b-a35492dfd688.png 1180w,\n/static/fbffbbe3261f5bfe371209be7c5bd78a/2d86d/1669896186225-0f5c2f5f-2934-4179-ab4b-a35492dfd688.png 2578w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />而对于 Authing 的 LDAP 设置，它其实是有 username 字段的，所以应该修改一下映射器。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVR42o2Sy07DMBBFQ95J7cR5NWledUsLSBQWbBErfoAVP8CW/99edF25EAkJFldjJfaZmTvjaK0xDAPW6zXqukbTNJBSwnVdOI7zp8qyhhQCRZ5BSQEnz3MIIaCUQpZlKIrCnMMwRBRFixjHMdI0NVqtVkiSBL7vIwgCE13Pg1NVFfq+NxUSZsXvTEQYQXxAEKunmJyRYN6TUpj/Ttd1OB6OWDcNNpuNgc/jFn03QorMSOUK0zShLEsDYVfWGoIXNozzAL3X6KcRs94a4OFe4/o0Qd+O2N1MaIf60gErIoTwc2VyCdw/brB76PH++YGXt1ekaYLxSWL3rNCdVmjvBNQQw/Nd4xXbp5+e5xkbrLeXIU7zhKquoAqFOInPxkcCwVWMwI0Q+QniMDH+cAg2Urxrz0xggPM8G+/oJadrYpH/a2V+ld5pcBfpEdW2rfGIrdj1sJ7x/D1VeVmdBZDTY5WMXHA7QS45H9Anrg4fMslP2f37CfwCBOzmszE+logAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/11492fa51987d7745ea753fe7d48bced/fcda8/1669896269612-83290541-b180-40a8-9940-bab980942b97.png\"\n        srcset=\"/static/11492fa51987d7745ea753fe7d48bced/12f09/1669896269612-83290541-b180-40a8-9940-bab980942b97.png 148w,\n/static/11492fa51987d7745ea753fe7d48bced/e4a3f/1669896269612-83290541-b180-40a8-9940-bab980942b97.png 295w,\n/static/11492fa51987d7745ea753fe7d48bced/fcda8/1669896269612-83290541-b180-40a8-9940-bab980942b97.png 590w,\n/static/11492fa51987d7745ea753fe7d48bced/efc66/1669896269612-83290541-b180-40a8-9940-bab980942b97.png 885w,\n/static/11492fa51987d7745ea753fe7d48bced/c83ae/1669896269612-83290541-b180-40a8-9940-bab980942b97.png 1180w,\n/static/11492fa51987d7745ea753fe7d48bced/16529/1669896269612-83290541-b180-40a8-9940-bab980942b97.png 2506w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />以上是用 ladapsearch 查询的结果，通过 Authing 的网页控制台也可以看到 username 字段：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnklEQVR42qWR224TMRCG93F5Aw5CUamq0lShFLQ0gQroi3DBGyDEPVxUgjYJSdbrw9pjf8je3YAE3MBIo/XMjv/5ZlzNnr7gvH5NvXjL0WzBw6NnHJ7OOTipmTy+YDK95GA6Z3L8nEfTmnuHNXfuzjl+MudkVnN2fsHi5SVXr95wdv8B1U5pRjMBNjrhAS3QBmilP6uOkr/ewLuP/Nmio7pdK1ptMLbDd46m6eMUIzFGSJFUPPUxvYsIEiPOdTiref/B8OmLp/q2sjQ6oG2gtYmmdTRKoVqNNpau88WzQIGICYmpNBibRBE+f/XcfA9U1zeKrfIYJ6w2BtU6IBFCIIiUr8hAm/8MQn+zarttCokPwnK5ZLfb7S+NrrUlBBmIElkuj5rJx1ymjilRbXctxno6H9DaoJTGWkeQWEQyXRb0vifOjTOtdR3ml7ow5Kvb5Rrr8p5CKcgXS0eJ+1EzzRiXXEqFLovmh/lZm6hW600v6EMh6wpJ7Pcnsi8e49/yYciNhJttg3UBN7ymMbZ/uX/wvM9BsB85C+aR/8d+ACR+RlRcRdKhAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-181512@2x.png\"\n        title=\"WX20221201-181512@2x.png\"\n        src=\"/static/0a760b67c12653570817d335e45b0b33/fcda8/1669896392734-aabadc78-4378-4183-a9ff-81ba781a14eb.png\"\n        srcset=\"/static/0a760b67c12653570817d335e45b0b33/12f09/1669896392734-aabadc78-4378-4183-a9ff-81ba781a14eb.png 148w,\n/static/0a760b67c12653570817d335e45b0b33/e4a3f/1669896392734-aabadc78-4378-4183-a9ff-81ba781a14eb.png 295w,\n/static/0a760b67c12653570817d335e45b0b33/fcda8/1669896392734-aabadc78-4378-4183-a9ff-81ba781a14eb.png 590w,\n/static/0a760b67c12653570817d335e45b0b33/efc66/1669896392734-aabadc78-4378-4183-a9ff-81ba781a14eb.png 885w,\n/static/0a760b67c12653570817d335e45b0b33/c83ae/1669896392734-aabadc78-4378-4183-a9ff-81ba781a14eb.png 1180w,\n/static/0a760b67c12653570817d335e45b0b33/ddb69/1669896392734-aabadc78-4378-4183-a9ff-81ba781a14eb.png 2684w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABh0lEQVR42n2RW24TMRRAZ9msgR2EECE1QfkiqQZSRYWyD/6BljTztB3b14+DMkkGilosHV3b1z7Xj+JqWfJh/YmPm1s22ztm70um8xXvliVvF2veLG6YLbdMr1bMFmum8zWvXpdM5htW1yXX5Q2fv3zlbnvLejKhaA0o47k0n0GABIQz8Rwvc9/uwUSebUXTGfa1xhiLtQ7xDnGWGARyhpxGcoqQ40mdIzGeSCkRYyKkTPFQOX7sLK2O6INQVRXfdw+0WmGjoMRyCJ6YEinlIYaYxvFRlnLGS8JLpuiU5bFW6IPHS8SHyM72VLqlNj2dO6CcxUv4LxLCIC+0sbSd4mD9kDDW8Us3GNUjEgghEUJEQjxtDmGMcp6/5I7XLjplaFqFdYL3f4RK9+fK8UX+zo/CfdWwe9zjfMB5GYT3pqFXHc57rMiz/FtsFDZtT9fr4YRHobaWn7qm6VuUPaCdRTs3vOMR7U996wWR+OQdB2FVt9RNN17Zi9A4TWc1IjIseonwhDj8+m9wZPvY5x/wTwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-181528@2x.png\"\n        title=\"WX20221201-181528@2x.png\"\n        src=\"/static/db86b1aacac2de2b239b3e77115e9d51/fcda8/1669896369706-be00cbcf-f4b3-4fe7-a424-5b900bf360ad.png\"\n        srcset=\"/static/db86b1aacac2de2b239b3e77115e9d51/12f09/1669896369706-be00cbcf-f4b3-4fe7-a424-5b900bf360ad.png 148w,\n/static/db86b1aacac2de2b239b3e77115e9d51/e4a3f/1669896369706-be00cbcf-f4b3-4fe7-a424-5b900bf360ad.png 295w,\n/static/db86b1aacac2de2b239b3e77115e9d51/fcda8/1669896369706-be00cbcf-f4b3-4fe7-a424-5b900bf360ad.png 590w,\n/static/db86b1aacac2de2b239b3e77115e9d51/efc66/1669896369706-be00cbcf-f4b3-4fe7-a424-5b900bf360ad.png 885w,\n/static/db86b1aacac2de2b239b3e77115e9d51/c83ae/1669896369706-be00cbcf-f4b3-4fe7-a424-5b900bf360ad.png 1180w,\n/static/db86b1aacac2de2b239b3e77115e9d51/d185f/1669896369706-be00cbcf-f4b3-4fe7-a424-5b900bf360ad.png 2686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />要修改 username 映射器，可以在 Keycloak LDAP 的映射器标签页找到 username：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCElEQVR42p3S/0rDMBSG4d7/VXkJiiDKmNtsnDq7tfl5kjXpK936R8dUxAMPX8iBQwinMjFjQ0TLkSCCc45hGBhrzL9gyjIMVN5a2k7jvee/NczOVUrp9Doridz39DM5Z3LJ58z5ojc3lMzBJx52nurQaiQEurbDaIO1Dmsszjp0p9k3+9P9uWevGGMQb1nvWm4WO6pXbfHiCNFfkBSw3qC2NbXanFIkEGO8IjHSpwj5SLU0ikZqGlF8ipqypomKD79h8XbPY33L0/aOQ3wnxfTj0FGltKZ1HVYMbsZHi3YtG7Vi9bJkrZ4xrpsGyLdDR1Uq4OL46dMalMm4BrkQgpz5gIhQSvnVF3jRbV2QZvSjAAAAAElFTkSuQmCC'); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/a3e82a9c170b6da456063bcc133fcfdf/fcda8/1669899971435-6ed534c3-5229-4c39-86e0-2c9caf3dd285.png\"\n        srcset=\"/static/a3e82a9c170b6da456063bcc133fcfdf/12f09/1669899971435-6ed534c3-5229-4c39-86e0-2c9caf3dd285.png 148w,\n/static/a3e82a9c170b6da456063bcc133fcfdf/e4a3f/1669899971435-6ed534c3-5229-4c39-86e0-2c9caf3dd285.png 295w,\n/static/a3e82a9c170b6da456063bcc133fcfdf/fcda8/1669899971435-6ed534c3-5229-4c39-86e0-2c9caf3dd285.png 590w,\n/static/a3e82a9c170b6da456063bcc133fcfdf/efc66/1669899971435-6ed534c3-5229-4c39-86e0-2c9caf3dd285.png 885w,\n/static/a3e82a9c170b6da456063bcc133fcfdf/c83ae/1669899971435-6ed534c3-5229-4c39-86e0-2c9caf3dd285.png 1180w,\n/static/a3e82a9c170b6da456063bcc133fcfdf/d6602/1669899971435-6ed534c3-5229-4c39-86e0-2c9caf3dd285.png 2222w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />点击进入发现果然是将 cn映射成了 username，修改成 username并保存，再重新同步：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABRUlEQVR42pVSy26EMAzk/z+ph/5D71V7qLZSxZI3IYmdTOUgql2gr0gjByseZmwPV+PwPhlIvFqPDxOgrYPWGjHGHzHP8wFDTgnB+/6B1iCntdZRa+3xP2dYiwEiQikFWhsorWGM6Xdr7UFFCKG/v/35hkGSQmSUApXSCYw1cN714r21GCUGMPMX4Z3CnDOUUpiUQqECYyyiz8iRkRMh5XxEymCu54SSEAtKTaDCMNHjaXnApTzDk0fhCmLucb1XJGJwbeeE0nixJSqZCM5o+Kwx1hdM9RWWGGMCVG5QGZgyUFZxa9/2Q1mWpfftOo6Yl4Q35cFbBQBuDdxwh43kbAM6oUw0OAe3FDxeAgoRahVbjCars8PtOh0sp5T6EgupWM5L7CshRTLJPbb8t4SSEJUCeaiUhvfhT0t8avns0WbpN5wp/ATafa19AsyiYgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/6286588df2e09e0fd9b4544cdf029e4b/fcda8/1669900018125-6d061e87-a2b1-41dd-9612-725ab148f30a.png\"\n        srcset=\"/static/6286588df2e09e0fd9b4544cdf029e4b/12f09/1669900018125-6d061e87-a2b1-41dd-9612-725ab148f30a.png 148w,\n/static/6286588df2e09e0fd9b4544cdf029e4b/e4a3f/1669900018125-6d061e87-a2b1-41dd-9612-725ab148f30a.png 295w,\n/static/6286588df2e09e0fd9b4544cdf029e4b/fcda8/1669900018125-6d061e87-a2b1-41dd-9612-725ab148f30a.png 590w,\n/static/6286588df2e09e0fd9b4544cdf029e4b/efc66/1669900018125-6d061e87-a2b1-41dd-9612-725ab148f30a.png 885w,\n/static/6286588df2e09e0fd9b4544cdf029e4b/c83ae/1669900018125-6d061e87-a2b1-41dd-9612-725ab148f30a.png 1180w,\n/static/6286588df2e09e0fd9b4544cdf029e4b/3dfa7/1669900018125-6d061e87-a2b1-41dd-9612-725ab148f30a.png 2028w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span><br />如果这样同步到的还是不对，可以再检查一下对用户的选择器，userObject 是否正确。前面我们配置了 top，这样有问题。通过仔细检查 ldapsearch的输出，我们发现 Authing 配置的 userobject 是 users，在 LDAP 的配置里更正后，再次重新同步，可以看到，Keycloak 里的 LDAP 用户的用户名已经更正为 test：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvUlEQVR42p2SS2/TQBSF/UdA0JbmacdEhEUqEQQs+ANILFpoVEqR+I2IBYvCFuokpYJuqJIWEsceP2J77A/NhEQtjywY6ejee8ZzfObeMeqmjcLt5h0adhPTbDLnGpimTa3e0PmCm9c2pjWvS+UqlarJZqlKrW5hVMwmNzYqPHm6zSfnmA8f3+H0jxgMBhr9fn8Zf4fie70ejuPoqDjDbm2xVrLo7r+iSOHz7JAfnPK/y2i1O6yVLXZ2XzBL4CIeceS/Rcbgei5hGDFxXTzPIwgCoihCBAFhFOk6DEN8ITSXpinGVucRNzfr7HT39R/yIuUkfk+SzZhOPVzX1QeFEMRxTJIkV6BE/nC4XrZ41n1JQQE5DLxDRDohmWVaJM9ziqLQUUqpcTlXewsYnYePqTVabO/OHSrBs+kXvqenOk+zVLtYBSWklha8276vHS4Es1RyMTnja3TMuciQMls6+ReuCKopX9+o8nzvQJO6V0JwIs55822qmvrr49XTXYga7XsPuFWz2Tt4rQl3MmE8HlNISRgEZDJfHliFpUM1lGvrFT0UNQDf9xHC170ZDoeMRiP9NNTVsiz7Ky4L/gTTZ+WORq2WtwAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/52e1113a76d02126a75d2c9831d60c03/fcda8/1669900608123-902a1a87-a4ef-48ce-9ad4-41fde4e0c0db.png\"\n        srcset=\"/static/52e1113a76d02126a75d2c9831d60c03/12f09/1669900608123-902a1a87-a4ef-48ce-9ad4-41fde4e0c0db.png 148w,\n/static/52e1113a76d02126a75d2c9831d60c03/e4a3f/1669900608123-902a1a87-a4ef-48ce-9ad4-41fde4e0c0db.png 295w,\n/static/52e1113a76d02126a75d2c9831d60c03/fcda8/1669900608123-902a1a87-a4ef-48ce-9ad4-41fde4e0c0db.png 590w,\n/static/52e1113a76d02126a75d2c9831d60c03/efc66/1669900608123-902a1a87-a4ef-48ce-9ad4-41fde4e0c0db.png 885w,\n/static/52e1113a76d02126a75d2c9831d60c03/c83ae/1669900608123-902a1a87-a4ef-48ce-9ad4-41fde4e0c0db.png 1180w,\n/static/52e1113a76d02126a75d2c9831d60c03/820f7/1669900608123-902a1a87-a4ef-48ce-9ad4-41fde4e0c0db.png 2126w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a name=eaVzy></a></p>\n<h2>四、查看 Keycloak 的日志输出</h2>\n<p>可以通过日志输出，清楚地看到同步过来的过程，以及属性映射的过程：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b10d74196b05b8c4ea174710b54cc5f/d185f/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVR42oWS227bMBBE/f+/1pcARZCktizbsSxRFKkLJZESL6eQjKQF+tAlBgPuDhfE7B60GqmKji9umoG6GRgGSz84evMvhtExTAuDmdF6QqkJ3c577rCsgbYdMcYy9JaumzjfKqxbcYvfeVk8q4+sPjyxfsE/a8uf3CGmhHWO1XtSisQU2cKHQIgbIjFuufR9/o7tvmmf7xOHlEDpHtkoGq1plKLtBoxxzJPHWo9z4ck2YW1itgvTvDDP2+8j65p2zd7QRkMmfvJxf+X4eOMs3rnIjKw8cSxeORYnskdGLi5k1Q8uxQvFo0HIloesuMorhb7TjM2zoQuGc/nCVeTkZUZenbiInOP9F8fPF46fZ7LizE18chVX7uKDSkjabkR1HWVbUqgCZdrdgsNmj9SKWteoXiHbTdzTNIa6NtSyQ8p+57ouEbWiFBohNbVs91pV6X2Ym32HkDy5eier37npE+V8YXTjvhKDmTDj/I1+yBmMxIyOcbLfmGbHZNdnw21Czm0GW0IK3E41+VvF/yLGhPeBEOIOt69W4Dey2rG9Fg6EmgAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WX20221201-181908@2x.png\"\n        title=\"WX20221201-181908@2x.png\"\n        src=\"/static/7b10d74196b05b8c4ea174710b54cc5f/fcda8/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png\"\n        srcset=\"/static/7b10d74196b05b8c4ea174710b54cc5f/12f09/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png 148w,\n/static/7b10d74196b05b8c4ea174710b54cc5f/e4a3f/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png 295w,\n/static/7b10d74196b05b8c4ea174710b54cc5f/fcda8/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png 590w,\n/static/7b10d74196b05b8c4ea174710b54cc5f/efc66/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png 885w,\n/static/7b10d74196b05b8c4ea174710b54cc5f/c83ae/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png 1180w,\n/static/7b10d74196b05b8c4ea174710b54cc5f/d185f/1669896446197-6f595fc0-f876-4bbe-9dc0-b639f880d8b0.png 2686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>如果有导入用户失败的情况，你也可以通过 Keycloak 的日志排查原因，如果日志不够详细，可以用 Debug 日志级别来排查。比如输入了错误的 <strong>UUID LDAP attribute</strong> 值（将 ObjectGUID输入成了 uuid）。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/206d223afa677bfcbff57ea7b113b5c0/813c1/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJElEQVR42l2PSU4DMRBFc/+joBBgwwXYgECAEIOYEUlQena347ZddvshOmEQX3qqqs1T/cl0uscQA6tVRqcVtS2obUnhlyzcAyv3Rubfyf2Cwn9Q+RW1L1BSooLlZQ3vJqEkIQNMvoSQKIuKrq+Y6yWv7ZIbfcFpe8Rle8ZVe851e8Vdd8t998Bj98yLfqWNmiaAS4xJKTHZ3TsYjyzLMKbHuh6tO6SPJAcMf4hAgBQ2d6Yjh08NJws9yr4ymc42wqauMcbgnKMsK/Iipyhz6qai7RSNauhtjwTBiydGoTLC8bzjJje/wp2xMiilMGaNk8DaOqwEei/0TrB+s7sQkTiM+DjwP2Pl6Wz/R2itRURYG0OMkRiHLfFnhm9CGAXDlu8PPwGdBMpHNZjNFQAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/206d223afa677bfcbff57ea7b113b5c0/fcda8/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png\"\n        srcset=\"/static/206d223afa677bfcbff57ea7b113b5c0/12f09/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png 148w,\n/static/206d223afa677bfcbff57ea7b113b5c0/e4a3f/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png 295w,\n/static/206d223afa677bfcbff57ea7b113b5c0/fcda8/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png 590w,\n/static/206d223afa677bfcbff57ea7b113b5c0/efc66/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png 885w,\n/static/206d223afa677bfcbff57ea7b113b5c0/c83ae/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png 1180w,\n/static/206d223afa677bfcbff57ea7b113b5c0/813c1/1669896857164-d6b8324d-df2f-4943-9456-909722db794e.png 2004w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />会导致如下的错误日志输出：<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4dda2fb1d8bff3c7047a5ceea442f81a/12e1b/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPElEQVR42m2PWVPaUBiGMxUUUGstYBVIWExYg0jCXoHkZINEWQIu/WvtcN//1pmS8Xy5Pm2OW9vpxTPvec/FM+/H2Db67tjo67WjbewpesUJuo02NzfG5sv9crOYW/R/Yo031n+YTJTN0la+MVbpgiChR+zGiBjVATHFATGqfTLmW2R8LtNExQ4ZF2Qyykukn66TXkokvbP6E6k3Bqk6YdQPLGm8535IpxlPSrLeSzbjae8ymfaaJynvMpH2msfsthlnPelTxpMSrCdFclvpXeGnzJw/8/RmzIMcQZGcZ+5zYMQ4eMssmAdZMPazoEVZ0PYyoEcygKIsGDEWUCxL0cM50EI50MJ5UMJ5YPQjjhhx2bsVFFidj2BVGMFdCflrQYVVfghuYQxufghztg/zdA/sExnGkTLu7PC4vcPjTojH7T9gtCRH0Fl/ey85viuasG5M/dtL2w/6bWPqB/1BvvYf5Bv/run484oG/UMRt/eKWA4Lj//CoI9Zop50tmvRhJmgwKKswbKswVq0KIsSot2tGrCqmeDkhzA8buDPhyJu7QpYDvGPrbCAWyEet8I8pkIl2dkuygiWFQ1WogXLik7Fq5oBs6IKE24ARqoLV0cXuBut4F6sgrvRMg5EgTBY9vJmtDhHtNOeFyx0Kzpd9SA5/l1j6i+rOpW7VR3mRUTXWZk+qEmZntzeLb4uDLKzK2BGfT45WDcTVJiXED0tIJAF4nXd8t2aQcV27gqUhIQHBzXcjZT/EnZ/C38BP7Aq4hEXNlkAAAAASUVORK5CYII='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/4dda2fb1d8bff3c7047a5ceea442f81a/fcda8/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png\"\n        srcset=\"/static/4dda2fb1d8bff3c7047a5ceea442f81a/12f09/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png 148w,\n/static/4dda2fb1d8bff3c7047a5ceea442f81a/e4a3f/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png 295w,\n/static/4dda2fb1d8bff3c7047a5ceea442f81a/fcda8/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png 590w,\n/static/4dda2fb1d8bff3c7047a5ceea442f81a/efc66/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png 885w,\n/static/4dda2fb1d8bff3c7047a5ceea442f81a/c83ae/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png 1180w,\n/static/4dda2fb1d8bff3c7047a5ceea442f81a/12e1b/1669896622882-3f389903-1c0e-428a-9cc8-28b0bea08556.png 1607w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>又比如，如果将 username 映射配置错误的话，就会得到 User returned from LDAP has null username!错误。<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/44e16ec4130bcc5b604914df1dcd3624/0ffd9/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABKklEQVR42m3R207CQBSF4b7/E6kxIXKjBCVy8EJooUzbmZZDOdihdDrT33AwGONOvqy1b/bN9qqq5nA0lFXN8Y/K1JSVwdQW6xqsc1fN/6zDM1WFqUrA/tJAc+LAuct+np90V81NY7HW4i23ms6npBcs6M+X9MMV7yKlO415CxWv0+SsGyR0r/k6XvE2WdPzc3pBfu6Dac7XocZTueaxn/D0kdEaSVoDycNowv3Q534YcDe4ZOtT0PYT2n5Mx9/zMjnZ8Tze0ZlsGUvN/nRQ64JEzskWkliGSCXIFimJVIRzgYgiEinJNxuK4oui0JSHEmcdrrY4e1GbmuPR4O2LgpkQxEoxiwRhLIhkSjhXBLOYaZggogyVrlFZTrrIWeV7tjuNPhh0eXN65Dc9O8PvTKGTlAAAAABJRU5ErkJggg=='); background-size: cover; display: block; transition: opacity 0.5s 0.5s; pointer-events: none;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/44e16ec4130bcc5b604914df1dcd3624/fcda8/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png\"\n        srcset=\"/static/44e16ec4130bcc5b604914df1dcd3624/12f09/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png 148w,\n/static/44e16ec4130bcc5b604914df1dcd3624/e4a3f/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png 295w,\n/static/44e16ec4130bcc5b604914df1dcd3624/fcda8/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png 590w,\n/static/44e16ec4130bcc5b604914df1dcd3624/efc66/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png 885w,\n/static/44e16ec4130bcc5b604914df1dcd3624/c83ae/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png 1180w,\n/static/44e16ec4130bcc5b604914df1dcd3624/0ffd9/1669900669419-bd39a5ba-e3a3-4db8-9edd-ff52dbd666c0.png 2558w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;opacity:0;transition:opacity 0.5s;color:inherit;box-shadow:inset 0px 0px 0px 400px white;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>如果有其他问题，建议结合使用 ldapsearch去逐一排查。</p>","pages":[],"site":{"siteMetadata":{"title":"Jeff Tian","author":"@zizhujy","description":"A wild full stack developer","palette":"yellow","header":{"title":"Jeff Tian","tagline":"A wild developer","logo_img":"https://images.ctfassets.net/qixg1o8tujmf/7z1ua3nTOC5B7DwwzAki8I/4e1a05f8db770c285a492eeb1eaa398f/imageedit_3_2509022194.png","background_img":"https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg","has_nav":true,"nav_links":[{"label":"Home","url":"/","style":"link","type":"action"},{"label":"About","url":"/about","style":"link","type":"action"},{"label":"关于","url":"https://ggyy.pa-pa.me/about","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"},{"label":"Contact","url":"/contact","style":"link","type":"action"},{"label":"Support Me","url":"/support-me","style":"link","type":"action"},{"label":"叽叽歪歪","url":"https://ggyy.pa-pa.me/","style":"link","icon_class":"lorem-ipsum","new_window":true,"type":"action"}],"has_social":true,"social_links":[{"label":"Twitter","url":"https://twitter.com/zizhujy","style":"icon","icon_class":"fa-twitter","new_window":true,"type":"action"},{"label":"Instagram","url":"https://www.instagram.com/jefftian5","style":"icon","icon_class":"fa-instagram","new_window":true,"type":"action"},{"label":"GitHub","url":"https://github.com/jeff-tian","style":"icon","icon_class":"fa-github","new_window":true,"type":"action"},{"label":"LinkedIn","url":"https://www.linkedin.com/jeff~tian","style":"icon","icon_class":"fa-linkedin","new_window":true,"type":"action"},{"label":"DEV","url":"https://dev.to/jefftian","style":"icon","icon_class":"fa-dev","new_window":true,"type":"action"},{"label":"知乎","url":"https://www.zhihu.com/people/jefftian","style":"icon","icon_class":"fa-zhihu","new_window":true,"type":"action"}],"type":"header"},"footer":{"content":"&copy; All rights reserved.","links":[{"label":"Made with Stackbit.","url":"https://www.stackbit.com","style":"link","new_window":true,"type":"action"},{"label":"紫竹叽歪","url":"https://zizhujy.apphb.com","style":"link","icon_class":"http://zizhujy.apphb.com/Content/Images/logo.png","new_window":true,"type":"action"}],"type":"footer"}},"pathPrefix":"","data":{"data":{"author":{"name":"Jeff Tian","avatar":"https://res.cloudinary.com/practicaldev/image/fetch/s--a5qDZLv3--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/318420/3bfd2d99-430c-4049-8dd5-e2adc961e1e0.png"},"social":{"devto":{"username":"jefftian"},"twitter":{"username":"zizhujy"},"github":{"username":"Jeff-Tian"}}}}}}},"staticQueryHashes":[],"slicesMap":{}}